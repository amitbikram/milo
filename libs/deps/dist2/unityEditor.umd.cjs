(function(zn,gs){typeof exports=="object"&&typeof module<"u"?gs(exports):typeof define=="function"&&define.amd?define(["exports"],gs):(zn=typeof globalThis<"u"?globalThis:zn||self,gs(zn.UnityEditor={}))})(this,function(zn){"use strict";var S8=Object.defineProperty;var x8=(zn,gs,Wa)=>gs in zn?S8(zn,gs,{enumerable:!0,configurable:!0,writable:!0,value:Wa}):zn[gs]=Wa;var er=(zn,gs,Wa)=>(x8(zn,typeof gs!="symbol"?gs+"":gs,Wa),Wa);function gs(r,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in r)){const c=Object.getOwnPropertyDescriptor(i,s);c&&Object.defineProperty(r,s,c.get?c:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}class Wa{static init(){return new Wa}constructor(){this.fabric=null,this.loadFrabric()}async loadFrabric(){this.fabric=await Promise.resolve().then(()=>Sv)}async applyBrightnessFilter(t,e){t.getObjects("image").forEach(i=>{i.filters=[new this.fabric.default.fabric.Image.filters.Brightness({brightness:e})],i.applyFilters()}),t.renderAll()}async applySaturationFilter(t,e){t.getObjects("image").forEach(i=>{i.filters=[new this.fabric.default.fabric.Image.filters.Saturation({saturation:e})],i.applyFilters()}),t.renderAll()}async applyHueFilter(t,e){t.getObjects("image").forEach(i=>{i.filters=[new this.fabric.default.fabric.Image.filters.HueRotation({rotation:e})],i.applyFilters()}),t.renderAll()}async applyConstrastFilter(t,e){t.getObjects("image").forEach(i=>{i.filters=[new this.fabric.default.fabric.Image.filters.Contrast({contrast:e})],i.applyFilters()}),t.renderAll()}}const aS=`<div class="menu">
  <div class="hue-sat-title">
    <div class="hue-sat-title-icon">
      <div class="svgicon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          version="1.1"
          id="Layer_1"
          x="0px"
          y="0px"
          height="8"
          viewBox="0 0 122.88 66.91"
          style="enable-background: new 0 0 122.88 66.91"
          xml:space="preserve"
        >
          <g>
            <path
              d="M11.68,1.95C8.95-0.7,4.6-0.64,1.95,2.08c-2.65,2.72-2.59,7.08,0.13,9.73l54.79,53.13l4.8-4.93l-4.8,4.95 c2.74,2.65,7.1,2.58,9.75-0.15c0.08-0.08,0.15-0.16,0.22-0.24l53.95-52.76c2.73-2.65,2.79-7.01,0.14-9.73 c-2.65-2.72-7.01-2.79-9.73-0.13L61.65,50.41L11.68,1.95L11.68,1.95z"
            ></path>
          </g>
        </svg>
      </div>
      <div>Edit Hue/Sat</div>
    </div>
    <div class="slider-svg">
      <svg
        width="18"
        height="18"
        viewBox="0 0 27 27"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M3.14059 9.43079H6.57362C7.01183 11.2706 8.65925 12.6468 10.631 12.6468C12.6028 12.6468 14.2502 11.2706 14.6884 9.43079H24.3663C24.899 9.43079 25.3311 8.99863 25.3311 8.46598C25.3311 7.93333 24.899 7.50118 24.3663 7.50118H14.6884C14.2502 5.66138 12.6028 4.28516 10.631 4.28516C8.65925 4.28516 7.01181 5.66138 6.57362 7.50118H3.14059C2.60794 7.50118 2.17578 7.93333 2.17578 8.46598C2.17578 8.99863 2.60794 9.43079 3.14059 9.43079ZM10.631 6.21477C11.8722 6.21477 12.8822 7.2248 12.8822 8.46598C12.8822 9.70716 11.8722 10.7172 10.631 10.7172C9.38984 10.7172 8.3798 9.70716 8.3798 8.46598C8.3798 7.2248 9.38984 6.21477 10.631 6.21477Z"
          fill="#292929"
        ></path>
        <path
          d="M24.3663 17.7922H21.1205C20.6823 15.9524 19.0348 14.5762 17.0631 14.5762C15.0913 14.5762 13.4439 15.9524 13.0057 17.7922H3.14059C2.60794 17.7922 2.17578 18.2243 2.17578 18.757C2.17578 19.2896 2.60794 19.7218 3.14059 19.7218H13.0057C13.4439 21.5616 15.0913 22.9378 17.0631 22.9378C19.0348 22.9378 20.6823 21.5616 21.1205 19.7218H24.3663C24.899 19.7218 25.3311 19.2896 25.3311 18.757C25.3311 18.2243 24.899 17.7922 24.3663 17.7922ZM17.0631 21.0082C15.8219 21.0082 14.8118 19.9982 14.8118 18.757C14.8118 17.5158 15.8219 16.5058 17.0631 16.5058C18.3042 16.5058 19.3143 17.5158 19.3143 18.757C19.3143 19.9982 18.3042 21.0082 17.0631 21.0082Z"
          fill="#292929"
        ></path>
      </svg>
    </div>
  </div>
  <label for="hue">Hue</label>
  <div class="sliderContainer hue">
    <input
      id="hue-value"
      type="range"
      min="-2"
      max="2"
      class="options hue-input"
      value="0"
      step="0.002"
    />
  </div>
  <label for="saturation">Saturation</label>
  <div class="sliderContainer saturation">
    <input
      type="range"
      min="-1"
      max="1"
      id="saturation-value"
      class="options saturation-input"
      value="0"
      step="0.003921"
    />
  </div>
  <label for="saturation">Contrast</label>
  <div class="sliderContainer saturation">
    <input
      id="contrast-value"
      type="range"
      min="-1"
      max="1"
      class="options saturation-input"
      value="0"
      step="0.003921"
    />
  </div>
  <label for="saturation">Brightness</label>
  <div class="sliderContainer saturation">
    <input
      id="brightness-value"
      type="range"
      min="-1"
      max="1"
      class="options saturation-input"
      value="0.1"
      step="0.003921"
    />
  </div>
</div>`,AS=`<div class="menu">
<div id="placeholder"></div>
<div class="debug" style="display: flex">
    <img style="width:100px" id="previewImage" class="preview-image" />
    <img style="width:100px" id="previewMaskImage" class="preview-image" />
</div></div>`,oS=`<div class="menu">
  <div class="hue-sat-title">
    <div class="hue-sat-title-icon">
      <div class="svgicon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          version="1.1"
          id="Layer_1"
          x="0px"
          y="0px"
          height="8"
          viewBox="0 0 122.88 66.91"
          style="enable-background: new 0 0 122.88 66.91"
          xml:space="preserve"
        >
          <g>
            <path
              d="M11.68,1.95C8.95-0.7,4.6-0.64,1.95,2.08c-2.65,2.72-2.59,7.08,0.13,9.73l54.79,53.13l4.8-4.93l-4.8,4.95 c2.74,2.65,7.1,2.58,9.75-0.15c0.08-0.08,0.15-0.16,0.22-0.24l53.95-52.76c2.73-2.65,2.79-7.01,0.14-9.73 c-2.65-2.72-7.01-2.79-9.73-0.13L61.65,50.41L11.68,1.95L11.68,1.95z"
            ></path>
          </g>
        </svg>
      </div>
      <div>Change Background</div>
    </div>
    <div class="slider-svg">
      <svg
        width="18"
        height="18"
        viewBox="0 0 27 26"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g id="Frame" clip-path="url(#clip0_1530_17792)">
          <path
            id="iconPrimary"
            d="M19.5428 9.72746C19.5428 10.7932 18.6789 11.6571 17.6132 11.6571C16.5475 11.6571 15.6836 10.7932 15.6836 9.72746C15.6836 8.66176 16.5475 7.79785 17.6132 7.79785C18.6789 7.79785 19.5428 8.66176 19.5428 9.72746Z"
            fill="#292929"
          />
          <path
            id="iconPrimary_2"
            d="M20.1873 13.5615C16.9902 13.5615 14.3984 16.1533 14.3984 19.3504C14.3984 22.5475 16.9902 25.1392 20.1873 25.1392C23.3844 25.1392 25.9761 22.5475 25.9761 19.3504C25.9761 16.1533 23.3844 13.5615 20.1873 13.5615ZM23.4033 20.1544H20.9913V22.5664C20.9913 23.0098 20.6307 23.3704 20.1873 23.3704C19.7438 23.3704 19.3833 23.0098 19.3833 22.5664V20.1544H16.9713C16.5278 20.1544 16.1672 19.7938 16.1672 19.3504C16.1672 18.9069 16.5278 18.5464 16.9713 18.5464H19.3833V16.1343C19.3833 15.6909 19.7438 15.3303 20.1873 15.3303C20.6307 15.3303 20.9913 15.6909 20.9913 16.1343V18.5464H23.4033C23.8468 18.5464 24.2073 18.9069 24.2073 19.3504C24.2073 19.7938 23.8468 20.1544 23.4033 20.1544Z"
            fill="#292929"
          />
          <path
            id="iconPrimary_3"
            d="M22.4367 3.91408H5.0702C3.47476 3.91408 2.17578 5.21305 2.17578 6.80849V19.0294C2.17578 20.6248 3.47476 21.9238 5.0702 21.9238H11.6178C12.1505 21.9238 12.5826 21.4916 12.5826 20.959C12.5826 20.4263 12.1505 19.9942 11.6178 19.9942H5.0702C4.5388 19.9942 4.10539 19.5608 4.10539 19.0294V17.5256L7.92568 13.7066C8.30256 13.3297 8.9131 13.3297 9.28998 13.7066L11.7535 16.1701C12.1304 16.547 12.7409 16.547 13.1178 16.1701C13.4947 15.7932 13.4947 15.1827 13.1178 14.8058L10.6543 12.3423C9.52616 11.2142 7.68951 11.2142 6.56139 12.3423L4.10541 14.7976V6.80848C4.10541 6.27708 4.53881 5.84367 5.07021 5.84367H22.4367C22.9681 5.84367 23.4015 6.27708 23.4015 6.80848V11.7569C23.4015 12.2895 23.8337 12.7217 24.3663 12.7217C24.899 12.7217 25.3311 12.2895 25.3311 11.7569V6.80848C25.3311 5.21304 24.0321 3.91408 22.4367 3.91408Z"
            fill="#292929"
          />
        </g>
        <defs>
          <clipPath id="clip0_1530_17792">
            <rect
              width="25.7282"
              height="25.7282"
              fill="white"
              transform="translate(0.890625 0.0546875)"
            />
          </clipPath>
        </defs>
      </svg>
    </div>
  </div>
  <div class="bg-tiles">
    <button><img height="90px" src="./preview-1.png" /></button>
    <button><img height="90px" src="./preview-2.png" /></button>
  </div>
</div>`;function Hd(r){return window.getComputedStyle(r).getPropertyValue("position")==="static"}function lS(r,t,e){const i=document.createElement("canvas");return i.id=e,i.height=r,i.width=t,i}class Fs{constructor(){er(this,"forward",t=>{this.listeners.length>0&&this.listeners.forEach(e=>e(t))});this.listeners=[]}subscribe(t){this.listeners.push(t)}unsubscribe(t){const e=this.listeners.indexOf(t);if(e>=0)this.listeners.splice(e,1);else throw new Error("Unknown listener")}count(){return this.listeners.length}}class cS{constructor(t,e){this.canvas=t,this.configuration=e,this.onModeChanged=new Fs,this.onLayerOrderChanged=new Fs,this.onPropertiesChanged=new Fs}add(t){this.canvas.add(t),this.canvas.requestRenderAll()}selectObject(t){this.canvas.discardActiveObject(),this.canvas.setActiveObject(t),this.canvas.renderAll()}forEachObject(t){const e=this.canvas.getObjects();for(let i=0;i<e.length;i++)t(e[i],i,i+1===e.length)}disableSelection(){this.canvas.selection=!1;const t=new Map;return this.forEachObject(e=>{t.set(e,e.selectable),e.selectable&&e.set("selectable",!1)}),new hS(t)}setMode(t){this.mode=t,this.onModeChanged.forward(t)}}class hS{constructor(t){this.map=t}revert(){this.map.forEach((t,e)=>e.set("selectable",t))}}class da{static attrs(t,e){Object.keys(e).forEach(i=>{const s=e[i];t.setAttribute(i,typeof s=="string"?s:s.toString())})}static element(t,e){const i=document.createElement(t);return e&&da.attrs(i,e),i}static div(t){return da.element("div",t)}}const vv="http://www.w3.org/2000/svg";class Ei{static createSvg(t,e){const i=document.createElementNS(vv,"svg");i.setAttribute("viewBox","0 -960 960 960"),i.setAttribute("height","18"),i.classList.add(e);const s=document.createElementNS(vv,"path");return s.setAttribute("d",t),i.appendChild(s),i}}er(Ei,"cursor","m320-410 79-110h170L320-716v306ZM551-80 406-392 240-160v-720l560 440H516l144 309-109 51ZM399-520Z"),er(Ei,"rect","M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0 0v-560 560Z"),er(Ei,"eye","M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z"),er(Ei,"eyeOff","m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z"),er(Ei,"locked","M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Zm0-80h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM360-640h240v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80ZM240-160v-400 400Z"),er(Ei,"close","m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"),er(Ei,"text","M420-160v-520H200v-120h560v120H540v520H420Z"),er(Ei,"image","M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm40-80h480L570-480 450-320l-90-120-120 160Zm-40 80v-560 560Z"),er(Ei,"brush","M240-120q-45 0-89-22t-71-58q26 0 53-20.5t27-59.5q0-50 35-85t85-35q50 0 85 35t35 85q0 66-47 113t-113 47Zm0-80q33 0 56.5-23.5T320-280q0-17-11.5-28.5T280-320q-17 0-28.5 11.5T240-280q0 23-5.5 42T220-202q5 2 10 2h10Zm230-160L360-470l358-358q11-11 27.5-11.5T774-828l54 54q12 12 12 28t-12 28L470-360Zm-190 80Z"),er(Ei,"erase","M690-240h190v80H610l80-80Zm-500 80-85-85q-23-23-23.5-57t22.5-58l440-456q23-24 56.5-24t56.5 23l199 199q23 23 23 57t-23 57L520-160H190Zm296-80 314-322-198-198-442 456 64 64h262Zm-6-240Z"),er(Ei,"arrowUp","M440-160v-487L216-423l-56-57 320-320 320 320-56 57-224-224v487h-80Z"),er(Ei,"arrowDown","M440-800v487L216-537l-56 57 320 320 320-320-56-57-224 224v-487h-80Z"),er(Ei,"menu","M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z");function pu(r,t,e){const i=new Fs,s=da.element("span",{class:`icon-button icon-button-${e}`,title:t}),c=Ei.createSvg(r,"icon-button-icon"),f=c.querySelector("path");return s.appendChild(c),s.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),i.forward()},!1),{view:s,onClicked:i,setIcon(a){f.setAttribute("d",a)}}}class Gd{constructor(t,e,i,s,c){er(this,"onItemClicked",t=>{t.preventDefault(),t.stopPropagation(),this.state.selectObject(this.object)});er(this,"onVisibilityClicked",()=>{this.object.selectable&&this.object.visible?(this.object.visible=!0,this.object.selectable=!1,this.state.canvas.getActiveObject()===this.object&&this.state.canvas.discardActiveObject()):this.object.visible&&!this.object.selectable?(this.object.visible=!1,this.object.selectable=!0):(this.object.visible=!0,this.object.selectable=!0),this.visibilityButton.setIcon(yv(this.object)),this.state.canvas.requestRenderAll(),this.state.onPropertiesChanged.forward(this.object)});er(this,"onMoveUpClicked",()=>{this.state.canvas.bringForward(this.object),this.state.onLayerOrderChanged.forward()});er(this,"onMoveDownClicked",()=>{this.state.canvas.sendBackwards(this.object),this.state.onLayerOrderChanged.forward()});er(this,"onDeleteClicked",()=>{this.state.canvas.remove(this.object)});er(this,"onLabelChanged",()=>{this.object.set("label",this.labelInput.value),this.state.onPropertiesChanged.forward(this.object)});this.isSelected=!1,this.view=t,this.state=e,this.object=i,this.labelInput=s,this.visibilityButton=c}static create(t,e,i,s){const c=document.createElement("div");c.className="layers-panel-item";const f=pu(yv(e),"Toggle visibility","sm"),a=pu(Ei.close,"Delete layer","sm");let n,l;const h=da.div({class:"layers-panel-item-label"}),o=da.element("div",{class:"layers-panel-item-label-input"});o.innerHTML=e.get("label")??e.type,h.appendChild(o),c.appendChild(f.view),c.appendChild(h),n=pu(Ei.arrowUp,"Move layer up","sm"),c.appendChild(n.view),l=pu(Ei.arrowDown,"Move layer down","sm"),c.appendChild(l.view),c.appendChild(a.view);const u=new Gd(c,t,e,o,f);return c.addEventListener("click",u.onItemClicked,!1),o.addEventListener("input",u.onLabelChanged,!1),f.onClicked.subscribe(u.onVisibilityClicked),n==null||n.onClicked.subscribe(u.onMoveUpClicked),l==null||l.onClicked.subscribe(u.onMoveDownClicked),a.onClicked.subscribe(u.onDeleteClicked),u}setIsSelected(t){this.isSelected=t,this.labelInput.readOnly=!t,this.view.classList.toggle("selected",t)}}function yv(r){if(!r.selectable){if(!r.visible)throw new Error("Unsupported state");return Ei.locked}return r.visible?Ei.eye:Ei.eyeOff}function uS(r,t){const e=da.div({class:"menu"}),i=da.div({class:"hue-sat-title"}),s=da.div({class:"hue-sat-title-icon"});s.innerText=r,i.appendChild(s);const c=da.div({class:"panel-body"});return c.className="panel-body",c.appendChild(t),e.appendChild(i),e.appendChild(c),{view:e}}class Vd{constructor(t,e,i){er(this,"reloadList",()=>{for(;this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.state.forEachObject((t,e,i)=>{const s=e===0,c=Gd.create(this.state,t,s,i);this.layers.push(c),this.list.firstChild?this.list.insertBefore(c.view,this.list.firstChild):this.list.appendChild(c.view)}),this.reloadSelection()});er(this,"reloadSelection",()=>{const t=this.state.canvas.getActiveObjects();for(const e of this.layers)e.setIsSelected(t.includes(e.object))});this.view=t,this.state=e,this.list=i,this.layers=[]}static create(t){const e=document.createElement("div");e.className="layers-list";const i=uS("Layers",e),s=new Vd(i.view,t,e);return t.canvas.on("object:added",s.reloadList),t.canvas.on("object:removed",s.reloadList),t.canvas.on("selection:cleared",s.reloadSelection),t.canvas.on("selection:created",s.reloadSelection),t.canvas.on("selection:updated",s.reloadSelection),t.onLayerOrderChanged.subscribe(s.reloadList),s.reloadList(),s}}class fS{constructor(t){er(this,"enableBG",()=>{this.menuBar.querySelector(".remove-bg").classList.add("hide"),this.menuBar.querySelector(".change-bg-wrapper").classList.remove("hide")});er(this,"enableConnector",()=>{this.menuBar.querySelector(".app-connector").classList.remove("hide")});er(this,"loadBGImages",t=>{const e=this.workflow[t];if(e.experience==="mock"){let i="";for(let s=0;s<e.options.length;s++)i+=`<div><img height="68" src="${e.options[s]}" /></div>`;return i}return""});er(this,"removebg",t=>{this.menuBar.insertAdjacentHTML("beforeend",`<button class="remove-bg">
            <img src="https://main--milo--adobecom.hlx.page/drafts/sarangi/pepc/assets/removebg.svg">
            <span>Remove Background</span>
        <div>`),this.menuBar.querySelector(".remove-bg").addEventListener("click",()=>{this.removebgEvent.forward()})});er(this,"changebg",t=>{let e="";this.workflow[t].noInitial===!0&&(e="hide");const s=`<div class="button-wrapper change-bg-wrapper ${e}"><button class="change-bg">
            <img src="https://main--milo--adobecom.hlx.page/drafts/sarangi/pepc/assets/changebg.svg">
            <span>Change Background</span>
        </button>
        <div class="button-panel changebg-panel hide">
            ${this.loadBGImages(t)}
        </div></div>`;this.menuBar.insertAdjacentHTML("beforeend",s),this.menuBar.querySelector(".button-panel").addEventListener("click",c=>{c.target.tagName==="IMG"&&this.changebgEvent.forward(c.target.src)}),this.menuBar.querySelector(".change-bg").addEventListener("click",()=>{this.menuBar.querySelector(".changebg-panel").classList.toggle("hide")})});er(this,"upload",t=>{this.menuBar.insertAdjacentHTML("beforeend",`<button class="upload">
            <img src="https://main--milo--adobecom.hlx.page/drafts/sarangi/pepc/assets/upload.svg">
            <span>Upload image</span>
        </button>`),this.menuBar.querySelector(".upload").addEventListener("click",()=>{this.uploadEvent.forward()})});er(this,"connector",t=>{let e="";this.workflow[t].noInitial===!0&&(e="hide");const s=`<button class="app-connector ${e}">
            <span>Contine in app</span>
            <img height="33" src="https://main--milo--adobecom.hlx.page/drafts/sarangi/pepc/assets/ps.svg">
        </button>`;this.menuBar.insertAdjacentHTML("beforeend",s)});er(this,"filters",t=>{this.menuBar.insertAdjacentHTML("beforeend",`<div class="button-wrapper"><button class="image-filter">
            <img src="https://main--milo--adobecom.hlx.page/drafts/sarangi/pepc/assets/huesat.svg">
            <span>Edit Hue/Sat</span>
        </button>
        <div class="button-panel image-filter-panel hide">
        <label for="hue">Hue</label>
        <div class="sliderContainer hue">
            <input
            id="hue-value"
            type="range"
            min="-2"
            max="2"
            class="options hue-input"
            value="0"
            step="0.002"
            />
        </div>
        <label for="saturation">Saturation</label>
        <div class="sliderContainer saturation">
            <input
            type="range"
            min="-1"
            max="1"
            id="saturation-value"
            class="options saturation-input"
            value="0"
            step="0.003921"
            />
        </div>
        </div></div>`),this.bindFilterEvents(),this.menuBar.querySelector(".image-filter").addEventListener("click",()=>{this.menuBar.querySelector(".image-filter-panel").classList.toggle("hide")})});this.workflow=t,this.menuBar=document.createElement("div"),this.menuBar.classList.add("menu-bar"),this.removebgEvent=new Fs,this.changebgEvent=new Fs,this.uploadEvent=new Fs,this.enableChangeBG=new Fs,this.canvasLoaded=new Fs,this.hueFilter=new Fs,this.satFilter=new Fs,this.enableChangeBG.subscribe(this.enableBG),this.canvasLoaded.subscribe(this.enableConnector)}initControls(){for(let t=0;t<this.workflow.length;t++){const e=this.workflow[t].type;this[e](t)}return this.menuBar}bindFilterEvents(){this.menuBar.querySelector("#hue-value").addEventListener("change",t=>{this.hueFilter.forward(t.target.value)}),this.menuBar.querySelector("#saturation-value").addEventListener("change",t=>{const e=parseFloat(t.target.value);this.satFilter.forward(e)})}}function dS(){return new Promise(r=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",()=>{if(t.files&&t.files.length>0){const e=t.files[0],i=new FileReader;i.onload=()=>{r(i.result)},i.readAsDataURL(e)}else r(null)}),t.click()})}const gS={editorMode:"mount"};function wv(r,t){const e=document.createElement("canvas");e.width=r,e.height=t;const i=e.getContext("2d");return i.fillStyle="#ffffff00",i.fillRect(0,0,r,t),[e,i]}function pS(r,t,e,i){const s=e.getImageData(0,0,r,t),c=i.getImageData(0,0,r,t);for(let f=0;f<s.data.length;f+=4)s.data[f+3]=255-c.data[f+3];e.putImageData(s,0,0)}class mS{constructor(t,e={}){er(this,"onAnyChange",()=>{this.onChanged.forward()});er(this,"removebg",async()=>{await this.ondemandLoad();const t=this.config.workflow.find(e=>e.type==="removebg");if(t.experience==="mock"){const e=t.options[0];fabric.Image.fromURL(e,i=>{const s={width:i.width,height:i.height,selectable:!1},c=Math.min(this.width/i.width,this.height/i.height);s.left=(this.width-i.width*c)/2,s.top=(this.height-i.height*c)/2,s.scaleX=c,s.scaleY=c,i.set(s),this.canvas.add(i),t.next==="changebg"&&this.controlManager.enableChangeBG.forward()})}});er(this,"changebg",t=>{fabric.Image.fromURL(t,e=>{const i={width:e.width,height:e.height,selectable:!1},s=Math.min(this.width/e.width,this.height/e.height);i.left=(this.width-e.width*s)/2,i.top=(this.height-e.height*s)/2,i.scaleX=s,i.scaleY=s,e.set(i),this.bgImage&&this.canvas.remove(this.bgImage),this.bgImage=e,this.canvas.sendBackwards(e)})});er(this,"changeHueFilter",t=>{this.filters.applyHueFilter(this.canvas,t)});er(this,"changeSatFilter",t=>{this.filters.applySaturationFilter(this.canvas,t)});er(this,"upload",async()=>{await this.ondemandLoad();const t=await dS();fabric.Image.fromURL(t,e=>{const i={width:e.width,height:e.height,selectable:!1},s=Math.min(this.width/e.width,this.height/e.height);i.left=(this.width-e.width*s)/2,i.top=(this.height-e.height*s)/2,i.scaleX=s,i.scaleY=s,e.set(i);const c=this.canvas.getObjects();for(let f=0;f<c.length;f++)this.canvas.remove(c[f]);this.canvas.add(e)})});er(this,"enableMask",async()=>{this.placeholder=document.getElementById("placeholder"),this.previewImage=document.getElementById("previewImage"),this.previewMaskImage=document.getElementById("previewMaskImage"),this.canvas.isDrawingMode=!0,this.canvas.freeDrawingBrush.color="ff0000",this.canvas.freeDrawingBrush.width=20,this.onChanged.subscribe(this.reloadPreview),this.reloadPreview()});er(this,"ondemandLoad",async()=>{this.canvasLoaded||(this.fabric=await Promise.resolve().then(()=>Sv),this.filters=Wa.init(),this.loadCanvas(),this.state=new cS(this.canvas,this.config),this.controlManager.canvasLoaded.forward())});er(this,"reloadPreview",async()=>{const t=this.canvas.getObjects(),e=t.find(a=>a instanceof this.fabric.default.fabric.Image);if(!e||!e.visible){this.previewImage.src="",this.previewMaskImage.src="";return}const[i,s]=wv(this.canvas.getWidth(),this.canvas.getHeight());t.forEach(a=>{a!==e&&a.render(s)});const[c,f]=wv(this.canvas.getWidth(),this.canvas.getHeight());e.render(f),pS(this.canvas.getWidth(),this.canvas.getHeight(),f,s),this.previewImage.src=c.toDataURL(),this.previewMaskImage.src=i.toDataURL()});this.element=t,this.img=null,this.canvasLoaded=!1,this.canvas=null,this.container=this.checkMountType(t),this.config={...gS,...e},this.onChanged=new Fs,this.height=this.container.clientHeight,this.width=this.container.clientWidth,this.$=i=>this.container.querySelector(i),this.filters=null,this.controlManager=new fS(this.config.workflow),this.loadEditor()}async loadEditor(){this.loadControls()}checkMountType(t){if(t.tagName==="IMG"){const e=t.clientHeight,i=t.clientWidth,s=document.createElement("div");return s.style.height=`${e}px`,s.style.width=`${i}px`,Hd(t)&&(s.style.position="relative"),t.parentNode.insertBefore(s,t),s.appendChild(t),this.img=img,s}else if(t.tagName==="PICTURE"){const e=t.querySelector("img"),i=e.clientHeight,s=e.clientWidth,c=document.createElement("div");return c.style.height=`${i}px`,c.style.width=`${s}px`,c.classList.add("editor-wrapper"),Hd(t)&&(c.style.position="relative"),t.parentNode.insertBefore(c,t),c.appendChild(t),this.img=e,c}else return Hd(t)&&(t.style.position="relative"),this.img=t.querySelector("img"),t}loadRightMenu(){const t=document.createElement("div");t.classList.add("menu-right"),t.classList.add("sliderTray"),this.container.appendChild(t),this.$(".sliderTray").insertAdjacentHTML("beforeend",oS),this.$(".sliderTray").insertAdjacentHTML("beforeend",aS),this.$(".sliderTray").insertAdjacentHTML("beforeend",AS)}loadControls(){this.container.appendChild(this.controlManager.initControls()),this.controlManager.removebgEvent.subscribe(this.removebg),this.controlManager.uploadEvent.subscribe(this.upload),this.controlManager.changebgEvent.subscribe(this.changebg),this.controlManager.hueFilter.subscribe(this.changeHueFilter),this.controlManager.satFilter.subscribe(this.changeSatFilter)}loadCanvas(){const t=document.createElement("div");t.classList.add("canvas-placeholder"),this.container.appendChild(t);const e=lS(this.height,this.width,"canvas");this.$(".canvas-placeholder").appendChild(e),window.canvas=this.canvas=new fabric.Canvas("canvas",{isDrawingMode:!1,height:this.height,width:this.width,backgroundColor:"#d3d3d3"}),this.canvasLoaded=!0,fabric.Object.prototype.transparentCorners=!1,this.img.style.visibility="hidden"}initLayerPanel(){const t=Vd.create(this.state);this.$(".sliderTray").appendChild(t.view),this.canvas.on("object:added",this.onAnyChange),this.canvas.on("object:modified",this.onAnyChange),this.canvas.on("object:moving",this.onAnyChange),this.canvas.on("object:removed",this.onAnyChange),this.canvas.on("object:resizing",this.onAnyChange),this.canvas.on("object:rotating",this.onAnyChange),this.canvas.on("object:scaling",this.onAnyChange),this.canvas.on("object:skewing",this.onAnyChange),this.canvas.on("text:changed",this.onAnyChange),this.canvas.on("text:editing:exited",this.onAnyChange),this.canvas.on("selection:cleared",this.onAnyChange),this.canvas.on("selection:created",this.onAnyChange),this.canvas.on("selection:updated",this.onAnyChange),this.state.onLayerOrderChanged.subscribe(this.onAnyChange),this.state.onPropertiesChanged.subscribe(this.onAnyChange)}bindFilterEvents(){this.$("#brightness-value").addEventListener("change",t=>{const e=parseFloat(t.target.value);this.filters.applyBrightnessFilter(this.canvas,e)}),this.$("#hue-value").addEventListener("change",t=>{this.filters.applyHueFilter(this.canvas,t.target.value)}),this.$("#contrast-value").addEventListener("change",t=>{const e=parseFloat(t.target.value);this.filters.applyConstrastFilter(this.canvas,e)}),this.$("#saturation-value").addEventListener("change",t=>{const e=parseFloat(t.target.value);this.filters.applySaturationFilter(this.canvas,e)})}}const vS=`<div class="menu-bar">
<button id="vector-select">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="28"
    height="28"
    viewBox="0 0 18 18"
    fill="currentColor"
  >
    <defs></defs>
    <g id="icons">
      <path
        class="fill"
        d="M4.252,1.027A.25.25,0,0,0,4,1.277V17.668a.25.25,0,0,0,.252.25.246.246,0,0,0,.175-.074L9.262,13h6.5a.25.25,0,0,0,.176-.427L4.427,1.1A.246.246,0,0,0,4.252,1.027Z"
      ></path>
    </g>
  </svg>
  <span>Select</span>
</button>
<button id="vector-rect">
  <svg
    id="icons"
    xmlns="http://www.w3.org/2000/svg"
    width="28"
    height="28"
    viewBox="0 0 18 18"
    fill="currentColor"
  >
    <defs></defs>
    <path
      class="fill"
      d="M15.5,2H2.5a.5.5,0,0,0-.5.5v13a.5.5,0,0,0,.5.5h13a.5.5,0,0,0,.5-.5V2.5A.5.5,0,0,0,15.5,2ZM15,15H3V3H15Z"
    ></path>
  </svg>
  <span>Shape</span>
</button>
<button id="vector-line">
  <svg
    version="1.1"
    id="icons"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    x="0px"
    y="0px"
    width="28"
    height="28"
    viewBox="0 0 18 18"
    style="enable-background: new 0 0 18 18"
    xml:space="preserve"
    fill="currentColor"
  >
    <path
      d="M16.3,2.4L2.8,15.9c-0.2,0.2-0.5,0.2-0.7,0h0c-0.2-0.2-0.2-0.5,0-0.7L15.6,1.7c0.2-0.2,0.5-0.2,0.7,0v0
      C16.4,1.9,16.4,2.2,16.3,2.4z"
    ></path>
  </svg>
  <span>Line</span>
</button>
<button id="vector-text">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="28"
    height="28"
    viewBox="0 0 18 18"
    fill="currentColor"
  >
    <defs></defs>
    <g id="icons">
      <path
        class="fill"
        d="M2.5,2a.5.5,0,0,0-.5.5v3a.5.5,0,0,0,.5.5h1A.5.5,0,0,0,4,5.5V4H8V14H6.5a.5.5,0,0,0-.5.5v1a.5.5,0,0,0,.5.5h5a.5.5,0,0,0,.5-.5v-1a.5.5,0,0,0-.5-.5H10V4h4V5.5a.5.5,0,0,0,.5.5h1a.5.5,0,0,0,.5-.5v-3a.5.5,0,0,0-.5-.5Z"
      ></path>
    </g>
  </svg>
  <span>Text</span>
</button>
<button id="vector-path">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="28"
    height="28"
    viewBox="0 0 18 18"
    fill="currentColor"
  >
    <path
      fill-rule="evenodd"
      d="m16.89983,7.52029l-3.45841-3.45756c-.1714-.17135-.4493-.17135-.6207,0l-1.52748,1.52713c-.14462.14457-.15967.36147-.06039.52971l3.46007,3.46007.00326-.00712.0764.07544c.17145.17105.44905.17095.6203-.0004l1.50696-1.50666c.1714-.17135.1714-.44925,0-.6206Z"
    ></path>
    <path
      fill-rule="evenodd"
      d="m6.92068,2.32005c.33269-.17524.68216-.31977,1.04145-.4307,2.94697-.90985,5.92734-.18893,8.02091,1.78475.09822.09259.24999.09335.34544-.0021l.3539-.3539c.0996-.0996.09942-.26481-.00292-.36159C14.45378.85173,11.33661.00768,8.19695.78424c-.72384.17903-1.42239.46055-2.06871.8324C.7664,4.70142.07389,11.6544,4.03296,15.75c.00964.01215.23608.24621.23608.24621l3.35168-3.34319c-.00525-.03479-.01514-.06812-.01514-.10443,0-.45392.36804-.8219.8219-.8219s.82178.36798.82178.8219c0,.45386-.36792.82184-.82178.82184-.03955,0-.07593-.01025-.11365-.01648l-3.34802,3.34802.24358.24364c.11755.11758.29437.15273.44795.08906l6.53878-2.71073c.19102-.07919.34517-.22749.43168-.41531l1.49084-3.23663-3.79102-3.79095-3.23657,1.49072c-.18785.08652-.33618.24069-.41537.43175l-2.3815,5.74507c-1.16162-1.42273-1.79419-3.18695-1.79419-5.04858,0-2.97347,1.61129-5.70015,4.42068-7.17995Z"
    ></path>
  </svg>
  <span>Pen tool</span>
</button>
<button id="vector-fhpath">
  <svg
    id="icons"
    xmlns="http://www.w3.org/2000/svg"
    width="28"
    height="28"
    viewBox="0 0 18 18"
    fill="currentColor"
  >
    <defs></defs>
    <path
      class="fill"
      d="M4.909,10.481a2.392,2.392,0,0,0-1.66.636,6.448,6.448,0,0,0-1.34,2.391C1.253,16.258.05,15.558.05,16.171a.445.445,0,0,0,.331.408,11.833,11.833,0,0,0,2.773.343,6.233,6.233,0,0,0,3.619-.97,3.458,3.458,0,0,0,1.411-2.263A3.4,3.4,0,0,0,4.909,10.481Z"
    ></path>
    <path
      class="fill"
      d="M9.06,12.05c3.617-4.113,8.211-9.768,7.008-10.971S9.883,5.488,6.3,9.415A5.027,5.027,0,0,1,9.06,12.05Z"
    ></path>
    <path
      class="cls-1"
      d="M13.509,9.386a2.583,2.583,0,0,0-.809.141c-.521.652-1.1,1.353-1.76,2.125a2.482,2.482,0,0,0-.034.337,2.6,2.6,0,1,0,2.6-2.6Z"
    ></path>
    <path
      class="fill"
      d="M13.935,7.921q-.543.739-1.235,1.607a2.556,2.556,0,0,1,.809-.142,2.6,2.6,0,1,1-2.6,2.6,2.482,2.482,0,0,1,.034-.337c-.349.407-.714.829-1.1,1.272l-.237.269a4.091,4.091,0,1,0,4.336-5.272Z"
    ></path>
  </svg>
  <span>Brush</span>
</button>
<div class="upload-btn-wrapper">
  <button>
    <svg
      height="28"
      width="28"
      version="1.1"
      id="Capa_1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 184.69 184.69"
      xml:space="preserve"
      fill="#000000"
      stroke="#000000"
      stroke-width="1.47752"
    >
      <g id="SVGRepo_bgCarrier" stroke-width="0" />

      <g
        id="SVGRepo_tracerCarrier"
        stroke-linecap="round"
        stroke-linejoin="round"
      />

      <g id="SVGRepo_iconCarrier">
        <g>
          <g>
            <g>
              <path
                style="fill: #010002"
                d="M149.968,50.186c-8.017-14.308-23.796-22.515-40.717-19.813 C102.609,16.43,88.713,7.576,73.087,7.576c-22.117,0-40.112,17.994-40.112,40.115c0,0.913,0.036,1.854,0.118,2.834 C14.004,54.875,0,72.11,0,91.959c0,23.456,19.082,42.535,42.538,42.535h33.623v-7.025H42.538 c-19.583,0-35.509-15.929-35.509-35.509c0-17.526,13.084-32.621,30.442-35.105c0.931-0.132,1.768-0.633,2.326-1.392 c0.555-0.755,0.795-1.704,0.644-2.63c-0.297-1.904-0.447-3.582-0.447-5.139c0-18.249,14.852-33.094,33.094-33.094 c13.703,0,25.789,8.26,30.803,21.04c0.63,1.621,2.351,2.534,4.058,2.14c15.425-3.568,29.919,3.883,36.604,17.168 c0.508,1.027,1.503,1.736,2.641,1.897c17.368,2.473,30.481,17.569,30.481,35.112c0,19.58-15.937,35.509-35.52,35.509H97.391 v7.025h44.761c23.459,0,42.538-19.079,42.538-42.535C184.69,71.545,169.884,53.901,149.968,50.186z"
              />
            </g>
            <g>
              <path
                style="fill: #010002"
                d="M108.586,90.201c1.406-1.403,1.406-3.672,0-5.075L88.541,65.078 c-0.701-0.698-1.614-1.045-2.534-1.045l-0.064,0.011c-0.018,0-0.036-0.011-0.054-0.011c-0.931,0-1.85,0.361-2.534,1.045 L63.31,85.127c-1.403,1.403-1.403,3.672,0,5.075c1.403,1.406,3.672,1.406,5.075,0L82.296,76.29v97.227 c0,1.99,1.603,3.597,3.593,3.597c1.979,0,3.59-1.607,3.59-3.597V76.165l14.033,14.036 C104.91,91.608,107.183,91.608,108.586,90.201z"
              />
            </g>
          </g>
        </g>
      </g>
    </svg>
    <span>Upload</span>
  </button>
  <input id="import-btn" type="file" name="myfile" />
</div>
<input type="color" id="vector-fill" />
</div>`;function jd(r){return window.getComputedStyle(r).getPropertyValue("position")==="static"}const yS=(r,t,e)=>{t.split(" ").forEach(i=>r.addEventListener(i,e,!1))},wS={initFill:{color:"FF0000",opacity:1},initStroke:{color:"000000",opacity:1,width:1},text:{stroke_width:0,font_size:24,font_family:"serif"},initOpacity:1,canvas_expansion:1,imgPath:"/public/images",dimensions:[1e3,800],baseUnit:"px",editorMode:"standalone",sourceLoad:!0};class bS{checkMountType(t){if(t.tagName==="IMG"){this.src=t.src;const e=t.clientHeight,i=t.clientWidth,s=document.createElement("div");return s.style.height=`${e}px`,s.style.width=`${i}px`,s.classList.add("editor-wrapper"),jd(t)&&(s.style.position="relative"),t.parentNode.insertBefore(s,t),s.appendChild(t),s}else if(t.tagName==="PICTURE"){const e=t.querySelector("img");this.src=e.src;const i=e.clientHeight,s=e.clientWidth,c=document.createElement("div");return c.style.height=`${i}px`,c.style.width=`${s}px`,c.classList.add("editor-wrapper"),jd(t)&&(c.style.position="relative"),t.parentNode.insertBefore(c,t),c.appendChild(t),c}else{const e=jd(t);return div.classList.add("editor-wrapper"),e&&(t.style.position="relative"),t}}constructor(t,e={}){this.element=t,this.src=null,this.editorWrapper=this.checkMountType(t),this.height=this.editorWrapper.clientHeight,this.width=this.editorWrapper.clientWidth,this.config={...wS,...e,dimensions:[this.width,this.height]},this.editorWrapper.insertAdjacentHTML("beforeend",vS),this.config.editorMode==="standalone"&&this.bindEvents()}bindEvents(){window.addEventListener("keydown",t=>this.onKeyDownHandler(t)),this.editorWrapper.querySelector("#import-btn").addEventListener("change",t=>{const e=t.target.files[0];if(e&&e.type==="image/svg+xml"){const i=new FileReader;i.onload=s=>{const c=s.target.result;this.canvas.clear(),this.canvas.setSvgString(c);const f=this.editorWrapper,a=getComputedStyle(f,null).height.replace("px",""),n=getComputedStyle(f,null).width.replace("px","");this.canvas.setCurrentZoom(a/this.canvas.contentH),this.canvas.updateCanvas(n,a)},i.readAsText(e)}else alert("Please upload a valid SVG file.")}),this.editorWrapper.querySelector("#vector-select").addEventListener("click",async()=>{if(this.canvas){this.canvas.setMode("select");return}this.container=document.createElement("div"),this.container.id="svgcanvas",this.editorWrapper.appendChild(this.container),this.hiddenTextTag=document.createElement("input"),this.hiddenTextTag.style.height=0,this.hiddenTextTag.style.width=0,this.hiddenTextTag.style.opacity=0;const t=await Promise.resolve().then(()=>h6);this.canvas=new t.default(this.container,this.config),this.canvas.updateCanvas(this.width,this.height),this.fill=(e="#ff0000")=>{this.canvas.getSelectedElements().forEach(i=>{i.setAttribute("fill",e)})},this.canvas.textActions.setInputElem(this.hiddenTextTag),this.bindEvents(),this.config.sourceLoad===!0&&this.src!==null&&window.fetch(this.src).then(e=>e.text()).then(e=>{this.canvas.setSvgString(e),this.editorWrapper;const i=this.editorWrapper.clientHeight,s=this.editorWrapper.clientWidth;this.canvas.setCurrentZoom(i/this.canvas.contentH),this.canvas.updateCanvas(s,i)}),this.canvas.setMode("select"),yS(this.hiddenTextTag,"keyup input",e=>{this.canvas.setTextContent(e.currentTarget.value)})}),this.editorWrapper.querySelector("#vector-rect").addEventListener("click",()=>this.canvas.setMode("rect")),this.editorWrapper.querySelector("#vector-line").addEventListener("click",()=>this.canvas.setMode("line")),this.editorWrapper.querySelector("#vector-text").addEventListener("click",()=>this.canvas.setMode("text")),this.editorWrapper.querySelector("#vector-path").addEventListener("click",()=>this.canvas.setMode("path")),this.editorWrapper.querySelector("#vector-fhpath").addEventListener("click",()=>this.canvas.setMode("fhpath")),this.editorWrapper.querySelector("#vector-fill").addEventListener("input",t=>{this.fill(t.target.value)})}onKeyDownHandler(t){switch(t.preventDefault(),t.target.id,t.keyCode){case 46:case 8:this.canvas.deleteSelectedElements();break}}}const CS=`
<div id="rangePack" class="range_pack"></div>
<div class="menu-bar">
<div class="upload-btn-wrapper">
  <button class="video-frames">
    <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="18" height="18"><path d="M22,24h-2V0h2V24ZM4,0H2V24h2V0Zm13,4H7V20h10V4Zm-8,2h6v12h-6V6Z"/></svg>
  </button>
  <button class="video-trim">
  <svg id="Layer_1" height="18" viewBox="0 0 24 24" width="18" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="m19 14a4.929 4.929 0 0 0 -2.352.615l-3.348-4.015 7.467-8.96-1.536-1.28-7.231 8.678-7.232-8.678-1.536 1.28 7.468 8.96-3.348 4.015a4.941 4.941 0 0 0 -2.352-.615 5 5 0 1 0 5 5 4.947 4.947 0 0 0 -1.112-3.1l3.112-3.738 3.111 3.738a4.955 4.955 0 0 0 -1.111 3.1 5 5 0 1 0 5-5zm-14 8a3 3 0 1 1 3-3 3 3 0 0 1 -3 3zm14 0a3 3 0 1 1 3-3 3 3 0 0 1 -3 3z"/></svg>
  </button>
  <button class="unity-upload">
    <svg
      height="18"
      width="18"
      version="1.1"
      id="Capa_1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 184.69 184.69"
      xml:space="preserve"
      fill="#000000"
      stroke="#000000"
      stroke-width="1.47752"
    >
      <g id="SVGRepo_bgCarrier" stroke-width="0" />
      <g
        id="SVGRepo_tracerCarrier"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <g id="SVGRepo_iconCarrier">
        <g>
          <g>
            <g>
              <path
                style="fill: #010002"
                d="M149.968,50.186c-8.017-14.308-23.796-22.515-40.717-19.813 C102.609,16.43,88.713,7.576,73.087,7.576c-22.117,0-40.112,17.994-40.112,40.115c0,0.913,0.036,1.854,0.118,2.834 C14.004,54.875,0,72.11,0,91.959c0,23.456,19.082,42.535,42.538,42.535h33.623v-7.025H42.538 c-19.583,0-35.509-15.929-35.509-35.509c0-17.526,13.084-32.621,30.442-35.105c0.931-0.132,1.768-0.633,2.326-1.392 c0.555-0.755,0.795-1.704,0.644-2.63c-0.297-1.904-0.447-3.582-0.447-5.139c0-18.249,14.852-33.094,33.094-33.094 c13.703,0,25.789,8.26,30.803,21.04c0.63,1.621,2.351,2.534,4.058,2.14c15.425-3.568,29.919,3.883,36.604,17.168 c0.508,1.027,1.503,1.736,2.641,1.897c17.368,2.473,30.481,17.569,30.481,35.112c0,19.58-15.937,35.509-35.52,35.509H97.391 v7.025h44.761c23.459,0,42.538-19.079,42.538-42.535C184.69,71.545,169.884,53.901,149.968,50.186z"
              />
            </g>
            <g>
              <path
                style="fill: #010002"
                d="M108.586,90.201c1.406-1.403,1.406-3.672,0-5.075L88.541,65.078 c-0.701-0.698-1.614-1.045-2.534-1.045l-0.064,0.011c-0.018,0-0.036-0.011-0.054-0.011c-0.931,0-1.85,0.361-2.534,1.045 L63.31,85.127c-1.403,1.403-1.403,3.672,0,5.075c1.403,1.406,3.672,1.406,5.075,0L82.296,76.29v97.227 c0,1.99,1.603,3.597,3.593,3.597c1.979,0,3.59-1.607,3.59-3.597V76.165l14.033,14.036 C104.91,91.608,107.183,91.608,108.586,90.201z"
              />
            </g>
          </g>
        </g>
      </g>
    </svg>
    <input id="import-btn" type="file" name="myfile" />
  </button>
</div>
</div>`,Xa=(r,t=!0)=>{r=parseFloat(r);let e=Math.floor(r/3600),i=Math.floor((r-e*3600)/60),s=r-e*3600-i*60;e<10&&(e="0"+e),i<10&&(i="0"+i),s<10&&(s="0"+s);let c=/\..*$/,f=String(s).match(c);return e+":"+i+":"+String(s).replace(c,"")+(t?f?f[0]:".000":"")},mu=async r=>new Promise((t,e)=>{const i=new FileReader;i.onload=()=>{t(i.result)},i.onerror=e,i.readAsDataURL(r)}),RA=(r,t,...e)=>{const i=document.createElement(r);for(let s in t)if(s.startsWith("on")&&i.addEventListener(s.substring(2).toLowerCase(),t[s]),s.startsWith("data-")){const c=s.split("-");i.dataset[c[1]]=t[s]}else s==="class"?i.classList.add(t[s]):s==="value"?i.value=t[s]:i[s]=t[s];return e.forEach(s=>{typeof s=="string"?i.appendChild(document.createTextNode(s)):i.appendChild(s)}),i};function HA(r){let t=r;return[()=>t,s=>{t=s}]}const bv=r=>new Promise((t,e)=>{const i=document.createElement("script");i.src=r,i.onload=t,i.onerror=()=>e(new Error(`Script load error: ${r}`)),document.head.appendChild(i)});function BS(r){return window.getComputedStyle(r).getPropertyValue("position")==="static"}async function SS(r){return await(await fetch(r)).blob()}let vu=100;function xS({thumbNails:r,rEnd:t,rStart:e,handleUpdaterStart:i,handleUpdaterEnd:s,loading:c,videoMeta:f,handleTrim:a}){if(r.length===0&&!c)return null;if(c){const A=RA("h2",{},"Processing thumbnails.....");return RA("center",{},A)}const n=document.getElementById("rangePack");n.innerHTML="";const l=RA("div",{class:"image_box"});r.forEach((A,g)=>{const p=RA("img",{src:A,alt:`sample_video_thumbnail_${g}`});l.appendChild(p)});const h=RA("div",{class:"clip_box",style:`width: calc(${t-e}%); left: ${e}%;`,"data-start":Xa(`${e/vu*f.duration}`,!1),"data-end":Xa(`${t/vu*f.duration}`,!1)});for(let A=0;A<2;A++){const g=RA("span",{class:"clip_box_des"});h.appendChild(g)}l.appendChild(h);const o=RA("input",{class:"range",type:"range",min:0,max:vu,onInput:i,value:e}),u=RA("input",{class:"range",type:"range",min:0,max:vu,onInput:s,value:t});l.appendChild(o),l.appendChild(u),n.appendChild(l)}let Cv=100,yu=null,Bv=null,Ts=null;const _S={load:"lazy"};async function ES(){await bv("/assets/ffmpeg/package/dist/umd/ffmpeg.js"),await bv("/assets/util/package/dist/umd/index.js"),yu=FFmpegUtil.fetchFile,Bv=FFmpegWASM.FFmpeg,Ts=new Bv,Ts.on("log",({message:r})=>{console.log(r)}),Ts.on("progress",({progress:r})=>{console.log(`${r*100} %`)}),await Ts.load({coreURL:"/assets/core/package/dist/umd/ffmpeg-core.js"})}async function FS(r,t){t={..._S,...t};const e=r.clientHeight,i=r.clientWidth,s=document.createElement("div");s.style.height=`${e}px`,s.style.width=`${i}px`,s.classList.add("editor-wrapper"),BS(r)&&(s.style.position="relative"),r.parentNode.insertBefore(s,r),s.appendChild(r);const[f,a]=HA(null),[n,l]=HA({}),[h,o]=HA([]),[u,A]=HA(!1),[g,p]=HA(null),[d,m]=HA(!1),[v,C]=HA(0),[x,E]=HA(10);r.insertAdjacentHTML("afterend",CS),document.querySelector("#import-btn").addEventListener("change",L),r.addEventListener("loadedmetadata",O);async function L({target:{files:M}}){const H=M[0];r.src=await mu(H),l(H),o(await mu(H))}document.querySelector(".video-trim").addEventListener("click",()=>U()),document.querySelector(".video-frames").addEventListener("click",async()=>{const M=r.querySelector("source").src,H=await SS(M),J="input.mp4";await Ts.writeFile(J,await yu(H));const $=await Ts.readFile(J);l($),X(r)});async function U(){m(!0);let M=(v()/100*f().duration).toFixed(2),H=(x()/100*f().duration-M).toFixed(2);console.log(M,H,Xa(M),Xa(H));try{await Ts.writeFile(n().name,await yu(n())),await Ts.exec(["-ss",Xa(M),"-i",n().name,"-t",Xa(H),"-c","copy","ping.mp4"]);const J=await Ts.readFile("ping.mp4"),$=await mu(new Blob([J.buffer],{type:"video/mp4"}));document.querySelector("video").src=$,p($)}catch(J){console.log(J)}finally{m(!1)}}async function O(M){const H=M.target;s.style.width=`${H.videoWidth}px`,s.style.height=`${H.videoHeight}px`,X(H)}async function X(M){const H=R=>G=>{R(G.target.value);const it=document.querySelector(".clip_box");it.style=`width: calc(${x()-v()}%); left: ${v()}%;`,it.dataset.start=Xa(`${v()/Cv*ft.duration}`,!1),it.dataset.end=Xa(`${x()/Cv*ft.duration}`,!1)},J={name:n().name,duration:M.duration,videoWidth:M.videoWidth,videoHeight:M.videoHeight};a(J);const $=await rt(J),ht=H(C),ut=H(E),pt=!1,ft={duration:60};xS({thumbNails:$,rEnd:x(),rStart:v(),handleUpdaterStart:ht,handleUpdaterEnd:ut,loading:pt,videoMeta:ft,handleTrim:U})}const rt=async({duration:M})=>{A(!0);let H=15,J=M<H?M:15,$=M===H?1:M/J;const ht=[];await Ts.writeFile(n().name,await yu(n()));for(let ut=0;ut<J;ut++){let pt=Xa(Math.round(ut*$));try{await Ts.exec(["-ss",pt,"-i",n().name,"-t","00:00:1.000","-vf","scale=150:-1",`img${ut}.png`]);const ft=await Ts.readFile(`img${ut}.png`);let R=new Blob([ft.buffer],{type:"image/png"}),G=await mu(R);ht.push(G)}catch(ft){console.log({message:ft})}}return A(!1),ht};await ES()}class TS{constructor(t,e){FS(t,e)}}function LS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function IS(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),e}var Kd={};const Wd=IS(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(r){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.3.0"};if(r.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var e=Wd,i=new e.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=i.document,t.jsdomImplForWrapper=Wd.implForWrapper,t.nodeCanvas=Wd.Canvas,t.window=i,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function a(A,g){if(this.__eventListeners[A]){var p=this.__eventListeners[A];g?p[p.indexOf(g)]=!1:t.util.array.fill(p,!1)}}function n(A,g){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var p in A)this.on(p,A[p]);else this.__eventListeners[A]||(this.__eventListeners[A]=[]),this.__eventListeners[A].push(g);return this}function l(A,g){var p=(function(){g.apply(this,arguments),this.off(A,p)}).bind(this);this.on(A,p)}function h(A,g){if(arguments.length===1)for(var p in A)l.call(this,p,A[p]);else l.call(this,A,g);return this}function o(A,g){if(!this.__eventListeners)return this;if(arguments.length===0)for(A in this.__eventListeners)a.call(this,A);else if(arguments.length===1&&typeof arguments[0]=="object")for(var p in A)a.call(this,p,A[p]);else a.call(this,A,g);return this}function u(A,g){if(!this.__eventListeners)return this;var p=this.__eventListeners[A];if(!p)return this;for(var d=0,m=p.length;d<m;d++)p[d]&&p[d].call(this,g||{});return this.__eventListeners[A]=p.filter(function(v){return v!==!1}),this}t.Observable={fire:u,on:n,once:h,off:o}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var a=0,n=arguments.length;a<n;a++)this._onObjectAdded(arguments[a]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(a,n,l){var h=this._objects;return l?h[n]=a:h.splice(n,0,a),this._onObjectAdded&&this._onObjectAdded(a),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var a=this._objects,n,l=!1,h=0,o=arguments.length;h<o;h++)n=a.indexOf(arguments[h]),n!==-1&&(l=!0,a.splice(n,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&l&&this.requestRenderAll(),this},forEachObject:function(a,n){for(var l=this.getObjects(),h=0,o=l.length;h<o;h++)a.call(n,l[h],h,l);return this},getObjects:function(a){return typeof a>"u"?this._objects.concat():this._objects.filter(function(n){return n.type===a})},item:function(a){return this._objects[a]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(a,n){return this._objects.indexOf(a)>-1?!0:n?this._objects.some(function(l){return typeof l.contains=="function"&&l.contains(a,!0)}):!1},complexity:function(){return this._objects.reduce(function(a,n){return a+=n.complexity?n.complexity():0,a},0)}},t.CommonMethods={_setOptions:function(a){for(var n in a)this.set(n,a[n])},_initGradient:function(a,n){a&&a.colorStops&&!(a instanceof t.Gradient)&&this.set(n,new t.Gradient(a))},_initPattern:function(a,n,l){a&&a.source&&!(a instanceof t.Pattern)?this.set(n,new t.Pattern(a,l)):l&&l()},_setObject:function(a){for(var n in a)this._set(n,a[n])},set:function(a,n){return typeof a=="object"?this._setObject(a):this._set(a,n),this},_set:function(a,n){this[a]=n},toggle:function(a){var n=this.get(a);return typeof n=="boolean"&&this.set(a,!n),this},get:function(a){return this[a]}},function(a){var n=Math.sqrt,l=Math.atan2,h=Math.pow,o=Math.PI/180,u=Math.PI/2;t.util={cos:function(A){if(A===0)return 1;A<0&&(A=-A);var g=A/u;switch(g){case 1:case 3:return 0;case 2:return-1}return Math.cos(A)},sin:function(A){if(A===0)return 0;var g=A/u,p=1;switch(A<0&&(p=-1),g){case 1:return p;case 2:return 0;case 3:return-p}return Math.sin(A)},removeFromArray:function(A,g){var p=A.indexOf(g);return p!==-1&&A.splice(p,1),A},getRandomInt:function(A,g){return Math.floor(Math.random()*(g-A+1))+A},degreesToRadians:function(A){return A*o},radiansToDegrees:function(A){return A/o},rotatePoint:function(A,g,p){var d=new t.Point(A.x-g.x,A.y-g.y),m=t.util.rotateVector(d,p);return new t.Point(m.x,m.y).addEquals(g)},rotateVector:function(A,g){var p=t.util.sin(g),d=t.util.cos(g),m=A.x*d-A.y*p,v=A.x*p+A.y*d;return{x:m,y:v}},createVector:function(A,g){return new t.Point(g.x-A.x,g.y-A.y)},calcAngleBetweenVectors:function(A,g){return Math.acos((A.x*g.x+A.y*g.y)/(Math.hypot(A.x,A.y)*Math.hypot(g.x,g.y)))},getHatVector:function(A){return new t.Point(A.x,A.y).multiply(1/Math.hypot(A.x,A.y))},getBisector:function(A,g,p){var d=t.util.createVector(A,g),m=t.util.createVector(A,p),v=t.util.calcAngleBetweenVectors(d,m),C=t.util.calcAngleBetweenVectors(t.util.rotateVector(d,v),m),x=v*(C===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(d,x)),angle:v}},projectStrokeOnPoints:function(A,g,p){var d=[],m=g.strokeWidth/2,v=g.strokeUniform?new t.Point(1/g.scaleX,1/g.scaleY):new t.Point(1,1),C=function(x){var E=m/Math.hypot(x.x,x.y);return new t.Point(x.x*E*v.x,x.y*E*v.y)};return A.length<=1||A.forEach(function(x,E){var L=new t.Point(x.x,x.y),U,O;E===0?(O=A[E+1],U=p?C(t.util.createVector(O,L)).addEquals(L):A[A.length-1]):E===A.length-1?(U=A[E-1],O=p?C(t.util.createVector(U,L)).addEquals(L):A[0]):(U=A[E-1],O=A[E+1]);var X=t.util.getBisector(L,U,O),rt=X.vector,M=X.angle,H,J;if(g.strokeLineJoin==="miter"&&(H=-m/Math.sin(M/2),J=new t.Point(rt.x*H*v.x,rt.y*H*v.y),Math.hypot(J.x,J.y)/m<=g.strokeMiterLimit)){d.push(L.add(J)),d.push(L.subtract(J));return}H=-m*Math.SQRT2,J=new t.Point(rt.x*H*v.x,rt.y*H*v.y),d.push(L.add(J)),d.push(L.subtract(J))}),d},transformPoint:function(A,g,p){return p?new t.Point(g[0]*A.x+g[2]*A.y,g[1]*A.x+g[3]*A.y):new t.Point(g[0]*A.x+g[2]*A.y+g[4],g[1]*A.x+g[3]*A.y+g[5])},makeBoundingBoxFromPoints:function(A,g){if(g)for(var p=0;p<A.length;p++)A[p]=t.util.transformPoint(A[p],g);var d=[A[0].x,A[1].x,A[2].x,A[3].x],m=t.util.array.min(d),v=t.util.array.max(d),C=v-m,x=[A[0].y,A[1].y,A[2].y,A[3].y],E=t.util.array.min(x),L=t.util.array.max(x),U=L-E;return{left:m,top:E,width:C,height:U}},invertTransform:function(A){var g=1/(A[0]*A[3]-A[1]*A[2]),p=[g*A[3],-g*A[1],-g*A[2],g*A[0]],d=t.util.transformPoint({x:A[4],y:A[5]},p,!0);return p[4]=-d.x,p[5]=-d.y,p},toFixed:function(A,g){return parseFloat(Number(A).toFixed(g))},parseUnit:function(A,g){var p=/\D{0,2}$/.exec(A),d=parseFloat(A);switch(g||(g=t.Text.DEFAULT_SVG_FONT_SIZE),p[0]){case"mm":return d*t.DPI/25.4;case"cm":return d*t.DPI/2.54;case"in":return d*t.DPI;case"pt":return d*t.DPI/72;case"pc":return d*t.DPI/72*12;case"em":return d*g;default:return d}},falseFunction:function(){return!1},getKlass:function(A,g){return A=t.util.string.camelize(A.charAt(0).toUpperCase()+A.slice(1)),t.util.resolveNamespace(g)[A]},getSvgAttributes:function(A){var g=["instantiated_by_use","style","id","class"];switch(A){case"linearGradient":g=g.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":g=g.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":g=g.concat(["offset","stop-color","stop-opacity"]);break}return g},resolveNamespace:function(A){if(!A)return t;var g=A.split("."),p=g.length,d,m=a||t.window;for(d=0;d<p;++d)m=m[g[d]];return m},loadImage:function(A,g,p,d){if(!A){g&&g.call(p,A);return}var m=t.util.createImage(),v=function(){g&&g.call(p,m,!1),m=m.onload=m.onerror=null};m.onload=v,m.onerror=function(){t.log("Error loading "+m.src),g&&g.call(p,null,!0),m=m.onload=m.onerror=null},A.indexOf("data")!==0&&d!==void 0&&d!==null&&(m.crossOrigin=d),A.substring(0,14)==="data:image/svg"&&(m.onload=null,t.util.loadImageInDom(m,v)),m.src=A},loadImageInDom:function(A,g){var p=t.document.createElement("div");p.style.width=p.style.height="1px",p.style.left=p.style.top="-100%",p.style.position="absolute",p.appendChild(A),t.document.querySelector("body").appendChild(p),A.onload=function(){g(),p.parentNode.removeChild(p),p=null}},enlivenObjects:function(A,g,p,d){A=A||[];var m=[],v=0,C=A.length;function x(){++v===C&&g&&g(m.filter(function(E){return E}))}if(!C){g&&g(m);return}A.forEach(function(E,L){if(!E||!E.type){x();return}var U=t.util.getKlass(E.type,p);U.fromObject(E,function(O,X){X||(m[L]=O),d&&d(E,O,X),x()})})},enlivenObjectEnlivables:function(A,g,p){var d=t.Object.ENLIVEN_PROPS.filter(function(m){return!!A[m]});t.util.enlivenObjects(d.map(function(m){return A[m]}),function(m){var v={};d.forEach(function(C,x){v[C]=m[x],g&&(g[C]=m[x])}),p&&p(v)})},enlivenPatterns:function(A,g){A=A||[];function p(){++m===v&&g&&g(d)}var d=[],m=0,v=A.length;if(!v){g&&g(d);return}A.forEach(function(C,x){C&&C.source?new t.Pattern(C,function(E){d[x]=E,p()}):(d[x]=C,p())})},groupSVGElements:function(A,g,p){var d;return A&&A.length===1?(typeof p<"u"&&(A[0].sourcePath=p),A[0]):(g&&(g.width&&g.height?g.centerPoint={x:g.width/2,y:g.height/2}:(delete g.width,delete g.height)),d=new t.Group(A,g),typeof p<"u"&&(d.sourcePath=p),d)},populateWithProperties:function(A,g,p){if(p&&Array.isArray(p))for(var d=0,m=p.length;d<m;d++)p[d]in A&&(g[p[d]]=A[p[d]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(A){var g=t.util.createCanvasElement();return g.width=A.width,g.height=A.height,g.getContext("2d").drawImage(A,0,0),g},toDataURL:function(A,g,p){return A.toDataURL("image/"+g,p)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(A,g,p){return[A[0]*g[0]+A[2]*g[1],A[1]*g[0]+A[3]*g[1],A[0]*g[2]+A[2]*g[3],A[1]*g[2]+A[3]*g[3],p?0:A[0]*g[4]+A[2]*g[5]+A[4],p?0:A[1]*g[4]+A[3]*g[5]+A[5]]},qrDecompose:function(A){var g=l(A[1],A[0]),p=h(A[0],2)+h(A[1],2),d=n(p),m=(A[0]*A[3]-A[2]*A[1])/d,v=l(A[0]*A[2]+A[1]*A[3],p);return{angle:g/o,scaleX:d,scaleY:m,skewX:v/o,skewY:0,translateX:A[4],translateY:A[5]}},calcRotateMatrix:function(A){if(!A.angle)return t.iMatrix.concat();var g=t.util.degreesToRadians(A.angle),p=t.util.cos(g),d=t.util.sin(g);return[p,d,-d,p,0,0]},calcDimensionsMatrix:function(A){var g=typeof A.scaleX>"u"?1:A.scaleX,p=typeof A.scaleY>"u"?1:A.scaleY,d=[A.flipX?-g:g,0,0,A.flipY?-p:p,0,0],m=t.util.multiplyTransformMatrices,v=t.util.degreesToRadians;return A.skewX&&(d=m(d,[1,0,Math.tan(v(A.skewX)),1],!0)),A.skewY&&(d=m(d,[1,Math.tan(v(A.skewY)),0,1],!0)),d},composeMatrix:function(A){var g=[1,0,0,1,A.translateX||0,A.translateY||0],p=t.util.multiplyTransformMatrices;return A.angle&&(g=p(g,t.util.calcRotateMatrix(A))),(A.scaleX!==1||A.scaleY!==1||A.skewX||A.skewY||A.flipX||A.flipY)&&(g=p(g,t.util.calcDimensionsMatrix(A))),g},resetObjectTransform:function(A){A.scaleX=1,A.scaleY=1,A.skewX=0,A.skewY=0,A.flipX=!1,A.flipY=!1,A.rotate(0)},saveObjectTransform:function(A){return{scaleX:A.scaleX,scaleY:A.scaleY,skewX:A.skewX,skewY:A.skewY,angle:A.angle,left:A.left,flipX:A.flipX,flipY:A.flipY,top:A.top}},isTransparent:function(A,g,p,d){d>0&&(g>d?g-=d:g=0,p>d?p-=d:p=0);var m=!0,v,C,x=A.getImageData(g,p,d*2||1,d*2||1),E=x.data.length;for(v=3;v<E&&(C=x.data[v],m=C<=0,m!==!1);v+=4);return x=null,m},parsePreserveAspectRatioAttribute:function(A){var g="meet",p="Mid",d="Mid",m=A.split(" "),v;return m&&m.length&&(g=m.pop(),g!=="meet"&&g!=="slice"?(v=g,g="meet"):m.length&&(v=m.pop())),p=v!=="none"?v.slice(1,4):"none",d=v!=="none"?v.slice(5,8):"none",{meetOrSlice:g,alignX:p,alignY:d}},clearFabricFontCache:function(A){A=(A||"").toLowerCase(),A?t.charWidthsCache[A]&&delete t.charWidthsCache[A]:t.charWidthsCache={}},limitDimsByArea:function(A,g){var p=Math.sqrt(g*A),d=Math.floor(g/p);return{x:Math.floor(p),y:d}},capValue:function(A,g,p){return Math.max(A,Math.min(g,p))},findScaleToFit:function(A,g){return Math.min(g.width/A.width,g.height/A.height)},findScaleToCover:function(A,g){return Math.max(g.width/A.width,g.height/A.height)},matrixToSVG:function(A){return"matrix("+A.map(function(g){return t.util.toFixed(g,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(A,g){var p=t.util.invertTransform(g),d=t.util.multiplyTransformMatrices(p,A.calcOwnMatrix());t.util.applyTransformToObject(A,d)},addTransformToObject:function(A,g){t.util.applyTransformToObject(A,t.util.multiplyTransformMatrices(g,A.calcOwnMatrix()))},applyTransformToObject:function(A,g){var p=t.util.qrDecompose(g),d=new t.Point(p.translateX,p.translateY);A.flipX=!1,A.flipY=!1,A.set("scaleX",p.scaleX),A.set("scaleY",p.scaleY),A.skewX=p.skewX,A.skewY=p.skewY,A.angle=p.angle,A.setPositionByOrigin(d,"center","center")},sizeAfterTransform:function(A,g,p){var d=A/2,m=g/2,v=[{x:-d,y:-m},{x:d,y:-m},{x:-d,y:m},{x:d,y:m}],C=t.util.calcDimensionsMatrix(p),x=t.util.makeBoundingBoxFromPoints(v,C);return{x:x.width,y:x.height}},mergeClipPaths:function(A,g){var p=A,d=g;p.inverted&&!d.inverted&&(p=g,d=A),t.util.applyTransformToObject(d,t.util.multiplyTransformMatrices(t.util.invertTransform(p.calcTransformMatrix()),d.calcTransformMatrix()));var m=p.inverted&&d.inverted;return m&&(p.inverted=d.inverted=!1),new t.Group([p],{clipPath:d,inverted:m})},hasStyleChanged:function(A,g,p){return p=p||!1,A.fill!==g.fill||A.stroke!==g.stroke||A.strokeWidth!==g.strokeWidth||A.fontSize!==g.fontSize||A.fontFamily!==g.fontFamily||A.fontWeight!==g.fontWeight||A.fontStyle!==g.fontStyle||A.textBackgroundColor!==g.textBackgroundColor||A.deltaY!==g.deltaY||p&&(A.overline!==g.overline||A.underline!==g.underline||A.linethrough!==g.linethrough)},stylesToArray:function(p,g){for(var p=t.util.object.clone(p,!0),d=g.split(`
`),m=-1,v={},C=[],x=0;x<d.length;x++){if(!p[x]){m+=d[x].length;continue}for(var E=0;E<d[x].length;E++){m++;var L=p[x][E];if(L&&Object.keys(L).length>0){var U=t.util.hasStyleChanged(v,L,!0);U?C.push({start:m,end:m+1,style:L}):C[C.length-1].end++}v=L||{}}}return C},stylesFromArray:function(A,g){if(!Array.isArray(A))return A;for(var p=g.split(`
`),d=-1,m=0,v={},C=0;C<p.length;C++)for(var x=0;x<p[C].length;x++)d++,A[m]&&A[m].start<=d&&d<A[m].end&&(v[C]=v[C]||{},v[C][x]=Object.assign({},A[m].style),d===A[m].end-1&&m++);return v}}}(r),function(){var a=Array.prototype.join,n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};function h(R,G,it,P,V,k,N,Z,st,ct,ot){var wt=t.util.cos(R),_t=t.util.sin(R),Nt=t.util.cos(G),vt=t.util.sin(G),mt=it*V*Nt-P*k*vt+N,gt=P*V*Nt+it*k*vt+Z,tt=ct+st*(-it*V*_t-P*k*wt),It=ot+st*(-P*V*_t+it*k*wt),Pt=mt+st*(it*V*vt+P*k*Nt),Ut=gt+st*(P*V*vt-it*k*Nt);return["C",tt,It,Pt,Ut,mt,gt]}function o(R,G,it,P,V,k,N){var Z=Math.PI,st=N*Z/180,ct=t.util.sin(st),ot=t.util.cos(st),wt=0,_t=0;it=Math.abs(it),P=Math.abs(P);var Nt=-ot*R*.5-ct*G*.5,vt=-ot*G*.5+ct*R*.5,mt=it*it,gt=P*P,tt=vt*vt,It=Nt*Nt,Pt=mt*gt-mt*tt-gt*It,Ut=0;if(Pt<0){var Gt=Math.sqrt(1-Pt/(mt*gt));it*=Gt,P*=Gt}else Ut=(V===k?-1:1)*Math.sqrt(Pt/(mt*tt+gt*It));var Dt=Ut*it*vt/P,bt=-Ut*P*Nt/it,Kt=ot*Dt-ct*bt+R*.5,Zt=ct*Dt+ot*bt+G*.5,le=u(1,0,(Nt-Dt)/it,(vt-bt)/P),pe=u((Nt-Dt)/it,(vt-bt)/P,(-Nt-Dt)/it,(-vt-bt)/P);k===0&&pe>0?pe-=2*Z:k===1&&pe<0&&(pe+=2*Z);for(var Rt=Math.ceil(Math.abs(pe/Z*2)),zt=[],Xt=pe/Rt,ae=8/3*Math.sin(Xt/4)*Math.sin(Xt/4)/Math.sin(Xt/2),te=le+Xt,Ne=0;Ne<Rt;Ne++)zt[Ne]=h(le,te,ot,ct,it,P,Kt,Zt,ae,wt,_t),wt=zt[Ne][5],_t=zt[Ne][6],le=te,te+=Xt;return zt}function u(R,G,it,P){var V=Math.atan2(G,R),k=Math.atan2(P,it);return k>=V?k-V:2*Math.PI-(V-k)}function A(R,G,it,P,V,k,N,Z){var st;if(t.cachesBoundsOfCurve&&(st=a.call(arguments),t.boundsOfCurveCache[st]))return t.boundsOfCurveCache[st];var ct=Math.sqrt,ot=Math.min,wt=Math.max,_t=Math.abs,Nt=[],vt=[[],[]],mt,gt,tt,It,Pt,Ut,Gt,Dt;gt=6*R-12*it+6*V,mt=-3*R+9*it-9*V+3*N,tt=3*it-3*R;for(var bt=0;bt<2;++bt){if(bt>0&&(gt=6*G-12*P+6*k,mt=-3*G+9*P-9*k+3*Z,tt=3*P-3*G),_t(mt)<1e-12){if(_t(gt)<1e-12)continue;It=-tt/gt,0<It&&It<1&&Nt.push(It);continue}Gt=gt*gt-4*tt*mt,!(Gt<0)&&(Dt=ct(Gt),Pt=(-gt+Dt)/(2*mt),0<Pt&&Pt<1&&Nt.push(Pt),Ut=(-gt-Dt)/(2*mt),0<Ut&&Ut<1&&Nt.push(Ut))}for(var Kt,Zt,le=Nt.length,pe=le,Rt;le--;)It=Nt[le],Rt=1-It,Kt=Rt*Rt*Rt*R+3*Rt*Rt*It*it+3*Rt*It*It*V+It*It*It*N,vt[0][le]=Kt,Zt=Rt*Rt*Rt*G+3*Rt*Rt*It*P+3*Rt*It*It*k+It*It*It*Z,vt[1][le]=Zt;vt[0][pe]=R,vt[1][pe]=G,vt[0][pe+1]=N,vt[1][pe+1]=Z;var zt=[{x:ot.apply(null,vt[0]),y:ot.apply(null,vt[1])},{x:wt.apply(null,vt[0]),y:wt.apply(null,vt[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[st]=zt),zt}function g(R,G,it){for(var P=it[1],V=it[2],k=it[3],N=it[4],Z=it[5],st=it[6],ct=it[7],ot=o(st-R,ct-G,P,V,N,Z,k),wt=0,_t=ot.length;wt<_t;wt++)ot[wt][1]+=R,ot[wt][2]+=G,ot[wt][3]+=R,ot[wt][4]+=G,ot[wt][5]+=R,ot[wt][6]+=G;return ot}function p(R){var G=0,it=0,P=R.length,V=0,k=0,N,Z,st,ct=[],ot,wt,_t;for(Z=0;Z<P;++Z){switch(st=!1,N=R[Z].slice(0),N[0]){case"l":N[0]="L",N[1]+=G,N[2]+=it;case"L":G=N[1],it=N[2];break;case"h":N[1]+=G;case"H":N[0]="L",N[2]=it,G=N[1];break;case"v":N[1]+=it;case"V":N[0]="L",it=N[1],N[1]=G,N[2]=it;break;case"m":N[0]="M",N[1]+=G,N[2]+=it;case"M":G=N[1],it=N[2],V=N[1],k=N[2];break;case"c":N[0]="C",N[1]+=G,N[2]+=it,N[3]+=G,N[4]+=it,N[5]+=G,N[6]+=it;case"C":wt=N[3],_t=N[4],G=N[5],it=N[6];break;case"s":N[0]="S",N[1]+=G,N[2]+=it,N[3]+=G,N[4]+=it;case"S":ot==="C"?(wt=2*G-wt,_t=2*it-_t):(wt=G,_t=it),G=N[3],it=N[4],N[0]="C",N[5]=N[3],N[6]=N[4],N[3]=N[1],N[4]=N[2],N[1]=wt,N[2]=_t,wt=N[3],_t=N[4];break;case"q":N[0]="Q",N[1]+=G,N[2]+=it,N[3]+=G,N[4]+=it;case"Q":wt=N[1],_t=N[2],G=N[3],it=N[4];break;case"t":N[0]="T",N[1]+=G,N[2]+=it;case"T":ot==="Q"?(wt=2*G-wt,_t=2*it-_t):(wt=G,_t=it),N[0]="Q",G=N[1],it=N[2],N[1]=wt,N[2]=_t,N[3]=G,N[4]=it;break;case"a":N[0]="A",N[6]+=G,N[7]+=it;case"A":st=!0,ct=ct.concat(g(G,it,N)),G=N[6],it=N[7];break;case"z":case"Z":G=V,it=k;break}st||ct.push(N),ot=N[0]}return ct}function d(R,G,it,P){return Math.sqrt((it-R)*(it-R)+(P-G)*(P-G))}function m(R){return R*R*R}function v(R){return 3*R*R*(1-R)}function C(R){return 3*R*(1-R)*(1-R)}function x(R){return(1-R)*(1-R)*(1-R)}function E(R,G,it,P,V,k,N,Z){return function(st){var ct=m(st),ot=v(st),wt=C(st),_t=x(st);return{x:N*ct+V*ot+it*wt+R*_t,y:Z*ct+k*ot+P*wt+G*_t}}}function L(R,G,it,P,V,k,N,Z){return function(st){var ct=1-st,ot=3*ct*ct*(it-R)+6*ct*st*(V-it)+3*st*st*(N-V),wt=3*ct*ct*(P-G)+6*ct*st*(k-P)+3*st*st*(Z-k);return Math.atan2(wt,ot)}}function U(R){return R*R}function O(R){return 2*R*(1-R)}function X(R){return(1-R)*(1-R)}function rt(R,G,it,P,V,k){return function(N){var Z=U(N),st=O(N),ct=X(N);return{x:V*Z+it*st+R*ct,y:k*Z+P*st+G*ct}}}function M(R,G,it,P,V,k){return function(N){var Z=1-N,st=2*Z*(it-R)+2*N*(V-it),ct=2*Z*(P-G)+2*N*(k-P);return Math.atan2(ct,st)}}function H(R,G,it){var P={x:G,y:it},V,k=0,N;for(N=1;N<=100;N+=1)V=R(N/100),k+=d(P.x,P.y,V.x,V.y),P=V;return k}function J(R,G){for(var it=0,P=0,V=R.iterator,k={x:R.x,y:R.y},N,Z,st=.01,ct=R.angleFinder,ot;P<G&&st>1e-4;)N=V(it),ot=it,Z=d(k.x,k.y,N.x,N.y),Z+P>G?(it-=st,st/=2):(k=N,it+=st,P+=Z);return N.angle=ct(ot),N}function $(R){for(var G=0,it=R.length,P,V=0,k=0,N=0,Z=0,st=[],ct,ot,wt,_t=0;_t<it;_t++){switch(P=R[_t],ot={x:V,y:k,command:P[0]},P[0]){case"M":ot.length=0,N=V=P[1],Z=k=P[2];break;case"L":ot.length=d(V,k,P[1],P[2]),V=P[1],k=P[2];break;case"C":ct=E(V,k,P[1],P[2],P[3],P[4],P[5],P[6]),wt=L(V,k,P[1],P[2],P[3],P[4],P[5],P[6]),ot.iterator=ct,ot.angleFinder=wt,ot.length=H(ct,V,k),V=P[5],k=P[6];break;case"Q":ct=rt(V,k,P[1],P[2],P[3],P[4]),wt=M(V,k,P[1],P[2],P[3],P[4]),ot.iterator=ct,ot.angleFinder=wt,ot.length=H(ct,V,k),V=P[3],k=P[4];break;case"Z":case"z":ot.destX=N,ot.destY=Z,ot.length=d(V,k,N,Z),V=N,k=Z;break}G+=ot.length,st.push(ot)}return st.push({length:G,x:V,y:k}),st}function ht(R,G,it){it||(it=$(R));for(var P=0;G-it[P].length>0&&P<it.length-2;)G-=it[P].length,P++;var V=it[P],k=G/V.length,N=V.command,Z=R[P],st;switch(N){case"M":return{x:V.x,y:V.y,angle:0};case"Z":case"z":return st=new t.Point(V.x,V.y).lerp(new t.Point(V.destX,V.destY),k),st.angle=Math.atan2(V.destY-V.y,V.destX-V.x),st;case"L":return st=new t.Point(V.x,V.y).lerp(new t.Point(Z[1],Z[2]),k),st.angle=Math.atan2(Z[2]-V.y,Z[1]-V.x),st;case"C":return J(V,G);case"Q":return J(V,G)}}function ut(R){var G=[],it=[],P,V,k=t.rePathCommand,N="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",Z="("+N+")"+t.commaWsp,st="([01])"+t.commaWsp+"?",ct=Z+"?"+Z+"?"+Z+st+st+Z+"?("+N+")",ot=new RegExp(ct,"g"),wt,_t,Nt;if(!R||!R.match)return G;Nt=R.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var vt=0,mt,gt=Nt.length;vt<gt;vt++){P=Nt[vt],_t=P.slice(1).trim(),it.length=0;var tt=P.charAt(0);if(mt=[tt],tt.toLowerCase()==="a")for(var It;It=ot.exec(_t);)for(var Pt=1;Pt<It.length;Pt++)it.push(It[Pt]);else for(;wt=k.exec(_t);)it.push(wt[0]);for(var Pt=0,Ut=it.length;Pt<Ut;Pt++)V=parseFloat(it[Pt]),isNaN(V)||mt.push(V);var Gt=n[tt.toLowerCase()],Dt=l[tt]||tt;if(mt.length-1>Gt)for(var bt=1,Kt=mt.length;bt<Kt;bt+=Gt)G.push([tt].concat(mt.slice(bt,bt+Gt))),tt=Dt;else G.push(mt)}return G}function pt(R,G){var it=[],P,V=new t.Point(R[0].x,R[0].y),k=new t.Point(R[1].x,R[1].y),N=R.length,Z=1,st=0,ct=N>2;for(G=G||0,ct&&(Z=R[2].x<k.x?-1:R[2].x===k.x?0:1,st=R[2].y<k.y?-1:R[2].y===k.y?0:1),it.push(["M",V.x-Z*G,V.y-st*G]),P=1;P<N;P++){if(!V.eq(k)){var ot=V.midPointFrom(k);it.push(["Q",V.x,V.y,ot.x,ot.y])}V=R[P],P+1<R.length&&(k=R[P+1])}return ct&&(Z=V.x>R[P-2].x?1:V.x===R[P-2].x?0:-1,st=V.y>R[P-2].y?1:V.y===R[P-2].y?0:-1),it.push(["L",V.x+Z*G,V.y+st*G]),it}function ft(R,G,it){return it&&(G=t.util.multiplyTransformMatrices(G,[1,0,0,1,-it.x,-it.y])),R.map(function(P){for(var V=P.slice(0),k={},N=1;N<P.length-1;N+=2)k.x=P[N],k.y=P[N+1],k=t.util.transformPoint(k,G),V[N]=k.x,V[N+1]=k.y;return V})}t.util.joinPath=function(R){return R.map(function(G){return G.join(" ")}).join(" ")},t.util.parsePath=ut,t.util.makePathSimpler=p,t.util.getSmoothPathFromPoints=pt,t.util.getPathSegmentsInfo=$,t.util.getBoundsOfCurve=A,t.util.getPointOnPath=ht,t.util.transformPath=ft}(),function(){var a=Array.prototype.slice;function n(A,g){for(var p=a.call(arguments,2),d=[],m=0,v=A.length;m<v;m++)d[m]=p.length?A[m][g].apply(A[m],p):A[m][g].call(A[m]);return d}function l(A,g){return u(A,g,function(p,d){return p>=d})}function h(A,g){return u(A,g,function(p,d){return p<d})}function o(A,g){for(var p=A.length;p--;)A[p]=g;return A}function u(A,g,p){if(!(!A||A.length===0)){var d=A.length-1,m=g?A[d][g]:A[d];if(g)for(;d--;)p(A[d][g],m)&&(m=A[d][g]);else for(;d--;)p(A[d],m)&&(m=A[d]);return m}}t.util.array={fill:o,invoke:n,min:h,max:l}}(),function(){function a(l,h,o){if(o)if(!t.isLikelyNode&&h instanceof Element)l=h;else if(h instanceof Array){l=[];for(var u=0,A=h.length;u<A;u++)l[u]=a({},h[u],o)}else if(h&&typeof h=="object")for(var g in h)g==="canvas"||g==="group"?l[g]=null:h.hasOwnProperty(g)&&(l[g]=a({},h[g],o));else l=h;else for(var g in h)l[g]=h[g];return l}function n(l,h){return a({},l,h)}t.util.object={extend:a,clone:n},t.util.object.extend(t.util,t.Observable)}(),function(){function a(u){return u.replace(/-+(.)?/g,function(A,g){return g?g.toUpperCase():""})}function n(u,A){return u.charAt(0).toUpperCase()+(A?u.slice(1):u.slice(1).toLowerCase())}function l(u){return u.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(u){var A=0,g,p=[];for(A=0,g;A<u.length;A++)(g=o(u,A))!==!1&&p.push(g);return p}function o(u,A){var g=u.charCodeAt(A);if(isNaN(g))return"";if(g<55296||g>57343)return u.charAt(A);if(55296<=g&&g<=56319){if(u.length<=A+1)throw"High surrogate without following low surrogate";var p=u.charCodeAt(A+1);if(56320>p||p>57343)throw"High surrogate without following low surrogate";return u.charAt(A)+u.charAt(A+1)}if(A===0)throw"Low surrogate without preceding high surrogate";var d=u.charCodeAt(A-1);if(55296>d||d>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:a,capitalize:n,escapeXml:l,graphemeSplit:h}}(),function(){var a=Array.prototype.slice,n=function(){},l=function(){for(var g in{toString:1})if(g==="toString")return!1;return!0}(),h=function(g,p,d){for(var m in p)m in g.prototype&&typeof g.prototype[m]=="function"&&(p[m]+"").indexOf("callSuper")>-1?g.prototype[m]=function(v){return function(){var C=this.constructor.superclass;this.constructor.superclass=d;var x=p[v].apply(this,arguments);if(this.constructor.superclass=C,v!=="initialize")return x}}(m):g.prototype[m]=p[m],l&&(p.toString!==Object.prototype.toString&&(g.prototype.toString=p.toString),p.valueOf!==Object.prototype.valueOf&&(g.prototype.valueOf=p.valueOf))};function o(){}function u(g){for(var p=null,d=this;d.constructor.superclass;){var m=d.constructor.superclass.prototype[g];if(d[g]!==m){p=m;break}d=d.constructor.superclass.prototype}return p?arguments.length>1?p.apply(this,a.call(arguments,1)):p.call(this):console.log("tried to callSuper "+g+", method not found in prototype chain",this)}function A(){var g=null,p=a.call(arguments,0);typeof p[0]=="function"&&(g=p.shift());function d(){this.initialize.apply(this,arguments)}d.superclass=g,d.subclasses=[],g&&(o.prototype=g.prototype,d.prototype=new o,g.subclasses.push(d));for(var m=0,v=p.length;m<v;m++)h(d,p[m],g);return d.prototype.initialize||(d.prototype.initialize=n),d.prototype.constructor=d,d.prototype.callSuper=u,d}t.util.createClass=A}(),function(){var a=!!t.document.createElement("div").attachEvent,n=["touchstart","touchmove","touchend"];t.util.addListener=function(h,o,u,A){h&&h.addEventListener(o,u,a?!1:A)},t.util.removeListener=function(h,o,u,A){h&&h.removeEventListener(o,u,a?!1:A)};function l(h){var o=h.changedTouches;return o&&o[0]?o[0]:h}t.util.getPointer=function(h){var o=h.target,u=t.util.getScrollLeftTop(o),A=l(h);return{x:A.clientX+u.left,y:A.clientY+u.top}},t.util.isTouchEvent=function(h){return n.indexOf(h.type)>-1||h.pointerType==="touch"}}(),function(){function a(A,g){var p=A.style;if(!p)return A;if(typeof g=="string")return A.style.cssText+=";"+g,g.indexOf("opacity")>-1?u(A,g.match(/opacity:\s*(\d?\.?\d*)/)[1]):A;for(var d in g)if(d==="opacity")u(A,g[d]);else{var m=d==="float"||d==="cssFloat"?typeof p.styleFloat>"u"?"cssFloat":"styleFloat":d;p.setProperty(m,g[d])}return A}var n=t.document.createElement("div"),l=typeof n.style.opacity=="string",h=typeof n.style.filter=="string",o=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,u=function(A){return A};l?u=function(A,g){return A.style.opacity=g,A}:h&&(u=function(A,g){var p=A.style;return A.currentStyle&&!A.currentStyle.hasLayout&&(p.zoom=1),o.test(p.filter)?(g=g>=.9999?"":"alpha(opacity="+g*100+")",p.filter=p.filter.replace(o,g)):p.filter+=" alpha(opacity="+g*100+")",A}),t.util.setStyle=a}(),function(){var a=Array.prototype.slice;function n(x){return typeof x=="string"?t.document.getElementById(x):x}var l,h=function(x){return a.call(x,0)};try{l=h(t.document.childNodes)instanceof Array}catch{}l||(h=function(x){for(var E=new Array(x.length),L=x.length;L--;)E[L]=x[L];return E});function o(x,E){var L=t.document.createElement(x);for(var U in E)U==="class"?L.className=E[U]:U==="for"?L.htmlFor=E[U]:L.setAttribute(U,E[U]);return L}function u(x,E){x&&(" "+x.className+" ").indexOf(" "+E+" ")===-1&&(x.className+=(x.className?" ":"")+E)}function A(x,E,L){return typeof E=="string"&&(E=o(E,L)),x.parentNode&&x.parentNode.replaceChild(E,x),E.appendChild(x),E}function g(x){for(var E=0,L=0,U=t.document.documentElement,O=t.document.body||{scrollLeft:0,scrollTop:0};x&&(x.parentNode||x.host)&&(x=x.parentNode||x.host,x===t.document?(E=O.scrollLeft||U.scrollLeft||0,L=O.scrollTop||U.scrollTop||0):(E+=x.scrollLeft||0,L+=x.scrollTop||0),!(x.nodeType===1&&x.style.position==="fixed")););return{left:E,top:L}}function p(x){var E,L=x&&x.ownerDocument,U={left:0,top:0},O={left:0,top:0},X,rt={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!L)return O;for(var M in rt)O[rt[M]]+=parseInt(d(x,M),10)||0;return E=L.documentElement,typeof x.getBoundingClientRect<"u"&&(U=x.getBoundingClientRect()),X=g(x),{left:U.left+X.left-(E.clientLeft||0)+O.left,top:U.top+X.top-(E.clientTop||0)+O.top}}var d;t.document.defaultView&&t.document.defaultView.getComputedStyle?d=function(x,E){var L=t.document.defaultView.getComputedStyle(x,null);return L?L[E]:void 0}:d=function(x,E){var L=x.style[E];return!L&&x.currentStyle&&(L=x.currentStyle[E]),L},function(){var x=t.document.documentElement.style,E="userSelect"in x?"userSelect":"MozUserSelect"in x?"MozUserSelect":"WebkitUserSelect"in x?"WebkitUserSelect":"KhtmlUserSelect"in x?"KhtmlUserSelect":"";function L(O){return typeof O.onselectstart<"u"&&(O.onselectstart=t.util.falseFunction),E?O.style[E]="none":typeof O.unselectable=="string"&&(O.unselectable="on"),O}function U(O){return typeof O.onselectstart<"u"&&(O.onselectstart=null),E?O.style[E]="":typeof O.unselectable=="string"&&(O.unselectable=""),O}t.util.makeElementUnselectable=L,t.util.makeElementSelectable=U}();function m(x){var E=t.jsdomImplForWrapper(x);return E._canvas||E._image}function v(x){if(t.isLikelyNode){var E=t.jsdomImplForWrapper(x);E&&(E._image=null,E._canvas=null,E._currentSrc=null,E._attributes=null,E._classList=null)}}function C(x,E){x.imageSmoothingEnabled=x.imageSmoothingEnabled||x.webkitImageSmoothingEnabled||x.mozImageSmoothingEnabled||x.msImageSmoothingEnabled||x.oImageSmoothingEnabled,x.imageSmoothingEnabled=E}t.util.setImageSmoothing=C,t.util.getById=n,t.util.toArray=h,t.util.addClass=u,t.util.makeElement=o,t.util.wrapElement=A,t.util.getScrollLeftTop=g,t.util.getElementOffset=p,t.util.getNodeCanvas=m,t.util.cleanUpJsdomNode=v}(),function(){function a(h,o){return h+(/\?/.test(h)?"&":"?")+o}function n(){}function l(h,o){o||(o={});var u=o.method?o.method.toUpperCase():"GET",A=o.onComplete||function(){},g=new t.window.XMLHttpRequest,p=o.body||o.parameters;return g.onreadystatechange=function(){g.readyState===4&&(A(g),g.onreadystatechange=n)},u==="GET"&&(p=null,typeof o.parameters=="string"&&(h=a(h,o.parameters))),g.open(u,h,!0),(u==="POST"||u==="PUT")&&g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),g.send(p),g}t.util.request=l}(),t.log=console.log,t.warn=console.warn,function(){var a=t.util.object.extend,n=t.util.object.clone,l=[];t.util.object.extend(l,{cancelAll:function(){var m=this.splice(0);return m.forEach(function(v){v.cancel()}),m},cancelByCanvas:function(m){if(!m)return[];var v=this.filter(function(C){return typeof C.target=="object"&&C.target.canvas===m});return v.forEach(function(C){C.cancel()}),v},cancelByTarget:function(m){var v=this.findAnimationsByTarget(m);return v.forEach(function(C){C.cancel()}),v},findAnimationIndex:function(m){return this.indexOf(this.findAnimation(m))},findAnimation:function(m){return this.find(function(v){return v.cancel===m})},findAnimationsByTarget:function(m){return m?this.filter(function(v){return v.target===m}):[]}});function h(){return!1}function o(m,v,C,x){return-C*Math.cos(m/x*(Math.PI/2))+C+v}function u(m){m||(m={});var v=!1,C,x=function(){var E=t.runningAnimations.indexOf(C);return E>-1&&t.runningAnimations.splice(E,1)[0]};return C=a(n(m),{cancel:function(){return v=!0,x()},currentValue:"startValue"in m?m.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(C),p(function(E){var L=E||+new Date,U=m.duration||500,O=L+U,X,rt=m.onChange||h,M=m.abort||h,H=m.onComplete||h,J=m.easing||o,$="startValue"in m?m.startValue.length>0:!1,ht="startValue"in m?m.startValue:0,ut="endValue"in m?m.endValue:100,pt=m.byValue||($?ht.map(function(ft,R){return ut[R]-ht[R]}):ut-ht);m.onStart&&m.onStart(),function ft(R){X=R||+new Date;var G=X>O?U:X-L,it=G/U,P=$?ht.map(function(k,N){return J(G,ht[N],pt[N],U)}):J(G,ht,pt,U),V=Math.abs($?(P[0]-ht[0])/pt[0]:(P-ht)/pt);if(C.currentValue=$?P.slice():P,C.completionRate=V,C.durationRate=it,!v){if(M(P,V,it)){x();return}if(X>O){C.currentValue=$?ut.slice():ut,C.completionRate=1,C.durationRate=1,rt($?ut.slice():ut,1,1),H(ut,1,1),x();return}else rt(P,V,it),p(ft)}}(L)}),C.cancel}var A=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(m){return t.window.setTimeout(m,1e3/60)},g=t.window.cancelAnimationFrame||t.window.clearTimeout;function p(){return A.apply(t.window,arguments)}function d(){return g.apply(t.window,arguments)}t.util.animate=u,t.util.requestAnimFrame=p,t.util.cancelAnimFrame=d,t.runningAnimations=l}(),function(){function a(l,h,o){var u="rgba("+parseInt(l[0]+o*(h[0]-l[0]),10)+","+parseInt(l[1]+o*(h[1]-l[1]),10)+","+parseInt(l[2]+o*(h[2]-l[2]),10);return u+=","+(l&&h?parseFloat(l[3]+o*(h[3]-l[3])):1),u+=")",u}function n(l,h,o,u){var A=new t.Color(l).getSource(),g=new t.Color(h).getSource(),p=u.onComplete,d=u.onChange;return u=u||{},t.util.animate(t.util.object.extend(u,{duration:o||500,startValue:A,endValue:g,byValue:g,easing:function(m,v,C,x){var E=u.colorEasing?u.colorEasing(m,x):1-Math.cos(m/x*(Math.PI/2));return a(v,C,E)},onComplete:function(m,v,C){if(p)return p(a(g,g,0),v,C)},onChange:function(m,v,C){if(d){if(Array.isArray(m))return d(a(m,m,0),v,C);d(m,v,C)}}}))}t.util.animateColor=n}(),function(){function a(R,G,it,P){return R<Math.abs(G)?(R=G,P=it/4):G===0&&R===0?P=it/(2*Math.PI)*Math.asin(1):P=it/(2*Math.PI)*Math.asin(G/R),{a:R,c:G,p:it,s:P}}function n(R,G,it){return R.a*Math.pow(2,10*(G-=1))*Math.sin((G*it-R.s)*(2*Math.PI)/R.p)}function l(R,G,it,P){return it*((R=R/P-1)*R*R+1)+G}function h(R,G,it,P){return R/=P/2,R<1?it/2*R*R*R+G:it/2*((R-=2)*R*R+2)+G}function o(R,G,it,P){return it*(R/=P)*R*R*R+G}function u(R,G,it,P){return-it*((R=R/P-1)*R*R*R-1)+G}function A(R,G,it,P){return R/=P/2,R<1?it/2*R*R*R*R+G:-it/2*((R-=2)*R*R*R-2)+G}function g(R,G,it,P){return it*(R/=P)*R*R*R*R+G}function p(R,G,it,P){return it*((R=R/P-1)*R*R*R*R+1)+G}function d(R,G,it,P){return R/=P/2,R<1?it/2*R*R*R*R*R+G:it/2*((R-=2)*R*R*R*R+2)+G}function m(R,G,it,P){return-it*Math.cos(R/P*(Math.PI/2))+it+G}function v(R,G,it,P){return it*Math.sin(R/P*(Math.PI/2))+G}function C(R,G,it,P){return-it/2*(Math.cos(Math.PI*R/P)-1)+G}function x(R,G,it,P){return R===0?G:it*Math.pow(2,10*(R/P-1))+G}function E(R,G,it,P){return R===P?G+it:it*(-Math.pow(2,-10*R/P)+1)+G}function L(R,G,it,P){return R===0?G:R===P?G+it:(R/=P/2,R<1?it/2*Math.pow(2,10*(R-1))+G:it/2*(-Math.pow(2,-10*--R)+2)+G)}function U(R,G,it,P){return-it*(Math.sqrt(1-(R/=P)*R)-1)+G}function O(R,G,it,P){return it*Math.sqrt(1-(R=R/P-1)*R)+G}function X(R,G,it,P){return R/=P/2,R<1?-it/2*(Math.sqrt(1-R*R)-1)+G:it/2*(Math.sqrt(1-(R-=2)*R)+1)+G}function rt(R,G,it,P){var V=1.70158,k=0,N=it;if(R===0)return G;if(R/=P,R===1)return G+it;k||(k=P*.3);var Z=a(N,it,k,V);return-n(Z,R,P)+G}function M(R,G,it,P){var V=1.70158,k=0,N=it;if(R===0)return G;if(R/=P,R===1)return G+it;k||(k=P*.3);var Z=a(N,it,k,V);return Z.a*Math.pow(2,-10*R)*Math.sin((R*P-Z.s)*(2*Math.PI)/Z.p)+Z.c+G}function H(R,G,it,P){var V=1.70158,k=0,N=it;if(R===0)return G;if(R/=P/2,R===2)return G+it;k||(k=P*(.3*1.5));var Z=a(N,it,k,V);return R<1?-.5*n(Z,R,P)+G:Z.a*Math.pow(2,-10*(R-=1))*Math.sin((R*P-Z.s)*(2*Math.PI)/Z.p)*.5+Z.c+G}function J(R,G,it,P,V){return V===void 0&&(V=1.70158),it*(R/=P)*R*((V+1)*R-V)+G}function $(R,G,it,P,V){return V===void 0&&(V=1.70158),it*((R=R/P-1)*R*((V+1)*R+V)+1)+G}function ht(R,G,it,P,V){return V===void 0&&(V=1.70158),R/=P/2,R<1?it/2*(R*R*(((V*=1.525)+1)*R-V))+G:it/2*((R-=2)*R*(((V*=1.525)+1)*R+V)+2)+G}function ut(R,G,it,P){return it-pt(P-R,0,it,P)+G}function pt(R,G,it,P){return(R/=P)<1/2.75?it*(7.5625*R*R)+G:R<2/2.75?it*(7.5625*(R-=1.5/2.75)*R+.75)+G:R<2.5/2.75?it*(7.5625*(R-=2.25/2.75)*R+.9375)+G:it*(7.5625*(R-=2.625/2.75)*R+.984375)+G}function ft(R,G,it,P){return R<P/2?ut(R*2,0,it,P)*.5+G:pt(R*2-P,0,it,P)*.5+it*.5+G}t.util.ease={easeInQuad:function(R,G,it,P){return it*(R/=P)*R+G},easeOutQuad:function(R,G,it,P){return-it*(R/=P)*(R-2)+G},easeInOutQuad:function(R,G,it,P){return R/=P/2,R<1?it/2*R*R+G:-it/2*(--R*(R-2)-1)+G},easeInCubic:function(R,G,it,P){return it*(R/=P)*R*R+G},easeOutCubic:l,easeInOutCubic:h,easeInQuart:o,easeOutQuart:u,easeInOutQuart:A,easeInQuint:g,easeOutQuint:p,easeInOutQuint:d,easeInSine:m,easeOutSine:v,easeInOutSine:C,easeInExpo:x,easeOutExpo:E,easeInOutExpo:L,easeInCirc:U,easeOutCirc:O,easeInOutCirc:X,easeInElastic:rt,easeOutElastic:M,easeInOutElastic:H,easeInBack:J,easeOutBack:$,easeInOutBack:ht,easeInBounce:ut,easeOutBounce:pt,easeInOutBounce:ft}}(),function(a){var n=a.fabric||(a.fabric={}),l=n.util.object.extend,h=n.util.object.clone,o=n.util.toFixed,u=n.util.parseUnit,A=n.util.multiplyTransformMatrices,g=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],p=["symbol","image","marker","pattern","view","svg"],d=["pattern","defs","symbol","metadata","clipPath","mask","desc"],m=["symbol","g","a","svg","clipPath","defs"],v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},C={stroke:"strokeOpacity",fill:"fillOpacity"},x="font-size",E="clip-path";n.svgValidTagNamesRegEx=O(g),n.svgViewBoxElementsRegEx=O(p),n.svgInvalidAncestorsRegEx=O(d),n.svgValidParentsRegEx=O(m),n.cssRules={},n.gradientDefs={},n.clipPaths={};function L(k){return k in v?v[k]:k}function U(k,N,Z,st){var ct=Array.isArray(N),ot;if((k==="fill"||k==="stroke")&&N==="none")N="";else{if(k==="strokeUniform")return N==="non-scaling-stroke";if(k==="strokeDashArray")N==="none"?N=null:N=N.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(k==="transformMatrix")Z&&Z.transformMatrix?N=A(Z.transformMatrix,n.parseTransformAttribute(N)):N=n.parseTransformAttribute(N);else if(k==="visible")N=N!=="none"&&N!=="hidden",Z&&Z.visible===!1&&(N=!1);else if(k==="opacity")N=parseFloat(N),Z&&typeof Z.opacity<"u"&&(N*=Z.opacity);else if(k==="textAnchor")N=N==="start"?"left":N==="end"?"right":"center";else if(k==="charSpacing")ot=u(N,st)/st*1e3;else if(k==="paintFirst"){var wt=N.indexOf("fill"),_t=N.indexOf("stroke"),N="fill";(wt>-1&&_t>-1&&_t<wt||wt===-1&&_t>-1)&&(N="stroke")}else{if(k==="href"||k==="xlink:href"||k==="font")return N;if(k==="imageSmoothing")return N==="optimizeQuality";ot=ct?N.map(u):u(N,st)}}return!ct&&isNaN(ot)?N:ot}function O(k){return new RegExp("^("+k.join("|")+")\\b","i")}function X(k){for(var N in C)if(!(typeof k[C[N]]>"u"||k[N]==="")){if(typeof k[N]>"u"){if(!n.Object.prototype[N])continue;k[N]=n.Object.prototype[N]}if(k[N].indexOf("url(")!==0){var Z=new n.Color(k[N]);k[N]=Z.setAlpha(o(Z.getAlpha()*k[C[N]],2)).toRgba()}}return k}function rt(k,N){var Z,st=[],ct,ot,wt;for(ot=0,wt=N.length;ot<wt;ot++)Z=N[ot],ct=k.getElementsByTagName(Z),st=st.concat(Array.prototype.slice.call(ct));return st}n.parseTransformAttribute=function(){function k(bt,Kt){var Zt=n.util.cos(Kt[0]),le=n.util.sin(Kt[0]),pe=0,Rt=0;Kt.length===3&&(pe=Kt[1],Rt=Kt[2]),bt[0]=Zt,bt[1]=le,bt[2]=-le,bt[3]=Zt,bt[4]=pe-(Zt*pe-le*Rt),bt[5]=Rt-(le*pe+Zt*Rt)}function N(bt,Kt){var Zt=Kt[0],le=Kt.length===2?Kt[1]:Kt[0];bt[0]=Zt,bt[3]=le}function Z(bt,Kt,Zt){bt[Zt]=Math.tan(n.util.degreesToRadians(Kt[0]))}function st(bt,Kt){bt[4]=Kt[0],Kt.length===2&&(bt[5]=Kt[1])}var ct=n.iMatrix,ot=n.reNum,wt=n.commaWsp,_t="(?:(skewX)\\s*\\(\\s*("+ot+")\\s*\\))",Nt="(?:(skewY)\\s*\\(\\s*("+ot+")\\s*\\))",vt="(?:(rotate)\\s*\\(\\s*("+ot+")(?:"+wt+"("+ot+")"+wt+"("+ot+"))?\\s*\\))",mt="(?:(scale)\\s*\\(\\s*("+ot+")(?:"+wt+"("+ot+"))?\\s*\\))",gt="(?:(translate)\\s*\\(\\s*("+ot+")(?:"+wt+"("+ot+"))?\\s*\\))",tt="(?:(matrix)\\s*\\(\\s*("+ot+")"+wt+"("+ot+")"+wt+"("+ot+")"+wt+"("+ot+")"+wt+"("+ot+")"+wt+"("+ot+")\\s*\\))",It="(?:"+tt+"|"+gt+"|"+mt+"|"+vt+"|"+_t+"|"+Nt+")",Pt="(?:"+It+"(?:"+wt+"*"+It+")*)",Ut="^\\s*(?:"+Pt+"?)\\s*$",Gt=new RegExp(Ut),Dt=new RegExp(It,"g");return function(bt){var Kt=ct.concat(),Zt=[];if(!bt||bt&&!Gt.test(bt))return Kt;bt.replace(Dt,function(pe){var Rt=new RegExp(It).exec(pe).filter(function(ae){return!!ae}),zt=Rt[1],Xt=Rt.slice(2).map(parseFloat);switch(zt){case"translate":st(Kt,Xt);break;case"rotate":Xt[0]=n.util.degreesToRadians(Xt[0]),k(Kt,Xt);break;case"scale":N(Kt,Xt);break;case"skewX":Z(Kt,Xt,2);break;case"skewY":Z(Kt,Xt,1);break;case"matrix":Kt=Xt;break}Zt.push(Kt.concat()),Kt=ct.concat()});for(var le=Zt[0];Zt.length>1;)Zt.shift(),le=n.util.multiplyTransformMatrices(le,Zt[0]);return le}}();function M(k,N){var Z,st;k.replace(/;\s*$/,"").split(";").forEach(function(ct){var ot=ct.split(":");Z=ot[0].trim().toLowerCase(),st=ot[1].trim(),N[Z]=st})}function H(k,N){var Z,st;for(var ct in k)typeof k[ct]>"u"||(Z=ct.toLowerCase(),st=k[ct],N[Z]=st)}function J(k,N){var Z={};for(var st in n.cssRules[N])if($(k,st.split(" ")))for(var ct in n.cssRules[N][st])Z[ct]=n.cssRules[N][st][ct];return Z}function $(k,N){var Z,st=!0;return Z=ut(k,N.pop()),Z&&N.length&&(st=ht(k,N)),Z&&st&&N.length===0}function ht(k,N){for(var Z,st=!0;k.parentNode&&k.parentNode.nodeType===1&&N.length;)st&&(Z=N.pop()),k=k.parentNode,st=ut(k,Z);return N.length===0}function ut(k,N){var Z=k.nodeName,st=k.getAttribute("class"),ct=k.getAttribute("id"),ot,wt;if(ot=new RegExp("^"+Z,"i"),N=N.replace(ot,""),ct&&N.length&&(ot=new RegExp("#"+ct+"(?![a-zA-Z\\-]+)","i"),N=N.replace(ot,"")),st&&N.length)for(st=st.split(" "),wt=st.length;wt--;)ot=new RegExp("\\."+st[wt]+"(?![a-zA-Z\\-]+)","i"),N=N.replace(ot,"");return N.length===0}function pt(k,N){var Z;if(k.getElementById&&(Z=k.getElementById(N)),Z)return Z;var st,ct,ot,wt=k.getElementsByTagName("*");for(ct=0,ot=wt.length;ct<ot;ct++)if(st=wt[ct],N===st.getAttribute("id"))return st}function ft(k){for(var N=rt(k,["use","svg:use"]),Z=0;N.length&&Z<N.length;){var st=N[Z],ct=st.getAttribute("xlink:href")||st.getAttribute("href");if(ct===null)return;var ot=ct.slice(1),wt=st.getAttribute("x")||0,_t=st.getAttribute("y")||0,Nt=pt(k,ot).cloneNode(!0),vt=(Nt.getAttribute("transform")||"")+" translate("+wt+", "+_t+")",mt,gt=N.length,tt,It,Pt,Ut,Gt=n.svgNS;if(G(Nt),/^svg$/i.test(Nt.nodeName)){var Dt=Nt.ownerDocument.createElementNS(Gt,"g");for(It=0,Pt=Nt.attributes,Ut=Pt.length;It<Ut;It++)tt=Pt.item(It),Dt.setAttributeNS(Gt,tt.nodeName,tt.nodeValue);for(;Nt.firstChild;)Dt.appendChild(Nt.firstChild);Nt=Dt}for(It=0,Pt=st.attributes,Ut=Pt.length;It<Ut;It++)tt=Pt.item(It),!(tt.nodeName==="x"||tt.nodeName==="y"||tt.nodeName==="xlink:href"||tt.nodeName==="href")&&(tt.nodeName==="transform"?vt=tt.nodeValue+" "+vt:Nt.setAttribute(tt.nodeName,tt.nodeValue));Nt.setAttribute("transform",vt),Nt.setAttribute("instantiated_by_use","1"),Nt.removeAttribute("id"),mt=st.parentNode,mt.replaceChild(Nt,st),N.length===gt&&Z++}}var R=new RegExp("^\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*$");function G(k){if(!n.svgViewBoxElementsRegEx.test(k.nodeName))return{};var N=k.getAttribute("viewBox"),Z=1,st=1,ct=0,ot=0,wt,_t,Nt,vt,mt=k.getAttribute("width"),gt=k.getAttribute("height"),tt=k.getAttribute("x")||0,It=k.getAttribute("y")||0,Pt=k.getAttribute("preserveAspectRatio")||"",Ut=!N||!(N=N.match(R)),Gt=!mt||!gt||mt==="100%"||gt==="100%",Dt=Ut&&Gt,bt={},Kt="",Zt=0,le=0;if(bt.width=0,bt.height=0,bt.toBeParsed=Dt,Ut&&(tt||It)&&k.parentNode&&k.parentNode.nodeName!=="#document"&&(Kt=" translate("+u(tt)+" "+u(It)+") ",Nt=(k.getAttribute("transform")||"")+Kt,k.setAttribute("transform",Nt),k.removeAttribute("x"),k.removeAttribute("y")),Dt)return bt;if(Ut)return bt.width=u(mt),bt.height=u(gt),bt;if(ct=-parseFloat(N[1]),ot=-parseFloat(N[2]),wt=parseFloat(N[3]),_t=parseFloat(N[4]),bt.minX=ct,bt.minY=ot,bt.viewBoxWidth=wt,bt.viewBoxHeight=_t,Gt?(bt.width=wt,bt.height=_t):(bt.width=u(mt),bt.height=u(gt),Z=bt.width/wt,st=bt.height/_t),Pt=n.util.parsePreserveAspectRatioAttribute(Pt),Pt.alignX!=="none"&&(Pt.meetOrSlice==="meet"&&(st=Z=Z>st?st:Z),Pt.meetOrSlice==="slice"&&(st=Z=Z>st?Z:st),Zt=bt.width-wt*Z,le=bt.height-_t*Z,Pt.alignX==="Mid"&&(Zt/=2),Pt.alignY==="Mid"&&(le/=2),Pt.alignX==="Min"&&(Zt=0),Pt.alignY==="Min"&&(le=0)),Z===1&&st===1&&ct===0&&ot===0&&tt===0&&It===0)return bt;if((tt||It)&&k.parentNode.nodeName!=="#document"&&(Kt=" translate("+u(tt)+" "+u(It)+") "),Nt=Kt+" matrix("+Z+" 0 0 "+st+" "+(ct*Z+Zt)+" "+(ot*st+le)+") ",k.nodeName==="svg"){for(vt=k.ownerDocument.createElementNS(n.svgNS,"g");k.firstChild;)vt.appendChild(k.firstChild);k.appendChild(vt)}else vt=k,vt.removeAttribute("x"),vt.removeAttribute("y"),Nt=vt.getAttribute("transform")+Nt;return vt.setAttribute("transform",Nt),bt}function it(k,N){for(;k&&(k=k.parentNode);)if(k.nodeName&&N.test(k.nodeName.replace("svg:",""))&&!k.getAttribute("instantiated_by_use"))return!0;return!1}n.parseSVGDocument=function(k,N,Z,st){if(k){ft(k);var ct=n.Object.__uid++,ot,wt,_t=G(k),Nt=n.util.toArray(k.getElementsByTagName("*"));if(_t.crossOrigin=st&&st.crossOrigin,_t.svgUid=ct,Nt.length===0&&n.isLikelyNode){Nt=k.selectNodes('//*[name(.)!="svg"]');var vt=[];for(ot=0,wt=Nt.length;ot<wt;ot++)vt[ot]=Nt[ot];Nt=vt}var mt=Nt.filter(function(tt){return G(tt),n.svgValidTagNamesRegEx.test(tt.nodeName.replace("svg:",""))&&!it(tt,n.svgInvalidAncestorsRegEx)});if(!mt||mt&&!mt.length){N&&N([],{});return}var gt={};Nt.filter(function(tt){return tt.nodeName.replace("svg:","")==="clipPath"}).forEach(function(tt){var It=tt.getAttribute("id");gt[It]=n.util.toArray(tt.getElementsByTagName("*")).filter(function(Pt){return n.svgValidTagNamesRegEx.test(Pt.nodeName.replace("svg:",""))})}),n.gradientDefs[ct]=n.getGradientDefs(k),n.cssRules[ct]=n.getCSSRules(k),n.clipPaths[ct]=gt,n.parseElements(mt,function(tt,It){N&&(N(tt,_t,It,Nt),delete n.gradientDefs[ct],delete n.cssRules[ct],delete n.clipPaths[ct])},h(_t),Z,st)}};function P(k,N){var Z=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],st="xlink:href",ct=N.getAttribute(st).slice(1),ot=pt(k,ct);if(ot&&ot.getAttribute(st)&&P(k,ot),Z.forEach(function(_t){ot&&!N.hasAttribute(_t)&&ot.hasAttribute(_t)&&N.setAttribute(_t,ot.getAttribute(_t))}),!N.children.length)for(var wt=ot.cloneNode(!0);wt.firstChild;)N.appendChild(wt.firstChild);N.removeAttribute(st)}var V=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+n.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+n.reNum+"))?\\s+(.*)");l(n,{parseFontDeclaration:function(k,N){var Z=k.match(V);if(Z){var st=Z[1],ct=Z[3],ot=Z[4],wt=Z[5],_t=Z[6];st&&(N.fontStyle=st),ct&&(N.fontWeight=isNaN(parseFloat(ct))?ct:parseFloat(ct)),ot&&(N.fontSize=u(ot)),_t&&(N.fontFamily=_t),wt&&(N.lineHeight=wt==="normal"?1:wt)}},getGradientDefs:function(k){var N=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],Z=rt(k,N),st,ct=0,ot={};for(ct=Z.length;ct--;)st=Z[ct],st.getAttribute("xlink:href")&&P(k,st),ot[st.getAttribute("id")]=st;return ot},parseAttributes:function(k,N,Z){if(k){var st,ct={},ot,wt;typeof Z>"u"&&(Z=k.getAttribute("svgUid")),k.parentNode&&n.svgValidParentsRegEx.test(k.parentNode.nodeName)&&(ct=n.parseAttributes(k.parentNode,N,Z));var _t=N.reduce(function(Pt,Ut){return st=k.getAttribute(Ut),st&&(Pt[Ut]=st),Pt},{}),Nt=l(J(k,Z),n.parseStyleAttribute(k));_t=l(_t,Nt),Nt[E]&&k.setAttribute(E,Nt[E]),ot=wt=ct.fontSize||n.Text.DEFAULT_SVG_FONT_SIZE,_t[x]&&(_t[x]=ot=u(_t[x],wt));var vt,mt,gt={};for(var tt in _t)vt=L(tt),mt=U(vt,_t[tt],ct,ot),gt[vt]=mt;gt&&gt.font&&n.parseFontDeclaration(gt.font,gt);var It=l(ct,gt);return n.svgValidParentsRegEx.test(k.nodeName)?It:X(It)}},parseElements:function(k,N,Z,st,ct){new n.ElementsParser(k,N,Z,st,ct).parse()},parseStyleAttribute:function(k){var N={},Z=k.getAttribute("style");return Z&&(typeof Z=="string"?M(Z,N):H(Z,N)),N},parsePointsAttribute:function(k){if(!k)return null;k=k.replace(/,/g," ").trim(),k=k.split(/\s+/);var N=[],Z,st;for(Z=0,st=k.length;Z<st;Z+=2)N.push({x:parseFloat(k[Z]),y:parseFloat(k[Z+1])});return N},getCSSRules:function(k){var N=k.getElementsByTagName("style"),Z,st,ct={},ot;for(Z=0,st=N.length;Z<st;Z++){var wt=N[Z].textContent;wt=wt.replace(/\/\*[\s\S]*?\*\//g,""),wt.trim()!==""&&(ot=wt.split("}"),ot=ot.filter(function(_t){return _t.trim()}),ot.forEach(function(_t){var Nt=_t.split("{"),vt={},mt=Nt[1].trim(),gt=mt.split(";").filter(function(Ut){return Ut.trim()});for(Z=0,st=gt.length;Z<st;Z++){var tt=gt[Z].split(":"),It=tt[0].trim(),Pt=tt[1].trim();vt[It]=Pt}_t=Nt[0].trim(),_t.split(",").forEach(function(Ut){Ut=Ut.replace(/^svg/i,"").trim(),Ut!==""&&(ct[Ut]?n.util.object.extend(ct[Ut],vt):ct[Ut]=n.util.object.clone(vt))})}))}return ct},loadSVGFromURL:function(k,N,Z,st){k=k.replace(/^\n\s*/,"").trim(),new n.util.request(k,{method:"get",onComplete:ct});function ct(ot){var wt=ot.responseXML;if(!wt||!wt.documentElement)return N&&N(null),!1;n.parseSVGDocument(wt.documentElement,function(_t,Nt,vt,mt){N&&N(_t,Nt,vt,mt)},Z,st)}},loadSVGFromString:function(k,N,Z,st){var ct=new n.window.DOMParser,ot=ct.parseFromString(k.trim(),"text/xml");n.parseSVGDocument(ot.documentElement,function(wt,_t,Nt,vt){N(wt,_t,Nt,vt)},Z,st)}})}(r),t.ElementsParser=function(a,n,l,h,o,u){this.elements=a,this.callback=n,this.options=l,this.reviver=h,this.svgUid=l&&l.svgUid||0,this.parsingOptions=o,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=u},function(a){a.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},a.createObjects=function(){var n=this;this.elements.forEach(function(l,h){l.setAttribute("svgUid",n.svgUid),n.createObject(l,h)})},a.findTag=function(n){return t[t.util.string.capitalize(n.tagName.replace("svg:",""))]},a.createObject=function(n,l){var h=this.findTag(n);if(h&&h.fromElement)try{h.fromElement(n,this.createCallback(l,n),this.options)}catch(o){t.log(o)}else this.checkIfDone()},a.createCallback=function(n,l){var h=this;return function(o){var u;h.resolveGradient(o,l,"fill"),h.resolveGradient(o,l,"stroke"),o instanceof t.Image&&o._originalElement&&(u=o.parsePreserveAspectRatioAttribute(l)),o._removeTransformMatrix(u),h.resolveClipPath(o,l),h.reviver&&h.reviver(l,o),h.instances[n]=o,h.checkIfDone()}},a.extractPropertyDefinition=function(n,l,h){var o=n[l],u=this.regexUrl;if(u.test(o)){u.lastIndex=0;var A=u.exec(o)[1];return u.lastIndex=0,t[h][this.svgUid][A]}},a.resolveGradient=function(n,l,h){var o=this.extractPropertyDefinition(n,h,"gradientDefs");if(o){var u=l.getAttribute(h+"-opacity"),A=t.Gradient.fromElement(o,n,u,this.options);n.set(h,A)}},a.createClipPathCallback=function(n,l){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,l.push(h)}},a.resolveClipPath=function(n,l){var h=this.extractPropertyDefinition(n,"clipPath","clipPaths"),o,u,A,g,p,d;if(h){g=[],A=t.util.invertTransform(n.calcTransformMatrix());for(var m=h[0].parentNode,v=l;v.parentNode&&v.getAttribute("clip-path")!==n.clipPath;)v=v.parentNode;v.parentNode.appendChild(m);for(var C=0;C<h.length;C++)o=h[C],u=this.findTag(o),u.fromElement(o,this.createClipPathCallback(n,g),this.options);g.length===1?h=g[0]:h=new t.Group(g),p=t.util.multiplyTransformMatrices(A,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,v);var d=t.util.qrDecompose(p);h.flipX=!1,h.flipY=!1,h.set("scaleX",d.scaleX),h.set("scaleY",d.scaleY),h.angle=d.angle,h.skewX=d.skewX,h.skewY=0,h.setPositionByOrigin({x:d.translateX,y:d.translateY},"center","center"),n.clipPath=h}else delete n.clipPath},a.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(n){return n!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(a){var n=a.fabric||(a.fabric={});if(n.Point){n.warn("fabric.Point is already defined");return}n.Point=l;function l(h,o){this.x=h,this.y=o}l.prototype={type:"point",constructor:l,add:function(h){return new l(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new l(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new l(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new l(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new l(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new l(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,o){return typeof o>"u"&&(o=.5),o=Math.max(Math.min(1,o),0),new l(this.x+(h.x-this.x)*o,this.y+(h.y-this.y)*o)},distanceFrom:function(h){var o=this.x-h.x,u=this.y-h.y;return Math.sqrt(o*o+u*u)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new l(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new l(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,o){return this.x=h,this.y=o,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var o=this.x,u=this.y;this.x=h.x,this.y=h.y,h.x=o,h.y=u},clone:function(){return new l(this.x,this.y)}}}(r),function(a){var n=a.fabric||(a.fabric={});if(n.Intersection){n.warn("fabric.Intersection is already defined");return}function l(h){this.status=h,this.points=[]}n.Intersection=l,n.Intersection.prototype={constructor:l,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},n.Intersection.intersectLineLine=function(h,o,u,A){var g,p=(A.x-u.x)*(h.y-u.y)-(A.y-u.y)*(h.x-u.x),d=(o.x-h.x)*(h.y-u.y)-(o.y-h.y)*(h.x-u.x),m=(A.y-u.y)*(o.x-h.x)-(A.x-u.x)*(o.y-h.y);if(m!==0){var v=p/m,C=d/m;0<=v&&v<=1&&0<=C&&C<=1?(g=new l("Intersection"),g.appendPoint(new n.Point(h.x+v*(o.x-h.x),h.y+v*(o.y-h.y)))):g=new l}else p===0||d===0?g=new l("Coincident"):g=new l("Parallel");return g},n.Intersection.intersectLinePolygon=function(h,o,u){var A=new l,g=u.length,p,d,m,v;for(v=0;v<g;v++)p=u[v],d=u[(v+1)%g],m=l.intersectLineLine(h,o,p,d),A.appendPoints(m.points);return A.points.length>0&&(A.status="Intersection"),A},n.Intersection.intersectPolygonPolygon=function(h,o){var u=new l,A=h.length,g;for(g=0;g<A;g++){var p=h[g],d=h[(g+1)%A],m=l.intersectLinePolygon(p,d,o);u.appendPoints(m.points)}return u.points.length>0&&(u.status="Intersection"),u},n.Intersection.intersectPolygonRectangle=function(h,o,u){var A=o.min(u),g=o.max(u),p=new n.Point(g.x,A.y),d=new n.Point(A.x,g.y),m=l.intersectLinePolygon(A,p,h),v=l.intersectLinePolygon(p,g,h),C=l.intersectLinePolygon(g,d,h),x=l.intersectLinePolygon(d,A,h),E=new l;return E.appendPoints(m.points),E.appendPoints(v.points),E.appendPoints(C.points),E.appendPoints(x.points),E.points.length>0&&(E.status="Intersection"),E}}(r),function(a){var n=a.fabric||(a.fabric={});if(n.Color){n.warn("fabric.Color is already defined.");return}function l(o){o?this._tryParsingColor(o):this.setSource([0,0,0,1])}n.Color=l,n.Color.prototype={_tryParsingColor:function(o){var u;o in l.colorNameMap&&(o=l.colorNameMap[o]),o==="transparent"&&(u=[255,255,255,0]),u||(u=l.sourceFromHex(o)),u||(u=l.sourceFromRgb(o)),u||(u=l.sourceFromHsl(o)),u||(u=[0,0,0,1]),u&&this.setSource(u)},_rgbToHsl:function(o,u,A){o/=255,u/=255,A/=255;var g,p,d,m=n.util.array.max([o,u,A]),v=n.util.array.min([o,u,A]);if(d=(m+v)/2,m===v)g=p=0;else{var C=m-v;switch(p=d>.5?C/(2-m-v):C/(m+v),m){case o:g=(u-A)/C+(u<A?6:0);break;case u:g=(A-o)/C+2;break;case A:g=(o-u)/C+4;break}g/=6}return[Math.round(g*360),Math.round(p*100),Math.round(d*100)]},getSource:function(){return this._source},setSource:function(o){this._source=o},toRgb:function(){var o=this.getSource();return"rgb("+o[0]+","+o[1]+","+o[2]+")"},toRgba:function(){var o=this.getSource();return"rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")"},toHsl:function(){var o=this.getSource(),u=this._rgbToHsl(o[0],o[1],o[2]);return"hsl("+u[0]+","+u[1]+"%,"+u[2]+"%)"},toHsla:function(){var o=this.getSource(),u=this._rgbToHsl(o[0],o[1],o[2]);return"hsla("+u[0]+","+u[1]+"%,"+u[2]+"%,"+o[3]+")"},toHex:function(){var o=this.getSource(),u,A,g;return u=o[0].toString(16),u=u.length===1?"0"+u:u,A=o[1].toString(16),A=A.length===1?"0"+A:A,g=o[2].toString(16),g=g.length===1?"0"+g:g,u.toUpperCase()+A.toUpperCase()+g.toUpperCase()},toHexa:function(){var o=this.getSource(),u;return u=Math.round(o[3]*255),u=u.toString(16),u=u.length===1?"0"+u:u,this.toHex()+u.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(o){var u=this.getSource();return u[3]=o,this.setSource(u),this},toGrayscale:function(){var o=this.getSource(),u=parseInt((o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),10),A=o[3];return this.setSource([u,u,u,A]),this},toBlackWhite:function(o){var u=this.getSource(),A=(u[0]*.3+u[1]*.59+u[2]*.11).toFixed(0),g=u[3];return o=o||127,A=Number(A)<Number(o)?0:255,this.setSource([A,A,A,g]),this},overlayWith:function(o){o instanceof l||(o=new l(o));var u=[],A=this.getAlpha(),g=.5,p=this.getSource(),d=o.getSource(),m;for(m=0;m<3;m++)u.push(Math.round(p[m]*(1-g)+d[m]*g));return u[3]=A,this.setSource(u),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function h(o,u,A){return A<0&&(A+=1),A>1&&(A-=1),A<1/6?o+(u-o)*6*A:A<1/2?u:A<2/3?o+(u-o)*(2/3-A)*6:o}n.Color.fromRgb=function(o){return l.fromSource(l.sourceFromRgb(o))},n.Color.sourceFromRgb=function(o){var u=o.match(l.reRGBa);if(u){var A=parseInt(u[1],10)/(/%$/.test(u[1])?100:1)*(/%$/.test(u[1])?255:1),g=parseInt(u[2],10)/(/%$/.test(u[2])?100:1)*(/%$/.test(u[2])?255:1),p=parseInt(u[3],10)/(/%$/.test(u[3])?100:1)*(/%$/.test(u[3])?255:1);return[parseInt(A,10),parseInt(g,10),parseInt(p,10),u[4]?parseFloat(u[4]):1]}},n.Color.fromRgba=l.fromRgb,n.Color.fromHsl=function(o){return l.fromSource(l.sourceFromHsl(o))},n.Color.sourceFromHsl=function(o){var u=o.match(l.reHSLa);if(u){var A=(parseFloat(u[1])%360+360)%360/360,g=parseFloat(u[2])/(/%$/.test(u[2])?100:1),p=parseFloat(u[3])/(/%$/.test(u[3])?100:1),d,m,v;if(g===0)d=m=v=p;else{var C=p<=.5?p*(g+1):p+g-p*g,x=p*2-C;d=h(x,C,A+1/3),m=h(x,C,A),v=h(x,C,A-1/3)}return[Math.round(d*255),Math.round(m*255),Math.round(v*255),u[4]?parseFloat(u[4]):1]}},n.Color.fromHsla=l.fromHsl,n.Color.fromHex=function(o){return l.fromSource(l.sourceFromHex(o))},n.Color.sourceFromHex=function(o){if(o.match(l.reHex)){var u=o.slice(o.indexOf("#")+1),A=u.length===3||u.length===4,g=u.length===8||u.length===4,p=A?u.charAt(0)+u.charAt(0):u.substring(0,2),d=A?u.charAt(1)+u.charAt(1):u.substring(2,4),m=A?u.charAt(2)+u.charAt(2):u.substring(4,6),v=g?A?u.charAt(3)+u.charAt(3):u.substring(6,8):"FF";return[parseInt(p,16),parseInt(d,16),parseInt(m,16),parseFloat((parseInt(v,16)/255).toFixed(2))]}},n.Color.fromSource=function(o){var u=new l;return u.setSource(o),u}}(r),function(a){var n=a.fabric||(a.fabric={}),l=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],o={},u="left",A="top",g="right",p="bottom",d="center",m={top:p,bottom:A,left:g,right:u,center:d},v=n.util.radiansToDegrees,C=Math.sign||function(vt){return(vt>0)-(vt<0)||+vt};function x(vt,mt){var gt=vt.angle+v(Math.atan2(mt.y,mt.x))+360;return Math.round(gt%360/45)}function E(vt,mt){var gt=mt.transform.target,tt=gt.canvas,It=n.util.object.clone(mt);It.target=gt,tt&&tt.fire("object:"+vt,It),gt.fire(vt,mt)}function L(vt,mt){var gt=mt.canvas,tt=gt.uniScaleKey,It=vt[tt];return gt.uniformScaling&&!It||!gt.uniformScaling&&It}function U(vt){return vt.originX===d&&vt.originY===d}function O(vt,mt,gt){var tt=vt.lockScalingX,It=vt.lockScalingY;return!!(tt&&It||!mt&&(tt||It)&&gt||tt&&mt==="x"||It&&mt==="y")}function X(vt,mt,gt){var tt="not-allowed",It=L(vt,gt),Pt="";if(mt.x!==0&&mt.y===0?Pt="x":mt.x===0&&mt.y!==0&&(Pt="y"),O(gt,Pt,It))return tt;var Ut=x(gt,mt);return l[Ut]+"-resize"}function rt(vt,mt,gt){var tt="not-allowed";if(mt.x!==0&&gt.lockSkewingY||mt.y!==0&&gt.lockSkewingX)return tt;var It=x(gt,mt)%4;return h[It]+"-resize"}function M(vt,mt,gt){return vt[gt.canvas.altActionKey]?o.skewCursorStyleHandler(vt,mt,gt):o.scaleCursorStyleHandler(vt,mt,gt)}function H(vt,mt,gt){var tt=vt[gt.canvas.altActionKey];if(mt.x===0)return tt?"skewX":"scaleY";if(mt.y===0)return tt?"skewY":"scaleX"}function J(vt,mt,gt){return gt.lockRotation?"not-allowed":mt.cursorStyle}function $(vt,mt,gt,tt){return{e:vt,transform:mt,pointer:{x:gt,y:tt}}}function ht(vt){return function(mt,gt,tt,It){var Pt=gt.target,Ut=Pt.getCenterPoint(),Gt=Pt.translateToOriginPoint(Ut,gt.originX,gt.originY),Dt=vt(mt,gt,tt,It);return Pt.setPositionByOrigin(Gt,gt.originX,gt.originY),Dt}}function ut(vt,mt){return function(gt,tt,It,Pt){var Ut=mt(gt,tt,It,Pt);return Ut&&E(vt,$(gt,tt,It,Pt)),Ut}}function pt(vt,mt,gt,tt,It){var Pt=vt.target,Ut=Pt.controls[vt.corner],Gt=Pt.canvas.getZoom(),Dt=Pt.padding/Gt,bt=Pt.toLocalPoint(new n.Point(tt,It),mt,gt);return bt.x>=Dt&&(bt.x-=Dt),bt.x<=-Dt&&(bt.x+=Dt),bt.y>=Dt&&(bt.y-=Dt),bt.y<=Dt&&(bt.y+=Dt),bt.x-=Ut.offsetX,bt.y-=Ut.offsetY,bt}function ft(vt){return vt.flipX!==vt.flipY}function R(vt,mt,gt,tt,It){if(vt[mt]!==0){var Pt=vt._getTransformedDimensions()[tt],Ut=It/Pt*vt[gt];vt.set(gt,Ut)}}function G(vt,mt,gt,tt){var It=mt.target,Pt=It._getTransformedDimensions(0,It.skewY),Ut=pt(mt,mt.originX,mt.originY,gt,tt),Gt=Math.abs(Ut.x*2)-Pt.x,Dt=It.skewX,bt;Gt<2?bt=0:(bt=v(Math.atan2(Gt/It.scaleX,Pt.y/It.scaleY)),mt.originX===u&&mt.originY===p&&(bt=-bt),mt.originX===g&&mt.originY===A&&(bt=-bt),ft(It)&&(bt=-bt));var Kt=Dt!==bt;if(Kt){var Zt=It._getTransformedDimensions().y;It.set("skewX",bt),R(It,"skewY","scaleY","y",Zt)}return Kt}function it(vt,mt,gt,tt){var It=mt.target,Pt=It._getTransformedDimensions(It.skewX,0),Ut=pt(mt,mt.originX,mt.originY,gt,tt),Gt=Math.abs(Ut.y*2)-Pt.y,Dt=It.skewY,bt;Gt<2?bt=0:(bt=v(Math.atan2(Gt/It.scaleY,Pt.x/It.scaleX)),mt.originX===u&&mt.originY===p&&(bt=-bt),mt.originX===g&&mt.originY===A&&(bt=-bt),ft(It)&&(bt=-bt));var Kt=Dt!==bt;if(Kt){var Zt=It._getTransformedDimensions().x;It.set("skewY",bt),R(It,"skewX","scaleX","x",Zt)}return Kt}function P(vt,mt,gt,tt){var It=mt.target,Pt=It.skewX,Ut,Gt=mt.originY;if(It.lockSkewingX)return!1;if(Pt===0){var Dt=pt(mt,d,d,gt,tt);Dt.x>0?Ut=u:Ut=g}else Pt>0&&(Ut=Gt===A?u:g),Pt<0&&(Ut=Gt===A?g:u),ft(It)&&(Ut=Ut===u?g:u);mt.originX=Ut;var bt=ut("skewing",ht(G));return bt(vt,mt,gt,tt)}function V(vt,mt,gt,tt){var It=mt.target,Pt=It.skewY,Ut,Gt=mt.originX;if(It.lockSkewingY)return!1;if(Pt===0){var Dt=pt(mt,d,d,gt,tt);Dt.y>0?Ut=A:Ut=p}else Pt>0&&(Ut=Gt===u?A:p),Pt<0&&(Ut=Gt===u?p:A),ft(It)&&(Ut=Ut===A?p:A);mt.originY=Ut;var bt=ut("skewing",ht(it));return bt(vt,mt,gt,tt)}function k(vt,mt,gt,tt){var It=mt,Pt=It.target,Ut=Pt.translateToOriginPoint(Pt.getCenterPoint(),It.originX,It.originY);if(Pt.lockRotation)return!1;var Gt=Math.atan2(It.ey-Ut.y,It.ex-Ut.x),Dt=Math.atan2(tt-Ut.y,gt-Ut.x),bt=v(Dt-Gt+It.theta),Kt=!0;if(Pt.snapAngle>0){var Zt=Pt.snapAngle,le=Pt.snapThreshold||Zt,pe=Math.ceil(bt/Zt)*Zt,Rt=Math.floor(bt/Zt)*Zt;Math.abs(bt-Rt)<le?bt=Rt:Math.abs(bt-pe)<le&&(bt=pe)}return bt<0&&(bt=360+bt),bt%=360,Kt=Pt.angle!==bt,Pt.angle=bt,Kt}function N(vt,mt,gt,tt,It){It=It||{};var Pt=mt.target,Ut=Pt.lockScalingX,Gt=Pt.lockScalingY,Dt=It.by,bt,Kt,Zt,le,pe=L(vt,Pt),Rt=O(Pt,Dt,pe),zt,Xt,ae=mt.gestureScale;if(Rt)return!1;if(ae)Kt=mt.scaleX*ae,Zt=mt.scaleY*ae;else{if(bt=pt(mt,mt.originX,mt.originY,gt,tt),zt=Dt!=="y"?C(bt.x):1,Xt=Dt!=="x"?C(bt.y):1,mt.signX||(mt.signX=zt),mt.signY||(mt.signY=Xt),Pt.lockScalingFlip&&(mt.signX!==zt||mt.signY!==Xt))return!1;if(le=Pt._getTransformedDimensions(),pe&&!Dt){var te=Math.abs(bt.x)+Math.abs(bt.y),Ne=mt.original,Be=Math.abs(le.x*Ne.scaleX/Pt.scaleX)+Math.abs(le.y*Ne.scaleY/Pt.scaleY),Ar=te/Be;Kt=Ne.scaleX*Ar,Zt=Ne.scaleY*Ar}else Kt=Math.abs(bt.x*Pt.scaleX/le.x),Zt=Math.abs(bt.y*Pt.scaleY/le.y);U(mt)&&(Kt*=2,Zt*=2),mt.signX!==zt&&Dt!=="y"&&(mt.originX=m[mt.originX],Kt*=-1,mt.signX=zt),mt.signY!==Xt&&Dt!=="x"&&(mt.originY=m[mt.originY],Zt*=-1,mt.signY=Xt)}var Ke=Pt.scaleX,qe=Pt.scaleY;return Dt?(Dt==="x"&&Pt.set("scaleX",Kt),Dt==="y"&&Pt.set("scaleY",Zt)):(!Ut&&Pt.set("scaleX",Kt),!Gt&&Pt.set("scaleY",Zt)),Ke!==Pt.scaleX||qe!==Pt.scaleY}function Z(vt,mt,gt,tt){return N(vt,mt,gt,tt)}function st(vt,mt,gt,tt){return N(vt,mt,gt,tt,{by:"x"})}function ct(vt,mt,gt,tt){return N(vt,mt,gt,tt,{by:"y"})}function ot(vt,mt,gt,tt){return vt[mt.target.canvas.altActionKey]?o.skewHandlerX(vt,mt,gt,tt):o.scalingY(vt,mt,gt,tt)}function wt(vt,mt,gt,tt){return vt[mt.target.canvas.altActionKey]?o.skewHandlerY(vt,mt,gt,tt):o.scalingX(vt,mt,gt,tt)}function _t(vt,mt,gt,tt){var It=mt.target,Pt=pt(mt,mt.originX,mt.originY,gt,tt),Ut=It.strokeWidth/(It.strokeUniform?It.scaleX:1),Gt=U(mt)?2:1,Dt=It.width,bt=Math.abs(Pt.x*Gt/It.scaleX)-Ut;return It.set("width",Math.max(bt,0)),Dt!==bt}function Nt(vt,mt,gt,tt){var It=mt.target,Pt=gt-mt.offsetX,Ut=tt-mt.offsetY,Gt=!It.get("lockMovementX")&&It.left!==Pt,Dt=!It.get("lockMovementY")&&It.top!==Ut;return Gt&&It.set("left",Pt),Dt&&It.set("top",Ut),(Gt||Dt)&&E("moving",$(vt,mt,gt,tt)),Gt||Dt}o.scaleCursorStyleHandler=X,o.skewCursorStyleHandler=rt,o.scaleSkewCursorStyleHandler=M,o.rotationWithSnapping=ut("rotating",ht(k)),o.scalingEqually=ut("scaling",ht(Z)),o.scalingX=ut("scaling",ht(st)),o.scalingY=ut("scaling",ht(ct)),o.scalingYOrSkewingX=ot,o.scalingXOrSkewingY=wt,o.changeWidth=ut("resizing",ht(_t)),o.skewHandlerX=P,o.skewHandlerY=V,o.dragHandler=Nt,o.scaleOrSkewActionName=H,o.rotationStyleHandler=J,o.fireEvent=E,o.wrapWithFixedAnchor=ht,o.wrapWithFireEvent=ut,o.getLocalPoint=pt,n.controlsUtils=o}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.util.degreesToRadians,h=n.controlsUtils;function o(A,g,p,d,m){d=d||{};var v=this.sizeX||d.cornerSize||m.cornerSize,C=this.sizeY||d.cornerSize||m.cornerSize,x=typeof d.transparentCorners<"u"?d.transparentCorners:m.transparentCorners,E=x?"stroke":"fill",L=!x&&(d.cornerStrokeColor||m.cornerStrokeColor),U=g,O=p,X;A.save(),A.fillStyle=d.cornerColor||m.cornerColor,A.strokeStyle=d.cornerStrokeColor||m.cornerStrokeColor,v>C?(X=v,A.scale(1,C/v),O=p*v/C):C>v?(X=C,A.scale(v/C,1),U=g*C/v):X=v,A.lineWidth=1,A.beginPath(),A.arc(U,O,X/2,0,2*Math.PI,!1),A[E](),L&&A.stroke(),A.restore()}function u(A,g,p,d,m){d=d||{};var v=this.sizeX||d.cornerSize||m.cornerSize,C=this.sizeY||d.cornerSize||m.cornerSize,x=typeof d.transparentCorners<"u"?d.transparentCorners:m.transparentCorners,E=x?"stroke":"fill",L=!x&&(d.cornerStrokeColor||m.cornerStrokeColor),U=v/2,O=C/2;A.save(),A.fillStyle=d.cornerColor||m.cornerColor,A.strokeStyle=d.cornerStrokeColor||m.cornerStrokeColor,A.lineWidth=1,A.translate(g,p),A.rotate(l(m.angle)),A[E+"Rect"](-U,-O,v,C),L&&A.strokeRect(-U,-O,v,C),A.restore()}h.renderCircleControl=o,h.renderSquareControl=u}(r),function(a){var n=a.fabric||(a.fabric={});function l(h){for(var o in h)this[o]=h[o]}n.Control=l,n.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,o){return o.cursorStyle},getActionName:function(h,o){return o.actionName},getVisibility:function(h,o){var u=h._controlsVisibility;return u&&typeof u[o]<"u"?u[o]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,o){var u=n.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},o);return u},calcCornerCoords:function(h,o,u,A,g){var p,d,m,v,C=g?this.touchSizeX:this.sizeX,x=g?this.touchSizeY:this.sizeY;if(C&&x&&C!==x){var E=Math.atan2(x,C),L=Math.sqrt(C*C+x*x)/2,U=E-n.util.degreesToRadians(h),O=Math.PI/2-E-n.util.degreesToRadians(h);p=L*n.util.cos(U),d=L*n.util.sin(U),m=L*n.util.cos(O),v=L*n.util.sin(O)}else{var X=C&&x?C:o;L=X*.7071067812;var U=n.util.degreesToRadians(45-h);p=m=L*n.util.cos(U),d=v=L*n.util.sin(U)}return{tl:{x:u-v,y:A-m},tr:{x:u+p,y:A-d},bl:{x:u-p,y:A+d},br:{x:u+v,y:A+m}}},render:function(h,o,u,A,g){switch(A=A||{},A.cornerStyle||g.cornerStyle){case"circle":n.controlsUtils.renderCircleControl.call(this,h,o,u,A,g);break;default:n.controlsUtils.renderSquareControl.call(this,h,o,u,A,g)}}}}(r),function(){function a(u,A){var g=u.getAttribute("style"),p=u.getAttribute("offset")||0,d,m,v,C;if(p=parseFloat(p)/(/%$/.test(p)?100:1),p=p<0?0:p>1?1:p,g){var x=g.split(/\s*;\s*/);for(x[x.length-1]===""&&x.pop(),C=x.length;C--;){var E=x[C].split(/\s*:\s*/),L=E[0].trim(),U=E[1].trim();L==="stop-color"?d=U:L==="stop-opacity"&&(v=U)}}return d||(d=u.getAttribute("stop-color")||"rgb(0,0,0)"),v||(v=u.getAttribute("stop-opacity")),d=new t.Color(d),m=d.getAlpha(),v=isNaN(parseFloat(v))?1:parseFloat(v),v*=m*A,{offset:p,color:d.toRgb(),opacity:v}}function n(u){return{x1:u.getAttribute("x1")||0,y1:u.getAttribute("y1")||0,x2:u.getAttribute("x2")||"100%",y2:u.getAttribute("y2")||0}}function l(u){return{x1:u.getAttribute("fx")||u.getAttribute("cx")||"50%",y1:u.getAttribute("fy")||u.getAttribute("cy")||"50%",r1:0,x2:u.getAttribute("cx")||"50%",y2:u.getAttribute("cy")||"50%",r2:u.getAttribute("r")||"50%"}}var h=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var A,g=this;Object.keys(u).forEach(function(p){g[p]=u[p]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,A={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},this.type==="radial"&&(A.r1=u.coords.r1||0,A.r2=u.coords.r2||0),this.coords=A,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var A in u){var g=new t.Color(u[A]);this.colorStops.push({offset:parseFloat(A),color:g.toRgb(),opacity:g.getAlpha()})}return this},toObject:function(u){var A={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,A,u),A},toSVG:function(u,m){var g=h(this.coords,!0),p,d,m=m||{},v,C,x=h(this.colorStops,!0),E=g.r1>g.r2,L=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),U=-this.offsetX,O=-this.offsetY,X=!!m.additionalTransform,rt=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(x.sort(function(ht,ut){return ht.offset-ut.offset}),rt==="objectBoundingBox"?(U/=u.width,O/=u.height):(U+=u.width/2,O+=u.height/2),u.type==="path"&&this.gradientUnits!=="percentage"&&(U-=u.pathOffset.x,O-=u.pathOffset.y),L[4]-=U,L[5]-=O,C='id="SVGID_'+this.id+'" gradientUnits="'+rt+'"',C+=' gradientTransform="'+(X?m.additionalTransform+" ":"")+t.util.matrixToSVG(L)+'" ',this.type==="linear"?v=["<linearGradient ",C,' x1="',g.x1,'" y1="',g.y1,'" x2="',g.x2,'" y2="',g.y2,`">
`]:this.type==="radial"&&(v=["<radialGradient ",C,' cx="',E?g.x1:g.x2,'" cy="',E?g.y1:g.y2,'" r="',E?g.r1:g.r2,'" fx="',E?g.x2:g.x1,'" fy="',E?g.y2:g.y1,`">
`]),this.type==="radial"){if(E)for(x=x.concat(),x.reverse(),p=0,d=x.length;p<d;p++)x[p].offset=1-x[p].offset;var M=Math.min(g.r1,g.r2);if(M>0){var H=Math.max(g.r1,g.r2),J=M/H;for(p=0,d=x.length;p<d;p++)x[p].offset+=J*(1-x[p].offset)}}for(p=0,d=x.length;p<d;p++){var $=x[p];v.push("<stop ",'offset="',$.offset*100+"%",'" style="stop-color:',$.color,typeof $.opacity<"u"?";stop-opacity: "+$.opacity:";",`"/>
`)}return v.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),v.join("")},toLive:function(u){var A,g=t.util.object.clone(this.coords),p,d;if(this.type){for(this.type==="linear"?A=u.createLinearGradient(g.x1,g.y1,g.x2,g.y2):this.type==="radial"&&(A=u.createRadialGradient(g.x1,g.y1,g.r1,g.x2,g.y2,g.r2)),p=0,d=this.colorStops.length;p<d;p++){var m=this.colorStops[p].color,v=this.colorStops[p].opacity,C=this.colorStops[p].offset;typeof v<"u"&&(m=new t.Color(m).setAlpha(v).toRgba()),A.addColorStop(C,m)}return A}}}),t.util.object.extend(t.Gradient,{fromElement:function(u,A,g,p){var d=parseFloat(g)/(/%$/.test(g)?100:1);d=d<0?0:d>1?1:d,isNaN(d)&&(d=1);var m=u.getElementsByTagName("stop"),v,C=u.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",x=u.getAttribute("gradientTransform")||"",E=[],L,U,O=0,X=0,rt;for(u.nodeName==="linearGradient"||u.nodeName==="LINEARGRADIENT"?(v="linear",L=n(u)):(v="radial",L=l(u)),U=m.length;U--;)E.push(a(m[U],d));rt=t.parseTransformAttribute(x),o(A,L,p,C),C==="pixels"&&(O=-A.left,X=-A.top);var M=new t.Gradient({id:u.getAttribute("id"),type:v,coords:L,colorStops:E,gradientUnits:C,gradientTransform:rt,offsetX:O,offsetY:X});return M}});function o(u,A,g,p){var d,m;Object.keys(A).forEach(function(v){d=A[v],d==="Infinity"?m=1:d==="-Infinity"?m=0:(m=parseFloat(A[v],10),typeof d=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(d)&&(m*=.01,p==="pixels"&&((v==="x1"||v==="x2"||v==="r2")&&(m*=g.viewBoxWidth||g.width),(v==="y1"||v==="y2")&&(m*=g.viewBoxHeight||g.height)))),A[v]=m})}}(),function(){var a=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(n,l){if(n||(n={}),this.id=t.Object.__uid++,this.setOptions(n),!n.source||n.source&&typeof n.source!="string"){l&&l(this);return}else{var h=this;this.source=t.util.createImage(),t.util.loadImage(n.source,function(o,u){h.source=o,l&&l(h,u)},null,this.crossOrigin)}},toObject:function(n){var l=t.Object.NUM_FRACTION_DIGITS,h,o;return typeof this.source.src=="string"?h=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(h=this.source.toDataURL()),o={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:a(this.offsetX,l),offsetY:a(this.offsetY,l),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,o,n),o},toSVG:function(n){var l=typeof this.source=="function"?this.source():this.source,h=l.width/n.width,o=l.height/n.height,u=this.offsetX/n.width,A=this.offsetY/n.height,g="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(o=1,A&&(o+=Math.abs(A))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(h=1,u&&(h+=Math.abs(u))),l.src?g=l.src:l.toDataURL&&(g=l.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+u+'" y="'+A+'" width="'+h+'" height="'+o+`">
<image x="0" y="0" width="`+l.width+'" height="'+l.height+'" xlink:href="'+g+`"></image>
</pattern>
`},setOptions:function(n){for(var l in n)this[l]=n[l]},toLive:function(n){var l=this.source;return!l||typeof l.src<"u"&&(!l.complete||l.naturalWidth===0||l.naturalHeight===0)?"":n.createPattern(l,this.repeat)}})}(),function(a){var n=a.fabric||(a.fabric={}),l=n.util.toFixed;if(n.Shadow){n.warn("fabric.Shadow is already defined.");return}n.Shadow=n.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){typeof h=="string"&&(h=this._parseShadow(h));for(var o in h)this[o]=h[o];this.id=n.Object.__uid++},_parseShadow:function(h){var o=h.trim(),u=n.Shadow.reOffsetsAndBlur.exec(o)||[],A=o.replace(n.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:A.trim(),offsetX:parseFloat(u[1],10)||0,offsetY:parseFloat(u[2],10)||0,blur:parseFloat(u[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var o=40,u=40,A=n.Object.NUM_FRACTION_DIGITS,g=n.util.rotateVector({x:this.offsetX,y:this.offsetY},n.util.degreesToRadians(-h.angle)),p=20,d=new n.Color(this.color);return h.width&&h.height&&(o=l((Math.abs(g.x)+this.blur)/h.width,A)*100+p,u=l((Math.abs(g.y)+this.blur)/h.height,A)*100+p),h.flipX&&(g.x*=-1),h.flipY&&(g.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+u+'%" height="'+(100+2*u)+'%" x="-'+o+'%" width="'+(100+2*o)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+l(this.blur?this.blur/2:0,A)+`"></feGaussianBlur>
	<feOffset dx="`+l(g.x,A)+'" dy="'+l(g.y,A)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+d.toRgb()+'" flood-opacity="'+d.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},o=n.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(u){this[u]!==o[u]&&(h[u]=this[u])},this),h}}),n.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(r),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var a=t.util.object.extend,n=t.util.getElementOffset,l=t.util.removeFromArray,h=t.util.toFixed,o=t.util.transformPoint,u=t.util.invertTransform,A=t.util.getNodeCanvas,g=t.util.createCanvasElement,p=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(d,m){m||(m={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(d,m)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(d,m){var v=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(d),this._initOptions(m),this.interactive||this._initRetinaScaling(),m.overlayImage&&this.setOverlayImage(m.overlayImage,v),m.backgroundImage&&this.setBackgroundImage(m.backgroundImage,v),m.backgroundColor&&this.setBackgroundColor(m.backgroundColor,v),m.overlayColor&&this.setOverlayColor(m.overlayColor,v),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var d=t.devicePixelRatio;this.__initRetinaScaling(d,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(d,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(d,m,v){m.setAttribute("width",this.width*d),m.setAttribute("height",this.height*d),v.scale(d,d)},calcOffset:function(){return this._offset=n(this.lowerCanvasEl),this},setOverlayImage:function(d,m,v){return this.__setBgOverlayImage("overlayImage",d,m,v)},setBackgroundImage:function(d,m,v){return this.__setBgOverlayImage("backgroundImage",d,m,v)},setOverlayColor:function(d,m){return this.__setBgOverlayColor("overlayColor",d,m)},setBackgroundColor:function(d,m){return this.__setBgOverlayColor("backgroundColor",d,m)},__setBgOverlayImage:function(d,m,v,C){return typeof m=="string"?t.util.loadImage(m,function(x,E){if(x){var L=new t.Image(x,C);this[d]=L,L.canvas=this}v&&v(x,E)},this,C&&C.crossOrigin):(C&&m.setOptions(C),this[d]=m,m&&(m.canvas=this),v&&v(m,!1)),this},__setBgOverlayColor:function(d,m,v){return this[d]=m,this._initGradient(m,d),this._initPattern(m,d,v),this},_createCanvasElement:function(){var d=g();if(!d||(d.style||(d.style={}),typeof d.getContext>"u"))throw p;return d},_initOptions:function(d){var m=this.lowerCanvasEl;this._setOptions(d),this.width=this.width||parseInt(m.width,10)||0,this.height=this.height||parseInt(m.height,10)||0,this.lowerCanvasEl.style&&(m.width=this.width,m.height=this.height,m.style.width=this.width+"px",m.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(d){d&&d.getContext?this.lowerCanvasEl=d:this.lowerCanvasEl=t.util.getById(d)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(d,m){return this.setDimensions({width:d},m)},setHeight:function(d,m){return this.setDimensions({height:d},m)},setDimensions:function(d,m){var v;m=m||{};for(var C in d)v=d[C],m.cssOnly||(this._setBackstoreDimension(C,d[C]),v+="px",this.hasLostContext=!0),m.backstoreOnly||this._setCssDimension(C,v);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),m.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(d,m){return this.lowerCanvasEl[d]=m,this.upperCanvasEl&&(this.upperCanvasEl[d]=m),this.cacheCanvasEl&&(this.cacheCanvasEl[d]=m),this[d]=m,this},_setCssDimension:function(d,m){return this.lowerCanvasEl.style[d]=m,this.upperCanvasEl&&(this.upperCanvasEl.style[d]=m),this.wrapperEl&&(this.wrapperEl.style[d]=m),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(d){var m=this._activeObject,v=this.backgroundImage,C=this.overlayImage,x,E,L;for(this.viewportTransform=d,E=0,L=this._objects.length;E<L;E++)x=this._objects[E],x.group||x.setCoords(!0);return m&&m.setCoords(),v&&v.setCoords(!0),C&&C.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(d,m){var v=d,C=this.viewportTransform.slice(0);d=o(d,u(this.viewportTransform)),C[0]=m,C[3]=m;var x=o(d,C);return C[4]+=v.x-x.x,C[5]+=v.y-x.y,this.setViewportTransform(C)},setZoom:function(d){return this.zoomToPoint(new t.Point(0,0),d),this},absolutePan:function(d){var m=this.viewportTransform.slice(0);return m[4]=-d.x,m[5]=-d.y,this.setViewportTransform(m)},relativePan:function(d){return this.absolutePan(new t.Point(-d.x-this.viewportTransform[4],-d.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(d){this.stateful&&d.setupState(),d._set("canvas",this),d.setCoords(),this.fire("object:added",{target:d}),d.fire("added")},_onObjectRemoved:function(d){this.fire("object:removed",{target:d}),d.fire("removed"),delete d.canvas},clearContext:function(d){return d.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var d=this.contextContainer;return this.renderCanvas(d,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var d={},m=this.width,v=this.height,C=u(this.viewportTransform);return d.tl=o({x:0,y:0},C),d.br=o({x:m,y:v},C),d.tr=new t.Point(d.br.x,d.tl.y),d.bl=new t.Point(d.tl.x,d.br.y),this.vptCoords=d,d},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(d,m){var v=this.viewportTransform,C=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(d),t.util.setImageSmoothing(d,this.imageSmoothingEnabled),this.fire("before:render",{ctx:d}),this._renderBackground(d),d.save(),d.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._renderObjects(d,m),d.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(d),C&&(C.canvas=this,C.shouldCache(),C._transformDone=!0,C.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(d)),this._renderOverlay(d),this.controlsAboveOverlay&&this.interactive&&this.drawControls(d),this.fire("after:render",{ctx:d})},drawClipPathOnCanvas:function(d){var m=this.viewportTransform,v=this.clipPath;d.save(),d.transform(m[0],m[1],m[2],m[3],m[4],m[5]),d.globalCompositeOperation="destination-in",v.transform(d),d.scale(1/v.zoomX,1/v.zoomY),d.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),d.restore()},_renderObjects:function(d,m){var v,C;for(v=0,C=m.length;v<C;++v)m[v]&&m[v].render(d)},_renderBackgroundOrOverlay:function(d,m){var v=this[m+"Color"],C=this[m+"Image"],x=this.viewportTransform,E=this[m+"Vpt"];if(!(!v&&!C)){if(v){d.save(),d.beginPath(),d.moveTo(0,0),d.lineTo(this.width,0),d.lineTo(this.width,this.height),d.lineTo(0,this.height),d.closePath(),d.fillStyle=v.toLive?v.toLive(d,this):v,E&&d.transform(x[0],x[1],x[2],x[3],x[4],x[5]),d.transform(1,0,0,1,v.offsetX||0,v.offsetY||0);var L=v.gradientTransform||v.patternTransform;L&&d.transform(L[0],L[1],L[2],L[3],L[4],L[5]),d.fill(),d.restore()}C&&(d.save(),E&&d.transform(x[0],x[1],x[2],x[3],x[4],x[5]),C.render(d),d.restore())}},_renderBackground:function(d){this._renderBackgroundOrOverlay(d,"background")},_renderOverlay:function(d){this._renderBackgroundOrOverlay(d,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(d){return this._centerObject(d,new t.Point(this.getCenterPoint().x,d.getCenterPoint().y))},centerObjectV:function(d){return this._centerObject(d,new t.Point(d.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(d){var m=this.getCenterPoint();return this._centerObject(d,m)},viewportCenterObject:function(d){var m=this.getVpCenter();return this._centerObject(d,m)},viewportCenterObjectH:function(d){var m=this.getVpCenter();return this._centerObject(d,new t.Point(m.x,d.getCenterPoint().y)),this},viewportCenterObjectV:function(d){var m=this.getVpCenter();return this._centerObject(d,new t.Point(d.getCenterPoint().x,m.y))},getVpCenter:function(){var d=this.getCenterPoint(),m=u(this.viewportTransform);return o(d,m)},_centerObject:function(d,m){return d.setPositionByOrigin(m,"center","center"),d.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(d){return this.toDatalessObject(d)},toObject:function(d){return this._toObjectMethod("toObject",d)},toDatalessObject:function(d){return this._toObjectMethod("toDatalessObject",d)},_toObjectMethod:function(d,m){var v=this.clipPath,C={version:t.version,objects:this._toObjects(d,m)};return v&&!v.excludeFromExport&&(C.clipPath=this._toObject(this.clipPath,d,m)),a(C,this.__serializeBgOverlay(d,m)),t.util.populateWithProperties(this,C,m),C},_toObjects:function(d,m){return this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){return this._toObject(v,d,m)},this)},_toObject:function(d,m,v){var C;this.includeDefaultValues||(C=d.includeDefaultValues,d.includeDefaultValues=!1);var x=d[m](v);return this.includeDefaultValues||(d.includeDefaultValues=C),x},__serializeBgOverlay:function(d,m){var v={},C=this.backgroundImage,x=this.overlayImage,E=this.backgroundColor,L=this.overlayColor;return E&&E.toObject?E.excludeFromExport||(v.background=E.toObject(m)):E&&(v.background=E),L&&L.toObject?L.excludeFromExport||(v.overlay=L.toObject(m)):L&&(v.overlay=L),C&&!C.excludeFromExport&&(v.backgroundImage=this._toObject(C,d,m)),x&&!x.excludeFromExport&&(v.overlayImage=this._toObject(x,d,m)),v},svgViewportTransformation:!0,toSVG:function(d,m){d||(d={}),d.reviver=m;var v=[];return this._setSVGPreamble(v,d),this._setSVGHeader(v,d),this.clipPath&&v.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(v,"background"),this._setSVGBgOverlayImage(v,"backgroundImage",m),this._setSVGObjects(v,m),this.clipPath&&v.push(`</g>
`),this._setSVGBgOverlayColor(v,"overlay"),this._setSVGBgOverlayImage(v,"overlayImage",m),v.push("</svg>"),v.join("")},_setSVGPreamble:function(d,m){m.suppressPreamble||d.push('<?xml version="1.0" encoding="',m.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(d,m){var v=m.width||this.width,C=m.height||this.height,x,E='viewBox="0 0 '+this.width+" "+this.height+'" ',L=t.Object.NUM_FRACTION_DIGITS;m.viewBox?E='viewBox="'+m.viewBox.x+" "+m.viewBox.y+" "+m.viewBox.width+" "+m.viewBox.height+'" ':this.svgViewportTransformation&&(x=this.viewportTransform,E='viewBox="'+h(-x[4]/x[0],L)+" "+h(-x[5]/x[3],L)+" "+h(this.width/x[0],L)+" "+h(this.height/x[3],L)+'" '),d.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',v,'" ','height="',C,'" ',E,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(m),`</defs>
`)},createSVGClipPathMarkup:function(d){var m=this.clipPath;return m?(m.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+m.clipPathId+`" >
`+this.clipPath.toClipPathSVG(d.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var d=this,m=["background","overlay"].map(function(v){var C=d[v+"Color"];if(C&&C.toLive){var x=d[v+"Vpt"],E=d.viewportTransform,L={width:d.width/(x?E[0]:1),height:d.height/(x?E[3]:1)};return C.toSVG(L,{additionalTransform:x?t.util.matrixToSVG(E):""})}});return m.join("")},createSVGFontFacesMarkup:function(){var d="",m={},v,C,x,E,L,U,O,X,rt,M=t.fontPaths,H=[];for(this._objects.forEach(function $(ht){H.push(ht),ht._objects&&ht._objects.forEach($)}),X=0,rt=H.length;X<rt;X++)if(v=H[X],C=v.fontFamily,!(v.type.indexOf("text")===-1||m[C]||!M[C])&&(m[C]=!0,!!v.styles)){x=v.styles;for(L in x){E=x[L];for(O in E)U=E[O],C=U.fontFamily,!m[C]&&M[C]&&(m[C]=!0)}}for(var J in m)d+=[`		@font-face {
`,"			font-family: '",J,`';
`,"			src: url('",M[J],`');
`,`		}
`].join("");return d&&(d=['	<style type="text/css">',`<![CDATA[
`,d,"]]>",`</style>
`].join("")),d},_setSVGObjects:function(d,m){var v,C,x,E=this._objects;for(C=0,x=E.length;C<x;C++)v=E[C],!v.excludeFromExport&&this._setSVGObject(d,v,m)},_setSVGObject:function(d,m,v){d.push(m.toSVG(v))},_setSVGBgOverlayImage:function(d,m,v){this[m]&&!this[m].excludeFromExport&&this[m].toSVG&&d.push(this[m].toSVG(v))},_setSVGBgOverlayColor:function(d,m){var v=this[m+"Color"],C=this.viewportTransform,x=this.width,E=this.height;if(v)if(v.toLive){var L=v.repeat,U=t.util.invertTransform(C),O=this[m+"Vpt"],X=O?t.util.matrixToSVG(U):"";d.push('<rect transform="'+X+" translate(",x/2,",",E/2,')"',' x="',v.offsetX-x/2,'" y="',v.offsetY-E/2,'" ','width="',L==="repeat-y"||L==="no-repeat"?v.source.width:x,'" height="',L==="repeat-x"||L==="no-repeat"?v.source.height:E,'" fill="url(#SVGID_'+v.id+')"',`></rect>
`)}else d.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',v,'"',`></rect>
`)},sendToBack:function(d){if(!d)return this;var m=this._activeObject,v,C,x;if(d===m&&d.type==="activeSelection")for(x=m._objects,v=x.length;v--;)C=x[v],l(this._objects,C),this._objects.unshift(C);else l(this._objects,d),this._objects.unshift(d);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(d){if(!d)return this;var m=this._activeObject,v,C,x;if(d===m&&d.type==="activeSelection")for(x=m._objects,v=0;v<x.length;v++)C=x[v],l(this._objects,C),this._objects.push(C);else l(this._objects,d),this._objects.push(d);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(d,m){if(!d)return this;var v=this._activeObject,C,x,E,L,U,O=0;if(d===v&&d.type==="activeSelection")for(U=v._objects,C=0;C<U.length;C++)x=U[C],E=this._objects.indexOf(x),E>0+O&&(L=E-1,l(this._objects,x),this._objects.splice(L,0,x)),O++;else E=this._objects.indexOf(d),E!==0&&(L=this._findNewLowerIndex(d,E,m),l(this._objects,d),this._objects.splice(L,0,d));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(d,m,v){var C,x;if(v)for(C=m,x=m-1;x>=0;--x){var E=d.intersectsWithObject(this._objects[x])||d.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(d);if(E){C=x;break}}else C=m-1;return C},bringForward:function(d,m){if(!d)return this;var v=this._activeObject,C,x,E,L,U,O=0;if(d===v&&d.type==="activeSelection")for(U=v._objects,C=U.length;C--;)x=U[C],E=this._objects.indexOf(x),E<this._objects.length-1-O&&(L=E+1,l(this._objects,x),this._objects.splice(L,0,x)),O++;else E=this._objects.indexOf(d),E!==this._objects.length-1&&(L=this._findNewUpperIndex(d,E,m),l(this._objects,d),this._objects.splice(L,0,d));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(d,m,v){var C,x,E;if(v)for(C=m,x=m+1,E=this._objects.length;x<E;++x){var L=d.intersectsWithObject(this._objects[x])||d.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(d);if(L){C=x;break}}else C=m+1;return C},moveTo:function(d,m){return l(this._objects,d),this._objects.splice(m,0,d),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(d){d.dispose&&d.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),a(t.StaticCanvas.prototype,t.Observable),a(t.StaticCanvas.prototype,t.Collection),a(t.StaticCanvas.prototype,t.DataURLExporter),a(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(d){var m=g();if(!m||!m.getContext)return null;var v=m.getContext("2d");if(!v)return null;switch(d){case"setLineDash":return typeof v.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var d=A(this.lowerCanvasEl);return d&&d.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(d){var m=A(this.lowerCanvasEl);return m&&m.createJPEGStream(d)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(a){a.strokeStyle=this.color,a.lineWidth=this.width,a.lineCap=this.strokeLineCap,a.miterLimit=this.strokeMiterLimit,a.lineJoin=this.strokeLineJoin,a.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(a){var n=this.canvas.viewportTransform;a.save(),a.transform(n[0],n[1],n[2],n[3],n[4],n[5])},_setShadow:function(){if(this.shadow){var a=this.canvas,n=this.shadow,l=a.contextTop,h=a.getZoom();a&&a._isRetinaScaling()&&(h*=t.devicePixelRatio),l.shadowColor=n.color,l.shadowBlur=n.blur*h,l.shadowOffsetX=n.offsetX*h,l.shadowOffsetY=n.offsetY*h}},needsFullRender:function(){var a=new t.Color(this.color);return a.getAlpha()<1||!!this.shadow},_resetShadow:function(){var a=this.canvas.contextTop;a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0},_isOutSideCanvas:function(a){return a.x<0||a.x>this.canvas.getWidth()||a.y<0||a.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(a){this.canvas=a,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(a,n,l){var h=n.midPointFrom(l);return a.quadraticCurveTo(n.x,n.y,h.x,h.y),h},onMouseDown:function(a,n){this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],this._prepareForDrawing(a),this._captureDrawingPath(a),this._render())},onMouseMove:function(a,n){if(this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a))&&this._captureDrawingPath(a)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var l=this._points,h=l.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(o,l[h-2],l[h-1],!0),o.stroke(),o.restore()}},onMouseUp:function(a){return this.canvas._isMainEvent(a.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(a){var n=new t.Point(a.x,a.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_addPoint:function(a){return this._points.length>1&&a.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(a),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(a){var n=new t.Point(a.x,a.y);return this._addPoint(n)},_render:function(a){var n,l,h=this._points[0],o=this._points[1];if(a=a||this.canvas.contextTop,this._saveAndTransform(a),a.beginPath(),this._points.length===2&&h.x===o.x&&h.y===o.y){var u=this.width/1e3;h=new t.Point(h.x,h.y),o=new t.Point(o.x,o.y),h.x-=u,o.x+=u}for(a.moveTo(h.x,h.y),n=1,l=this._points.length;n<l;n++)this._drawSegment(a,h,o),h=this._points[n],o=this._points[n+1];a.lineTo(h.x,h.y),a.stroke(),a.restore()},convertPointsToSVGPath:function(a){var n=this.width/1e3;return t.util.getSmoothPathFromPoints(a,n)},_isEmptySVGPath:function(a){var n=t.util.joinPath(a);return n==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(a){var n=new t.Path(a,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,n.shadow=new t.Shadow(this.shadow)),n},decimatePoints:function(a,n){if(a.length<=2)return a;var l=this.canvas.getZoom(),h=Math.pow(n/l,2),o,u=a.length-1,A=a[0],g=[A],p;for(o=1;o<u-1;o++)p=Math.pow(A.x-a[o].x,2)+Math.pow(A.y-a[o].y,2),p>=h&&(A=a[o],g.push(A));return g.push(a[u]),g},_finalizeAndAddPath:function(){var a=this.canvas.contextTop;a.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var n=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(n)){this.canvas.requestRenderAll();return}var l=this.createPath(n);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.requestRenderAll(),l.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:l})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(a){this.canvas=a,this.points=[]},drawDot:function(a){var n=this.addPoint(a),l=this.canvas.contextTop;this._saveAndTransform(l),this.dot(l,n),l.restore()},dot:function(a,n){a.fillStyle=n.fill,a.beginPath(),a.arc(n.x,n.y,n.radius,0,Math.PI*2,!1),a.closePath(),a.fill()},onMouseDown:function(a){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(a)},_render:function(){var a=this.canvas.contextTop,n,l,h=this.points;for(this._saveAndTransform(a),n=0,l=h.length;n<l;n++)this.dot(a,h[n]);a.restore()},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(a),this._render()):this.drawDot(a))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove,n,l;this.canvas.renderOnAddRemove=!1;var h=[];for(n=0,l=this.points.length;n<l;n++){var o=this.points[n],u=new t.Circle({radius:o.radius,left:o.x,top:o.y,originX:"center",originY:"center",fill:o.fill});this.shadow&&(u.shadow=new t.Shadow(this.shadow)),h.push(u)}var A=new t.Group(h);A.canvas=this.canvas,this.canvas.fire("before:path:created",{path:A}),this.canvas.add(A),this.canvas.fire("path:created",{path:A}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(a){var n=new t.Point(a.x,a.y),l=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return n.radius=l,n.fill=h,this.points.push(n),n}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(a){this.canvas=a,this.sprayChunks=[]},onMouseDown:function(a){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(a),this.render(this.sprayChunkPoints)},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.addSprayChunk(a),this.render(this.sprayChunkPoints))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var n=[],l=0,h=this.sprayChunks.length;l<h;l++)for(var o=this.sprayChunks[l],u=0,A=o.length;u<A;u++){var g=new t.Rect({width:o[u].width,height:o[u].width,left:o[u].x+1,top:o[u].y+1,originX:"center",originY:"center",fill:this.color});n.push(g)}this.optimizeOverlapping&&(n=this._getOptimizedRects(n));var p=new t.Group(n);this.shadow&&p.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:p}),this.canvas.add(p),this.canvas.fire("path:created",{path:p}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},_getOptimizedRects:function(a){var n={},l,h,o;for(h=0,o=a.length;h<o;h++)l=a[h].left+""+a[h].top,n[l]||(n[l]=a[h]);var u=[];for(l in n)u.push(n[l]);return u},render:function(a){var n=this.canvas.contextTop,l,h;for(n.fillStyle=this.color,this._saveAndTransform(n),l=0,h=a.length;l<h;l++){var o=a[l];typeof o.opacity<"u"&&(n.globalAlpha=o.opacity),n.fillRect(o.x,o.y,o.width,o.width)}n.restore()},_render:function(){var a=this.canvas.contextTop,n,l;for(a.fillStyle=this.color,this._saveAndTransform(a),n=0,l=this.sprayChunks.length;n<l;n++)this.render(this.sprayChunks[n]);a.restore()},addSprayChunk:function(a){this.sprayChunkPoints=[];var n,l,h,o=this.width/2,u;for(u=0;u<this.density;u++){n=t.util.getRandomInt(a.x-o,a.x+o),l=t.util.getRandomInt(a.y-o,a.y+o),this.dotWidthVariance?h=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):h=this.dotWidth;var A=new t.Point(n,l);A.width=h,this.randomOpacity&&(A.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(A)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var a=20,n=5,l=t.util.createCanvasElement(),h=l.getContext("2d");return l.width=l.height=a+n,h.fillStyle=this.color,h.beginPath(),h.arc(a/2,a/2,a/2,0,Math.PI*2,!1),h.closePath(),h.fill(),l},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(a){return a.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(a){this.callSuper("_setBrushStyles",a),a.strokeStyle=this.getPattern(a)},createPath:function(a){var n=this.callSuper("createPath",a),l=n._getLeftTopCoords().scalarAdd(n.strokeWidth/2);return n.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-l.x,offsetY:-l.y}),n}}),function(){var a=t.util.getPointer,n=t.util.degreesToRadians,l=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(o,u){u||(u={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,u),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var o=this.getActiveObjects(),u,A,g;if(o.length>0&&!this.preserveObjectStacking){A=[],g=[];for(var p=0,d=this._objects.length;p<d;p++)u=this._objects[p],o.indexOf(u)===-1?A.push(u):g.push(u);o.length>1&&(this._activeObject._objects=g),A.push.apply(A,g)}else A=this._objects;return A},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var o=this.contextContainer;return this.renderCanvas(o,this._chooseObjectsToRender()),this},renderTopLayer:function(o){o.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(o),this.contextTopDirty=!0),o.restore()},renderTop:function(){var o=this.contextTop;return this.clearContext(o),this.renderTopLayer(o),this.fire("after:render"),this},_normalizePointer:function(o,u){var A=o.calcTransformMatrix(),g=t.util.invertTransform(A),p=this.restorePointerVpt(u);return t.util.transformPoint(p,g)},isTargetTransparent:function(o,u,A){if(o.shouldCache()&&o._cacheCanvas&&o!==this._activeObject){var g=this._normalizePointer(o,{x:u,y:A}),p=Math.max(o.cacheTranslationX+g.x*o.zoomX,0),d=Math.max(o.cacheTranslationY+g.y*o.zoomY,0),x=t.util.isTransparent(o._cacheContext,Math.round(p),Math.round(d),this.targetFindTolerance);return x}var m=this.contextCache,v=o.selectionBackgroundColor,C=this.viewportTransform;o.selectionBackgroundColor="",this.clearContext(m),m.save(),m.transform(C[0],C[1],C[2],C[3],C[4],C[5]),o.render(m),m.restore(),o.selectionBackgroundColor=v;var x=t.util.isTransparent(m,u,A,this.targetFindTolerance);return x},_isSelectionKeyPressed:function(o){var u=!1;return Array.isArray(this.selectionKey)?u=!!this.selectionKey.find(function(A){return o[A]===!0}):u=o[this.selectionKey],u},_shouldClearSelection:function(o,u){var A=this.getActiveObjects(),g=this._activeObject;return!u||u&&g&&A.length>1&&A.indexOf(u)===-1&&g!==u&&!this._isSelectionKeyPressed(o)||u&&!u.evented||u&&!u.selectable&&g&&g!==u},_shouldCenterTransform:function(o,u,A){if(o){var g;return u==="scale"||u==="scaleX"||u==="scaleY"||u==="resizing"?g=this.centeredScaling||o.centeredScaling:u==="rotate"&&(g=this.centeredRotation||o.centeredRotation),g?!A:A}},_getOriginFromCorner:function(o,u){var A={x:o.originX,y:o.originY};return u==="ml"||u==="tl"||u==="bl"?A.x="right":(u==="mr"||u==="tr"||u==="br")&&(A.x="left"),u==="tl"||u==="mt"||u==="tr"?A.y="bottom":(u==="bl"||u==="mb"||u==="br")&&(A.y="top"),A},_getActionFromCorner:function(o,u,A,g){if(!u||!o)return"drag";var p=g.controls[u];return p.getActionName(A,p,g)},_setupCurrentTransform:function(o,u,A){if(u){var g=this.getPointer(o),p=u.__corner,d=u.controls[p],m=A&&p?d.getActionHandler(o,u,d):t.controlsUtils.dragHandler,v=this._getActionFromCorner(A,p,o,u),C=this._getOriginFromCorner(u,p),x=o[this.centeredKey],E={target:u,action:v,actionHandler:m,corner:p,scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,offsetX:g.x-u.left,offsetY:g.y-u.top,originX:C.x,originY:C.y,ex:g.x,ey:g.y,lastX:g.x,lastY:g.y,theta:n(u.angle),width:u.width*u.scaleX,shiftKey:o.shiftKey,altKey:x,original:t.util.saveObjectTransform(u)};this._shouldCenterTransform(u,v,x)&&(E.originX="center",E.originY="center"),E.original.originX=C.x,E.original.originY=C.y,this._currentTransform=E,this._beforeTransform(o)}},setCursor:function(o){this.upperCanvasEl.style.cursor=o},_drawSelection:function(o){var u=this._groupSelector,A=new t.Point(u.ex,u.ey),g=t.util.transformPoint(A,this.viewportTransform),p=new t.Point(u.ex+u.left,u.ey+u.top),d=t.util.transformPoint(p,this.viewportTransform),m=Math.min(g.x,d.x),v=Math.min(g.y,d.y),C=Math.max(g.x,d.x),x=Math.max(g.y,d.y),E=this.selectionLineWidth/2;this.selectionColor&&(o.fillStyle=this.selectionColor,o.fillRect(m,v,C-m,x-v)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(o.lineWidth=this.selectionLineWidth,o.strokeStyle=this.selectionBorderColor,m+=E,v+=E,C-=E,x-=E,t.Object.prototype._setLineDash.call(this,o,this.selectionDashArray),o.strokeRect(m,v,C-m,x-v))},findTarget:function(o,u){if(!this.skipTargetFind){var A=!0,g=this.getPointer(o,A),p=this._activeObject,d=this.getActiveObjects(),m,v,C=l(o),x=d.length>1&&!u||d.length===1;if(this.targets=[],x&&p._findTargetCorner(g,C)||d.length>1&&!u&&p===this._searchPossibleTargets([p],g))return p;if(d.length===1&&p===this._searchPossibleTargets([p],g))if(this.preserveObjectStacking)m=p,v=this.targets,this.targets=[];else return p;var E=this._searchPossibleTargets(this._objects,g);return o[this.altSelectionKey]&&E&&m&&E!==m&&(E=m,this.targets=v),E}},_checkTarget:function(o,u,A){if(u&&u.visible&&u.evented&&u.containsPoint(o))if((this.perPixelTargetFind||u.perPixelTargetFind)&&!u.isEditing){var g=this.isTargetTransparent(u,A.x,A.y);if(!g)return!0}else return!0},_searchPossibleTargets:function(o,u){for(var A,g=o.length,p;g--;){var d=o[g],m=d.group?this._normalizePointer(d.group,u):u;if(this._checkTarget(m,d,u)){A=o[g],A.subTargetCheck&&A instanceof t.Group&&(p=this._searchPossibleTargets(A._objects,u),p&&this.targets.push(p));break}}return A},restorePointerVpt:function(o){return t.util.transformPoint(o,t.util.invertTransform(this.viewportTransform))},getPointer:function(o,u){if(this._absolutePointer&&!u)return this._absolutePointer;if(this._pointer&&u)return this._pointer;var A=a(o),g=this.upperCanvasEl,p=g.getBoundingClientRect(),d=p.width||0,m=p.height||0,v;(!d||!m)&&("top"in p&&"bottom"in p&&(m=Math.abs(p.top-p.bottom)),"right"in p&&"left"in p&&(d=Math.abs(p.right-p.left))),this.calcOffset(),A.x=A.x-this._offset.left,A.y=A.y-this._offset.top,u||(A=this.restorePointerVpt(A));var C=this.getRetinaScaling();return C!==1&&(A.x/=C,A.y/=C),d===0||m===0?v={width:1,height:1}:v={width:g.width/d,height:g.height/m},{x:A.x*v.width,y:A.y*v.height}},_createUpperCanvas:function(){var o=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),u=this.lowerCanvasEl,A=this.upperCanvasEl;A?A.className="":(A=this._createCanvasElement(),this.upperCanvasEl=A),t.util.addClass(A,"upper-canvas "+o),this.wrapperEl.appendChild(A),this._copyCanvasStyle(u,A),this._applyCanvasStyle(A),this.contextTop=A.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(o){var u=this.width||o.width,A=this.height||o.height;t.util.setStyle(o,{position:"absolute",width:u+"px",height:A+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),o.width=u,o.height=A,t.util.makeElementUnselectable(o)},_copyCanvasStyle:function(o,u){u.style.cssText=o.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var o=this._activeObject;return o?o.type==="activeSelection"&&o._objects?o._objects.slice(0):[o]:[]},_onObjectRemoved:function(o){o===this._activeObject&&(this.fire("before:selection:cleared",{target:o}),this._discardActiveObject(),this.fire("selection:cleared",{target:o}),o.fire("deselected")),o===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",o)},_fireSelectionEvents:function(o,u){var A=!1,g=this.getActiveObjects(),p=[],d=[];o.forEach(function(m){g.indexOf(m)===-1&&(A=!0,m.fire("deselected",{e:u,target:m}),d.push(m))}),g.forEach(function(m){o.indexOf(m)===-1&&(A=!0,m.fire("selected",{e:u,target:m}),p.push(m))}),o.length>0&&g.length>0?A&&this.fire("selection:updated",{e:u,selected:p,deselected:d}):g.length>0?this.fire("selection:created",{e:u,selected:p}):o.length>0&&this.fire("selection:cleared",{e:u,deselected:d})},setActiveObject:function(o,u){var A=this.getActiveObjects();return this._setActiveObject(o,u),this._fireSelectionEvents(A,u),this},_setActiveObject:function(o,u){return this._activeObject===o||!this._discardActiveObject(u,o)||o.onSelect({e:u})?!1:(this._activeObject=o,!0)},_discardActiveObject:function(o,u){var A=this._activeObject;if(A){if(A.onDeselect({e:o,object:u}))return!1;this._activeObject=null}return!0},discardActiveObject:function(o){var u=this.getActiveObjects(),A=this.getActiveObject();return u.length&&this.fire("before:selection:cleared",{target:A,e:o}),this._discardActiveObject(o),this._fireSelectionEvents(u,o),this},dispose:function(){var o=this.wrapperEl;return this.removeListeners(),o.removeChild(this.upperCanvasEl),o.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(u){t.util.cleanUpJsdomNode(this[u]),this[u]=void 0}).bind(this)),o.parentNode&&o.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(o){var u=this._activeObject;u&&u._renderControls(o)},_toObject:function(o,u,A){var g=this._realizeGroupTransformOnObject(o),p=this.callSuper("_toObject",o,u,A);return this._unwindGroupTransformOnObject(o,g),p},_realizeGroupTransformOnObject:function(o){if(o.group&&o.group.type==="activeSelection"&&this._activeObject===o.group){var u=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],A={};return u.forEach(function(g){A[g]=o[g]}),t.util.addTransformToObject(o,this._activeObject.calcOwnMatrix()),A}else return null},_unwindGroupTransformOnObject:function(o,u){u&&o.set(u)},_setSVGObject:function(o,u,A){var g=this._realizeGroupTransformOnObject(u);this.callSuper("_setSVGObject",o,u,A),this._unwindGroupTransformOnObject(u,g)},setViewportTransform:function(o){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,o)}});for(var h in t.StaticCanvas)h!=="prototype"&&(t.Canvas[h]=t.StaticCanvas[h])}(),function(){var a=t.util.addListener,n=t.util.removeListener,l=3,h=2,o=1,u={passive:!1};function A(g,p){return g.button&&g.button===p-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(a,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(g,p){var d=this.upperCanvasEl,m=this._getEventPrefix();g(t.window,"resize",this._onResize),g(d,m+"down",this._onMouseDown),g(d,m+"move",this._onMouseMove,u),g(d,m+"out",this._onMouseOut),g(d,m+"enter",this._onMouseEnter),g(d,"wheel",this._onMouseWheel),g(d,"contextmenu",this._onContextMenu),g(d,"dblclick",this._onDoubleClick),g(d,"dragover",this._onDragOver),g(d,"dragenter",this._onDragEnter),g(d,"dragleave",this._onDragLeave),g(d,"drop",this._onDrop),this.enablePointerEvents||g(d,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&p in eventjs&&(eventjs[p](d,"gesture",this._onGesture),eventjs[p](d,"drag",this._onDrag),eventjs[p](d,"orientation",this._onOrientationChange),eventjs[p](d,"shake",this._onShake),eventjs[p](d,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove");var g=this._getEventPrefix();n(t.document,g+"up",this._onMouseUp),n(t.document,"touchend",this._onTouchEnd,u),n(t.document,g+"move",this._onMouseMove,u),n(t.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(g,p){this.__onTransformGesture&&this.__onTransformGesture(g,p)},_onDrag:function(g,p){this.__onDrag&&this.__onDrag(g,p)},_onMouseWheel:function(g){this.__onMouseWheel(g)},_onMouseOut:function(g){var p=this._hoveredTarget;this.fire("mouse:out",{target:p,e:g}),this._hoveredTarget=null,p&&p.fire("mouseout",{e:g});var d=this;this._hoveredTargets.forEach(function(m){d.fire("mouse:out",{target:p,e:g}),m&&p.fire("mouseout",{e:g})}),this._hoveredTargets=[]},_onMouseEnter:function(g){!this._currentTransform&&!this.findTarget(g)&&(this.fire("mouse:over",{target:null,e:g}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(g,p){this.__onOrientationChange&&this.__onOrientationChange(g,p)},_onShake:function(g,p){this.__onShake&&this.__onShake(g,p)},_onLongPress:function(g,p){this.__onLongPress&&this.__onLongPress(g,p)},_onDragOver:function(g){g.preventDefault();var p=this._simpleEventHandler("dragover",g);this._fireEnterLeaveEvents(p,g)},_onDrop:function(g){return this._simpleEventHandler("drop:before",g),this._simpleEventHandler("drop",g)},_onContextMenu:function(g){return this.stopContextMenu&&(g.stopPropagation(),g.preventDefault()),!1},_onDoubleClick:function(g){this._cacheTransformEventData(g),this._handleEvent(g,"dblclick"),this._resetTransformEventData(g)},getPointerId:function(g){var p=g.changedTouches;return p?p[0]&&p[0].identifier:this.enablePointerEvents?g.pointerId:-1},_isMainEvent:function(g){return g.isPrimary===!0?!0:g.isPrimary===!1?!1:g.type==="touchend"&&g.touches.length===0?!0:g.changedTouches?g.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(g){g.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(g)),this.__onMouseDown(g),this._resetTransformEventData();var p=this.upperCanvasEl,d=this._getEventPrefix();a(t.document,"touchend",this._onTouchEnd,u),a(t.document,"touchmove",this._onMouseMove,u),n(p,d+"down",this._onMouseDown)},_onMouseDown:function(g){this.__onMouseDown(g),this._resetTransformEventData();var p=this.upperCanvasEl,d=this._getEventPrefix();n(p,d+"move",this._onMouseMove,u),a(t.document,d+"up",this._onMouseUp),a(t.document,d+"move",this._onMouseMove,u)},_onTouchEnd:function(g){if(!(g.touches.length>0)){this.__onMouseUp(g),this._resetTransformEventData(),this.mainTouchId=null;var p=this._getEventPrefix();n(t.document,"touchend",this._onTouchEnd,u),n(t.document,"touchmove",this._onMouseMove,u);var d=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){a(d.upperCanvasEl,p+"down",d._onMouseDown),d._willAddMouseDown=0},400)}},_onMouseUp:function(g){this.__onMouseUp(g),this._resetTransformEventData();var p=this.upperCanvasEl,d=this._getEventPrefix();this._isMainEvent(g)&&(n(t.document,d+"up",this._onMouseUp),n(t.document,d+"move",this._onMouseMove,u),a(p,d+"move",this._onMouseMove,u))},_onMouseMove:function(g){!this.allowTouchScrolling&&g.preventDefault&&g.preventDefault(),this.__onMouseMove(g)},_onResize:function(){this.calcOffset()},_shouldRender:function(g){var p=this._activeObject;return!!p!=!!g||p&&g&&p!==g?!0:(p&&p.isEditing,!1)},__onMouseUp:function(g){var p,d=this._currentTransform,m=this._groupSelector,v=!1,C=!m||m.left===0&&m.top===0;if(this._cacheTransformEventData(g),p=this._target,this._handleEvent(g,"up:before"),A(g,l)){this.fireRightClick&&this._handleEvent(g,"up",l,C);return}if(A(g,h)){this.fireMiddleClick&&this._handleEvent(g,"up",h,C),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(g);return}if(this._isMainEvent(g)){if(d&&(this._finalizeCurrentTransform(g),v=d.actionPerformed),!C){var x=p===this._activeObject;this._maybeGroupObjects(g),v||(v=this._shouldRender(p)||!x&&p===this._activeObject)}var E,L;if(p){if(E=p._findTargetCorner(this.getPointer(g,!0),t.util.isTouchEvent(g)),p.selectable&&p!==this._activeObject&&p.activeOn==="up")this.setActiveObject(p,g),v=!0;else{var U=p.controls[E],O=U&&U.getMouseUpHandler(g,p,U);O&&(L=this.getPointer(g),O(g,d,L.x,L.y))}p.isMoving=!1}if(d&&(d.target!==p||d.corner!==E)){var X=d.target&&d.target.controls[d.corner],rt=X&&X.getMouseUpHandler(g,p,U);L=L||this.getPointer(g),rt&&rt(g,d,L.x,L.y)}this._setCursorFromEvent(g,p),this._handleEvent(g,"up",o,C),this._groupSelector=null,this._currentTransform=null,p&&(p.__corner=0),v?this.requestRenderAll():C||this.renderTop()}},_simpleEventHandler:function(g,p){var d=this.findTarget(p),m=this.targets,v={e:p,target:d,subTargets:m};if(this.fire(g,v),d&&d.fire(g,v),!m)return d;for(var C=0;C<m.length;C++)m[C].fire(g,v);return d},_handleEvent:function(g,p,d,m){var v=this._target,C=this.targets||[],x={e:g,target:v,subTargets:C,button:d||o,isClick:m||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};p==="up"&&(x.currentTarget=this.findTarget(g),x.currentSubTargets=this.targets),this.fire("mouse:"+p,x),v&&v.fire("mouse"+p,x);for(var E=0;E<C.length;E++)C[E].fire("mouse"+p,x)},_finalizeCurrentTransform:function(g){var p=this._currentTransform,d=p.target,m={e:g,target:d,transform:p,action:p.action};d._scaling&&(d._scaling=!1),d.setCoords(),(p.actionPerformed||this.stateful&&d.hasStateChanged())&&this._fire("modified",m)},_onMouseDownInDrawingMode:function(g){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(g).requestRenderAll();var p=this.getPointer(g);this.freeDrawingBrush.onMouseDown(p,{e:g,pointer:p}),this._handleEvent(g,"down")},_onMouseMoveInDrawingMode:function(g){if(this._isCurrentlyDrawing){var p=this.getPointer(g);this.freeDrawingBrush.onMouseMove(p,{e:g,pointer:p})}this.setCursor(this.freeDrawingCursor),this._handleEvent(g,"move")},_onMouseUpInDrawingMode:function(g){var p=this.getPointer(g);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:g,pointer:p}),this._handleEvent(g,"up")},__onMouseDown:function(g){this._cacheTransformEventData(g),this._handleEvent(g,"down:before");var p=this._target;if(A(g,l)){this.fireRightClick&&this._handleEvent(g,"down",l);return}if(A(g,h)){this.fireMiddleClick&&this._handleEvent(g,"down",h);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(g);return}if(this._isMainEvent(g)&&!this._currentTransform){var d=this._pointer;this._previousPointer=d;var m=this._shouldRender(p),v=this._shouldGroup(g,p);if(this._shouldClearSelection(g,p)?this.discardActiveObject(g):v&&(this._handleGrouping(g,p),p=this._activeObject),this.selection&&(!p||!p.selectable&&!p.isEditing&&p!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),p){var C=p===this._activeObject;p.selectable&&p.activeOn==="down"&&this.setActiveObject(p,g);var x=p._findTargetCorner(this.getPointer(g,!0),t.util.isTouchEvent(g));if(p.__corner=x,p===this._activeObject&&(x||!v)){this._setupCurrentTransform(g,p,C);var E=p.controls[x],d=this.getPointer(g),L=E&&E.getMouseDownHandler(g,p,E);L&&L(g,this._currentTransform,d.x,d.y)}}this._handleEvent(g,"down"),(m||v)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(g){this._resetTransformEventData(),this._pointer=this.getPointer(g,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(g)||null},_beforeTransform:function(g){var p=this._currentTransform;this.stateful&&p.target.saveState(),this.fire("before:transform",{e:g,transform:p})},__onMouseMove:function(g){this._handleEvent(g,"move:before"),this._cacheTransformEventData(g);var p,d;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(g);return}if(this._isMainEvent(g)){var m=this._groupSelector;m?(d=this._absolutePointer,m.left=d.x-m.ex,m.top=d.y-m.ey,this.renderTop()):this._currentTransform?this._transformObject(g):(p=this.findTarget(g)||null,this._setCursorFromEvent(g,p),this._fireOverOutEvents(p,g)),this._handleEvent(g,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(g,p){var d=this._hoveredTarget,m=this._hoveredTargets,v=this.targets,C=Math.max(m.length,v.length);this.fireSyntheticInOutEvents(g,p,{oldTarget:d,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var x=0;x<C;x++)this.fireSyntheticInOutEvents(v[x],p,{oldTarget:m[x],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=g,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(g,p){var d=this._draggedoverTarget,m=this._hoveredTargets,v=this.targets,C=Math.max(m.length,v.length);this.fireSyntheticInOutEvents(g,p,{oldTarget:d,evtOut:"dragleave",evtIn:"dragenter"});for(var x=0;x<C;x++)this.fireSyntheticInOutEvents(v[x],p,{oldTarget:m[x],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=g},fireSyntheticInOutEvents:function(g,p,d){var m,v,C=d.oldTarget,x,E,L=C!==g,U=d.canvasEvtIn,O=d.canvasEvtOut;L&&(m={e:p,target:g,previousTarget:C},v={e:p,target:C,nextTarget:g}),E=g&&L,x=C&&L,x&&(O&&this.fire(O,v),C.fire(d.evtOut,v)),E&&(U&&this.fire(U,m),g.fire(d.evtIn,m))},__onMouseWheel:function(g){this._cacheTransformEventData(g),this._handleEvent(g,"wheel"),this._resetTransformEventData()},_transformObject:function(g){var p=this.getPointer(g),d=this._currentTransform;d.reset=!1,d.shiftKey=g.shiftKey,d.altKey=g[this.centeredKey],this._performTransformAction(g,d,p),d.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(g,p,d){var m=d.x,v=d.y,C=p.action,x=!1,E=p.actionHandler;E&&(x=E(g,p,m,v)),C==="drag"&&x&&(p.target.isMoving=!0,this.setCursor(p.target.moveCursor||this.moveCursor)),p.actionPerformed=p.actionPerformed||x},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(g,p){if(!p)return this.setCursor(this.defaultCursor),!1;var d=p.hoverCursor||this.hoverCursor,m=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,v=(!m||!m.contains(p))&&p._findTargetCorner(this.getPointer(g,!0));v?this.setCursor(this.getCornerCursor(v,p,g)):(p.subTargetCheck&&this.targets.concat().reverse().map(function(C){d=C.hoverCursor||d}),this.setCursor(d))},getCornerCursor:function(g,p,d){var m=p.controls[g];return m.cursorStyleHandler(d,m,p)}})}(),function(){var a=Math.min,n=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(l,h){var o=this._activeObject;return o&&this._isSelectionKeyPressed(l)&&h&&h.selectable&&this.selection&&(o!==h||o.type==="activeSelection")&&!h.onSelect({e:l})},_handleGrouping:function(l,h){var o=this._activeObject;o.__corner||h===o&&(h=this.findTarget(l,!0),!h||!h.selectable)||(o&&o.type==="activeSelection"?this._updateActiveSelection(h,l):this._createActiveSelection(h,l))},_updateActiveSelection:function(l,h){var o=this._activeObject,u=o._objects.slice(0);o.contains(l)?(o.removeWithUpdate(l),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat(),o.size()===1&&this._setActiveObject(o.item(0),h)):(o.addWithUpdate(l),this._hoveredTarget=o,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(u,h)},_createActiveSelection:function(l,h){var o=this.getActiveObjects(),u=this._createGroup(l);this._hoveredTarget=u,this._setActiveObject(u,h),this._fireSelectionEvents(o,h)},_createGroup:function(l){var h=this._objects,o=h.indexOf(this._activeObject)<h.indexOf(l),u=o?[this._activeObject,l]:[l,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(u,{canvas:this})},_groupSelectedObjects:function(l){var h=this._collectObjects(l),o;h.length===1?this.setActiveObject(h[0],l):h.length>1&&(o=new t.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(o,l))},_collectObjects:function(l){for(var h=[],o,u=this._groupSelector.ex,A=this._groupSelector.ey,g=u+this._groupSelector.left,p=A+this._groupSelector.top,d=new t.Point(a(u,g),a(A,p)),m=new t.Point(n(u,g),n(A,p)),v=!this.selectionFullyContained,C=u===g&&A===p,x=this._objects.length;x--&&(o=this._objects[x],!(!(!o||!o.selectable||!o.visible)&&(v&&o.intersectsWithRect(d,m,!0)||o.isContainedWithinRect(d,m,!0)||v&&o.containsPoint(d,null,!0)||v&&o.containsPoint(m,null,!0))&&(h.push(o),C))););return h.length>1&&(h=h.filter(function(E){return!E.onSelect({e:l})})),h},_maybeGroupObjects:function(l){this.selection&&this._groupSelector&&this._groupSelectedObjects(l),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(a){a||(a={});var n=a.format||"png",l=a.quality||1,h=(a.multiplier||1)*(a.enableRetinaScaling?this.getRetinaScaling():1),o=this.toCanvasElement(h,a);return t.util.toDataURL(o,n,l)},toCanvasElement:function(a,n){a=a||1,n=n||{};var l=(n.width||this.width)*a,h=(n.height||this.height)*a,o=this.getZoom(),u=this.width,A=this.height,g=o*a,p=this.viewportTransform,d=(p[4]-(n.left||0))*a,m=(p[5]-(n.top||0))*a,v=this.interactive,C=[g,0,0,g,d,m],x=this.enableRetinaScaling,E=t.util.createCanvasElement(),L=this.contextTop;return E.width=l,E.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=C,this.width=l,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(E.getContext("2d"),this._objects),this.viewportTransform=p,this.width=u,this.height=A,this.calcViewportBoundaries(),this.interactive=v,this.enableRetinaScaling=x,this.contextTop=L,E}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(a,n,l){if(a){var h=typeof a=="string"?JSON.parse(a):t.util.object.clone(a),o=this,u=h.clipPath,A=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(g){o.clear(),o._setBgOverlay(h,function(){u?o._enlivenObjects([u],function(p){o.clipPath=p[0],o.__setupCanvas.call(o,h,g,A,n)}):o.__setupCanvas.call(o,h,g,A,n)})},l),this}},__setupCanvas:function(a,n,l,h){var o=this;n.forEach(function(u,A){o.insertAt(u,A)}),this.renderOnAddRemove=l,delete a.objects,delete a.backgroundImage,delete a.overlayImage,delete a.background,delete a.overlay,this._setOptions(a),this.renderAll(),h&&h()},_setBgOverlay:function(a,n){var l={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!a.backgroundImage&&!a.overlayImage&&!a.background&&!a.overlay){n&&n();return}var h=function(){l.backgroundImage&&l.overlayImage&&l.backgroundColor&&l.overlayColor&&n&&n()};this.__setBgOverlay("backgroundImage",a.backgroundImage,l,h),this.__setBgOverlay("overlayImage",a.overlayImage,l,h),this.__setBgOverlay("backgroundColor",a.background,l,h),this.__setBgOverlay("overlayColor",a.overlay,l,h)},__setBgOverlay:function(a,n,l,h){var o=this;if(!n){l[a]=!0,h&&h();return}a==="backgroundImage"||a==="overlayImage"?t.util.enlivenObjects([n],function(u){o[a]=u[0],l[a]=!0,h&&h()}):this["set"+t.util.string.capitalize(a,!0)](n,function(){l[a]=!0,h&&h()})},_enlivenObjects:function(a,n,l){if(!a||a.length===0){n&&n([]);return}t.util.enlivenObjects(a,function(h){n&&n(h)},null,l)},_toDataURL:function(a,n){this.clone(function(l){n(l.toDataURL(a))})},_toDataURLWithMultiplier:function(a,n,l){this.clone(function(h){l(h.toDataURLWithMultiplier(a,n))})},clone:function(a,n){var l=JSON.stringify(this.toJSON(n));this.cloneWithoutData(function(h){h.loadFromJSON(l,function(){a&&a(h)})})},cloneWithoutData:function(a){var n=t.util.createCanvasElement();n.width=this.width,n.height=this.height;var l=new t.Canvas(n);this.backgroundImage?(l.setBackgroundImage(this.backgroundImage.src,function(){l.renderAll(),a&&a(l)}),l.backgroundImageOpacity=this.backgroundImageOpacity,l.backgroundImageStretch=this.backgroundImageStretch):a&&a(l)}}),function(a){var n=a.fabric||(a.fabric={}),l=n.util.object.extend,h=n.util.object.clone,o=n.util.toFixed,u=n.util.string.capitalize,A=n.util.degreesToRadians,g=!n.isLikelyNode,p=2;n.Object||(n.Object=n.util.createClass(n.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:g,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(d){d&&this.setOptions(d)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=n.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(d){var m=n.perfLimitSizeTotal,v=d.width,C=d.height,x=n.maxCacheSideLimit,E=n.minCacheSideLimit;if(v<=x&&C<=x&&v*C<=m)return v<E&&(d.width=E),C<E&&(d.height=E),d;var L=v/C,U=n.util.limitDimsByArea(L,m),O=n.util.capValue,X=O(E,U.x,x),rt=O(E,U.y,x);return v>X&&(d.zoomX/=v/X,d.width=X,d.capped=!0),C>rt&&(d.zoomY/=C/rt,d.height=rt,d.capped=!0),d},_getCacheCanvasDimensions:function(){var d=this.getTotalObjectScaling(),m=this._getTransformedDimensions(0,0),v=m.x*d.scaleX/this.scaleX,C=m.y*d.scaleY/this.scaleY;return{width:v+p,height:C+p,zoomX:d.scaleX,zoomY:d.scaleY,x:v,y:C}},_updateCacheCanvas:function(){var d=this.canvas;if(this.noScaleCache&&d&&d._currentTransform){var m=d._currentTransform.target,v=d._currentTransform.action;if(this===m&&v.slice&&v.slice(0,5)==="scale")return!1}var C=this._cacheCanvas,x=this._limitCacheSize(this._getCacheCanvasDimensions()),E=n.minCacheSideLimit,L=x.width,U=x.height,O,X,rt=x.zoomX,M=x.zoomY,H=L!==this.cacheWidth||U!==this.cacheHeight,J=this.zoomX!==rt||this.zoomY!==M,$=H||J,ht=0,ut=0,pt=!1;if(H){var ft=this._cacheCanvas.width,R=this._cacheCanvas.height,G=L>ft||U>R,it=(L<ft*.9||U<R*.9)&&ft>E&&R>E;pt=G||it,G&&!x.capped&&(L>E||U>E)&&(ht=L*.1,ut=U*.1)}return this instanceof n.Text&&this.path&&($=!0,pt=!0,ht+=this.getHeightOfLine(0)*this.zoomX,ut+=this.getHeightOfLine(0)*this.zoomY),$?(pt?(C.width=Math.ceil(L+ht),C.height=Math.ceil(U+ut)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,C.width,C.height)),O=x.x/2,X=x.y/2,this.cacheTranslationX=Math.round(C.width/2-O)+O,this.cacheTranslationY=Math.round(C.height/2-X)+X,this.cacheWidth=L,this.cacheHeight=U,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(rt,M),this.zoomX=rt,this.zoomY=M,!0):!1},setOptions:function(d){this._setOptions(d),this._initGradient(d.fill,"fill"),this._initGradient(d.stroke,"stroke"),this._initPattern(d.fill,"fill"),this._initPattern(d.stroke,"stroke")},transform:function(d){var m=this.group&&!this.group._transformDone||this.group&&this.canvas&&d===this.canvas.contextTop,v=this.calcTransformMatrix(!m);d.transform(v[0],v[1],v[2],v[3],v[4],v[5])},toObject:function(d){var m=n.Object.NUM_FRACTION_DIGITS,v={type:this.type,version:n.version,originX:this.originX,originY:this.originY,left:o(this.left,m),top:o(this.top,m),width:o(this.width,m),height:o(this.height,m),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:o(this.strokeWidth,m),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:o(this.strokeMiterLimit,m),scaleX:o(this.scaleX,m),scaleY:o(this.scaleY,m),angle:o(this.angle,m),flipX:this.flipX,flipY:this.flipY,opacity:o(this.opacity,m),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:o(this.skewX,m),skewY:o(this.skewY,m)};return this.clipPath&&!this.clipPath.excludeFromExport&&(v.clipPath=this.clipPath.toObject(d),v.clipPath.inverted=this.clipPath.inverted,v.clipPath.absolutePositioned=this.clipPath.absolutePositioned),n.util.populateWithProperties(this,v,d),this.includeDefaultValues||(v=this._removeDefaultValues(v)),v},toDatalessObject:function(d){return this.toObject(d)},_removeDefaultValues:function(d){var m=n.util.getKlass(d.type).prototype,v=m.stateProperties;return v.forEach(function(C){C==="left"||C==="top"||(d[C]===m[C]&&delete d[C],Array.isArray(d[C])&&Array.isArray(m[C])&&d[C].length===0&&m[C].length===0&&delete d[C])}),d},toString:function(){return"#<fabric."+u(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var d=n.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(d.scaleX),scaleY:Math.abs(d.scaleY)}},getTotalObjectScaling:function(){var d=this.getObjectScaling(),m=d.scaleX,v=d.scaleY;if(this.canvas){var C=this.canvas.getZoom(),x=this.canvas.getRetinaScaling();m*=C*x,v*=C*x}return{scaleX:m,scaleY:v}},getObjectOpacity:function(){var d=this.opacity;return this.group&&(d*=this.group.getObjectOpacity()),d},_set:function(d,m){var v=d==="scaleX"||d==="scaleY",C=this[d]!==m,x=!1;return v&&(m=this._constrainScale(m)),d==="scaleX"&&m<0?(this.flipX=!this.flipX,m*=-1):d==="scaleY"&&m<0?(this.flipY=!this.flipY,m*=-1):d==="shadow"&&m&&!(m instanceof n.Shadow)?m=new n.Shadow(m):d==="dirty"&&this.group&&this.group.set("dirty",m),this[d]=m,C&&(x=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(d)>-1?(this.dirty=!0,x&&this.group.set("dirty",!0)):x&&this.stateProperties.indexOf(d)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:n.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(d){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(d.save(),this._setupCompositeOperation(d),this.drawSelectionBackground(d),this.transform(d),this._setOpacity(d),this._setShadow(d,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(d)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(d),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),d.restore())},renderCache:function(d){d=d||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,d.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(d,m){if(d.save(),m.inverted?d.globalCompositeOperation="destination-out":d.globalCompositeOperation="destination-in",m.absolutePositioned){var v=n.util.invertTransform(this.calcTransformMatrix());d.transform(v[0],v[1],v[2],v[3],v[4],v[5])}m.transform(d),d.scale(1/m.zoomX,1/m.zoomY),d.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),d.restore()},drawObject:function(d,m){var v=this.fill,C=this.stroke;m?(this.fill="black",this.stroke="",this._setClippingProperties(d)):this._renderBackground(d),this._render(d),this._drawClipPath(d,this.clipPath),this.fill=v,this.stroke=C},_drawClipPath:function(d,m){m&&(m.canvas=this.canvas,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCache(d,m))},drawCacheOnCanvas:function(d){d.scale(1/this.zoomX,1/this.zoomY),d.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(d){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!d&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!d){var m=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-v/2,m,v)}return!0}return!1},_renderBackground:function(d){if(this.backgroundColor){var m=this._getNonTransformedDimensions();d.fillStyle=this.backgroundColor,d.fillRect(-m.x/2,-m.y/2,m.x,m.y),this._removeShadow(d)}},_setOpacity:function(d){this.group&&!this.group._transformDone?d.globalAlpha=this.getObjectOpacity():d.globalAlpha*=this.opacity},_setStrokeStyles:function(d,m){var v=m.stroke;v&&(d.lineWidth=m.strokeWidth,d.lineCap=m.strokeLineCap,d.lineDashOffset=m.strokeDashOffset,d.lineJoin=m.strokeLineJoin,d.miterLimit=m.strokeMiterLimit,v.toLive?v.gradientUnits==="percentage"||v.gradientTransform||v.patternTransform?this._applyPatternForTransformedGradient(d,v):(d.strokeStyle=v.toLive(d,this),this._applyPatternGradientTransform(d,v)):d.strokeStyle=m.stroke)},_setFillStyles:function(d,m){var v=m.fill;v&&(v.toLive?(d.fillStyle=v.toLive(d,this),this._applyPatternGradientTransform(d,m.fill)):d.fillStyle=v)},_setClippingProperties:function(d){d.globalAlpha=1,d.strokeStyle="transparent",d.fillStyle="#000000"},_setLineDash:function(d,m){!m||m.length===0||(1&m.length&&m.push.apply(m,m),d.setLineDash(m))},_renderControls:function(d,m){var v=this.getViewportTransform(),C=this.calcTransformMatrix(),x,E,L;m=m||{},E=typeof m.hasBorders<"u"?m.hasBorders:this.hasBorders,L=typeof m.hasControls<"u"?m.hasControls:this.hasControls,C=n.util.multiplyTransformMatrices(v,C),x=n.util.qrDecompose(C),d.save(),d.translate(x.translateX,x.translateY),d.lineWidth=1*this.borderScaleFactor,this.group||(d.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(x.angle-=180),d.rotate(A(this.group?x.angle:this.angle)),m.forActiveSelection||this.group?E&&this.drawBordersInGroup(d,x,m):E&&this.drawBorders(d,m),L&&this.drawControls(d,m),d.restore()},_setShadow:function(d){if(this.shadow){var m=this.shadow,v=this.canvas,C,x=v&&v.viewportTransform[0]||1,E=v&&v.viewportTransform[3]||1;m.nonScaling?C={scaleX:1,scaleY:1}:C=this.getObjectScaling(),v&&v._isRetinaScaling()&&(x*=n.devicePixelRatio,E*=n.devicePixelRatio),d.shadowColor=m.color,d.shadowBlur=m.blur*n.browserShadowBlurConstant*(x+E)*(C.scaleX+C.scaleY)/4,d.shadowOffsetX=m.offsetX*x*C.scaleX,d.shadowOffsetY=m.offsetY*E*C.scaleY}},_removeShadow:function(d){this.shadow&&(d.shadowColor="",d.shadowBlur=d.shadowOffsetX=d.shadowOffsetY=0)},_applyPatternGradientTransform:function(d,m){if(!m||!m.toLive)return{offsetX:0,offsetY:0};var v=m.gradientTransform||m.patternTransform,C=-this.width/2+m.offsetX||0,x=-this.height/2+m.offsetY||0;return m.gradientUnits==="percentage"?d.transform(this.width,0,0,this.height,C,x):d.transform(1,0,0,1,C,x),v&&d.transform(v[0],v[1],v[2],v[3],v[4],v[5]),{offsetX:C,offsetY:x}},_renderPaintInOrder:function(d){this.paintFirst==="stroke"?(this._renderStroke(d),this._renderFill(d)):(this._renderFill(d),this._renderStroke(d))},_render:function(){},_renderFill:function(d){this.fill&&(d.save(),this._setFillStyles(d,this),this.fillRule==="evenodd"?d.fill("evenodd"):d.fill(),d.restore())},_renderStroke:function(d){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(d),d.save(),this.strokeUniform&&this.group){var m=this.getObjectScaling();d.scale(1/m.scaleX,1/m.scaleY)}else this.strokeUniform&&d.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(d,this.strokeDashArray),this._setStrokeStyles(d,this),d.stroke(),d.restore()}},_applyPatternForTransformedGradient:function(d,m){var v=this._limitCacheSize(this._getCacheCanvasDimensions()),C=n.util.createCanvasElement(),x,E=this.canvas.getRetinaScaling(),L=v.x/this.scaleX/E,U=v.y/this.scaleY/E;C.width=L,C.height=U,x=C.getContext("2d"),x.beginPath(),x.moveTo(0,0),x.lineTo(L,0),x.lineTo(L,U),x.lineTo(0,U),x.closePath(),x.translate(L/2,U/2),x.scale(v.zoomX/this.scaleX/E,v.zoomY/this.scaleY/E),this._applyPatternGradientTransform(x,m),x.fillStyle=m.toLive(d),x.fill(),d.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),d.scale(E*this.scaleX/v.zoomX,E*this.scaleY/v.zoomY),d.strokeStyle=x.createPattern(C,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var d=n.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",d.scaleX),this.set("scaleY",d.scaleY),this.angle=d.angle,this.skewX=d.skewX,this.skewY=0}},_removeTransformMatrix:function(d){var m=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),m=n.util.transformPoint(m,this.transformMatrix)),this.transformMatrix=null,d&&(this.scaleX*=d.scaleX,this.scaleY*=d.scaleY,this.cropX=d.cropX,this.cropY=d.cropY,m.x+=d.offsetLeft,m.y+=d.offsetTop,this.width=d.width,this.height=d.height),this.setPositionByOrigin(m,"center","center")},clone:function(d,m){var v=this.toObject(m);this.constructor.fromObject?this.constructor.fromObject(v,d):n.Object._fromObject("Object",v,d)},cloneAsImage:function(d,m){var v=this.toCanvasElement(m);return d&&d(new n.Image(v)),this},toCanvasElement:function(d){d||(d={});var m=n.util,v=m.saveObjectTransform(this),C=this.group,x=this.shadow,E=Math.abs,L=(d.multiplier||1)*(d.enableRetinaScaling?n.devicePixelRatio:1);delete this.group,d.withoutTransform&&m.resetObjectTransform(this),d.withoutShadow&&(this.shadow=null);var U=n.util.createCanvasElement(),O=this.getBoundingRect(!0,!0),X=this.shadow,rt,M={x:0,y:0},H,J,$;X&&(H=X.blur,X.nonScaling?rt={scaleX:1,scaleY:1}:rt=this.getObjectScaling(),M.x=2*Math.round(E(X.offsetX)+H)*E(rt.scaleX),M.y=2*Math.round(E(X.offsetY)+H)*E(rt.scaleY)),J=O.width+M.x,$=O.height+M.y,U.width=Math.ceil(J),U.height=Math.ceil($);var ht=new n.StaticCanvas(U,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});d.format==="jpeg"&&(ht.backgroundColor="#fff"),this.setPositionByOrigin(new n.Point(ht.width/2,ht.height/2),"center","center");var ut=this.canvas;ht.add(this);var pt=ht.toCanvasElement(L||1,d);return this.shadow=x,this.set("canvas",ut),C&&(this.group=C),this.set(v).setCoords(),ht._objects=[],ht.dispose(),ht=null,pt},toDataURL:function(d){return d||(d={}),n.util.toDataURL(this.toCanvasElement(d),d.format||"png",d.quality||1)},isType:function(d){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===d},complexity:function(){return 1},toJSON:function(d){return this.toObject(d)},rotate:function(d){var m=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return m&&this._setOriginToCenter(),this.set("angle",d),m&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(d,m){m=m||this.canvas.getPointer(d);var v=new n.Point(m.x,m.y),C=this._getLeftTopCoords();return this.angle&&(v=n.util.rotatePoint(v,C,A(-this.angle))),{x:v.x-C.x,y:v.y-C.y}},_setupCompositeOperation:function(d){this.globalCompositeOperation&&(d.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){n.runningAnimations&&n.runningAnimations.cancelByTarget(this)}}),n.util.createAccessors&&n.util.createAccessors(n.Object),l(n.Object.prototype,n.Observable),n.Object.NUM_FRACTION_DIGITS=2,n.Object.ENLIVEN_PROPS=["clipPath"],n.Object._fromObject=function(d,m,v,C){var x=n[d];m=h(m,!0),n.util.enlivenPatterns([m.fill,m.stroke],function(E){typeof E[0]<"u"&&(m.fill=E[0]),typeof E[1]<"u"&&(m.stroke=E[1]),n.util.enlivenObjectEnlivables(m,m,function(){var L=C?new x(m[C],m):new x(m);v&&v(L)})})},n.Object.__uid=0)}(r),function(){var a=t.util.degreesToRadians,n={left:-.5,center:0,right:.5},l={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(h,o,u,A,g){var p=h.x,d=h.y,m,v,C;return typeof o=="string"?o=n[o]:o-=.5,typeof A=="string"?A=n[A]:A-=.5,m=A-o,typeof u=="string"?u=l[u]:u-=.5,typeof g=="string"?g=l[g]:g-=.5,v=g-u,(m||v)&&(C=this._getTransformedDimensions(),p=h.x+m*C.x,d=h.y+v*C.y),new t.Point(p,d)},translateToCenterPoint:function(h,o,u){var A=this.translateToGivenOrigin(h,o,u,"center","center");return this.angle?t.util.rotatePoint(A,h,a(this.angle)):A},translateToOriginPoint:function(h,o,u){var A=this.translateToGivenOrigin(h,"center","center",o,u);return this.angle?t.util.rotatePoint(A,h,a(this.angle)):A},getCenterPoint:function(){var h=new t.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,o){var u=this.getCenterPoint();return this.translateToOriginPoint(u,h,o)},toLocalPoint:function(h,o,u){var A=this.getCenterPoint(),g,p;return typeof o<"u"&&typeof u<"u"?g=this.translateToGivenOrigin(A,"center","center",o,u):g=new t.Point(this.left,this.top),p=new t.Point(h.x,h.y),this.angle&&(p=t.util.rotatePoint(p,A,-a(this.angle))),p.subtractEquals(g)},setPositionByOrigin:function(h,o,u){var A=this.translateToCenterPoint(h,o,u),g=this.translateToOriginPoint(A,this.originX,this.originY);this.set("left",g.x),this.set("top",g.y)},adjustPosition:function(h){var o=a(this.angle),u=this.getScaledWidth(),A=t.util.cos(o)*u,g=t.util.sin(o)*u,p,d;typeof this.originX=="string"?p=n[this.originX]:p=this.originX-.5,typeof h=="string"?d=n[h]:d=h-.5,this.left+=A*(d-p),this.top+=g*(d-p),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function a(u){return[new t.Point(u.tl.x,u.tl.y),new t.Point(u.tr.x,u.tr.y),new t.Point(u.br.x,u.br.y),new t.Point(u.bl.x,u.bl.y)]}var n=t.util,l=n.degreesToRadians,h=n.multiplyTransformMatrices,o=n.transformPoint;n.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(u,A){return A?u?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),u?this.aCoords:this.lineCoords)},getCoords:function(u,A){return a(this._getCoords(u,A))},intersectsWithRect:function(u,A,g,p){var d=this.getCoords(g,p),m=t.Intersection.intersectPolygonRectangle(d,u,A);return m.status==="Intersection"},intersectsWithObject:function(u,A,g){var p=t.Intersection.intersectPolygonPolygon(this.getCoords(A,g),u.getCoords(A,g));return p.status==="Intersection"||u.isContainedWithinObject(this,A,g)||this.isContainedWithinObject(u,A,g)},isContainedWithinObject:function(u,A,g){for(var p=this.getCoords(A,g),d=A?u.aCoords:u.lineCoords,m=0,v=u._getImageLines(d);m<4;m++)if(!u.containsPoint(p[m],v))return!1;return!0},isContainedWithinRect:function(u,A,g,p){var d=this.getBoundingRect(g,p);return d.left>=u.x&&d.left+d.width<=A.x&&d.top>=u.y&&d.top+d.height<=A.y},containsPoint:function(u,m,g,p){var d=this._getCoords(g,p),m=m||this._getImageLines(d),v=this._findCrossPoints(u,m);return v!==0&&v%2===1},isOnScreen:function(u){if(!this.canvas)return!1;var A=this.canvas.vptCoords.tl,g=this.canvas.vptCoords.br,p=this.getCoords(!0,u);return p.some(function(d){return d.x<=g.x&&d.x>=A.x&&d.y<=g.y&&d.y>=A.y})||this.intersectsWithRect(A,g,!0,u)?!0:this._containsCenterOfCanvas(A,g,u)},_containsCenterOfCanvas:function(u,A,g){var p={x:(u.x+A.x)/2,y:(u.y+A.y)/2};return!!this.containsPoint(p,null,!0,g)},isPartiallyOnScreen:function(u){if(!this.canvas)return!1;var A=this.canvas.vptCoords.tl,g=this.canvas.vptCoords.br;if(this.intersectsWithRect(A,g,!0,u))return!0;var p=this.getCoords(!0,u).every(function(d){return(d.x>=g.x||d.x<=A.x)&&(d.y>=g.y||d.y<=A.y)});return p&&this._containsCenterOfCanvas(A,g,u)},_getImageLines:function(u){var A={topline:{o:u.tl,d:u.tr},rightline:{o:u.tr,d:u.br},bottomline:{o:u.br,d:u.bl},leftline:{o:u.bl,d:u.tl}};return A},_findCrossPoints:function(u,A){var g,p,d,m,v,C=0,x;for(var E in A)if(x=A[E],!(x.o.y<u.y&&x.d.y<u.y)&&!(x.o.y>=u.y&&x.d.y>=u.y)&&(x.o.x===x.d.x&&x.o.x>=u.x?v=x.o.x:(g=0,p=(x.d.y-x.o.y)/(x.d.x-x.o.x),d=u.y-g*u.x,m=x.o.y-p*x.o.x,v=-(d-m)/(g-p)),v>=u.x&&(C+=1),C===2))break;return C},getBoundingRect:function(u,A){var g=this.getCoords(u,A);return n.makeBoundingBoxFromPoints(g)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(u){return Math.abs(u)<this.minScaleLimit?u<0?-this.minScaleLimit:this.minScaleLimit:u===0?1e-4:u},scale:function(u){return this._set("scaleX",u),this._set("scaleY",u),this.setCoords()},scaleToWidth:function(u,A){var g=this.getBoundingRect(A).width/this.getScaledWidth();return this.scale(u/this.width/g)},scaleToHeight:function(u,A){var g=this.getBoundingRect(A).height/this.getScaledHeight();return this.scale(u/this.height/g)},calcLineCoords:function(){var u=this.getViewportTransform(),A=this.padding,g=l(this.angle),p=n.cos(g),d=n.sin(g),m=p*A,v=d*A,C=m+v,x=m-v,E=this.calcACoords(),L={tl:o(E.tl,u),tr:o(E.tr,u),bl:o(E.bl,u),br:o(E.br,u)};return A&&(L.tl.x-=x,L.tl.y-=C,L.tr.x+=C,L.tr.y-=x,L.bl.x-=C,L.bl.y+=x,L.br.x+=x,L.br.y+=C),L},calcOCoords:function(){var u=this._calcRotateMatrix(),A=this._calcTranslateMatrix(),g=this.getViewportTransform(),p=h(g,A),d=h(p,u),d=h(d,[1/g[0],0,0,1/g[3],0,0]),m=this._calculateCurrentDimensions(),v={};return this.forEachControl(function(C,x,E){v[x]=C.positionHandler(m,d,E)}),v},calcACoords:function(){var u=this._calcRotateMatrix(),A=this._calcTranslateMatrix(),g=h(A,u),p=this._getTransformedDimensions(),d=p.x/2,m=p.y/2;return{tl:o({x:-d,y:-m},g),tr:o({x:d,y:-m},g),bl:o({x:-d,y:m},g),br:o({x:d,y:m},g)}},setCoords:function(u){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),u?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return n.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var u=this.getCenterPoint();return[1,0,0,1,u.x,u.y]},transformMatrixKey:function(u){var A="_",g="";return!u&&this.group&&(g=this.group.transformMatrixKey(u)+A),g+this.top+A+this.left+A+this.scaleX+A+this.scaleY+A+this.skewX+A+this.skewY+A+this.angle+A+this.originX+A+this.originY+A+this.width+A+this.height+A+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(u){var A=this.calcOwnMatrix();if(u||!this.group)return A;var g=this.transformMatrixKey(u),p=this.matrixCache||(this.matrixCache={});return p.key===g?p.value:(this.group&&(A=h(this.group.calcTransformMatrix(!1),A)),p.key=g,p.value=A,A)},calcOwnMatrix:function(){var u=this.transformMatrixKey(!0),A=this.ownMatrixCache||(this.ownMatrixCache={});if(A.key===u)return A.value;var g=this._calcTranslateMatrix(),p={angle:this.angle,translateX:g[4],translateY:g[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return A.key=u,A.value=n.composeMatrix(p),A.value},_getNonTransformedDimensions:function(){var u=this.strokeWidth,A=this.width+u,g=this.height+u;return{x:A,y:g}},_getTransformedDimensions:function(u,A){typeof u>"u"&&(u=this.skewX),typeof A>"u"&&(A=this.skewY);var g,p,d,m=u===0&&A===0;if(this.strokeUniform?(p=this.width,d=this.height):(g=this._getNonTransformedDimensions(),p=g.x,d=g.y),m)return this._finalizeDimensions(p*this.scaleX,d*this.scaleY);var v=n.sizeAfterTransform(p,d,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:u,skewY:A});return this._finalizeDimensions(v.x,v.y)},_finalizeDimensions:function(u,A){return this.strokeUniform?{x:u+this.strokeWidth,y:A+this.strokeWidth}:{x:u,y:A}},_calculateCurrentDimensions:function(){var u=this.getViewportTransform(),A=this._getTransformedDimensions(),g=o(A,u,!0);return g.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(a){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,a):this.canvas&&this.canvas.sendBackwards(this,a),this},bringForward:function(a){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,a):this.canvas&&this.canvas.bringForward(this,a),this},moveTo:function(a){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,a):this.canvas&&this.canvas.moveTo(this,a),this}}),function(){function a(l,h){if(h){if(h.toLive)return l+": url(#SVGID_"+h.id+"); ";var o=new t.Color(h),u=l+": "+o.toRgb()+"; ",A=o.getAlpha();return A!==1&&(u+=l+"-opacity: "+A.toString()+"; "),u}else return l+": none; "}var n=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(l){var h=this.fillRule?this.fillRule:"nonzero",o=this.strokeWidth?this.strokeWidth:"0",u=this.strokeDashArray?this.strokeDashArray.join(" "):"none",A=this.strokeDashOffset?this.strokeDashOffset:"0",g=this.strokeLineCap?this.strokeLineCap:"butt",p=this.strokeLineJoin?this.strokeLineJoin:"miter",d=this.strokeMiterLimit?this.strokeMiterLimit:"4",m=typeof this.opacity<"u"?this.opacity:"1",v=this.visible?"":" visibility: hidden;",C=l?"":this.getSvgFilter(),x=a("fill",this.fill),E=a("stroke",this.stroke);return[E,"stroke-width: ",o,"; ","stroke-dasharray: ",u,"; ","stroke-linecap: ",g,"; ","stroke-dashoffset: ",A,"; ","stroke-linejoin: ",p,"; ","stroke-miterlimit: ",d,"; ",x,"fill-rule: ",h,"; ","opacity: ",m,";",C,v].join("")},getSvgSpanStyles:function(l,h){var o="; ",A=l.fontFamily?"font-family: "+(l.fontFamily.indexOf("'")===-1&&l.fontFamily.indexOf('"')===-1?"'"+l.fontFamily+"'":l.fontFamily)+o:"",u=l.strokeWidth?"stroke-width: "+l.strokeWidth+o:"",A=A,g=l.fontSize?"font-size: "+l.fontSize+"px"+o:"",p=l.fontStyle?"font-style: "+l.fontStyle+o:"",d=l.fontWeight?"font-weight: "+l.fontWeight+o:"",m=l.fill?a("fill",l.fill):"",v=l.stroke?a("stroke",l.stroke):"",C=this.getSvgTextDecoration(l),x=l.deltaY?"baseline-shift: "+-l.deltaY+"; ":"";return C&&(C="text-decoration: "+C+o),[v,u,A,g,p,d,C,m,x,h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(l){return["overline","underline","line-through"].filter(function(h){return l[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(l,h){var o=l?this.calcTransformMatrix():this.calcOwnMatrix(),u='transform="'+t.util.matrixToSVG(o);return u+(h||"")+'" '},_setSVGBg:function(l){if(this.backgroundColor){var h=t.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',n(-this.width/2,h),'" y="',n(-this.height/2,h),'" width="',n(this.width,h),'" height="',n(this.height,h),`"></rect>
`)}},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(l),{reviver:l})},toClipPathSVG:function(l){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(l),{reviver:l})},_createBaseClipPathSVGMarkup:function(l,h){h=h||{};var o=h.reviver,u=h.additionalTransform||"",A=[this.getSvgTransform(!0,u),this.getSvgCommons()].join(""),g=l.indexOf("COMMON_PARTS");return l[g]=A,o?o(l.join("")):l.join("")},_createBaseSVGMarkup:function(l,h){h=h||{};var o=h.noStyle,u=h.reviver,A=o?"":'style="'+this.getSvgStyles()+'" ',g=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",p=this.clipPath,d=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",m=p&&p.absolutePositioned,v=this.stroke,C=this.fill,x=this.shadow,E,L=[],U,O=l.indexOf("COMMON_PARTS"),X=h.additionalTransform;return p&&(p.clipPathId="CLIPPATH_"+t.Object.__uid++,U='<clipPath id="'+p.clipPathId+`" >
`+p.toClipPathSVG(u)+`</clipPath>
`),m&&L.push("<g ",g,this.getSvgCommons(),` >
`),L.push("<g ",this.getSvgTransform(!1),m?"":g+this.getSvgCommons(),` >
`),E=[A,d,o?"":this.addPaintOrder()," ",X?'transform="'+X+'" ':""].join(""),l[O]=E,C&&C.toLive&&L.push(C.toSVG(this)),v&&v.toLive&&L.push(v.toSVG(this)),x&&L.push(x.toSVG(this)),p&&L.push(U),L.push(l.join("")),L.push(`</g>
`),m&&L.push(`</g>
`),u?u(L.join("")):L.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var a=t.util.object.extend,n="stateProperties";function l(o,u,A){var g={},p=!0;A.forEach(function(d){g[d]=o[d]}),a(o[u],g,p)}function h(o,u,A){if(o===u)return!0;if(Array.isArray(o)){if(!Array.isArray(u)||o.length!==u.length)return!1;for(var g=0,p=o.length;g<p;g++)if(!h(o[g],u[g]))return!1;return!0}else if(o&&typeof o=="object"){var d=Object.keys(o),m;if(!u||typeof u!="object"||!A&&d.length!==Object.keys(u).length)return!1;for(var g=0,p=d.length;g<p;g++)if(m=d[g],!(m==="canvas"||m==="group")&&!h(o[m],u[m]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(o){o=o||n;var u="_"+o;return Object.keys(this[u]).length<this[o].length?!0:!h(this[u],this,!0)},saveState:function(o){var u=o&&o.propertySet||n,A="_"+u;return this[A]?(l(this,A,this[u]),o&&o.stateProperties&&l(this,A,o.stateProperties),this):this.setupState(o)},setupState:function(o){o=o||{};var u=o.propertySet||n;return o.propertySet=u,this["_"+u]={},this.saveState(o),this}})}(),function(){var a=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(n,l){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var h=n.x,o=n.y,u,A,g=Object.keys(this.oCoords),p=g.length-1,d;for(this.__corner=0;p>=0;p--)if(d=g[p],!!this.isControlVisible(d)&&(A=this._getImageLines(l?this.oCoords[d].touchCorner:this.oCoords[d].corner),u=this._findCrossPoints({x:h,y:o},A),u!==0&&u%2===1))return this.__corner=d,d;return!1},forEachControl:function(n){for(var l in this.controls)n(this.controls[l],l,this)},_setCornerCoords:function(){var n=this.oCoords;for(var l in n){var h=this.controls[l];n[l].corner=h.calcCornerCoords(this.angle,this.cornerSize,n[l].x,n[l].y,!1),n[l].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,n[l].x,n[l].y,!0)}},drawSelectionBackground:function(n){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;n.save();var l=this.getCenterPoint(),h=this._calculateCurrentDimensions(),o=this.canvas.viewportTransform;return n.translate(l.x,l.y),n.scale(1/o[0],1/o[3]),n.rotate(a(this.angle)),n.fillStyle=this.selectionBackgroundColor,n.fillRect(-h.x/2,-h.y/2,h.x,h.y),n.restore(),this},drawBorders:function(n,l){l=l||{};var h=this._calculateCurrentDimensions(),o=this.borderScaleFactor,u=h.x+o,A=h.y+o,g=typeof l.hasControls<"u"?l.hasControls:this.hasControls,p=!1;return n.save(),n.strokeStyle=l.borderColor||this.borderColor,this._setLineDash(n,l.borderDashArray||this.borderDashArray),n.strokeRect(-u/2,-A/2,u,A),g&&(n.beginPath(),this.forEachControl(function(d,m,v){d.withConnection&&d.getVisibility(v,m)&&(p=!0,n.moveTo(d.x*u,d.y*A),n.lineTo(d.x*u+d.offsetX,d.y*A+d.offsetY))}),p&&n.stroke()),n.restore(),this},drawBordersInGroup:function(n,l,h){h=h||{};var o=t.util.sizeAfterTransform(this.width,this.height,l),u=this.strokeWidth,A=this.strokeUniform,g=this.borderScaleFactor,p=o.x+u*(A?this.canvas.getZoom():l.scaleX)+g,d=o.y+u*(A?this.canvas.getZoom():l.scaleY)+g;return n.save(),this._setLineDash(n,h.borderDashArray||this.borderDashArray),n.strokeStyle=h.borderColor||this.borderColor,n.strokeRect(-p/2,-d/2,p,d),n.restore(),this},drawControls:function(n,l){l=l||{},n.save();var h=this.canvas.getRetinaScaling(),o,u;return n.setTransform(h,0,0,h,0,0),n.strokeStyle=n.fillStyle=l.cornerColor||this.cornerColor,this.transparentCorners||(n.strokeStyle=l.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(n,l.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(o=this.group.calcTransformMatrix()),this.forEachControl(function(A,g,p){u=p.oCoords[g],A.getVisibility(p,g)&&(o&&(u=t.util.transformPoint(u,o)),A.render(n,u.x,u.y,l,p))}),n.restore(),this},isControlVisible:function(n){return this.controls[n]&&this.controls[n].getVisibility(this,n)},setControlVisible:function(n,l){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[n]=l,this},setControlsVisibility:function(n){n||(n={});for(var l in n)this.setControlVisible(l,n[l]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(a,n){n=n||{};var l=function(){},h=n.onComplete||l,o=n.onChange||l,u=this;return t.util.animate({target:this,startValue:a.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(A){a.set("left",A),u.requestRenderAll(),o()},onComplete:function(){a.setCoords(),h()}})},fxCenterObjectV:function(a,n){n=n||{};var l=function(){},h=n.onComplete||l,o=n.onChange||l,u=this;return t.util.animate({target:this,startValue:a.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(A){a.set("top",A),u.requestRenderAll(),o()},onComplete:function(){a.setCoords(),h()}})},fxRemove:function(a,n){n=n||{};var l=function(){},h=n.onComplete||l,o=n.onChange||l,u=this;return t.util.animate({target:this,startValue:a.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(A){a.set("opacity",A),u.requestRenderAll(),o()},onComplete:function(){u.remove(a),h()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var a=[],n,l,h=[];for(n in arguments[0])a.push(n);for(var o=0,u=a.length;o<u;o++)n=a[o],l=o!==u-1,h.push(this._animate(n,arguments[0][n],arguments[1],l));return h}else return this._animate.apply(this,arguments)},_animate:function(a,n,l,h){var o=this,u;n=n.toString(),l?l=t.util.object.clone(l):l={},~a.indexOf(".")&&(u=a.split("."));var A=o.colorProperties.indexOf(a)>-1||u&&o.colorProperties.indexOf(u[1])>-1,g=u?this.get(u[0])[u[1]]:this.get(a);"from"in l||(l.from=g),A||(~n.indexOf("=")?n=g+parseFloat(n.replace("=","")):n=parseFloat(n));var p={target:this,startValue:l.from,endValue:n,byValue:l.by,easing:l.easing,duration:l.duration,abort:l.abort&&function(d,m,v){return l.abort.call(o,d,m,v)},onChange:function(d,m,v){u?o[u[0]][u[1]]=d:o.set(a,d),!h&&l.onChange&&l.onChange(d,m,v)},onComplete:function(d,m,v){h||(o.setCoords(),l.onComplete&&l.onComplete(d,m,v))}};return A?t.util.animateColor(p.startValue,p.endValue,p.duration,p):t.util.animate(p)}}),function(a){var n=a.fabric||(a.fabric={}),l=n.util.object.extend,h=n.util.object.clone,o={x1:1,x2:1,y1:1,y2:1};if(n.Line){n.warn("fabric.Line is already defined");return}n.Line=n.util.createClass(n.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:n.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(A,g){A||(A=[0,0,0,0]),this.callSuper("initialize",g),this.set("x1",A[0]),this.set("y1",A[1]),this.set("x2",A[2]),this.set("y2",A[3]),this._setWidthHeight(g)},_setWidthHeight:function(A){A||(A={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in A?A.left:this._getLeftToOriginX(),this.top="top"in A?A.top:this._getTopToOriginY()},_set:function(A,g){return this.callSuper("_set",A,g),typeof o[A]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:u({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:u({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(A){A.beginPath();var g=this.calcLinePoints();A.moveTo(g.x1,g.y1),A.lineTo(g.x2,g.y2),A.lineWidth=this.strokeWidth;var p=A.strokeStyle;A.strokeStyle=this.stroke||A.fillStyle,this.stroke&&this._renderStroke(A),A.strokeStyle=p},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(A){return l(this.callSuper("toObject",A),this.calcLinePoints())},_getNonTransformedDimensions:function(){var A=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(A.y-=this.strokeWidth),this.height===0&&(A.x-=this.strokeWidth)),A},calcLinePoints:function(){var A=this.x1<=this.x2?-1:1,g=this.y1<=this.y2?-1:1,p=A*this.width*.5,d=g*this.height*.5,m=A*this.width*-.5,v=g*this.height*-.5;return{x1:p,x2:m,y1:d,y2:v}},_toSVG:function(){var A=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',A.x1,'" y1="',A.y1,'" x2="',A.x2,'" y2="',A.y2,`" />
`]}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),n.Line.fromElement=function(A,g,p){p=p||{};var d=n.parseAttributes(A,n.Line.ATTRIBUTE_NAMES),m=[d.x1||0,d.y1||0,d.x2||0,d.y2||0];g(new n.Line(m,l(d,p)))},n.Line.fromObject=function(A,g){function p(m){delete m.points,g&&g(m)}var d=h(A,!0);d.points=[A.x1,A.y1,A.x2,A.y2],n.Object._fromObject("Line",d,p,"points")};function u(A,g){var p=A.origin,d=A.axis1,m=A.axis2,v=A.dimension,C=g.nearest,x=g.center,E=g.farthest;return function(){switch(this.get(p)){case C:return Math.min(this.get(d),this.get(m));case x:return Math.min(this.get(d),this.get(m))+.5*this.get(v);case E:return Math.max(this.get(d),this.get(m))}}}}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.util.degreesToRadians;if(n.Circle){n.warn("fabric.Circle is already defined.");return}n.Circle=n.util.createClass(n.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:n.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(o,u){return this.callSuper("_set",o,u),o==="radius"&&this.setRadius(u),this},toObject:function(o){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(o))},_toSVG:function(){var o,u=0,A=0,g=(this.endAngle-this.startAngle)%360;if(g===0)o=["<circle ","COMMON_PARTS",'cx="'+u+'" cy="'+A+'" ','r="',this.radius,`" />
`];else{var p=l(this.startAngle),d=l(this.endAngle),m=this.radius,v=n.util.cos(p)*m,C=n.util.sin(p)*m,x=n.util.cos(d)*m,E=n.util.sin(d)*m,L=g>180?"1":"0";o=['<path d="M '+v+" "+C," A "+m+" "+m," 0 ",+L+" 1"," "+x+" "+E,'" ',"COMMON_PARTS",` />
`]}return o},_render:function(o){o.beginPath(),o.arc(0,0,this.radius,l(this.startAngle),l(this.endAngle),!1),this._renderPaintInOrder(o)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(o){return this.radius=o,this.set("width",o*2).set("height",o*2)}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),n.Circle.fromElement=function(o,u){var A=n.parseAttributes(o,n.Circle.ATTRIBUTE_NAMES);if(!h(A))throw new Error("value of `r` attribute is required and can not be negative");A.left=(A.left||0)-A.radius,A.top=(A.top||0)-A.radius,u(new n.Circle(A))};function h(o){return"radius"in o&&o.radius>=0}n.Circle.fromObject=function(o,u){n.Object._fromObject("Circle",o,u)}}(r),function(a){var n=a.fabric||(a.fabric={});if(n.Triangle){n.warn("fabric.Triangle is already defined");return}n.Triangle=n.util.createClass(n.Object,{type:"triangle",width:100,height:100,_render:function(l){var h=this.width/2,o=this.height/2;l.beginPath(),l.moveTo(-h,o),l.lineTo(0,-o),l.lineTo(h,o),l.closePath(),this._renderPaintInOrder(l)},_toSVG:function(){var l=this.width/2,h=this.height/2,o=[-l+" "+h,"0 "+-h,l+" "+h].join(",");return["<polygon ","COMMON_PARTS",'points="',o,'" />']}}),n.Triangle.fromObject=function(l,h){return n.Object._fromObject("Triangle",l,h)}}(r),function(a){var n=a.fabric||(a.fabric={}),l=Math.PI*2;if(n.Ellipse){n.warn("fabric.Ellipse is already defined.");return}n.Ellipse=n.util.createClass(n.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,o){switch(this.callSuper("_set",h,o),h){case"rx":this.rx=o,this.set("width",o*2);break;case"ry":this.ry=o,this.set("height",o*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,l,!1),h.restore(),this._renderPaintInOrder(h)}}),n.Ellipse.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),n.Ellipse.fromElement=function(h,o){var u=n.parseAttributes(h,n.Ellipse.ATTRIBUTE_NAMES);u.left=(u.left||0)-u.rx,u.top=(u.top||0)-u.ry,o(new n.Ellipse(u))},n.Ellipse.fromObject=function(h,o){n.Object._fromObject("Ellipse",h,o)}}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.util.object.extend;if(n.Rect){n.warn("fabric.Rect is already defined");return}n.Rect=n.util.createClass(n.Object,{stateProperties:n.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var o=this.rx?Math.min(this.rx,this.width/2):0,u=this.ry?Math.min(this.ry,this.height/2):0,A=this.width,g=this.height,p=-this.width/2,d=-this.height/2,m=o!==0||u!==0,v=1-.5522847498;h.beginPath(),h.moveTo(p+o,d),h.lineTo(p+A-o,d),m&&h.bezierCurveTo(p+A-v*o,d,p+A,d+v*u,p+A,d+u),h.lineTo(p+A,d+g-u),m&&h.bezierCurveTo(p+A,d+g-v*u,p+A-v*o,d+g,p+A-o,d+g),h.lineTo(p+o,d+g),m&&h.bezierCurveTo(p+v*o,d+g,p,d+g-v*u,p,d+g-u),h.lineTo(p,d+u),m&&h.bezierCurveTo(p,d+v*u,p+v*o,d,p+o,d),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){var h=-this.width/2,o=-this.height/2;return["<rect ","COMMON_PARTS",'x="',h,'" y="',o,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),n.Rect.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),n.Rect.fromElement=function(h,o,u){if(!h)return o(null);u=u||{};var A=n.parseAttributes(h,n.Rect.ATTRIBUTE_NAMES);A.left=A.left||0,A.top=A.top||0,A.height=A.height||0,A.width=A.width||0;var g=new n.Rect(l(u?n.util.object.clone(u):{},A));g.visible=g.visible&&g.width>0&&g.height>0,o(g)},n.Rect.fromObject=function(h,o){return n.Object._fromObject("Rect",h,o)}}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.util.object.extend,h=n.util.array.min,o=n.util.array.max,u=n.util.toFixed,A=n.util.projectStrokeOnPoints;if(n.Polyline){n.warn("fabric.Polyline is already defined");return}n.Polyline=n.util.createClass(n.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:n.Object.prototype.cacheProperties.concat("points"),initialize:function(g,p){p=p||{},this.points=g||[],this.callSuper("initialize",p),this._setPositionDimensions(p)},_projectStrokeOnPoints:function(){return A(this.points,this,!0)},_setPositionDimensions:function(g){var p=this._calcDimensions(g),d,m=this.exactBoundingBox?this.strokeWidth:0;this.width=p.width-m,this.height=p.height-m,g.fromSVG||(d=this.translateToGivenOrigin({x:p.left-this.strokeWidth/2+m/2,y:p.top-this.strokeWidth/2+m/2},"left","top",this.originX,this.originY)),typeof g.left>"u"&&(this.left=g.fromSVG?p.left:d.x),typeof g.top>"u"&&(this.top=g.fromSVG?p.top:d.y),this.pathOffset={x:p.left+this.width/2+m/2,y:p.top+this.height/2+m/2}},_calcDimensions:function(){var g=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,p=h(g,"x")||0,d=h(g,"y")||0,m=o(g,"x")||0,v=o(g,"y")||0,C=m-p,x=v-d;return{left:p,top:d,width:C,height:x}},toObject:function(g){return l(this.callSuper("toObject",g),{points:this.points.concat()})},_toSVG:function(){for(var g=[],p=this.pathOffset.x,d=this.pathOffset.y,m=n.Object.NUM_FRACTION_DIGITS,v=0,C=this.points.length;v<C;v++)g.push(u(this.points[v].x-p,m),",",u(this.points[v].y-d,m)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',g.join(""),`" />
`]},commonRender:function(g){var p,d=this.points.length,m=this.pathOffset.x,v=this.pathOffset.y;if(!d||isNaN(this.points[d-1].y))return!1;g.beginPath(),g.moveTo(this.points[0].x-m,this.points[0].y-v);for(var C=0;C<d;C++)p=this.points[C],g.lineTo(p.x-m,p.y-v);return!0},_render:function(g){this.commonRender(g)&&this._renderPaintInOrder(g)},complexity:function(){return this.get("points").length}}),n.Polyline.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polyline.fromElementGenerator=function(g){return function(p,d,m){if(!p)return d(null);m||(m={});var v=n.parsePointsAttribute(p.getAttribute("points")),C=n.parseAttributes(p,n[g].ATTRIBUTE_NAMES);C.fromSVG=!0,d(new n[g](v,l(C,m)))}},n.Polyline.fromElement=n.Polyline.fromElementGenerator("Polyline"),n.Polyline.fromObject=function(g,p){return n.Object._fromObject("Polyline",g,p,"points")}}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.util.projectStrokeOnPoints;if(n.Polygon){n.warn("fabric.Polygon is already defined");return}n.Polygon=n.util.createClass(n.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return l(this.points,this)},_render:function(h){this.commonRender(h)&&(h.closePath(),this._renderPaintInOrder(h))}}),n.Polygon.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polygon.fromElement=n.Polyline.fromElementGenerator("Polygon"),n.Polygon.fromObject=function(h,o){n.Object._fromObject("Polygon",h,o,"points")}}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.util.array.min,h=n.util.array.max,o=n.util.object.extend,u=n.util.object.clone,A=n.util.toFixed;if(n.Path){n.warn("fabric.Path is already defined");return}n.Path=n.util.createClass(n.Object,{type:"path",path:null,cacheProperties:n.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:n.Object.prototype.stateProperties.concat("path"),initialize:function(g,p){p=u(p||{}),delete p.path,this.callSuper("initialize",p),this._setPath(g||[],p)},_setPath:function(g,p){this.path=n.util.makePathSimpler(Array.isArray(g)?g:n.util.parsePath(g)),n.Polyline.prototype._setPositionDimensions.call(this,p||{})},_renderPathCommands:function(g){var p,d=0,m=0,v=0,C=0,x=0,E=0,L=-this.pathOffset.x,U=-this.pathOffset.y;g.beginPath();for(var O=0,X=this.path.length;O<X;++O)switch(p=this.path[O],p[0]){case"L":v=p[1],C=p[2],g.lineTo(v+L,C+U);break;case"M":v=p[1],C=p[2],d=v,m=C,g.moveTo(v+L,C+U);break;case"C":v=p[5],C=p[6],x=p[3],E=p[4],g.bezierCurveTo(p[1]+L,p[2]+U,x+L,E+U,v+L,C+U);break;case"Q":g.quadraticCurveTo(p[1]+L,p[2]+U,p[3]+L,p[4]+U),v=p[3],C=p[4],x=p[1],E=p[2];break;case"z":case"Z":v=d,C=m,g.closePath();break}},_render:function(g){this._renderPathCommands(g),this._renderPaintInOrder(g)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(g){return o(this.callSuper("toObject",g),{path:this.path.map(function(p){return p.slice()})})},toDatalessObject:function(g){var p=this.toObject(["sourcePath"].concat(g));return p.sourcePath&&delete p.path,p},_toSVG:function(){var g=n.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',g,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var g=n.Object.NUM_FRACTION_DIGITS;return" translate("+A(-this.pathOffset.x,g)+", "+A(-this.pathOffset.y,g)+")"},toClipPathSVG:function(g){var p=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:g,additionalTransform:p})},toSVG:function(g){var p=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:g,additionalTransform:p})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var g=[],p=[],d,m=0,v=0,C=0,x=0,E,L=0,U=this.path.length;L<U;++L){switch(d=this.path[L],d[0]){case"L":C=d[1],x=d[2],E=[];break;case"M":C=d[1],x=d[2],m=C,v=x,E=[];break;case"C":E=n.util.getBoundsOfCurve(C,x,d[1],d[2],d[3],d[4],d[5],d[6]),C=d[5],x=d[6];break;case"Q":E=n.util.getBoundsOfCurve(C,x,d[1],d[2],d[1],d[2],d[3],d[4]),C=d[3],x=d[4];break;case"z":case"Z":C=m,x=v;break}E.forEach(function($){g.push($.x),p.push($.y)}),g.push(C),p.push(x)}var O=l(g)||0,X=l(p)||0,rt=h(g)||0,M=h(p)||0,H=rt-O,J=M-X;return{left:O,top:X,width:H,height:J}}}),n.Path.fromObject=function(g,p){if(typeof g.sourcePath=="string"){var d=g.sourcePath;n.loadSVGFromURL(d,function(m){var v=m[0];v.setOptions(g),g.clipPath?n.util.enlivenObjects([g.clipPath],function(C){v.clipPath=C[0],p&&p(v)}):p&&p(v)})}else n.Object._fromObject("Path",g,p,"path")},n.Path.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(["d"]),n.Path.fromElement=function(g,p,d){var m=n.parseAttributes(g,n.Path.ATTRIBUTE_NAMES);m.fromSVG=!0,p(new n.Path(m.d,o(m,d)))}}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.util.array.min,h=n.util.array.max;n.Group||(n.Group=n.util.createClass(n.Object,n.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(o,u,A){u=u||{},this._objects=[],A&&this.callSuper("initialize",u),this._objects=o||[];for(var g=this._objects.length;g--;)this._objects[g].group=this;if(A)this._updateObjectsACoords();else{var p=u&&u.centerPoint;u.originX!==void 0&&(this.originX=u.originX),u.originY!==void 0&&(this.originY=u.originY),p||this._calcBounds(),this._updateObjectsCoords(p),delete u.centerPoint,this.callSuper("initialize",u)}this.setCoords()},_updateObjectsACoords:function(){for(var o=!0,u=this._objects.length;u--;)this._objects[u].setCoords(o)},_updateObjectsCoords:function(u){for(var u=u||this.getCenterPoint(),A=this._objects.length;A--;)this._updateObjectCoords(this._objects[A],u)},_updateObjectCoords:function(o,u){var A=o.left,g=o.top,p=!0;o.set({left:A-u.x,top:g-u.y}),o.group=this,o.setCoords(p)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(o){var u=!!this.group;return this._restoreObjectsState(),n.util.resetObjectTransform(this),o&&(u&&n.util.removeTransformFromObject(o,this.group.calcTransformMatrix()),this._objects.push(o),o.group=this,o._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,u?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(o){return this._restoreObjectsState(),n.util.resetObjectTransform(this),this.remove(o),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(o){this.dirty=!0,o.group=this,o._set("canvas",this.canvas)},_onObjectRemoved:function(o){this.dirty=!0,delete o.group},_set:function(o,u){var A=this._objects.length;if(this.useSetOnGroup)for(;A--;)this._objects[A].setOnGroup(o,u);if(o==="canvas")for(;A--;)this._objects[A]._set(o,u);n.Object.prototype._set.call(this,o,u)},toObject:function(o){var u=this.includeDefaultValues,A=this._objects.filter(function(p){return!p.excludeFromExport}).map(function(p){var d=p.includeDefaultValues;p.includeDefaultValues=u;var m=p.toObject(o);return p.includeDefaultValues=d,m}),g=n.Object.prototype.toObject.call(this,o);return g.objects=A,g},toDatalessObject:function(o){var u,A=this.sourcePath;if(A)u=A;else{var g=this.includeDefaultValues;u=this._objects.map(function(d){var m=d.includeDefaultValues;d.includeDefaultValues=g;var v=d.toDatalessObject(o);return d.includeDefaultValues=m,v})}var p=n.Object.prototype.toDatalessObject.call(this,o);return p.objects=u,p},render:function(o){this._transformDone=!0,this.callSuper("render",o),this._transformDone=!1},shouldCache:function(){var o=n.Object.prototype.shouldCache.call(this);if(o){for(var u=0,A=this._objects.length;u<A;u++)if(this._objects[u].willDrawShadow())return this.ownCaching=!1,!1}return o},willDrawShadow:function(){if(n.Object.prototype.willDrawShadow.call(this))return!0;for(var o=0,u=this._objects.length;o<u;o++)if(this._objects[o].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(o){for(var u=0,A=this._objects.length;u<A;u++)this._objects[u].render(o);this._drawClipPath(o,this.clipPath)},isCacheDirty:function(o){if(this.callSuper("isCacheDirty",o))return!0;if(!this.statefullCache)return!1;for(var u=0,A=this._objects.length;u<A;u++)if(this._objects[u].isCacheDirty(!0)){if(this._cacheCanvas){var g=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-p/2,g,p)}return!0}return!1},_restoreObjectsState:function(){var o=this.calcOwnMatrix();return this._objects.forEach(function(u){n.util.addTransformToObject(u,o),delete u.group,u.setCoords()}),this},destroy:function(){return this._objects.forEach(function(o){o.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var o=this._objects,u=this.canvas;this._objects=[];var A=this.toObject();delete A.objects;var g=new n.ActiveSelection([]);return g.set(A),g.type="activeSelection",u.remove(this),o.forEach(function(p){p.group=g,p.dirty=!0,u.add(p)}),g.canvas=u,g._objects=o,u._activeObject=g,g.setCoords(),g}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var o=!0;return this.forEachObject(function(u){u.setCoords(o)}),this},_calcBounds:function(o){for(var u=[],A=[],g,p,d,m=["tr","br","bl","tl"],v=0,C=this._objects.length,x,E=m.length;v<C;++v){for(g=this._objects[v],d=g.calcACoords(),x=0;x<E;x++)p=m[x],u.push(d[p].x),A.push(d[p].y);g.aCoords=d}this._getBounds(u,A,o)},_getBounds:function(o,u,A){var g=new n.Point(l(o),l(u)),p=new n.Point(h(o),h(u)),d=g.y||0,m=g.x||0,v=p.x-g.x||0,C=p.y-g.y||0;this.width=v,this.height=C,A||this.setPositionByOrigin({x:m,y:d},"left","top")},_toSVG:function(o){for(var u=["<g ","COMMON_PARTS",` >
`],A=0,g=this._objects.length;A<g;A++)u.push("		",this._objects[A].toSVG(o));return u.push(`</g>
`),u},getSvgStyles:function(){var o=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",u=this.visible?"":" visibility: hidden;";return[o,this.getSvgFilter(),u].join("")},toClipPathSVG:function(o){for(var u=[],A=0,g=this._objects.length;A<g;A++)u.push("	",this._objects[A].toClipPathSVG(o));return this._createBaseClipPathSVGMarkup(u,{reviver:o})}}),n.Group.fromObject=function(o,u){var A=o.objects,g=n.util.object.clone(o,!0);if(delete g.objects,typeof A=="string"){n.loadSVGFromURL(A,function(p){var d=n.util.groupSVGElements(p,o,A),m=g.clipPath;delete g.clipPath,d.set(g),m?n.util.enlivenObjects([m],function(v){d.clipPath=v[0],u&&u(d)}):u&&u(d)});return}n.util.enlivenObjects(A,function(p){n.util.enlivenObjectEnlivables(o,g,function(){u&&u(new n.Group(p,g,!0))})})})}(r),function(a){var n=a.fabric||(a.fabric={});n.ActiveSelection||(n.ActiveSelection=n.util.createClass(n.Group,{type:"activeSelection",initialize:function(l,h){h=h||{},this._objects=l||[];for(var o=this._objects.length;o--;)this._objects[o].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),n.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var l=this._objects.concat();this._objects=[];var h=n.Object.prototype.toObject.call(this),o=new n.Group([]);if(delete h.type,o.set(h),l.forEach(function(A){A.canvas.remove(A),A.group=o}),o._objects=l,!this.canvas)return o;var u=this.canvas;return u.add(o),u._activeObject=o,o.setCoords(),o},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(l,h,o){l.save(),l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",l,h),o=o||{},typeof o.hasControls>"u"&&(o.hasControls=!1),o.forActiveSelection=!0;for(var u=0,A=this._objects.length;u<A;u++)this._objects[u]._renderControls(l,o);l.restore()}}),n.ActiveSelection.fromObject=function(l,h){n.util.enlivenObjects(l.objects,function(o){delete l.objects,h&&h(new n.ActiveSelection(o,l,!0))})})}(r),function(a){var n=t.util.object.extend;if(a.fabric||(a.fabric={}),a.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(l,h){h||(h={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",h),this._initElement(l,h)},getElement:function(){return this._element||{}},setElement:function(l,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=l,this._originalElement=l,this._initConfig(h),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(l){var h=t.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(l)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(l){t.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var l=this.getElement();return{width:l.naturalWidth||l.width,height:l.naturalHeight||l.height}},_stroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){var h=this.width/2,o=this.height/2;l.beginPath(),l.moveTo(-h,-o),l.lineTo(h,-o),l.lineTo(h,o),l.lineTo(-h,o),l.lineTo(-h,-o),l.closePath()}},toObject:function(l){var h=[];this.filters.forEach(function(u){u&&h.push(u.toObject())});var o=n(this.callSuper("toObject",["cropX","cropY"].concat(l)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(o.resizeFilter=this.resizeFilter.toObject()),o},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var l=[],h=[],o,u=this._element,A=-this.width/2,g=-this.height/2,p="",d="";if(!u)return[];if(this.hasCrop()){var m=t.Object.__uid++;l.push('<clipPath id="imageCrop_'+m+`">
`,'	<rect x="'+A+'" y="'+g+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),p=' clip-path="url(#imageCrop_'+m+')" '}if(this.imageSmoothing||(d='" image-rendering="optimizeSpeed'),h.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',A-this.cropX,'" y="',g-this.cropY,'" width="',u.width||u.naturalWidth,'" height="',u.height||u.height,d,'"',p,`></image>
`),this.stroke||this.strokeDashArray){var v=this.fill;this.fill=null,o=["	<rect ",'x="',A,'" y="',g,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=v}return this.paintFirst!=="fill"?l=l.concat(o,h):l=l.concat(h,o),l},getSrc:function(l){var h=l?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(l,h,o){return t.util.loadImage(l,function(u,A){this.setElement(u,o),this._setWidthHeight(),h&&h(this,A)},this,o&&o.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var l=this.resizeFilter,h=this.minimumScaleTrigger,o=this.getTotalObjectScaling(),u=o.scaleX,A=o.scaleY,g=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!l||u>h&&A>h){this._element=g,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=u,this._lastScaleY=A;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var p=t.util.createCanvasElement(),d=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,m=g.width,v=g.height;p.width=m,p.height=v,this._element=p,this._lastScaleX=l.scaleX=u,this._lastScaleY=l.scaleY=A,t.filterBackend.applyFilters([l],g,m,v,this._element,d),this._filterScalingX=p.width/this._originalElement.width,this._filterScalingY=p.height/this._originalElement.height},applyFilters:function(l){if(l=l||this.filters||[],l=l.filter(function(g){return g&&!g.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),l.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,o=h.naturalWidth||h.width,u=h.naturalHeight||h.height;if(this._element===this._originalElement){var A=t.util.createCanvasElement();A.width=o,A.height=u,this._element=A,this._filteredEl=A}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,o,u),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(l,this._originalElement,o,u,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(l){t.util.setImageSmoothing(l,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(l),this._renderPaintInOrder(l)},drawCacheOnCanvas:function(l){t.util.setImageSmoothing(l,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,l)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(l){var h=this._element;if(h){var o=this._filterScalingX,u=this._filterScalingY,A=this.width,g=this.height,p=Math.min,d=Math.max,m=d(this.cropX,0),v=d(this.cropY,0),C=h.naturalWidth||h.width,x=h.naturalHeight||h.height,E=m*o,L=v*u,U=p(A*o,C-E),O=p(g*u,x-L),X=-A/2,rt=-g/2,M=p(A,C/o-m),H=p(g,x/u-v);h&&l.drawImage(h,E,L,U,O,X,rt,M,H)}},_needsResize:function(){var l=this.getTotalObjectScaling();return l.scaleX!==this._lastScaleX||l.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(l,h){this.setElement(t.util.getById(l),h),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(l){l||(l={}),this.setOptions(l),this._setWidthHeight(l)},_initFilters:function(l,h){l&&l.length?t.util.enlivenObjects(l,function(o){h&&h(o)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(l){l||(l={});var h=this.getElement();this.width=l.width||h.naturalWidth||h.width||0,this.height=l.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var l=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,o=this._element.height,u=1,A=1,g=0,p=0,d=0,m=0,v,C=this.width,x=this.height,E={width:C,height:x};return l&&(l.alignX!=="none"||l.alignY!=="none")?(l.meetOrSlice==="meet"&&(u=A=t.util.findScaleToFit(this._element,E),v=(C-h*u)/2,l.alignX==="Min"&&(g=-v),l.alignX==="Max"&&(g=v),v=(x-o*A)/2,l.alignY==="Min"&&(p=-v),l.alignY==="Max"&&(p=v)),l.meetOrSlice==="slice"&&(u=A=t.util.findScaleToCover(this._element,E),v=h-C/u,l.alignX==="Mid"&&(d=v/2),l.alignX==="Max"&&(d=v),v=o-x/A,l.alignY==="Mid"&&(m=v/2),l.alignY==="Max"&&(m=v),h=C/u,o=x/A)):(u=C/h,A=x/o),{width:h,height:o,scaleX:u,scaleY:A,offsetLeft:g,offsetTop:p,cropX:d,cropY:m}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(l,h){var o=t.util.object.clone(l);t.util.loadImage(o.src,function(u,A){if(A){h&&h(null,!0);return}t.Image.prototype._initFilters.call(o,o.filters,function(g){o.filters=g||[],t.Image.prototype._initFilters.call(o,[o.resizeFilter],function(p){o.resizeFilter=p[0],t.util.enlivenObjectEnlivables(o,o,function(){var d=new t.Image(u,o);h(d,!1)})})})},null,o.crossOrigin)},t.Image.fromURL=function(l,h,o){t.util.loadImage(l,function(u,A){h&&h(new t.Image(u,o),A)},null,o&&o.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(l,h,o){var u=t.parseAttributes(l,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(u["xlink:href"],h,n(o?t.util.object.clone(o):{},u))}}(r),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var a=this.angle%360;return a>0?Math.round((a-1)/90)*90:Math.round(a/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(a){a=a||{};var n=function(){},l=a.onComplete||n,h=a.onChange||n,o=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(u){o.rotate(u),h()},onComplete:function(){o.setCoords(),l()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(a){return a.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(a){return a.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function a(l,h){var o="precision "+h+` float;
void main(){}`,u=l.createShader(l.FRAGMENT_SHADER);return l.shaderSource(u,o),l.compileShader(u),!!l.getShaderParameter(u,l.COMPILE_STATUS)}t.isWebglSupported=function(l){if(t.isLikelyNode)return!1;l=l||t.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),o=h.getContext("webgl")||h.getContext("experimental-webgl"),u=!1;if(o){t.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),u=t.maxTextureSize>=l;for(var A=["highp","mediump","lowp"],g=0;g<3;g++)if(a(o,A[g])){t.webGlPrecision=A[g];break}}return this.isSupported=u,u},t.WebglFilterBackend=n;function n(l){l&&l.tileSize&&(this.tileSize=l.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}n.prototype={tileSize:2048,resources:{},setupGLContext:function(l,h){this.dispose(),this.createWebGLCanvas(l,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(l,h)},chooseFastestCopyGLTo2DMethod:function(l,h){var o=typeof window.performance<"u",u;try{new ImageData(1,1),u=!0}catch{u=!1}var A=typeof ArrayBuffer<"u",g=typeof Uint8ClampedArray<"u";if(o&&u&&A&&g){var p=t.util.createCanvasElement(),d=new ArrayBuffer(l*h*4);if(t.forceGLPutImageData){this.imageBuffer=d,this.copyGLTo2D=f;return}var m={imageBuffer:d,destinationWidth:l,destinationHeight:h,targetCanvas:p},v,C,x;p.width=l,p.height=h,v=window.performance.now(),c.call(m,this.gl,m),C=window.performance.now()-v,v=window.performance.now(),f.call(m,this.gl,m),x=window.performance.now()-v,C>x?(this.imageBuffer=d,this.copyGLTo2D=f):this.copyGLTo2D=c}},createWebGLCanvas:function(l,h){var o=t.util.createCanvasElement();o.width=l,o.height=h;var u={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},A=o.getContext("webgl",u);A||(A=o.getContext("experimental-webgl",u)),A&&(A.clearColor(0,0,0,0),this.canvas=o,this.gl=A)},applyFilters:function(l,h,o,u,A,g){var p=this.gl,d;g&&(d=this.getCachedTexture(g,h));var m={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:o,sourceHeight:u,destinationWidth:o,destinationHeight:u,context:p,sourceTexture:this.createTexture(p,o,u,!d&&h),targetTexture:this.createTexture(p,o,u),originalTexture:d||this.createTexture(p,o,u,!d&&h),passes:l.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:A},v=p.createFramebuffer();return p.bindFramebuffer(p.FRAMEBUFFER,v),l.forEach(function(C){C&&C.applyTo(m)}),s(m),this.copyGLTo2D(p,m),p.bindTexture(p.TEXTURE_2D,null),p.deleteTexture(m.sourceTexture),p.deleteTexture(m.targetTexture),p.deleteFramebuffer(v),A.getContext("2d").setTransform(1,0,0,1,0,0),m},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(l,h,o,u,A){var g=l.createTexture();return l.bindTexture(l.TEXTURE_2D,g),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,A||l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,A||l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),u?l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,u):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,h,o,0,l.RGBA,l.UNSIGNED_BYTE,null),g},getCachedTexture:function(l,h){if(this.textureCache[l])return this.textureCache[l];var o=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[l]=o,o},evictCachesForKey:function(l){this.textureCache[l]&&(this.gl.deleteTexture(this.textureCache[l]),delete this.textureCache[l])},copyGLTo2D:c,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var l=this.gl,h={renderer:"",vendor:""};if(!l)return h;var o=l.getExtension("WEBGL_debug_renderer_info");if(o){var u=l.getParameter(o.UNMASKED_RENDERER_WEBGL),A=l.getParameter(o.UNMASKED_VENDOR_WEBGL);u&&(h.renderer=u.toLowerCase()),A&&(h.vendor=A.toLowerCase())}return this.gpuInfo=h,h}}}();function s(a){var n=a.targetCanvas,l=n.width,h=n.height,o=a.destinationWidth,u=a.destinationHeight;(l!==o||h!==u)&&(n.width=o,n.height=u)}function c(a,n){var l=a.canvas,h=n.targetCanvas,o=h.getContext("2d");o.translate(0,h.height),o.scale(1,-1);var u=l.height-h.height;o.drawImage(l,0,u,h.width,h.height,0,0,h.width,h.height)}function f(a,n){var l=n.targetCanvas,h=l.getContext("2d"),o=n.destinationWidth,u=n.destinationHeight,A=o*u*4,g=new Uint8Array(this.imageBuffer,0,A),p=new Uint8ClampedArray(this.imageBuffer,0,A);a.readPixels(0,0,o,u,a.RGBA,a.UNSIGNED_BYTE,g);var d=new ImageData(p,o,u);h.putImageData(d,0,0)}(function(){var a=function(){};t.Canvas2dFilterBackend=n;function n(){}n.prototype={evictCachesForKey:a,dispose:a,clearWebGLCaches:a,resources:{},applyFilters:function(l,h,o,u,A){var g=A.getContext("2d");g.drawImage(h,0,0,o,u);var p=g.getImageData(0,0,o,u),d=g.getImageData(0,0,o,u),m={sourceWidth:o,sourceHeight:u,imageData:p,originalEl:h,originalImageData:d,canvasEl:A,ctx:g,filterBackend:this};return l.forEach(function(v){v.applyTo(m)}),(m.imageData.width!==o||m.imageData.height!==u)&&(A.width=m.imageData.width,A.height=m.imageData.height),g.putImageData(m.imageData,0,0),m}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(a){a&&this.setOptions(a)},setOptions:function(a){for(var n in a)this[n]=a[n]},createProgram:function(a,n,l){n=n||this.fragmentSource,l=l||this.vertexSource,t.webGlPrecision!=="highp"&&(n=n.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var h=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(h,l),a.compileShader(h),!a.getShaderParameter(h,a.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+a.getShaderInfoLog(h));var o=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(o,n),a.compileShader(o),!a.getShaderParameter(o,a.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+a.getShaderInfoLog(o));var u=a.createProgram();if(a.attachShader(u,h),a.attachShader(u,o),a.linkProgram(u),!a.getProgramParameter(u,a.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+a.getProgramInfoLog(u));var A=this.getAttributeLocations(a,u),g=this.getUniformLocations(a,u)||{};return g.uStepW=a.getUniformLocation(u,"uStepW"),g.uStepH=a.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:A,uniformLocations:g}},getAttributeLocations:function(a,n){return{aPosition:a.getAttribLocation(n,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(a,n,l){var h=n.aPosition,o=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,o),a.enableVertexAttribArray(h),a.vertexAttribPointer(h,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,l,a.STATIC_DRAW)},_setupFrameBuffer:function(a){var n=a.context,l,h;a.passes>1?(l=a.destinationWidth,h=a.destinationHeight,(a.sourceWidth!==l||a.sourceHeight!==h)&&(n.deleteTexture(a.targetTexture),a.targetTexture=a.filterBackend.createTexture(n,l,h)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,a.targetTexture,0)):(n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish())},_swapTextures:function(a){a.passes--,a.pass++;var n=a.targetTexture;a.targetTexture=a.sourceTexture,a.sourceTexture=n},isNeutralState:function(){var a=this.mainParameter,n=t.Image.filters[this.type].prototype;if(a)if(Array.isArray(n[a])){for(var l=n[a].length;l--;)if(this[a][l]!==n[a][l])return!1;return!0}else return n[a]===this[a];else return!1},applyTo:function(a){a.webgl?(this._setupFrameBuffer(a),this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},retrieveShader:function(a){return a.programCache.hasOwnProperty(this.type)||(a.programCache[this.type]=this.createProgram(a.context)),a.programCache[this.type]},applyToWebGL:function(a){var n=a.context,l=this.retrieveShader(a);a.pass===0&&a.originalTexture?n.bindTexture(n.TEXTURE_2D,a.originalTexture):n.bindTexture(n.TEXTURE_2D,a.sourceTexture),n.useProgram(l.program),this.sendAttributeData(n,l.attributeLocations,a.aPosition),n.uniform1f(l.uniformLocations.uStepW,1/a.sourceWidth),n.uniform1f(l.uniformLocations.uStepH,1/a.sourceHeight),this.sendUniformData(n,l.uniformLocations),n.viewport(0,0,a.destinationWidth,a.destinationHeight),n.drawArrays(n.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(a,n,l){a.activeTexture(l),a.bindTexture(a.TEXTURE_2D,n),a.activeTexture(a.TEXTURE0)},unbindAdditionalTexture:function(a,n){a.activeTexture(n),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(a){this[this.mainParameter]=a},sendUniformData:function(){},createHelpLayer:function(a){if(!a.helpLayer){var n=document.createElement("canvas");n.width=a.sourceWidth,n.height=a.sourceHeight,a.helpLayer=n}},toObject:function(){var a={type:this.type},n=this.mainParameter;return n&&(a[n]=this[n]),a},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(a,n){var l=new t.Image.filters[a.type](a);return n&&n(l),l},function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass;l.ColorMatrix=h(l.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(o){this.callSuper("initialize",o),this.matrix=this.matrix.slice(0)},applyTo2d:function(o){var u=o.imageData,A=u.data,g=A.length,p=this.matrix,d,m,v,C,x,E=this.colorsOnly;for(x=0;x<g;x+=4)d=A[x],m=A[x+1],v=A[x+2],E?(A[x]=d*p[0]+m*p[1]+v*p[2]+p[4]*255,A[x+1]=d*p[5]+m*p[6]+v*p[7]+p[9]*255,A[x+2]=d*p[10]+m*p[11]+v*p[12]+p[14]*255):(C=A[x+3],A[x]=d*p[0]+m*p[1]+v*p[2]+C*p[3]+p[4]*255,A[x+1]=d*p[5]+m*p[6]+v*p[7]+C*p[8]+p[9]*255,A[x+2]=d*p[10]+m*p[11]+v*p[12]+C*p[13]+p[14]*255,A[x+3]=d*p[15]+m*p[16]+v*p[17]+C*p[18]+p[19]*255)},getUniformLocations:function(o,u){return{uColorMatrix:o.getUniformLocation(u,"uColorMatrix"),uConstants:o.getUniformLocation(u,"uConstants")}},sendUniformData:function(o,u){var A=this.matrix,g=[A[0],A[1],A[2],A[3],A[5],A[6],A[7],A[8],A[10],A[11],A[12],A[13],A[15],A[16],A[17],A[18]],p=[A[4],A[9],A[14],A[19]];o.uniformMatrix4fv(u.uColorMatrix,!1,g),o.uniform4fv(u.uConstants,p)}}),n.Image.filters.ColorMatrix.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass;l.Brightness=h(l.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(o){if(this.brightness!==0){var u=o.imageData,A=u.data,g,p=A.length,d=Math.round(this.brightness*255);for(g=0;g<p;g+=4)A[g]=A[g]+d,A[g+1]=A[g+1]+d,A[g+2]=A[g+2]+d}},getUniformLocations:function(o,u){return{uBrightness:o.getUniformLocation(u,"uBrightness")}},sendUniformData:function(o,u){o.uniform1f(u.uBrightness,this.brightness)}}),n.Image.filters.Brightness.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.util.object.extend,h=n.Image.filters,o=n.util.createClass;h.Convolute=o(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(u){var A=Math.sqrt(this.matrix.length),g=this.type+"_"+A+"_"+(this.opaque?1:0),p=this.fragmentSource[g];return u.programCache.hasOwnProperty(g)||(u.programCache[g]=this.createProgram(u.context,p)),u.programCache[g]},applyTo2d:function(u){var A=u.imageData,g=A.data,p=this.matrix,d=Math.round(Math.sqrt(p.length)),m=Math.floor(d/2),v=A.width,C=A.height,x=u.ctx.createImageData(v,C),E=x.data,L=this.opaque?1:0,U,O,X,rt,M,H,J,$,ht,ut,pt,ft,R;for(pt=0;pt<C;pt++)for(ut=0;ut<v;ut++){for(M=(pt*v+ut)*4,U=0,O=0,X=0,rt=0,R=0;R<d;R++)for(ft=0;ft<d;ft++)J=pt+R-m,H=ut+ft-m,!(J<0||J>=C||H<0||H>=v)&&($=(J*v+H)*4,ht=p[R*d+ft],U+=g[$]*ht,O+=g[$+1]*ht,X+=g[$+2]*ht,L||(rt+=g[$+3]*ht));E[M]=U,E[M+1]=O,E[M+2]=X,L?E[M+3]=g[M+3]:E[M+3]=rt}u.imageData=x},getUniformLocations:function(u,A){return{uMatrix:u.getUniformLocation(A,"uMatrix"),uOpaque:u.getUniformLocation(A,"uOpaque"),uHalfSize:u.getUniformLocation(A,"uHalfSize"),uSize:u.getUniformLocation(A,"uSize")}},sendUniformData:function(u,A){u.uniform1fv(A.uMatrix,this.matrix)},toObject:function(){return l(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),n.Image.filters.Convolute.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass;l.Grayscale=h(l.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(o){var u=o.imageData,A=u.data,g,p=A.length,d,m=this.mode;for(g=0;g<p;g+=4)m==="average"?d=(A[g]+A[g+1]+A[g+2])/3:m==="lightness"?d=(Math.min(A[g],A[g+1],A[g+2])+Math.max(A[g],A[g+1],A[g+2]))/2:m==="luminosity"&&(d=.21*A[g]+.72*A[g+1]+.07*A[g+2]),A[g]=d,A[g+1]=d,A[g+2]=d},retrieveShader:function(o){var u=this.type+"_"+this.mode;if(!o.programCache.hasOwnProperty(u)){var A=this.fragmentSource[this.mode];o.programCache[u]=this.createProgram(o.context,A)}return o.programCache[u]},getUniformLocations:function(o,u){return{uMode:o.getUniformLocation(u,"uMode")}},sendUniformData:function(o,u){var A=1;o.uniform1i(u.uMode,A)},isNeutralState:function(){return!1}}),n.Image.filters.Grayscale.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass;l.Invert=h(l.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(o){var u=o.imageData,A=u.data,g,p=A.length;for(g=0;g<p;g+=4)A[g]=255-A[g],A[g+1]=255-A[g+1],A[g+2]=255-A[g+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(o,u){return{uInvert:o.getUniformLocation(u,"uInvert")}},sendUniformData:function(o,u){o.uniform1i(u.uInvert,this.invert)}}),n.Image.filters.Invert.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.util.object.extend,h=n.Image.filters,o=n.util.createClass;h.Noise=o(h.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(u){if(this.noise!==0){var A=u.imageData,g=A.data,p,d=g.length,m=this.noise,v;for(p=0,d=g.length;p<d;p+=4)v=(.5-Math.random())*m,g[p]+=v,g[p+1]+=v,g[p+2]+=v}},getUniformLocations:function(u,A){return{uNoise:u.getUniformLocation(A,"uNoise"),uSeed:u.getUniformLocation(A,"uSeed")}},sendUniformData:function(u,A){u.uniform1f(A.uNoise,this.noise/255),u.uniform1f(A.uSeed,Math.random())},toObject:function(){return l(this.callSuper("toObject"),{noise:this.noise})}}),n.Image.filters.Noise.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass;l.Pixelate=h(l.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(o){var u=o.imageData,A=u.data,g=u.height,p=u.width,d,m,v,C,x,E,L,U,O,X,rt;for(m=0;m<g;m+=this.blocksize)for(v=0;v<p;v+=this.blocksize)for(d=m*4*p+v*4,C=A[d],x=A[d+1],E=A[d+2],L=A[d+3],X=Math.min(m+this.blocksize,g),rt=Math.min(v+this.blocksize,p),U=m;U<X;U++)for(O=v;O<rt;O++)d=U*4*p+O*4,A[d]=C,A[d+1]=x,A[d+2]=E,A[d+3]=L},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(o,u){return{uBlocksize:o.getUniformLocation(u,"uBlocksize"),uStepW:o.getUniformLocation(u,"uStepW"),uStepH:o.getUniformLocation(u,"uStepH")}},sendUniformData:function(o,u){o.uniform1f(u.uBlocksize,this.blocksize)}}),n.Image.filters.Pixelate.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.util.object.extend,h=n.Image.filters,o=n.util.createClass;h.RemoveColor=o(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(u){var A=u.imageData,g=A.data,p,d=this.distance*255,m,v,C,x=new n.Color(this.color).getSource(),E=[x[0]-d,x[1]-d,x[2]-d],L=[x[0]+d,x[1]+d,x[2]+d];for(p=0;p<g.length;p+=4)m=g[p],v=g[p+1],C=g[p+2],m>E[0]&&v>E[1]&&C>E[2]&&m<L[0]&&v<L[1]&&C<L[2]&&(g[p+3]=0)},getUniformLocations:function(u,A){return{uLow:u.getUniformLocation(A,"uLow"),uHigh:u.getUniformLocation(A,"uHigh")}},sendUniformData:function(u,A){var g=new n.Color(this.color).getSource(),p=parseFloat(this.distance),d=[0+g[0]/255-p,0+g[1]/255-p,0+g[2]/255-p,1],m=[g[0]/255+p,g[1]/255+p,g[2]/255+p,1];u.uniform4fv(A.uLow,d),u.uniform4fv(A.uHigh,m)},toObject:function(){return l(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),n.Image.filters.RemoveColor.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass,o={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var u in o)l[u]=h(l.ColorMatrix,{type:u,matrix:o[u],mainParameter:!1,colorsOnly:!0}),n.Image.filters[u].fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric,l=n.Image.filters,h=n.util.createClass;l.BlendColor=h(l.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(o){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[o]+`}
}`},retrieveShader:function(o){var u=this.type+"_"+this.mode,A;return o.programCache.hasOwnProperty(u)||(A=this.buildSource(this.mode),o.programCache[u]=this.createProgram(o.context,A)),o.programCache[u]},applyTo2d:function(o){var u=o.imageData,A=u.data,g=A.length,p,d,m,v,C,x,E,L=1-this.alpha;E=new n.Color(this.color).getSource(),p=E[0]*this.alpha,d=E[1]*this.alpha,m=E[2]*this.alpha;for(var U=0;U<g;U+=4)switch(v=A[U],C=A[U+1],x=A[U+2],this.mode){case"multiply":A[U]=v*p/255,A[U+1]=C*d/255,A[U+2]=x*m/255;break;case"screen":A[U]=255-(255-v)*(255-p)/255,A[U+1]=255-(255-C)*(255-d)/255,A[U+2]=255-(255-x)*(255-m)/255;break;case"add":A[U]=v+p,A[U+1]=C+d,A[U+2]=x+m;break;case"diff":case"difference":A[U]=Math.abs(v-p),A[U+1]=Math.abs(C-d),A[U+2]=Math.abs(x-m);break;case"subtract":A[U]=v-p,A[U+1]=C-d,A[U+2]=x-m;break;case"darken":A[U]=Math.min(v,p),A[U+1]=Math.min(C,d),A[U+2]=Math.min(x,m);break;case"lighten":A[U]=Math.max(v,p),A[U+1]=Math.max(C,d),A[U+2]=Math.max(x,m);break;case"overlay":A[U]=p<128?2*v*p/255:255-2*(255-v)*(255-p)/255,A[U+1]=d<128?2*C*d/255:255-2*(255-C)*(255-d)/255,A[U+2]=m<128?2*x*m/255:255-2*(255-x)*(255-m)/255;break;case"exclusion":A[U]=p+v-2*p*v/255,A[U+1]=d+C-2*d*C/255,A[U+2]=m+x-2*m*x/255;break;case"tint":A[U]=p+v*L,A[U+1]=d+C*L,A[U+2]=m+x*L}},getUniformLocations:function(o,u){return{uColor:o.getUniformLocation(u,"uColor")}},sendUniformData:function(o,u){var A=new n.Color(this.color).getSource();A[0]=this.alpha*A[0]/255,A[1]=this.alpha*A[1]/255,A[2]=this.alpha*A[2]/255,A[3]=this.alpha,o.uniform4fv(u.uColor,A)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendColor.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric,l=n.Image.filters,h=n.util.createClass;l.BlendImage=h(l.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(o){var u=this.type+"_"+this.mode,A=this.fragmentSource[this.mode];return o.programCache.hasOwnProperty(u)||(o.programCache[u]=this.createProgram(o.context,A)),o.programCache[u]},applyToWebGL:function(o){var u=o.context,A=this.createTexture(o.filterBackend,this.image);this.bindAdditionalTexture(u,A,u.TEXTURE1),this.callSuper("applyToWebGL",o),this.unbindAdditionalTexture(u,u.TEXTURE1)},createTexture:function(o,u){return o.getCachedTexture(u.cacheKey,u._element)},calculateMatrix:function(){var o=this.image,u=o._element.width,A=o._element.height;return[1/o.scaleX,0,0,0,1/o.scaleY,0,-o.left/u,-o.top/A,1]},applyTo2d:function(o){var u=o.imageData,A=o.filterBackend.resources,g=u.data,p=g.length,d=u.width,m=u.height,v,C,x,E,L,U,O,X,rt,M,H=this.image,J;A.blendImage||(A.blendImage=n.util.createCanvasElement()),rt=A.blendImage,M=rt.getContext("2d"),rt.width!==d||rt.height!==m?(rt.width=d,rt.height=m):M.clearRect(0,0,d,m),M.setTransform(H.scaleX,0,0,H.scaleY,H.left,H.top),M.drawImage(H._element,0,0,d,m),J=M.getImageData(0,0,d,m).data;for(var $=0;$<p;$+=4)switch(L=g[$],U=g[$+1],O=g[$+2],X=g[$+3],v=J[$],C=J[$+1],x=J[$+2],E=J[$+3],this.mode){case"multiply":g[$]=L*v/255,g[$+1]=U*C/255,g[$+2]=O*x/255,g[$+3]=X*E/255;break;case"mask":g[$+3]=E;break}},getUniformLocations:function(o,u){return{uTransformMatrix:o.getUniformLocation(u,"uTransformMatrix"),uImage:o.getUniformLocation(u,"uImage")}},sendUniformData:function(o,u){var A=this.calculateMatrix();o.uniform1i(u.uImage,1),o.uniformMatrix3fv(u.uTransformMatrix,!1,A)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendImage.fromObject=function(o,u){n.Image.fromObject(o.image,function(A){var g=n.util.object.clone(o);g.image=A,u(new n.Image.filters.BlendImage(g))})}}(r),function(a){var n=a.fabric||(a.fabric={}),l=Math.pow,h=Math.floor,o=Math.sqrt,u=Math.abs,A=Math.round,g=Math.sin,p=Math.ceil,d=n.Image.filters,m=n.util.createClass;d.Resize=m(d.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(v,C){return{uDelta:v.getUniformLocation(C,"uDelta"),uTaps:v.getUniformLocation(C,"uTaps")}},sendUniformData:function(v,C){v.uniform2fv(C.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),v.uniform1fv(C.uTaps,this.taps)},retrieveShader:function(v){var C=this.getFilterWindow(),x=this.type+"_"+C;if(!v.programCache.hasOwnProperty(x)){var E=this.generateShader(C);v.programCache[x]=this.createProgram(v.context,E)}return v.programCache[x]},getFilterWindow:function(){var v=this.tempScale;return Math.ceil(this.lanczosLobes/v)},getTaps:function(){for(var v=this.lanczosCreate(this.lanczosLobes),C=this.tempScale,x=this.getFilterWindow(),E=new Array(x),L=1;L<=x;L++)E[L-1]=v(L*C);return E},generateShader:function(E){for(var C=new Array(E),x=this.fragmentSourceTOP,E,L=1;L<=E;L++)C[L-1]=L+".0 * uDelta";return x+="uniform float uTaps["+E+`];
`,x+=`void main() {
`,x+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,x+=`  float sum = 1.0;
`,C.forEach(function(U,O){x+="  color += texture2D(uTexture, vTexCoord + "+U+") * uTaps["+O+`];
`,x+="  color += texture2D(uTexture, vTexCoord - "+U+") * uTaps["+O+`];
`,x+="  sum += 2.0 * uTaps["+O+`];
`}),x+=`  gl_FragColor = color / sum;
`,x+="}",x},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(v){v.webgl?(v.passes++,this.width=v.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=v.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),v.destinationWidth=this.dW,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceWidth=v.destinationWidth,this.height=v.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),v.destinationHeight=this.dH,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceHeight=v.destinationHeight):this.applyTo2d(v)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(v){return function(C){if(C>=v||C<=-v)return 0;if(C<11920929e-14&&C>-11920929e-14)return 1;C*=Math.PI;var x=C/v;return g(C)/C*g(x)/x}},applyTo2d:function(v){var C=v.imageData,x=this.scaleX,E=this.scaleY;this.rcpScaleX=1/x,this.rcpScaleY=1/E;var L=C.width,U=C.height,O=A(L*x),X=A(U*E),rt;this.resizeType==="sliceHack"?rt=this.sliceByTwo(v,L,U,O,X):this.resizeType==="hermite"?rt=this.hermiteFastResize(v,L,U,O,X):this.resizeType==="bilinear"?rt=this.bilinearFiltering(v,L,U,O,X):this.resizeType==="lanczos"&&(rt=this.lanczosResize(v,L,U,O,X)),v.imageData=rt},sliceByTwo:function(v,C,x,E,L){var U=v.imageData,O=.5,X=!1,rt=!1,M=C*O,H=x*O,J=n.filterBackend.resources,$,ht,ut=0,pt=0,ft=C,R=0;for(J.sliceByTwo||(J.sliceByTwo=document.createElement("canvas")),$=J.sliceByTwo,($.width<C*1.5||$.height<x)&&($.width=C*1.5,$.height=x),ht=$.getContext("2d"),ht.clearRect(0,0,C*1.5,x),ht.putImageData(U,0,0),E=h(E),L=h(L);!X||!rt;)C=M,x=H,E<h(M*O)?M=h(M*O):(M=E,X=!0),L<h(H*O)?H=h(H*O):(H=L,rt=!0),ht.drawImage($,ut,pt,C,x,ft,R,M,H),ut=ft,pt=R,R+=H;return ht.getImageData(ut,pt,E,L)},lanczosResize:function(v,C,x,E,L){function U(it){var P,V,k,N,Z,st,ct,ot,wt,_t,Nt;for(R.x=(it+.5)*H,G.x=h(R.x),P=0;P<L;P++){for(R.y=(P+.5)*J,G.y=h(R.y),Z=0,st=0,ct=0,ot=0,wt=0,V=G.x-ut;V<=G.x+ut;V++)if(!(V<0||V>=C)){_t=h(1e3*u(V-R.x)),ft[_t]||(ft[_t]={});for(var vt=G.y-pt;vt<=G.y+pt;vt++)vt<0||vt>=x||(Nt=h(1e3*u(vt-R.y)),ft[_t][Nt]||(ft[_t][Nt]=M(o(l(_t*$,2)+l(Nt*ht,2))/1e3)),k=ft[_t][Nt],k>0&&(N=(vt*C+V)*4,Z+=k,st+=k*O[N],ct+=k*O[N+1],ot+=k*O[N+2],wt+=k*O[N+3]))}N=(P*E+it)*4,rt[N]=st/Z,rt[N+1]=ct/Z,rt[N+2]=ot/Z,rt[N+3]=wt/Z}return++it<E?U(it):X}var O=v.imageData.data,X=v.ctx.createImageData(E,L),rt=X.data,M=this.lanczosCreate(this.lanczosLobes),H=this.rcpScaleX,J=this.rcpScaleY,$=2/this.rcpScaleX,ht=2/this.rcpScaleY,ut=p(H*this.lanczosLobes/2),pt=p(J*this.lanczosLobes/2),ft={},R={},G={};return U(0)},bilinearFiltering:function(v,C,x,E,L){var U,O,X,rt,M,H,J,$,ht,ut,pt,ft,R=0,G,it=this.rcpScaleX,P=this.rcpScaleY,V=4*(C-1),k=v.imageData,N=k.data,Z=v.ctx.createImageData(E,L),st=Z.data;for(J=0;J<L;J++)for($=0;$<E;$++)for(M=h(it*$),H=h(P*J),ht=it*$-M,ut=P*J-H,G=4*(H*C+M),pt=0;pt<4;pt++)U=N[G+pt],O=N[G+4+pt],X=N[G+V+pt],rt=N[G+V+4+pt],ft=U*(1-ht)*(1-ut)+O*ht*(1-ut)+X*ut*(1-ht)+rt*ht*ut,st[R++]=ft;return Z},hermiteFastResize:function(v,C,x,E,L){for(var U=this.rcpScaleX,O=this.rcpScaleY,X=p(U/2),rt=p(O/2),M=v.imageData,H=M.data,J=v.ctx.createImageData(E,L),$=J.data,ht=0;ht<L;ht++)for(var ut=0;ut<E;ut++){for(var pt=(ut+ht*E)*4,ft=0,R=0,G=0,it=0,P=0,V=0,k=0,N=(ht+.5)*O,Z=h(ht*O);Z<(ht+1)*O;Z++)for(var st=u(N-(Z+.5))/rt,ct=(ut+.5)*U,ot=st*st,wt=h(ut*U);wt<(ut+1)*U;wt++){var _t=u(ct-(wt+.5))/X,Nt=o(ot+_t*_t);Nt>1&&Nt<-1||(ft=2*Nt*Nt*Nt-3*Nt*Nt+1,ft>0&&(_t=4*(wt+Z*C),k+=ft*H[_t+3],G+=ft,H[_t+3]<255&&(ft=ft*H[_t+3]/250),it+=ft*H[_t],P+=ft*H[_t+1],V+=ft*H[_t+2],R+=ft))}$[pt]=it/R,$[pt+1]=P/R,$[pt+2]=V/R,$[pt+3]=k/G}return J},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),n.Image.filters.Resize.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass;l.Contrast=h(l.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(o){if(this.contrast!==0){var u=o.imageData,A,p,g=u.data,p=g.length,d=Math.floor(this.contrast*255),m=259*(d+255)/(255*(259-d));for(A=0;A<p;A+=4)g[A]=m*(g[A]-128)+128,g[A+1]=m*(g[A+1]-128)+128,g[A+2]=m*(g[A+2]-128)+128}},getUniformLocations:function(o,u){return{uContrast:o.getUniformLocation(u,"uContrast")}},sendUniformData:function(o,u){o.uniform1f(u.uContrast,this.contrast)}}),n.Image.filters.Contrast.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass;l.Saturation=h(l.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(o){if(this.saturation!==0){var u=o.imageData,A=u.data,g=A.length,p=-this.saturation,d,m;for(d=0;d<g;d+=4)m=Math.max(A[d],A[d+1],A[d+2]),A[d]+=m!==A[d]?(m-A[d])*p:0,A[d+1]+=m!==A[d+1]?(m-A[d+1])*p:0,A[d+2]+=m!==A[d+2]?(m-A[d+2])*p:0}},getUniformLocations:function(o,u){return{uSaturation:o.getUniformLocation(u,"uSaturation")}},sendUniformData:function(o,u){o.uniform1f(u.uSaturation,-this.saturation)}}),n.Image.filters.Saturation.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass;l.Vibrance=h(l.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(o){if(this.vibrance!==0){var u=o.imageData,A=u.data,g=A.length,p=-this.vibrance,d,m,v,C;for(d=0;d<g;d+=4)m=Math.max(A[d],A[d+1],A[d+2]),v=(A[d]+A[d+1]+A[d+2])/3,C=Math.abs(m-v)*2/255*p,A[d]+=m!==A[d]?(m-A[d])*C:0,A[d+1]+=m!==A[d+1]?(m-A[d+1])*C:0,A[d+2]+=m!==A[d+2]?(m-A[d+2])*C:0}},getUniformLocations:function(o,u){return{uVibrance:o.getUniformLocation(u,"uVibrance")}},sendUniformData:function(o,u){o.uniform1f(u.uVibrance,-this.vibrance)}}),n.Image.filters.Vibrance.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass;l.Blur=h(l.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(o){o.webgl?(this.aspectRatio=o.sourceWidth/o.sourceHeight,o.passes++,this._setupFrameBuffer(o),this.horizontal=!0,this.applyToWebGL(o),this._swapTextures(o),this._setupFrameBuffer(o),this.horizontal=!1,this.applyToWebGL(o),this._swapTextures(o)):this.applyTo2d(o)},applyTo2d:function(o){o.imageData=this.simpleBlur(o)},simpleBlur:function(o){var u=o.filterBackend.resources,A,g,p=o.imageData.width,d=o.imageData.height;u.blurLayer1||(u.blurLayer1=n.util.createCanvasElement(),u.blurLayer2=n.util.createCanvasElement()),A=u.blurLayer1,g=u.blurLayer2,(A.width!==p||A.height!==d)&&(g.width=A.width=p,g.height=A.height=d);var m=A.getContext("2d"),v=g.getContext("2d"),C=15,x,E,L,U,O=this.blur*.06*.5;for(m.putImageData(o.imageData,0,0),v.clearRect(0,0,p,d),U=-C;U<=C;U++)x=(Math.random()-.5)/4,E=U/C,L=O*E*p+x,v.globalAlpha=1-Math.abs(E),v.drawImage(A,L,x),m.drawImage(g,0,0),v.globalAlpha=1,v.clearRect(0,0,g.width,g.height);for(U=-C;U<=C;U++)x=(Math.random()-.5)/4,E=U/C,L=O*E*d+x,v.globalAlpha=1-Math.abs(E),v.drawImage(A,x,L),m.drawImage(g,0,0),v.globalAlpha=1,v.clearRect(0,0,g.width,g.height);o.ctx.drawImage(A,0,0);var X=o.ctx.getImageData(0,0,A.width,A.height);return m.globalAlpha=1,m.clearRect(0,0,A.width,A.height),X},getUniformLocations:function(o,u){return{delta:o.getUniformLocation(u,"uDelta")}},sendUniformData:function(o,u){var A=this.chooseRightDelta();o.uniform2fv(u.delta,A)},chooseRightDelta:function(){var o=1,u=[0,0],A;return this.horizontal?this.aspectRatio>1&&(o=1/this.aspectRatio):this.aspectRatio<1&&(o=this.aspectRatio),A=o*this.blur*.12,this.horizontal?u[0]=A:u[1]=A,u}}),l.Blur.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass;l.Gamma=h(l.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(o){this.gamma=[1,1,1],l.BaseFilter.prototype.initialize.call(this,o)},applyTo2d:function(o){var u=o.imageData,A=u.data,g=this.gamma,p=A.length,d=1/g[0],m=1/g[1],v=1/g[2],C;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),C=0,p=256;C<p;C++)this.rVals[C]=Math.pow(C/255,d)*255,this.gVals[C]=Math.pow(C/255,m)*255,this.bVals[C]=Math.pow(C/255,v)*255;for(C=0,p=A.length;C<p;C+=4)A[C]=this.rVals[A[C]],A[C+1]=this.gVals[A[C+1]],A[C+2]=this.bVals[A[C+2]]},getUniformLocations:function(o,u){return{uGamma:o.getUniformLocation(u,"uGamma")}},sendUniformData:function(o,u){o.uniform3fv(u.uGamma,this.gamma)}}),n.Image.filters.Gamma.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass;l.Composed=h(l.BaseFilter,{type:"Composed",subFilters:[],initialize:function(o){this.callSuper("initialize",o),this.subFilters=this.subFilters.slice(0)},applyTo:function(o){o.passes+=this.subFilters.length-1,this.subFilters.forEach(function(u){u.applyTo(o)})},toObject:function(){return n.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(o){return o.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(o){return!o.isNeutralState()})}}),n.Image.filters.Composed.fromObject=function(o,u){var A=o.subFilters||[],g=A.map(function(d){return new n.Image.filters[d.type](d)}),p=new n.Image.filters.Composed({subFilters:g});return u&&u(p),p}}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.Image.filters,h=n.util.createClass;l.HueRotation=h(l.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var o=this.rotation*Math.PI,u=n.util.cos(o),A=n.util.sin(o),g=1/3,p=Math.sqrt(g)*A,d=1-u;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=u+d/3,this.matrix[1]=g*d-p,this.matrix[2]=g*d+p,this.matrix[5]=g*d+p,this.matrix[6]=u+g*d,this.matrix[7]=g*d-p,this.matrix[10]=g*d-p,this.matrix[11]=g*d+p,this.matrix[12]=u+g*d},isNeutralState:function(o){return this.calculateMatrix(),l.BaseFilter.prototype.isNeutralState.call(this,o)},applyTo:function(o){this.calculateMatrix(),l.BaseFilter.prototype.applyTo.call(this,o)}}),n.Image.filters.HueRotation.fromObject=n.Image.filters.BaseFilter.fromObject}(r),function(a){var n=a.fabric||(a.fabric={}),l=n.util.object.clone;if(n.Text){n.warn("fabric.Text is already defined");return}var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");n.Text=n.util.createClass(n.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:n.Object.prototype.stateProperties.concat(h),cacheProperties:n.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(o,u){this.styles=u?u.styles||{}:{},this.text=o,this.__skipDimension=!0,this.callSuper("initialize",u),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var o=this.path;o&&(o.segmentsInfo=n.util.getPathSegmentsInfo(o.path))},getMeasuringContext:function(){return n._measuringContext||(n._measuringContext=this.canvas&&this.canvas.contextCache||n.util.createCanvasElement().getContext("2d")),n._measuringContext},_splitText:function(){var o=this._splitTextIntoLines(this.text);return this.textLines=o.lines,this._textLines=o.graphemeLines,this._unwrappedTextLines=o._unwrappedLines,this._text=o.graphemeText,o},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var o,u,A,g,p,d,m,v=0,C=this._textLines.length;v<C;v++)if(!(this.textAlign!=="justify"&&(v===C-1||this.isEndOfWrapping(v)))&&(g=0,p=this._textLines[v],u=this.getLineWidth(v),u<this.width&&(m=this.textLines[v].match(this._reSpacesAndTabs)))){A=m.length,o=(this.width-u)/A;for(var x=0,E=p.length;x<=E;x++)d=this.__charBounds[v][x],this._reSpaceAndTab.test(p[x])?(d.width+=o,d.kernedWidth+=o,d.left+=g,g+=o):d.left+=g}},isEndOfWrapping:function(o){return o===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var o=this.callSuper("_getCacheCanvasDimensions"),u=this.fontSize;return o.width+=u*o.zoomX,o.height+=u*o.zoomY,o},_render:function(o){var u=this.path;u&&!u.isNotVisible()&&u._render(o),this._setTextStyles(o),this._renderTextLinesBackground(o),this._renderTextDecoration(o,"underline"),this._renderText(o),this._renderTextDecoration(o,"overline"),this._renderTextDecoration(o,"linethrough")},_renderText:function(o){this.paintFirst==="stroke"?(this._renderTextStroke(o),this._renderTextFill(o)):(this._renderTextFill(o),this._renderTextStroke(o))},_setTextStyles:function(o,u,A){if(o.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":o.textBaseline="middle";break;case"ascender":o.textBaseline="top";break;case"descender":o.textBaseline="bottom";break}o.font=this._getFontDeclaration(u,A)},calcTextWidth:function(){for(var o=this.getLineWidth(0),u=1,A=this._textLines.length;u<A;u++){var g=this.getLineWidth(u);g>o&&(o=g)}return o},_renderTextLine:function(o,u,A,g,p,d){this._renderChars(o,u,A,g,p,d)},_renderTextLinesBackground:function(o){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var u,A,g=o.fillStyle,p,d,m=this._getLeftOffset(),v=this._getTopOffset(),C=0,x=0,E,L,U=this.path,O,X=0,rt=this._textLines.length;X<rt;X++){if(u=this.getHeightOfLine(X),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",X)){v+=u;continue}p=this._textLines[X],A=this._getLineLeftOffset(X),x=0,C=0,d=this.getValueOfPropertyAt(X,0,"textBackgroundColor");for(var M=0,H=p.length;M<H;M++)E=this.__charBounds[X][M],L=this.getValueOfPropertyAt(X,M,"textBackgroundColor"),U?(o.save(),o.translate(E.renderLeft,E.renderTop),o.rotate(E.angle),o.fillStyle=L,L&&o.fillRect(-E.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),E.width,u/this.lineHeight),o.restore()):L!==d?(O=m+A+C,this.direction==="rtl"&&(O=this.width-O-x),o.fillStyle=d,d&&o.fillRect(O,v,x,u/this.lineHeight),C=E.left,x=E.width,d=L):x+=E.kernedWidth;L&&!U&&(O=m+A+C,this.direction==="rtl"&&(O=this.width-O-x),o.fillStyle=L,o.fillRect(O,v,x,u/this.lineHeight)),v+=u}o.fillStyle=g,this._removeShadow(o)}},getFontCache:function(o){var u=o.fontFamily.toLowerCase();n.charWidthsCache[u]||(n.charWidthsCache[u]={});var A=n.charWidthsCache[u],g=o.fontStyle.toLowerCase()+"_"+(o.fontWeight+"").toLowerCase();return A[g]||(A[g]={}),A[g]},_measureChar:function(o,u,A,g){var p=this.getFontCache(u),d=this._getFontDeclaration(u),m=this._getFontDeclaration(g),v=A+o,C=d===m,x,E,L,U=u.fontSize/this.CACHE_FONT_SIZE,O;if(A&&p[A]!==void 0&&(L=p[A]),p[o]!==void 0&&(O=x=p[o]),C&&p[v]!==void 0&&(E=p[v],O=E-L),x===void 0||L===void 0||E===void 0){var X=this.getMeasuringContext();this._setTextStyles(X,u,!0)}return x===void 0&&(O=x=X.measureText(o).width,p[o]=x),L===void 0&&C&&A&&(L=X.measureText(A).width,p[A]=L),C&&E===void 0&&(E=X.measureText(v).width,p[v]=E,O=E-L),{width:x*U,kernedWidth:O*U}},getHeightOfChar:function(o,u){return this.getValueOfPropertyAt(o,u,"fontSize")},measureLine:function(o){var u=this._measureLine(o);return this.charSpacing!==0&&(u.width-=this._getWidthOfCharSpacing()),u.width<0&&(u.width=0),u},_measureLine:function(o){var u=0,A,g,p=this._textLines[o],d,m,v=0,C=new Array(p.length),x=0,E,L,U=this.path,O=this.pathSide==="right";for(this.__charBounds[o]=C,A=0;A<p.length;A++)g=p[A],m=this._getGraphemeBox(g,o,A,d),C[A]=m,u+=m.kernedWidth,d=g;if(C[A]={left:m?m.left+m.width:0,width:0,kernedWidth:0,height:this.fontSize},U){switch(L=U.segmentsInfo[U.segmentsInfo.length-1].length,E=n.util.getPointOnPath(U.path,0,U.segmentsInfo),E.x+=U.pathOffset.x,E.y+=U.pathOffset.y,this.textAlign){case"left":x=O?L-u:0;break;case"center":x=(L-u)/2;break;case"right":x=O?0:L-u;break}for(x+=this.pathStartOffset*(O?-1:1),A=O?p.length-1:0;O?A>=0:A<p.length;O?A--:A++)m=C[A],x>L?x%=L:x<0&&(x+=L),this._setGraphemeOnPath(x,m,E),x+=m.kernedWidth}return{width:u,numOfSpaces:v}},_setGraphemeOnPath:function(o,u,A){var g=o+u.kernedWidth/2,p=this.path,d=n.util.getPointOnPath(p.path,g,p.segmentsInfo);u.renderLeft=d.x-A.x,u.renderTop=d.y-A.y,u.angle=d.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(o,u,A,g,p){var d=this.getCompleteStyleDeclaration(u,A),m=g?this.getCompleteStyleDeclaration(u,A-1):{},v=this._measureChar(o,d,g,m),C=v.kernedWidth,x=v.width,E;this.charSpacing!==0&&(E=this._getWidthOfCharSpacing(),x+=E,C+=E);var L={width:x,left:0,height:d.fontSize,kernedWidth:C,deltaY:d.deltaY};if(A>0&&!p){var U=this.__charBounds[u][A-1];L.left=U.left+U.width+v.kernedWidth-v.width}return L},getHeightOfLine:function(o){if(this.__lineHeights[o])return this.__lineHeights[o];for(var u=this._textLines[o],A=this.getHeightOfChar(o,0),g=1,p=u.length;g<p;g++)A=Math.max(this.getHeightOfChar(o,g),A);return this.__lineHeights[o]=A*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var o,u=0,A=0,g=this._textLines.length;A<g;A++)o=this.getHeightOfLine(A),u+=A===g-1?o/this.lineHeight:o;return u},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(o,u){o.save();for(var A=0,g=this._getLeftOffset(),p=this._getTopOffset(),d=0,m=this._textLines.length;d<m;d++){var v=this.getHeightOfLine(d),C=v/this.lineHeight,x=this._getLineLeftOffset(d);this._renderTextLine(u,o,this._textLines[d],g+x,p+A+C,d),A+=v}o.restore()},_renderTextFill:function(o){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(o,"fillText")},_renderTextStroke:function(o){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(o),o.save(),this._setLineDash(o,this.strokeDashArray),o.beginPath(),this._renderTextCommon(o,"strokeText"),o.closePath(),o.restore())},_renderChars:function(o,u,A,g,p,d){var m=this.getHeightOfLine(d),v=this.textAlign.indexOf("justify")!==-1,C,x,E="",L,U=0,O,X=this.path,rt=!v&&this.charSpacing===0&&this.isEmptyStyles(d)&&!X,M=this.direction==="ltr",H=this.direction==="ltr"?1:-1,J,$=u.canvas.getAttribute("dir");if(u.save(),$!==this.direction&&(u.canvas.setAttribute("dir",M?"ltr":"rtl"),u.direction=M?"ltr":"rtl",u.textAlign=M?"left":"right"),p-=m*this._fontSizeFraction/this.lineHeight,rt){this._renderChar(o,u,d,0,A.join(""),g,p,m),u.restore();return}for(var ht=0,ut=A.length-1;ht<=ut;ht++)O=ht===ut||this.charSpacing||X,E+=A[ht],L=this.__charBounds[d][ht],U===0?(g+=H*(L.kernedWidth-L.width),U+=L.width):U+=L.kernedWidth,v&&!O&&this._reSpaceAndTab.test(A[ht])&&(O=!0),O||(C=C||this.getCompleteStyleDeclaration(d,ht),x=this.getCompleteStyleDeclaration(d,ht+1),O=n.util.hasStyleChanged(C,x,!1)),O&&(X?(u.save(),u.translate(L.renderLeft,L.renderTop),u.rotate(L.angle),this._renderChar(o,u,d,ht,E,-U/2,0,m),u.restore()):(J=g,this._renderChar(o,u,d,ht,E,J,p,m)),E="",C=x,g+=H*U,U=0);u.restore()},_applyPatternGradientTransformText:function(o){var u=n.util.createCanvasElement(),A,g=this.width+this.strokeWidth,p=this.height+this.strokeWidth;return u.width=g,u.height=p,A=u.getContext("2d"),A.beginPath(),A.moveTo(0,0),A.lineTo(g,0),A.lineTo(g,p),A.lineTo(0,p),A.closePath(),A.translate(g/2,p/2),A.fillStyle=o.toLive(A),this._applyPatternGradientTransform(A,o),A.fill(),A.createPattern(u,"no-repeat")},handleFiller:function(o,u,A){var g,p;return A.toLive?A.gradientUnits==="percentage"||A.gradientTransform||A.patternTransform?(g=-this.width/2,p=-this.height/2,o.translate(g,p),o[u]=this._applyPatternGradientTransformText(A),{offsetX:g,offsetY:p}):(o[u]=A.toLive(o,this),this._applyPatternGradientTransform(o,A)):(o[u]=A,{offsetX:0,offsetY:0})},_setStrokeStyles:function(o,u){return o.lineWidth=u.strokeWidth,o.lineCap=this.strokeLineCap,o.lineDashOffset=this.strokeDashOffset,o.lineJoin=this.strokeLineJoin,o.miterLimit=this.strokeMiterLimit,this.handleFiller(o,"strokeStyle",u.stroke)},_setFillStyles:function(o,u){return this.handleFiller(o,"fillStyle",u.fill)},_renderChar:function(o,u,A,g,p,d,m){var v=this._getStyleDeclaration(A,g),C=this.getCompleteStyleDeclaration(A,g),x=o==="fillText"&&C.fill,E=o==="strokeText"&&C.stroke&&C.strokeWidth,L,U;!E&&!x||(u.save(),x&&(L=this._setFillStyles(u,C)),E&&(U=this._setStrokeStyles(u,C)),u.font=this._getFontDeclaration(C),v&&v.textBackgroundColor&&this._removeShadow(u),v&&v.deltaY&&(m+=v.deltaY),x&&u.fillText(p,d-L.offsetX,m-L.offsetY),E&&u.strokeText(p,d-U.offsetX,m-U.offsetY),u.restore())},setSuperscript:function(o,u){return this._setScript(o,u,this.superscript)},setSubscript:function(o,u){return this._setScript(o,u,this.subscript)},_setScript:function(o,u,A){var g=this.get2DCursorLocation(o,!0),p=this.getValueOfPropertyAt(g.lineIndex,g.charIndex,"fontSize"),d=this.getValueOfPropertyAt(g.lineIndex,g.charIndex,"deltaY"),m={fontSize:p*A.size,deltaY:d+p*A.baseline};return this.setSelectionStyles(m,o,u),this},_getLineLeftOffset:function(o){var u=this.getLineWidth(o),A=this.width-u,g=this.textAlign,p=this.direction,m,d=0,m=this.isEndOfWrapping(o);return g==="justify"||g==="justify-center"&&!m||g==="justify-right"&&!m||g==="justify-left"&&!m?0:(g==="center"&&(d=A/2),g==="right"&&(d=A),g==="justify-center"&&(d=A/2),g==="justify-right"&&(d=A),p==="rtl"&&(d-=A),d)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var o=this._forceClearCache;return o||(o=this.hasStateChanged("_dimensionAffectingProps")),o&&(this.dirty=!0,this._forceClearCache=!1),o},getLineWidth:function(o){if(this.__lineWidths[o]!==void 0)return this.__lineWidths[o];var u=this.measureLine(o),A=u.width;return this.__lineWidths[o]=A,A},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(o,u,A){var g=this._getStyleDeclaration(o,u);return g&&typeof g[A]<"u"?g[A]:this[A]},_renderTextDecoration:function(o,u){if(!(!this[u]&&!this.styleHas(u))){for(var A,g,p,d,m,v,C,x,E=this._getLeftOffset(),L=this._getTopOffset(),U,O,X,rt,M,H,J,$,ht=this.path,ut=this._getWidthOfCharSpacing(),pt=this.offsets[u],ft=0,R=this._textLines.length;ft<R;ft++){if(A=this.getHeightOfLine(ft),!this[u]&&!this.styleHas(u,ft)){L+=A;continue}C=this._textLines[ft],H=A/this.lineHeight,d=this._getLineLeftOffset(ft),O=0,X=0,x=this.getValueOfPropertyAt(ft,0,u),$=this.getValueOfPropertyAt(ft,0,"fill"),U=L+H*(1-this._fontSizeFraction),g=this.getHeightOfChar(ft,0),m=this.getValueOfPropertyAt(ft,0,"deltaY");for(var G=0,it=C.length;G<it;G++)if(rt=this.__charBounds[ft][G],M=this.getValueOfPropertyAt(ft,G,u),J=this.getValueOfPropertyAt(ft,G,"fill"),p=this.getHeightOfChar(ft,G),v=this.getValueOfPropertyAt(ft,G,"deltaY"),ht&&M&&J)o.save(),o.fillStyle=$,o.translate(rt.renderLeft,rt.renderTop),o.rotate(rt.angle),o.fillRect(-rt.kernedWidth/2,pt*p+v,rt.kernedWidth,this.fontSize/15),o.restore();else if((M!==x||J!==$||p!==g||v!==m)&&X>0){var P=E+d+O;this.direction==="rtl"&&(P=this.width-P-X),x&&$&&(o.fillStyle=$,o.fillRect(P,U+pt*g+m,X,this.fontSize/15)),O=rt.left,X=rt.width,x=M,$=J,g=p,m=v}else X+=rt.kernedWidth;var P=E+d+O;this.direction==="rtl"&&(P=this.width-P-X),o.fillStyle=J,M&&J&&o.fillRect(P,U+pt*g+m,X-ut,this.fontSize/15),L+=A}this._removeShadow(o)}},_getFontDeclaration:function(o,u){var A=o||this,g=this.fontFamily,p=n.Text.genericFonts.indexOf(g.toLowerCase())>-1,d=g===void 0||g.indexOf("'")>-1||g.indexOf(",")>-1||g.indexOf('"')>-1||p?A.fontFamily:'"'+A.fontFamily+'"';return[n.isLikelyNode?A.fontWeight:A.fontStyle,n.isLikelyNode?A.fontStyle:A.fontWeight,u?this.CACHE_FONT_SIZE+"px":A.fontSize+"px",d].join(" ")},render:function(o){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",o)))},_splitTextIntoLines:function(o){for(var u=o.split(this._reNewline),A=new Array(u.length),g=[`
`],p=[],d=0;d<u.length;d++)A[d]=n.util.string.graphemeSplit(u[d]),p=p.concat(A[d],g);return p.pop(),{_unwrappedLines:A,lines:u,graphemeText:p,graphemeLines:A}},toObject:function(o){var u=h.concat(o),A=this.callSuper("toObject",u);return A.styles=n.util.stylesToArray(this.styles,this.text),A.path&&(A.path=this.path.toObject()),A},set:function(o,u){this.callSuper("set",o,u);var A=!1,g=!1;if(typeof o=="object")for(var p in o)p==="path"&&this.setPathInfo(),A=A||this._dimensionAffectingProps.indexOf(p)!==-1,g=g||p==="path";else A=this._dimensionAffectingProps.indexOf(o)!==-1,g=o==="path";return g&&this.setPathInfo(),A&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),n.Text.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),n.Text.DEFAULT_SVG_FONT_SIZE=16,n.Text.fromElement=function(o,u,A){if(!o)return u(null);var g=n.parseAttributes(o,n.Text.ATTRIBUTE_NAMES),p=g.textAnchor||"left";if(A=n.util.object.extend(A?l(A):{},g),A.top=A.top||0,A.left=A.left||0,g.textDecoration){var d=g.textDecoration;d.indexOf("underline")!==-1&&(A.underline=!0),d.indexOf("overline")!==-1&&(A.overline=!0),d.indexOf("line-through")!==-1&&(A.linethrough=!0),delete A.textDecoration}"dx"in g&&(A.left+=g.dx),"dy"in g&&(A.top+=g.dy),"fontSize"in A||(A.fontSize=n.Text.DEFAULT_SVG_FONT_SIZE);var m="";"textContent"in o?m=o.textContent:"firstChild"in o&&o.firstChild!==null&&"data"in o.firstChild&&o.firstChild.data!==null&&(m=o.firstChild.data),m=m.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var v=A.strokeWidth;A.strokeWidth=0;var C=new n.Text(m,A),x=C.getScaledHeight()/C.height,E=(C.height+C.strokeWidth)*C.lineHeight-C.height,L=E*x,U=C.getScaledHeight()+L,O=0;p==="center"&&(O=C.getScaledWidth()/2),p==="right"&&(O=C.getScaledWidth()),C.set({left:C.left-O,top:C.top-(U-C.fontSize*(.07+C._fontSizeFraction))/C.lineHeight,strokeWidth:typeof v<"u"?v:1}),u(C)},n.Text.fromObject=function(o,u){var A=l(o),g=o.path;return delete A.path,n.Object._fromObject("Text",A,function(p){p.styles=n.util.stylesFromArray(o.styles,o.text),g?n.Object._fromObject("Path",g,function(d){p.set("path",d),u(p)},"path"):u(p)},"text")},n.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],n.util.createAccessors&&n.util.createAccessors(n.Text)}(r),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(a){if(!this.styles||typeof a<"u"&&!this.styles[a])return!0;var n=typeof a>"u"?this.styles:{line:this.styles[a]};for(var l in n)for(var h in n[l])for(var o in n[l][h])return!1;return!0},styleHas:function(a,n){if(!this.styles||!a||a===""||typeof n<"u"&&!this.styles[n])return!1;var l=typeof n>"u"?this.styles:{0:this.styles[n]};for(var h in l)for(var o in l[h])if(typeof l[h][o][a]<"u")return!0;return!1},cleanStyle:function(a){if(!this.styles||!a||a==="")return!1;var n=this.styles,l=0,h,o,u=!0,A=0,g;for(var p in n){h=0;for(var d in n[p]){var g=n[p][d],m=g.hasOwnProperty(a);l++,m?(o?g[a]!==o&&(u=!1):o=g[a],g[a]===this[a]&&delete g[a]):u=!1,Object.keys(g).length!==0?h++:delete n[p][d]}h===0&&delete n[p]}for(var v=0;v<this._textLines.length;v++)A+=this._textLines[v].length;u&&l===A&&(this[a]=o,this.removeStyle(a))},removeStyle:function(a){if(!(!this.styles||!a||a==="")){var n=this.styles,l,h,o;for(h in n){l=n[h];for(o in l)delete l[o][a],Object.keys(l[o]).length===0&&delete l[o];Object.keys(l).length===0&&delete n[h]}}},_extendStyles:function(a,n){var l=this.get2DCursorLocation(a);this._getLineStyle(l.lineIndex)||this._setLineStyle(l.lineIndex),this._getStyleDeclaration(l.lineIndex,l.charIndex)||this._setStyleDeclaration(l.lineIndex,l.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(l.lineIndex,l.charIndex),n)},get2DCursorLocation:function(a,n){typeof a>"u"&&(a=this.selectionStart);for(var l=n?this._unwrappedTextLines:this._textLines,h=l.length,o=0;o<h;o++){if(a<=l[o].length)return{lineIndex:o,charIndex:a};a-=l[o].length+this.missingNewlineOffset(o)}return{lineIndex:o-1,charIndex:l[o-1].length<a?l[o-1].length:a}},getSelectionStyles:function(a,n,l){typeof a>"u"&&(a=this.selectionStart||0),typeof n>"u"&&(n=this.selectionEnd||a);for(var h=[],o=a;o<n;o++)h.push(this.getStyleAtPosition(o,l));return h},getStyleAtPosition:function(a,n){var l=this.get2DCursorLocation(a),h=n?this.getCompleteStyleDeclaration(l.lineIndex,l.charIndex):this._getStyleDeclaration(l.lineIndex,l.charIndex);return h||{}},setSelectionStyles:function(a,n,l){typeof n>"u"&&(n=this.selectionStart||0),typeof l>"u"&&(l=this.selectionEnd||n);for(var h=n;h<l;h++)this._extendStyles(h,a);return this._forceClearCache=!0,this},_getStyleDeclaration:function(a,n){var l=this.styles&&this.styles[a];return l?l[n]:null},getCompleteStyleDeclaration:function(a,n){for(var l=this._getStyleDeclaration(a,n)||{},h={},o,u=0;u<this._styleProperties.length;u++)o=this._styleProperties[u],h[o]=typeof l[o]>"u"?this[o]:l[o];return h},_setStyleDeclaration:function(a,n,l){this.styles[a][n]=l},_deleteStyleDeclaration:function(a,n){delete this.styles[a][n]},_getLineStyle:function(a){return!!this.styles[a]},_setLineStyle:function(a){this.styles[a]={}},_deleteLineStyle:function(a){delete this.styles[a]}})}(),function(){function a(n){n.textDecoration&&(n.textDecoration.indexOf("underline")>-1&&(n.underline=!0),n.textDecoration.indexOf("line-through")>-1&&(n.linethrough=!0),n.textDecoration.indexOf("overline")>-1&&(n.overline=!0),delete n.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(n,l){this.callSuper("initialize",n,l),this.initBehavior()},setSelectionStart:function(n){n=Math.max(n,0),this._updateAndFire("selectionStart",n)},setSelectionEnd:function(n){n=Math.min(n,this.text.length),this._updateAndFire("selectionEnd",n)},_updateAndFire:function(n,l){this[n]!==l&&(this._fireSelectionChanged(),this[n]=l),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(n){this.clearContextTop(),this.callSuper("render",n),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(n){this.callSuper("_render",n)},clearContextTop:function(n){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var l=this.canvas.contextTop,h=this.canvas.viewportTransform;l.save(),l.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(l),this._clearTextArea(l),n||l.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var n=this._getCursorBoundaries(),l=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(n,l):this.renderSelection(n,l),l.restore()}},_clearTextArea:function(n){var l=this.width+4,h=this.height+4;n.clearRect(-l/2,-h/2,l,h)},_getCursorBoundaries:function(n){typeof n>"u"&&(n=this.selectionStart);var l=this._getLeftOffset(),h=this._getTopOffset(),o=this._getCursorBoundariesOffsets(n);return{left:l,top:h,leftOffset:o.left,topOffset:o.top}},_getCursorBoundariesOffsets:function(n){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var l,h,o,u=0,A=0,g,p=this.get2DCursorLocation(n);o=p.charIndex,h=p.lineIndex;for(var d=0;d<h;d++)u+=this.getHeightOfLine(d);l=this._getLineLeftOffset(h);var m=this.__charBounds[h][o];return m&&(A=m.left),this.charSpacing!==0&&o===this._textLines[h].length&&(A-=this._getWidthOfCharSpacing()),g={top:u,left:l+(A>0?A:0)},this.direction==="rtl"&&(g.left*=-1),this.cursorOffsetCache=g,this.cursorOffsetCache},renderCursor:function(n,l){var h=this.get2DCursorLocation(),o=h.lineIndex,u=h.charIndex>0?h.charIndex-1:0,A=this.getValueOfPropertyAt(o,u,"fontSize"),g=this.scaleX*this.canvas.getZoom(),p=this.cursorWidth/g,d=n.topOffset,m=this.getValueOfPropertyAt(o,u,"deltaY");d+=(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-A*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(n,l),l.fillStyle=this.cursorColor||this.getValueOfPropertyAt(o,u,"fill"),l.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,l.fillRect(n.left+n.leftOffset-p/2,d+n.top+m,p,A)},renderSelection:function(n,l){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,o=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,u=this.textAlign.indexOf("justify")!==-1,A=this.get2DCursorLocation(h),g=this.get2DCursorLocation(o),p=A.lineIndex,d=g.lineIndex,m=A.charIndex<0?0:A.charIndex,v=g.charIndex<0?0:g.charIndex,C=p;C<=d;C++){var x=this._getLineLeftOffset(C)||0,E=this.getHeightOfLine(C),L=0,U=0,O=0;if(C===p&&(U=this.__charBounds[p][m].left),C>=p&&C<d)O=u&&!this.isEndOfWrapping(C)?this.width:this.getLineWidth(C)||5;else if(C===d)if(v===0)O=this.__charBounds[d][v].left;else{var X=this._getWidthOfCharSpacing();O=this.__charBounds[d][v-1].left+this.__charBounds[d][v-1].width-X}L=E,(this.lineHeight<1||C===d&&this.lineHeight>1)&&(E/=this.lineHeight);var rt=n.left+x+U,M=O-U,H=E,J=0;this.inCompositionMode?(l.fillStyle=this.compositionColor||"black",H=1,J=E):l.fillStyle=this.selectionColor,this.direction==="rtl"&&(rt=this.width-rt-M),l.fillRect(rt,n.top+n.topOffset+J,M,H),n.topOffset+=L}},getCurrentCharFontSize:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fontSize")},getCurrentCharColor:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fill")},_getCurrentCharIndex:function(){var n=this.get2DCursorLocation(this.selectionStart,!0),l=n.charIndex>0?n.charIndex-1:0;return{l:n.lineIndex,c:l}}}),t.IText.fromObject=function(n,l){var h=t.util.stylesFromArray(n.styles,n.text),o=Object.assign({},n,{styles:h});if(a(o),o.styles)for(var u in o.styles)for(var A in o.styles[u])a(o.styles[u][A]);t.Object._fromObject("IText",o,l,"text")}}(),function(){var a=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var n=this;this.on("added",function(){var l=n.canvas;l&&(l._hasITextHandlers||(l._hasITextHandlers=!0,n._initCanvasHandlers(l)),l._iTextInstances=l._iTextInstances||[],l._iTextInstances.push(n))})},initRemovedHandler:function(){var n=this;this.on("removed",function(){var l=n.canvas;l&&(l._iTextInstances=l._iTextInstances||[],t.util.removeFromArray(l._iTextInstances,n),l._iTextInstances.length===0&&(l._hasITextHandlers=!1,n._removeCanvasHandlers(l)))})},_initCanvasHandlers:function(n){n._mouseUpITextHandler=function(){n._iTextInstances&&n._iTextInstances.forEach(function(l){l.__isMousedown=!1})},n.on("mouse:up",n._mouseUpITextHandler)},_removeCanvasHandlers:function(n){n.off("mouse:up",n._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(n,l,h,o){var u;return u={isAborted:!1,abort:function(){this.isAborted=!0}},n.animate("_currentCursorOpacity",l,{duration:h,onComplete:function(){u.isAborted||n[o]()},onChange:function(){n.canvas&&n.selectionStart===n.selectionEnd&&n.renderCursorOrSelection()},abort:function(){return u.isAborted}}),u},_onTickComplete:function(){var n=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){n._currentTickCompleteState=n._animateCursor(n,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(n){var l=this,h=n?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){l._tick()},h)},abortCursorAnimation:function(){var n=this._currentTickState||this._currentTickCompleteState,l=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,n&&l&&l.clearContext(l.contextTop||l.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(n){var l=0,h=n-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)l++,h--;for(;/\S/.test(this._text[h])&&h>-1;)l++,h--;return n-l},findWordBoundaryRight:function(n){var l=0,h=n;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)l++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)l++,h++;return n+l},findLineBoundaryLeft:function(n){for(var l=0,h=n-1;!/\n/.test(this._text[h])&&h>-1;)l++,h--;return n-l},findLineBoundaryRight:function(n){for(var l=0,h=n;!/\n/.test(this._text[h])&&h<this._text.length;)l++,h++;return n+l},searchWordBoundary:function(n,l){for(var h=this._text,o=this._reSpace.test(h[n])?n-1:n,u=h[o],A=t.reNonWord;!A.test(u)&&o>0&&o<h.length;)o+=l,u=h[o];return A.test(u)&&(o+=l===1?0:1),o},selectWord:function(n){n=n||this.selectionStart;var l=this.searchWordBoundary(n,-1),h=this.searchWordBoundary(n,1);this.selectionStart=l,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(n){n=n||this.selectionStart;var l=this.findLineBoundaryLeft(n),h=this.findLineBoundaryRight(n);return this.selectionStart=l,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(n){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(n),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(n){n._iTextInstances&&n._iTextInstances.forEach(function(l){l.selected=!1,l.isEditing&&l.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(n){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var l=this.getSelectionStartFromPointer(n.e),h=this.selectionStart,o=this.selectionEnd;(l!==this.__selectionStartOnMouseDown||h===o)&&(h===l||o===l)||(l>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=l):(this.selectionStart=l,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==o)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(n,l,h){var o=h.slice(0,n),u=t.util.string.graphemeSplit(o).length;if(n===l)return{selectionStart:u,selectionEnd:u};var A=h.slice(n,l),g=t.util.string.graphemeSplit(A).length;return{selectionStart:u,selectionEnd:u+g}},fromGraphemeToStringSelection:function(n,l,h){var o=h.slice(0,n),u=o.join("").length;if(n===l)return{selectionStart:u,selectionEnd:u};var A=h.slice(n,l),g=A.join("").length;return{selectionStart:u,selectionEnd:u+g}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var n=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=n.selectionStart,this.hiddenTextarea.selectionEnd=n.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var n=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=n.selectionEnd,this.inCompositionMode||(this.selectionStart=n.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var n=this._calcTextareaPosition();this.hiddenTextarea.style.left=n.left,this.hiddenTextarea.style.top=n.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var n=this.inCompositionMode?this.compositionStart:this.selectionStart,l=this._getCursorBoundaries(n),h=this.get2DCursorLocation(n),o=h.lineIndex,u=h.charIndex,A=this.getValueOfPropertyAt(o,u,"fontSize")*this.lineHeight,g=l.leftOffset,p=this.calcTransformMatrix(),d={x:l.left+g,y:l.top+l.topOffset+A},m=this.canvas.getRetinaScaling(),v=this.canvas.upperCanvasEl,C=v.width/m,x=v.height/m,E=C-A,L=x-A,U=v.clientWidth/C,O=v.clientHeight/x;return d=t.util.transformPoint(d,p),d=t.util.transformPoint(d,this.canvas.viewportTransform),d.x*=U,d.y*=O,d.x<0&&(d.x=0),d.x>E&&(d.x=E),d.y<0&&(d.y=0),d.y>L&&(d.y=L),d.x+=this.canvas._offset.left,d.y+=this.canvas._offset.top,{left:d.x+"px",top:d.y+"px",fontSize:A+"px",charHeight:A}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var n=this._textBeforeEdit!==this.text,l=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,l&&(l.blur&&l.blur(),l.parentNode&&l.parentNode.removeChild(l)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),n&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),n&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var n in this.styles)this._textLines[n]||delete this.styles[n]},removeStyleFromTo:function(n,l){var h=this.get2DCursorLocation(n,!0),o=this.get2DCursorLocation(l,!0),u=h.lineIndex,A=h.charIndex,g=o.lineIndex,p=o.charIndex,d,m;if(u!==g){if(this.styles[u])for(d=A;d<this._unwrappedTextLines[u].length;d++)delete this.styles[u][d];if(this.styles[g])for(d=p;d<this._unwrappedTextLines[g].length;d++)m=this.styles[g][d],m&&(this.styles[u]||(this.styles[u]={}),this.styles[u][A+d-p]=m);for(d=u+1;d<=g;d++)delete this.styles[d];this.shiftLineStyles(g,u-g)}else if(this.styles[u]){m=this.styles[u];var v=p-A,C,x;for(d=A;d<p;d++)delete m[d];for(x in this.styles[u])C=parseInt(x,10),C>=p&&(m[C-v]=m[x],delete m[x])}},shiftLineStyles:function(n,l){var h=a(this.styles);for(var o in this.styles){var u=parseInt(o,10);u>n&&(this.styles[u+l]=h[u],h[u-l]||delete this.styles[u])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(n,l,h,o){var u,A={},g=!1,p=this._unwrappedTextLines[n].length===l;h||(h=1),this.shiftLineStyles(n,h),this.styles[n]&&(u=this.styles[n][l===0?l:l-1]);for(var d in this.styles[n]){var m=parseInt(d,10);m>=l&&(g=!0,A[m-l]=this.styles[n][d],p&&l===0||delete this.styles[n][d])}var v=!1;for(g&&!p&&(this.styles[n+h]=A,v=!0),v&&h--;h>0;)o&&o[h-1]?this.styles[n+h]={0:a(o[h-1])}:u?this.styles[n+h]={0:a(u)}:delete this.styles[n+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(n,l,h,o){this.styles||(this.styles={});var u=this.styles[n],A=u?a(u):{};h||(h=1);for(var g in A){var p=parseInt(g,10);p>=l&&(u[p+h]=A[p],A[p-h]||delete u[p])}if(this._forceClearCache=!0,o){for(;h--;)Object.keys(o[h]).length&&(this.styles[n]||(this.styles[n]={}),this.styles[n][l+h]=a(o[h]));return}if(u)for(var d=u[l?l-1:1];d&&h--;)this.styles[n][l+h]=a(d)},insertNewStyleBlock:function(n,l,h){for(var o=this.get2DCursorLocation(l,!0),u=[0],A=0,g=0;g<n.length;g++)n[g]===`
`?(A++,u[A]=0):u[A]++;u[0]>0&&(this.insertCharStyleObject(o.lineIndex,o.charIndex,u[0],h),h=h&&h.slice(u[0]+1)),A&&this.insertNewlineStyleObject(o.lineIndex,o.charIndex+u[0],A);for(var g=1;g<A;g++)u[g]>0?this.insertCharStyleObject(o.lineIndex+g,0,u[g],h):h&&this.styles[o.lineIndex+g]&&h[0]&&(this.styles[o.lineIndex+g][0]=h[0]),h=h&&h.slice(u[g]+1);u[g]>0&&this.insertCharStyleObject(o.lineIndex+g,0,u[g],h)},setSelectionStartEndWithShift:function(n,l,h){h<=n?(l===n?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=n),this.selectionStart=h):h>n&&h<l?this._selectionDirection==="right"?this.selectionEnd=h:this.selectionStart=h:(l===n?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=l),this.selectionEnd=h)},setSelectionInBoundaries:function(){var n=this.text.length;this.selectionStart>n?this.selectionStart=n:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>n?this.selectionEnd=n:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(a){if(this.canvas){this.__newClickTime=+new Date;var n=a.pointer;this.isTripleClick(n)&&(this.fire("tripleclick",a),this._stopEvent(a.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=n,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(a){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===a.x&&this.__lastPointer.y===a.y},_stopEvent:function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(a){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(a.e))},tripleClickHandler:function(a){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(a.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(a.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(a){if(this.__isMousedown=!1,!(!this.editable||this.group||a.transform&&a.transform.actionPerformed||a.e.button&&a.e.button!==1)){if(this.canvas){var n=this.canvas._activeObject;if(n&&n!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(a.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(a){var n=this.getSelectionStartFromPointer(a),l=this.selectionStart,h=this.selectionEnd;a.shiftKey?this.setSelectionStartEndWithShift(l,h,n):(this.selectionStart=n,this.selectionEnd=n),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(a){for(var n=this.getLocalPointer(a),l=0,h=0,o=0,u=0,A=0,g,p,d=0,m=this._textLines.length;d<m&&o<=n.y;d++)o+=this.getHeightOfLine(d)*this.scaleY,A=d,d>0&&(u+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));g=this._getLineLeftOffset(A),h=g*this.scaleX,p=this._textLines[A],this.direction==="rtl"&&(n.x=this.width*this.scaleX-n.x+h);for(var v=0,C=p.length;v<C&&(l=h,h+=this.__charBounds[A][v].kernedWidth*this.scaleX,h<=n.x);v++)u++;return this._getNewSelectionStartFromOffset(n,l,h,u,C)},_getNewSelectionStartFromOffset:function(a,n,l,h,o){var u=a.x-n,A=l-a.x,g=A>u||A<0?0:1,p=h+g;return this.flipX&&(p=o-p),p>this._text.length&&(p=this._text.length),p}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var a=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+a.top+"; left: "+a.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+a.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(a){if(this.isEditing){var n=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(a.keyCode in n)this[n[a.keyCode]](a);else if(a.keyCode in this.ctrlKeysMapDown&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapDown[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),a.keyCode>=33&&a.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(a){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(a.keyCode in this.ctrlKeysMapUp&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapUp[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(a){var n=this.fromPaste;if(this.fromPaste=!1,a&&a.stopPropagation(),!!this.isEditing){var l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,o=l.length,u,A,g=o-h,p=this.selectionStart,d=this.selectionEnd,m=p!==d,v,C,x;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var E=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),L=p>E.selectionStart;m?(u=this._text.slice(p,d),g+=d-p):o<h&&(L?u=this._text.slice(d+g,d):u=this._text.slice(p,p-g)),A=l.slice(E.selectionEnd-g,E.selectionEnd),u&&u.length&&(A.length&&(v=this.getSelectionStyles(p,p+1,!1),v=A.map(function(){return v[0]})),m?(C=p,x=d):L?(C=d-u.length,x=d):(C=d,x=d+u.length),this.removeStyleFromTo(C,x)),A.length&&(n&&A.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(v=t.copiedTextStyle),this.insertNewStyleBlock(A,p,v)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(a){this.compositionStart=a.target.selectionStart,this.compositionEnd=a.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(a){return a&&a.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(a,n){var l=this._getLineLeftOffset(a),h;return n>0&&(h=this.__charBounds[a][n-1],l+=h.left+h.width),l},getDownCursorOffset:function(a,n){var l=this._getSelectionForOffset(a,n),h=this.get2DCursorLocation(l),o=h.lineIndex;if(o===this._textLines.length-1||a.metaKey||a.keyCode===34)return this._text.length-l;var u=h.charIndex,A=this._getWidthBeforeCursor(o,u),g=this._getIndexOnLine(o+1,A),p=this._textLines[o].slice(u);return p.length+g+1+this.missingNewlineOffset(o)},_getSelectionForOffset:function(a,n){return a.shiftKey&&this.selectionStart!==this.selectionEnd&&n?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(a,n){var l=this._getSelectionForOffset(a,n),h=this.get2DCursorLocation(l),o=h.lineIndex;if(o===0||a.metaKey||a.keyCode===33)return-l;var u=h.charIndex,A=this._getWidthBeforeCursor(o,u),g=this._getIndexOnLine(o-1,A),p=this._textLines[o].slice(0,u),d=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+g-p.length+(1-d)},_getIndexOnLine:function(a,n){for(var l=this._textLines[a],h=this._getLineLeftOffset(a),o=h,u=0,A,g,p=0,d=l.length;p<d;p++)if(A=this.__charBounds[a][p].width,o+=A,o>n){g=!0;var m=o-A,v=o,C=Math.abs(m-n),x=Math.abs(v-n);u=x<C?p:p-1;break}return g||(u=l.length-1),u},moveCursorDown:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",a)},moveCursorUp:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",a)},_moveCursorUpOrDown:function(a,n){var l="get"+a+"CursorOffset",h=this[l](n,this._selectionDirection==="right");n.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),h!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(a){var n=this._selectionDirection==="left"?this.selectionStart+a:this.selectionEnd+a;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,n),a!==0},moveCursorWithoutShift:function(a){return a<0?(this.selectionStart+=a,this.selectionEnd=this.selectionStart):(this.selectionEnd+=a,this.selectionStart=this.selectionEnd),a!==0},moveCursorLeft:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",a)},_move:function(a,n,l){var h;if(a.altKey)h=this["findWordBoundary"+l](this[n]);else if(a.metaKey||a.keyCode===35||a.keyCode===36)h=this["findLineBoundary"+l](this[n]);else return this[n]+=l==="Left"?-1:1,!0;if(typeof h<"u"&&this[n]!==h)return this[n]=h,!0},_moveLeft:function(a,n){return this._move(a,n,"Left")},_moveRight:function(a,n){return this._move(a,n,"Right")},moveCursorLeftWithoutShift:function(a){var n=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(n=this._moveLeft(a,"selectionStart")),this.selectionEnd=this.selectionStart,n},moveCursorLeftWithShift:function(a){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(a,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(a,"selectionStart")},moveCursorRight:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",a)},_moveCursorLeftOrRight:function(a,n){var l="moveCursor"+a+"With";this._currentCursorOpacity=1,n.shiftKey?l+="Shift":l+="outShift",this[l](n)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(a){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(a,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(a,"selectionEnd")},moveCursorRightWithoutShift:function(a){var n=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(n=this._moveRight(a,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,n},removeChars:function(a,n){typeof n>"u"&&(n=a+1),this.removeStyleFromTo(a,n),this._text.splice(a,n-a),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(a,n,l,h){typeof h>"u"&&(h=l),h>l&&this.removeStyleFromTo(l,h);var o=t.util.string.graphemeSplit(a);this.insertNewStyleBlock(o,l,n),this._text=[].concat(this._text.slice(0,l),o,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var a=t.util.toFixed,n=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var l=this._getSVGLeftTopOffsets(),h=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(h)},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(l){var h=!0,o=this.getSvgTextDecoration(this);return[l.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",o?'text-decoration="'+o+'" ':"",'style="',this.getSvgStyles(h),'"',this.addPaintOrder()," >",l.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(l,h){var o=[],u=[],A=l,g;this._setSVGBg(u);for(var p=0,d=this._textLines.length;p<d;p++)g=this._getLineLeftOffset(p),(this.textBackgroundColor||this.styleHas("textBackgroundColor",p))&&this._setSVGTextLineBg(u,p,h+g,A),this._setSVGTextLineText(o,p,h+g,A),A+=this.getHeightOfLine(p);return{textSpans:o,textBgRects:u}},_createTextCharSpan:function(l,h,o,u){var A=l!==l.trim()||l.match(n),g=this.getSvgSpanStyles(h,A),p=g?'style="'+g+'"':"",d=h.deltaY,m="",v=t.Object.NUM_FRACTION_DIGITS;return d&&(m=' dy="'+a(d,v)+'" '),['<tspan x="',a(o,v),'" y="',a(u,v),'" ',m,p,">",t.util.string.escapeXml(l),"</tspan>"].join("")},_setSVGTextLineText:function(l,h,o,u){var A=this.getHeightOfLine(h),g=this.textAlign.indexOf("justify")!==-1,p,d,m="",v,C,x=0,E=this._textLines[h],L;u+=A*(1-this._fontSizeFraction)/this.lineHeight;for(var U=0,O=E.length-1;U<=O;U++)L=U===O||this.charSpacing,m+=E[U],v=this.__charBounds[h][U],x===0?(o+=v.kernedWidth-v.width,x+=v.width):x+=v.kernedWidth,g&&!L&&this._reSpaceAndTab.test(E[U])&&(L=!0),L||(p=p||this.getCompleteStyleDeclaration(h,U),d=this.getCompleteStyleDeclaration(h,U+1),L=t.util.hasStyleChanged(p,d,!0)),L&&(C=this._getStyleDeclaration(h,U)||{},l.push(this._createTextCharSpan(m,C,o,u)),m="",p=d,o+=x,x=0)},_pushTextBgRect:function(l,h,o,u,A,g){var p=t.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(h),' x="',a(o,p),'" y="',a(u,p),'" width="',a(A,p),'" height="',a(g,p),`"></rect>
`)},_setSVGTextLineBg:function(l,h,o,u){for(var A=this._textLines[h],g=this.getHeightOfLine(h)/this.lineHeight,p=0,d=0,m,v,C=this.getValueOfPropertyAt(h,0,"textBackgroundColor"),x=0,E=A.length;x<E;x++)m=this.__charBounds[h][x],v=this.getValueOfPropertyAt(h,x,"textBackgroundColor"),v!==C?(C&&this._pushTextBgRect(l,C,o+d,u,p,g),d=m.left,p=m.width,C=v):p+=m.kernedWidth;v&&this._pushTextBgRect(l,v,o+d,u,p,g)},_getFillAttributes:function(l){var h=l&&typeof l=="string"?new t.Color(l):"";return!h||!h.getSource()||h.getAlpha()===1?'fill="'+l+'"':'opacity="'+h.getAlpha()+'" fill="'+h.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(l){for(var h=0,o=0,u=0;u<l;u++)h+=this.getHeightOfLine(u);return o=this.getHeightOfLine(u),{lineTop:h,offset:(this._fontSizeMult-this._fontSizeFraction)*o/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(l){var h=t.Object.prototype.getSvgStyles.call(this,l);return h+" white-space: pre;"}})}(),function(a){var n=a.fabric||(a.fabric={});n.Textbox=n.util.createClass(n.IText,n.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:n.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(l){for(var h=0,o=0,u=0,A={},g=0;g<l.graphemeLines.length;g++)l.graphemeText[u]===`
`&&g>0?(o=0,u++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(l.graphemeText[u])&&g>0&&(o++,u++),A[g]={line:h,offset:o},u+=l.graphemeLines[g].length,o+=l.graphemeLines[g].length;return A},styleHas:function(l,h){if(this._styleMap&&!this.isWrapping){var o=this._styleMap[h];o&&(h=o.line)}return n.Text.prototype.styleHas.call(this,l,h)},isEmptyStyles:function(l){if(!this.styles)return!0;var h=0,o=l+1,u,A,g=!1,p=this._styleMap[l],d=this._styleMap[l+1];p&&(l=p.line,h=p.offset),d&&(o=d.line,g=o===l,u=d.offset),A=typeof l>"u"?this.styles:{line:this.styles[l]};for(var m in A)for(var v in A[m])if(v>=h&&(!g||v<u))for(var C in A[m][v])return!1;return!0},_getStyleDeclaration:function(l,h){if(this._styleMap&&!this.isWrapping){var o=this._styleMap[l];if(!o)return null;l=o.line,h=o.offset+h}return this.callSuper("_getStyleDeclaration",l,h)},_setStyleDeclaration:function(l,h,o){var u=this._styleMap[l];l=u.line,h=u.offset+h,this.styles[l][h]=o},_deleteStyleDeclaration:function(l,h){var o=this._styleMap[l];l=o.line,h=o.offset+h,delete this.styles[l][h]},_getLineStyle:function(l){var h=this._styleMap[l];return!!this.styles[h.line]},_setLineStyle:function(l){var h=this._styleMap[l];this.styles[h.line]={}},_wrapText:function(l,h){var o=[],u;for(this.isWrapping=!0,u=0;u<l.length;u++)o=o.concat(this._wrapLine(l[u],u,h));return this.isWrapping=!1,o},_measureWord:function(l,h,o){var u=0,A,g=!0;o=o||0;for(var p=0,d=l.length;p<d;p++){var m=this._getGraphemeBox(l[p],h,p+o,A,g);u+=m.kernedWidth,A=l[p]}return u},_wrapLine:function(l,h,o,rt){var A=0,g=this.splitByGrapheme,p=[],d=[],m=g?n.util.string.graphemeSplit(l):l.split(this._wordJoiners),v="",C=0,x=g?"":" ",E=0,L=0,U=0,O=!0,X=this._getWidthOfCharSpacing(),rt=rt||0;m.length===0&&m.push([]),o-=rt;for(var M=0;M<m.length;M++)v=g?m[M]:n.util.string.graphemeSplit(m[M]),E=this._measureWord(v,h,C),C+=v.length,A+=L+E-X,A>o&&!O?(p.push(d),d=[],A=E,O=!0):A+=X,!O&&!g&&d.push(x),d=d.concat(v),L=g?0:this._measureWord([x],h,C),C++,O=!1,E>U&&(U=E);return M&&p.push(d),U+rt>this.dynamicMinWidth&&(this.dynamicMinWidth=U-X+rt),p},isEndOfWrapping:function(l){return!this._styleMap[l+1]||this._styleMap[l+1].line!==this._styleMap[l].line},missingNewlineOffset:function(l){return this.splitByGrapheme?this.isEndOfWrapping(l)?1:0:1},_splitTextIntoLines:function(l){for(var h=n.Text.prototype._splitTextIntoLines.call(this,l),o=this._wrapText(h.lines,this.width),u=new Array(o.length),A=0;A<o.length;A++)u[A]=o[A].join("");return h.lines=u,h.graphemeLines=o,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var l={};for(var h in this._styleMap)this._textLines[h]&&(l[this._styleMap[h].line]=1);for(var h in this.styles)l[h]||delete this.styles[h]},toObject:function(l){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(l))}}),n.Textbox.fromObject=function(l,h){var o=n.util.stylesFromArray(l.styles,l.text),u=Object.assign({},l,{styles:o});return n.Object._fromObject("Textbox",u,h,"text")}}(r),function(){var a=t.controlsUtils,n=a.scaleSkewCursorStyleHandler,l=a.scaleCursorStyleHandler,h=a.scalingEqually,o=a.scalingYOrSkewingX,u=a.scalingXOrSkewingY,A=a.scaleOrSkewActionName,g=t.Object.prototype.controls;if(g.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:n,actionHandler:u,getActionName:A}),g.mr=new t.Control({x:.5,y:0,cursorStyleHandler:n,actionHandler:u,getActionName:A}),g.mb=new t.Control({x:0,y:.5,cursorStyleHandler:n,actionHandler:o,getActionName:A}),g.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:n,actionHandler:o,getActionName:A}),g.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:l,actionHandler:h}),g.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:l,actionHandler:h}),g.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:l,actionHandler:h}),g.br=new t.Control({x:.5,y:.5,cursorStyleHandler:l,actionHandler:h}),g.mtr=new t.Control({x:0,y:-.5,actionHandler:a.rotationWithSnapping,cursorStyleHandler:a.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var p=t.Textbox.prototype.controls={};p.mtr=g.mtr,p.tr=g.tr,p.br=g.br,p.tl=g.tl,p.bl=g.bl,p.mt=g.mt,p.mb=g.mb,p.mr=new t.Control({x:.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:n,actionName:"resizing"}),p.ml=new t.Control({x:-.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:n,actionName:"resizing"})}}()})(Kd);const Sv=gs({__proto__:null,default:LS(Kd)},[Kd]);function xv(r,t){return t.forEach(function(e){e&&typeof e!="string"&&!Array.isArray(e)&&Object.keys(e).forEach(function(i){if(i!=="default"&&!(i in r)){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}})}),Object.freeze(r)}(function(){typeof window>"u"||("SVGPathSeg"in window||(window.SVGPathSeg=function(r,t,e){this.pathSegType=r,this.pathSegTypeAsLetter=t,this._owningPathSegList=e},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",r)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(r,t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",r),this._x=t,this._y=e},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(r,t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",r),this._x=t,this._y=e},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(r,t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",r),this._x=t,this._y=e},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(r,t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",r),this._x=t,this._y=e},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(r,t,e,i,s,c,f){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",r),this._x=t,this._y=e,this._x1=i,this._y1=s,this._x2=c,this._y2=f},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(r){this._x1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(r){this._y1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(r){this._x2=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(r){this._y2=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(r,t,e,i,s,c,f){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",r),this._x=t,this._y=e,this._x1=i,this._y1=s,this._x2=c,this._y2=f},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(r){this._x1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(r){this._y1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(r){this._x2=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(r){this._y2=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(r,t,e,i,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",r),this._x=t,this._y=e,this._x1=i,this._y1=s},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(r){this._x1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(r){this._y1=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(r,t,e,i,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",r),this._x=t,this._y=e,this._x1=i,this._y1=s},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(r){this._x1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(r){this._y1=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(r,t,e,i,s,c,f,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",r),this._x=t,this._y=e,this._r1=i,this._r2=s,this._angle=c,this._largeArcFlag=f,this._sweepFlag=a},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(r){this._r1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(r){this._r2=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(r){this._angle=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(r){this._largeArcFlag=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(r){this._sweepFlag=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(r,t,e,i,s,c,f,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",r),this._x=t,this._y=e,this._r1=i,this._r2=s,this._angle=c,this._largeArcFlag=f,this._sweepFlag=a},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(r){this._r1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(r){this._r2=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(r){this._angle=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(r){this._largeArcFlag=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(r){this._sweepFlag=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(r,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",r),this._x=t},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(r,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",r),this._x=t},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(r,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",r),this._y=t},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(r,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",r),this._y=t},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(r,t,e,i,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",r),this._x=t,this._y=e,this._x2=i,this._y2=s},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(r){this._x2=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(r){this._y2=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(r,t,e,i,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",r),this._x=t,this._y=e,this._x2=i,this._y2=s},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(r){this._x2=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(r){this._y2=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(r,t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",r),this._x=t,this._y=e},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(r,t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",r),this._x=t,this._y=e},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(r,t){return new window.SVGPathSegMovetoAbs(void 0,r,t)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(r,t){return new window.SVGPathSegMovetoRel(void 0,r,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(r,t){return new window.SVGPathSegLinetoAbs(void 0,r,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(r,t){return new window.SVGPathSegLinetoRel(void 0,r,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(r,t,e,i,s,c){return new window.SVGPathSegCurvetoCubicAbs(void 0,r,t,e,i,s,c)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(r,t,e,i,s,c){return new window.SVGPathSegCurvetoCubicRel(void 0,r,t,e,i,s,c)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(r,t,e,i){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,r,t,e,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(r,t,e,i){return new window.SVGPathSegCurvetoQuadraticRel(void 0,r,t,e,i)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(r,t,e,i,s,c,f){return new window.SVGPathSegArcAbs(void 0,r,t,e,i,s,c,f)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(r,t,e,i,s,c,f){return new window.SVGPathSegArcRel(void 0,r,t,e,i,s,c,f)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(r){return new window.SVGPathSegLinetoHorizontalAbs(void 0,r)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(r){return new window.SVGPathSegLinetoHorizontalRel(void 0,r)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(r){return new window.SVGPathSegLinetoVerticalAbs(void 0,r)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(r){return new window.SVGPathSegLinetoVerticalRel(void 0,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(r,t,e,i){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,r,t,e,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(r,t,e,i){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,r,t,e,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(r,t){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,r,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(r,t){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,r,t)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(r){if(r===void 0||!isFinite(r))throw"Invalid arguments.";var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",this.getAttribute("d"));var e=t.pathSegList.numberOfItems-1;if(e<=0)return 0;do{if(t.pathSegList.removeItem(e),r>t.getTotalLength())break;e--}while(e>0);return e})),(!("SVGPathSegList"in window)||!("appendItem"in window.SVGPathSegList.prototype))&&(window.SVGPathSegList=function(r){this._pathElement=r,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathSegList.prototype,"length",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(r){if(this._pathElement){var t=!1;r.forEach(function(e){e.attributeName=="d"&&(t=!0)}),t&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(r){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(r){r._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(r){return this._checkPathSynchronizedToList(),this._list=[r],r._owningPathSegList=this,this._writeListToPath(),r},window.SVGPathSegList.prototype._checkValidIndex=function(r){if(isNaN(r)||r<0||r>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(r){return this._checkPathSynchronizedToList(),this._checkValidIndex(r),this._list[r]},window.SVGPathSegList.prototype.insertItemBefore=function(r,t){return this._checkPathSynchronizedToList(),t>this.numberOfItems&&(t=this.numberOfItems),r._owningPathSegList&&(r=r.clone()),this._list.splice(t,0,r),r._owningPathSegList=this,this._writeListToPath(),r},window.SVGPathSegList.prototype.replaceItem=function(r,t){return this._checkPathSynchronizedToList(),r._owningPathSegList&&(r=r.clone()),this._checkValidIndex(t),this._list[t]=r,r._owningPathSegList=this,this._writeListToPath(),r},window.SVGPathSegList.prototype.removeItem=function(r){this._checkPathSynchronizedToList(),this._checkValidIndex(r);var t=this._list[r];return this._list.splice(r,1),this._writeListToPath(),t},window.SVGPathSegList.prototype.appendItem=function(r){return this._checkPathSynchronizedToList(),r._owningPathSegList&&(r=r.clone()),this._list.push(r),r._owningPathSegList=this,this._writeListToPath(),r},window.SVGPathSegList._pathSegArrayAsString=function(r){var t="",e=!0;return r.forEach(function(i){e?(e=!1,t+=i._asPathString()):t+=" "+i._asPathString()}),t},window.SVGPathSegList.prototype._parsePath=function(r){if(!r||r.length==0)return[];var t=this,e=function(){this.pathSegList=[]};e.prototype.appendSegment=function(a){this.pathSegList.push(a)};var i=function(a){this._string=a,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};i.prototype._isCurrentSpace=function(){var a=this._string[this._currentIndex];return a<=" "&&(a==" "||a==`
`||a=="	"||a=="\r"||a=="\f")},i.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},i.prototype._skipOptionalSpacesOrDelimiter=function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string.charAt(this._currentIndex)!=","?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)==","&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},i.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},i.prototype.peekSegmentType=function(){var a=this._string[this._currentIndex];return this._pathSegTypeFromChar(a)},i.prototype._pathSegTypeFromChar=function(a){switch(a){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},i.prototype._nextCommandHelper=function(a,n){return(a=="+"||a=="-"||a=="."||a>="0"&&a<="9")&&n!=window.SVGPathSeg.PATHSEG_CLOSEPATH?n==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:n==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:n:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var a=this.peekSegmentType();return a==window.SVGPathSeg.PATHSEG_MOVETO_ABS||a==window.SVGPathSeg.PATHSEG_MOVETO_REL},i.prototype._parseNumber=function(){var a=0,n=0,l=1,h=0,o=1,u=1,A=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="+"?this._currentIndex++:this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="-"&&(this._currentIndex++,o=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&this._string.charAt(this._currentIndex)!=".")){for(var g=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=g)for(var p=this._currentIndex-1,d=1;p>=g;)n+=d*(this._string.charAt(p--)-"0"),d*=10;if(this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="."){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)l*=10,h+=(this._string.charAt(this._currentIndex)-"0")/l,this._currentIndex+=1}if(this._currentIndex!=A&&this._currentIndex+1<this._endIndex&&(this._string.charAt(this._currentIndex)=="e"||this._string.charAt(this._currentIndex)=="E")&&this._string.charAt(this._currentIndex+1)!="x"&&this._string.charAt(this._currentIndex+1)!="m"){if(this._currentIndex++,this._string.charAt(this._currentIndex)=="+"?this._currentIndex++:this._string.charAt(this._currentIndex)=="-"&&(this._currentIndex++,u=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)a*=10,a+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var m=n+h;if(m*=o,a&&(m*=Math.pow(10,u*a)),A!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),m}},i.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var a=!1,n=this._string.charAt(this._currentIndex++);if(n=="0")a=!1;else if(n=="1")a=!0;else return;return this._skipOptionalSpacesOrDelimiter(),a}},i.prototype.parseSegment=function(){var a=this._string[this._currentIndex],n=this._pathSegTypeFromChar(a);if(n==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN||(n=this._nextCommandHelper(a,this._previousCommand),n==window.SVGPathSeg.PATHSEG_UNKNOWN))return null}else this._currentIndex++;switch(this._previousCommand=n,n){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(t);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var l={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(t,l.x,l.y,l.x1,l.y1,l.x2,l.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var l={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicAbs(t,l.x,l.y,l.x1,l.y1,l.x2,l.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var l={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothRel(t,l.x,l.y,l.x2,l.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var l={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothAbs(t,l.x,l.y,l.x2,l.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var l={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticRel(t,l.x,l.y,l.x1,l.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var l={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticAbs(t,l.x,l.y,l.x1,l.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:var l={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcRel(t,l.x,l.y,l.x1,l.y1,l.arcAngle,l.arcLarge,l.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:var l={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcAbs(t,l.x,l.y,l.x1,l.y1,l.arcAngle,l.arcLarge,l.arcSweep);default:throw"Unknown path seg type."}};var s=new e,c=new i(r);if(!c.initialCommandIsMoveTo())return[];for(;c.hasMoreData();){var f=c.parseSegment();if(!f)return[];s.appendSegment(f)}return s.pathSegList}))})();class _v{constructor(t){const e=t||{};if(this.alpha=isNaN(e.alpha)?100:e.alpha,e.copy)switch(this.type=e.copy.type,this.alpha=e.copy.alpha,this.solidColor=null,this.linearGradient=null,this.radialGradient=null,this.type){case"none":break;case"solidColor":this.solidColor=e.copy.solidColor;break;case"linearGradient":this.linearGradient=e.copy.linearGradient.cloneNode(!0);break;case"radialGradient":this.radialGradient=e.copy.radialGradient.cloneNode(!0);break}else if(e.linearGradient)if(this.type="linearGradient",this.solidColor=null,this.radialGradient=null,e.linearGradient.hasAttribute("xlink:href")){const i=document.getElementById(e.linearGradient.getAttribute("xlink:href").substr(1));this.linearGradient=i.cloneNode(!0)}else this.linearGradient=e.linearGradient.cloneNode(!0);else if(e.radialGradient)if(this.type="radialGradient",this.solidColor=null,this.linearGradient=null,e.radialGradient.hasAttribute("xlink:href")){const i=document.getElementById(e.radialGradient.getAttribute("xlink:href").substr(1));this.radialGradient=i.cloneNode(!0)}else this.radialGradient=e.radialGradient.cloneNode(!0);else e.solidColor?(this.type="solidColor",this.solidColor=e.solidColor):(this.type="none",this.solidColor=null,this.linearGradient=null,this.radialGradient=null)}}/**
 * Tools for working with units.
 * @module units
 * @license MIT
 *
 * @copyright 2010 Alexis Deveria, 2010 Jeff Schiller
 */const Ev="http://www.w3.org/2000/svg",Fv=["x","x1","cx","rx","width"],Tv=["y","y1","cy","ry","height"],PS=["r","radius",...Fv,...Tv];let Ol,zc={};const US=function(r){Ol=r;const t=document.createElementNS(Ev,"svg");document.body.append(t);const e=document.createElementNS(Ev,"rect");e.setAttribute("width","1em"),e.setAttribute("height","1ex"),e.setAttribute("x","1in"),t.append(e);const i=e.getBBox();t.remove();const s=i.x;zc={em:i.width,ex:i.height,in:s,cm:s/2.54,mm:s/25.4,pt:s/72,pc:s/6,px:1,"%":0}},Xd=()=>zc,ps=r=>{const t=Ol.getRoundDigits();return isNaN(r)?Array.isArray(r)?ps(r[0])+","+ps(r[1]):Number.parseFloat(r).toFixed(t)-0:Number(Number(r).toFixed(t))},zd=(r,t)=>(t=t||Ol.getBaseUnit(),ps(r/zc[t])),OS=(r,t,e)=>{r.setAttribute(t,e)},za=(r,t)=>{if(!isNaN(t))return t-0;if(t.substr(-1)==="%"){const s=t.substr(0,t.length-1)/100,c=Ol.getWidth(),f=Ol.getHeight();return Fv.includes(r)?s*c:Tv.includes(r)?s*f:s*Math.sqrt(c*c+f*f)/Math.sqrt(2)}const e=t.substr(-2);return t.substr(0,t.length-2)*zc[e]},QS=(r,t,e)=>{if(PS.includes(r))return isNaN(t)?(t=t.toLowerCase(),Object.keys(zc).some(i=>new RegExp("^-?[\\d\\.]+"+i+"$").test(t))):!0;if(r==="id"){let i=!1;try{const s=Ol.getElement(t);i=!s||s===e}catch(s){console.error(s)}return i}return!0};/**
 * Namespaces or tools therefor.
 * @module namespaces
 * @license MIT
*/const _e={HTML:"http://www.w3.org/1999/xhtml",MATH:"http://www.w3.org/1998/Math/MathML",SE:"http://svg-edit.googlecode.com",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",OI:"http://www.optimistik.fr/namespace/svg/OIdata",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"},Lv=function(){const r={};return Object.entries(_e).forEach(([t,e])=>{r[e]=t.toLowerCase()}),r};/**
 * Mathematical utilities.
 * @module math
 * @license MIT
 *
 * @copyright 2010 Alexis Deveria, 2010 Jeff Schiller
 */const Ql=1e-14,qc=document.createElementNS(_e.SVG,"svg"),vr=function(r,t,e){return{x:e.a*r+e.c*t+e.e,y:e.b*r+e.d*t+e.f}},Nr=r=>{var t,e,i;if(r.transform)return(t=r.transform)==null?void 0:t.baseVal;if(r.gradientTransform)return(e=r.gradientTransform)==null?void 0:e.baseVal;if(r.patternTransform)return(i=r.patternTransform)==null?void 0:i.baseVal;console.warn("no transform list found - check browser version",r)},Iv=function(r){return r.a===1&&r.b===0&&r.c===0&&r.d===1&&r.e===0&&r.f===0},Fi=function(...r){const t=r.reduceRight((e,i)=>i.multiply(e));return Math.abs(t.a)<Ql&&(t.a=0),Math.abs(t.b)<Ql&&(t.b=0),Math.abs(t.c)<Ql&&(t.c=0),Math.abs(t.d)<Ql&&(t.d=0),Math.abs(t.e)<Ql&&(t.e=0),Math.abs(t.f)<Ql&&(t.f=0),t},Qo=function(r){if(!r)return!1;let t=r.numberOfItems;for(;t--;){const e=r.getItem(t);if(e.type===1&&!Iv(e.matrix))return!0}return!1},qd=function(r,t,e,i,s){const c=vr(r,t,s),f=vr(r+e,t,s),a=vr(r,t+i,s),n=vr(r+e,t+i,s),l=Math.min(c.x,f.x,a.x,n.x),h=Math.max(c.x,f.x,a.x,n.x),o=Math.min(c.y,f.y,a.y,n.y),u=Math.max(c.y,f.y,a.y,n.y);return{tl:c,tr:f,bl:a,br:n,aabox:{x:l,y:o,width:h-l,height:u-o}}},yr=function(r,t,e){if(!r)return qc.createSVGTransformFromMatrix(qc.createSVGMatrix());if(t=t||0,e=e||r.numberOfItems-1,t=Number.parseInt(t),e=Number.parseInt(e),t>e){const s=e;e=t,t=s}let i=qc.createSVGMatrix();for(let s=t;s<=e;++s){const c=s>=0&&s<r.numberOfItems?r.getItem(s).matrix:qc.createSVGMatrix();i=Fi(i,c)}return qc.createSVGTransformFromMatrix(i)},$d=r=>{const t=Nr(r);return yr(t).matrix},Yd=(r,t,e,i)=>{const s=Math.PI/4,c=e-r,f=i-t,a=Math.atan2(f,c),n=Math.sqrt(c*c+f*f),l=Math.round(a/s)*s;return{x:r+n*Math.cos(l),y:t+n*Math.sin(l),a:l}},Pv=(r,t)=>t.x<r.x+r.width&&t.x+t.width>r.x&&t.y<r.y+r.height&&t.y+t.height>r.y;function NS(r){let t=0,e=0;if(r.offsetParent){do t+=r.offsetLeft,e+=r.offsetTop;while(r=r.offsetParent);return{left:t,top:e}}return{left:t,top:e}}function Jd(r){return r&&typeof r=="object"&&!Array.isArray(r)}function $c(r,t){const e=Object.assign({},r);return Jd(r)&&Jd(t)&&Object.keys(t).forEach(i=>{Jd(t[i])?i in r?e[i]=$c(r[i],t[i]):Object.assign(e,{[i]:t[i]}):Object.assign(e,{[i]:t[i]})}),e}function Yc(r,t){const e=t.charAt(0),i="classList"in document.documentElement;let s,c;for(e==="["&&(t=t.substr(1,t.length-2),s=t.split("="),s.length>1&&(c=!0,s[1]=s[1].replace(/"/g,"").replace(/'/g,"")));r&&r!==document&&r.nodeType===1;r=r.parentNode){if(e==="."){if(i){if(r.classList.contains(t.substr(1)))return r}else if(new RegExp("(^|\\s)"+t.substr(1)+"(\\s|$)").test(r.className))return r}if(e==="#"&&r.id===t.substr(1))return r;if(e==="["&&r.hasAttribute(s[0]))if(c){if(r.getAttribute(s[0])===s[1])return r}else return r;if(r.tagName.toLowerCase()===t)return r}return null}function Jc(r,t){const e=[],i=t==null?void 0:t.charAt(0);for(;r&&r!==document;r=r.parentNode)t?(i==="."&&r.classList.contains(t.substr(1))&&e.push(r),i==="#"&&r.id===t.substr(1)&&e.push(r),i==="["&&r.hasAttribute(t.substr(1,t.length-1))&&e.push(r),r.tagName.toLowerCase()===t&&e.push(r)):e.push(r);return e.length?e:null}function MS(r,t,e){const i=[],s=t==null?void 0:t.charAt(0);for(;r&&r!==document&&!(s==="."&&r.classList.contains(t.substr(1))||s==="#"&&r.id===t.substr(1)||s==="["&&r.hasAttribute(t.substr(1,t.length-1))||r.tagName.toLowerCase()===t);r=r.parentNode)i.push(r);return i.length?i:null}/**
 * Miscellaneous utilities.
 * @module utilities
 * @license MIT
 *
 * @copyright 2010 Alexis Deveria, 2010 Jeff Schiller
 */const kS="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use,clipPath".split(",");let qa=null,Uv=null;const DS=r=>{qa=r,Uv=r.getSvgRoot()},Zc=r=>r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");function Ov(r){return r=GS(r),window.btoa(r)}function Qv(r){return HS(window.atob(r))}function RS(r){let t=0,e;if(r.length===0)return t;for(let i=0;i<r.length;i++)e=r.charCodeAt(i),t=(t<<5)-t+e,t|=0;return t}function HS(r){return decodeURIComponent(escape(r))}const GS=r=>unescape(encodeURIComponent(r)),VS=r=>{if(typeof Uint8Array>"u"||typeof Blob>"u"||typeof URL>"u"||!URL.createObjectURL)return"";const t=r.split(","),e=t[0].match(/:(.*?);/)[1],i=atob(t[1]);let s=i.length;const c=new Uint8Array(s);for(;s--;)c[s]=i.charCodeAt(s);const f=new Blob([c],{type:e});return URL.createObjectURL(f)},Nv=r=>!r||typeof URL>"u"||!URL.createObjectURL?"":URL.createObjectURL(r),jS=(()=>{if(typeof Blob>"u")return"";const r=new Blob(["<html><head><title>SVG-edit</title></head><body>&nbsp;</body></html>"],{type:"text/html"});return Nv(r)})(),Zd=r=>{r.includes("<svg:svg")&&(r=r.replace(/<(\/?)svg:/g,"<$1").replace("xmlns:svg","xmlns"));let t,e;try{e=new DOMParser,e.async=!1}catch{throw new Error("XML Parser could not be instantiated")}try{t=e.parseFromString(r,"text/xml")}catch{throw new Error("Error parsing XML string")}return t},KS=({x:r,y:t,width:e,height:i})=>({x:r,y:t,width:e,height:i}),GA=(r,t)=>{if((r==null?void 0:r.nodeType)===1){t(r);let e=r.childNodes.length;for(;e--;)GA(r.childNodes.item(e),t)}},WS=(r,t)=>{if((r==null?void 0:r.nodeType)===1){let e=r.childNodes.length;for(;e--;)GA(r.childNodes.item(e),t);t(r)}},tg=function(r){if(r){if(r.startsWith('url("'))return r.substring(5,r.indexOf('"',6));if(r.startsWith("url('"))return r.substring(5,r.indexOf("'",6));if(r.startsWith("url("))return r.substring(4,r.indexOf(")"))}return null};let $a=function(r){return r.getAttributeNS(_e.XLINK,"href")},ga=function(r,t){r.setAttributeNS(_e.XLINK,"xlink:href",t)};const ms=function(){const r=qa.getSvgContent();let t=r.getElementsByTagNameNS(_e.SVG,"defs");return t.length>0?t=t[0]:(t=r.ownerDocument.createElementNS(_e.SVG,"defs"),r.firstChild?r.insertBefore(t,r.firstChild.nextSibling):r.append(t)),t},hi=function(r){const t=r||qa.getSelectedElements()[0];if(r.nodeType!==1)return null;const e=t.nodeName;let i=null;switch(e){case"text":t.textContent===""?(t.textContent="a",i=t.getBBox(),t.textContent=""):t.getBBox&&(i=t.getBBox());break;case"path":case"g":case"a":t.getBBox&&(i=t.getBBox());break;default:if(e==="use")i=t.getBBox();else if(kS.includes(e))if(t)try{i=t.getBBox()}catch{const c=t.getExtentOfChar(0),f=t.getComputedTextLength();i={x:c.x,y:c.y,width:f,height:c.height}}else{const s=Yc(t.parentNode,"foreignObject");s.length&&s[0].getBBox&&(i=s[0].getBBox())}}return i&&(i=KS(i)),i},eg=function(r){let t="";return r.forEach(function([e,i],s){t+=e;for(let c=0;c<i.length;c+=2)t+=i[c]+","+i[c+1]+" "}),t},Mv=function(r){let t=1.81,e,i,s;switch(r.tagName){case"ellipse":case"circle":{i=Number(r.getAttribute("rx")),s=Number(r.getAttribute("ry"));const c=Number(r.getAttribute("cx")),f=Number(r.getAttribute("cy"));r.tagName==="circle"&&r.hasAttribute("r")&&(s=Number(r.getAttribute("r")),i=s),e=eg([["M",[c-i,f]],["C",[c-i,f-s/t,c-i/t,f-s,c,f-s]],["C",[c+i/t,f-s,c+i,f-s/t,c+i,f]],["C",[c+i,f+s/t,c+i/t,f+s,c,f+s]],["C",[c-i/t,f+s,c-i,f+s/t,c-i,f]],["Z",[]]]);break}case"path":e=r.getAttribute("d");break;case"line":{const c=r.getAttribute("x1"),f=r.getAttribute("y1"),a=r.getAttribute("x2"),n=r.getAttribute("y2");e="M"+c+","+f+"L"+a+","+n}break;case"polyline":e="M"+r.getAttribute("points");break;case"polygon":e="M"+r.getAttribute("points")+" Z";break;case"rect":{i=Number(r.getAttribute("rx")),s=Number(r.getAttribute("ry"));const c=r.getBBox(),{x:f,y:a}=c,n=c.width,l=c.height;t=4-t,e=eg(!i&&!s?[["M",[f,a]],["L",[f+n,a]],["L",[f+n,a+l]],["L",[f,a+l]],["L",[f,a]],["Z",[]]]:[["M",[f,a+s]],["C",[f,a+s/t,f+i/t,a,f+i,a]],["L",[f+n-i,a]],["C",[f+n-i/t,a,f+n,a+s/t,f+n,a+s]],["L",[f+n,a+l-s]],["C",[f+n,a+l-s/t,f+n-i/t,a+l,f+n-i,a+l]],["L",[f+i,a+l]],["C",[f+i/t,a+l,f,a+l-s/t,f,a+l-s]],["L",[f,a+s]],["Z",[]]]);break}}return e},kv=function(r){const t={};return["marker-start","marker-end","marker-mid","filter","clip-path"].forEach(function(e){const i=r.getAttribute(e);i&&(t[e]=i)}),t},rg=function(r,t,e){const i=t({element:"path",attr:kv(r)}),s=r.getAttribute("transform");s&&i.setAttribute("transform",s);const{parentNode:c}=r;r.nextSibling?r.before(i):c.append(i);const f=Mv(r);f?i.setAttribute("d",f):i.remove(),e.resetOrientation(i);let a=!1;try{a=i.getBBox()}catch{}return i.remove(),a},XS=(r,t,e)=>{const i=new e.history.BatchCommand("Convert element to Path");t=$c(t,kv(r));const s=e.addSVGElementsFromJson({element:"path",attr:t}),c=r.getAttribute("transform");c&&s.setAttribute("transform",c);const{id:f}=r,{parentNode:a}=r;r.nextSibling?r.before(s):a.append(s);const n=Mv(r);if(n){if(s.setAttribute("d",n),c){const h=Nr(s);Qo(h)&&e.pathActions.resetOrientation(s)}const{nextSibling:l}=r;return i.addSubCommand(new e.history.RemoveElementCommand(r,l,r.parentNode)),e.clearSelection(),r.remove(),i.addSubCommand(new e.history.InsertElementCommand(s)),s.setAttribute("id",f),s.removeAttribute("visibility"),e.addToSelection([s],!0),e.addCommandToHistory(i),s}return s.remove(),null};function zS(r,t){const e=r%90,i=e<-89.99||e>89.99,s=e>-.001&&e<.001;return t||!(s||i)}const Dv=function(r,t,e){let i=hi(r);if(!i)return null;const s=Nr(r),c=Gv(s),f=Qo(s);if(c||f){let a=!1;if(zS(c,f)){if(["ellipse","path","line","polyline","polygon"].includes(r.tagName))a=rg(r,t,e),i=a;else if(r.tagName==="rect"){const l=Number(r.getAttribute("rx")),h=Number(r.getAttribute("ry"));(l||h)&&(a=rg(r,t,e),i=a)}}if(!a){const{matrix:n}=yr(s);i=qd(i.x,i.y,i.width,i.height,n).aabox}}return i},Rv=r=>{const t=r.getAttribute("stroke-width");return!isNaN(t)&&r.getAttribute("stroke")!=="none"?t/2:0},Hv=(r,t,e)=>{if(!r||!r.length)return!1;let i;if(r.forEach(n=>{i||n.parentNode&&(i=Dv(n,t,e))}),!i)return null;let s=i.x+i.width,c=i.y+i.height,f=i.x,a=i.y;if(r.length===1){const n=Rv(r[0]);f-=n,a-=n,s+=n,c+=n}else r.forEach(n=>{const l=Dv(n,t,e);if(l){const h=Rv(n);f=Math.min(f,l.x-h),a=Math.min(a,l.y-h),n.nodeType===1&&(s=Math.max(s,l.x+l.width+h),c=Math.max(c,l.y+l.height+h))}});return i.x=ps(f),i.y=ps(a),i.width=ps(s-f),i.height=ps(c-a),i},th=r=>{if(!r){const e=qa.getSvgContent();for(let i=0;i<e.children.length;i++)if(e.children[i].getBBox){const s=e.children[i].getBBox();if(s.width!==0&&s.height!==0&&s.width!==0&&s.height!==0){r=e.children[i];break}}}const t=[];if(r){const e=r.children;Array.from(e,i=>{i.getBBox&&t.push(i)})}return t.reverse()},js=r=>(r||(r=th()),Hv(r,qa.addSVGElementsFromJson,qa.pathActions)),Gv=(r,t)=>{if(!r)return 0;for(let e=0;e<r.numberOfItems;++e){const i=r.getItem(e);if(i.type===4)return t?i.angle*Math.PI/180:i.angle}return 0};let Ji=(r,t)=>{const e=r||qa.getSelectedElements()[0],i=Nr(e);return Gv(i,t)};const VA=r=>wr(tg(r).substr(1)),ig=r=>{var t;if(((t=r==null?void 0:r.firstChild)==null?void 0:t.tagName)==="feGaussianBlur")return r.firstChild;{const e=r.children;for(const[i,s]of Object.entries(e))if(s.tagName==="feGaussianBlur")return s}return null},wr=r=>Uv.querySelector("#"+r),br=(r,t,e,i)=>{for(const[s,c]of Object.entries(t)){const f=s.substr(0,4)==="xml:"?_e.XML:s.substr(0,6)==="xlink:"?_e.XLINK:null;if(c===void 0){f?r.removeAttributeNS(f,s):r.removeAttribute(s);continue}f?r.setAttributeNS(f,s,c):i?OS(r,s,c):r.setAttribute(s,c)}},wu=r=>{const t={"fill-opacity":1,"stop-opacity":1,opacity:1,stroke:"none","stroke-dasharray":"none","stroke-linejoin":"miter","stroke-linecap":"butt","stroke-opacity":1,"stroke-width":1,rx:0,ry:0};r.nodeName==="ellipse"&&(delete t.rx,delete t.ry),Object.entries(t).forEach(([e,i])=>{r.getAttribute(e)===String(i)&&r.removeAttribute(e)})},nr=r=>{const t=qa.getBaseUnit();let e=qa.getSnappingStep();return t!=="px"&&(e*=Xd()[t]),r=Math.round(r/e)*e,r},ng=r=>{bu(r,t=>{t.preventDefault()})},Vv=r=>new DOMParser().parseFromString(r,"text/html").body.firstChild,qS=(r,t,e=0)=>{const i=Vv(t);e>=r.children.length?r.appendChild(i):r.insertBefore(i,r.children[e])},jv=r=>document.getElementById(r),Kv=r=>document.querySelector(r),Wv=r=>[...document.querySelectorAll(r)],bu=(r,t)=>{r.addEventListener("click",t),r.addEventListener("touchend",t)};/**
 * For command history tracking and undo functionality.
 * @module history
 * @license MIT
 * @copyright 2010 Jeff Schiller
 */const eh={BEFORE_APPLY:"before_apply",AFTER_APPLY:"after_apply",BEFORE_UNAPPLY:"before_unapply",AFTER_UNAPPLY:"after_unapply"};class Nl{getText(){return this.text}apply(t,e){t&&t.handleHistoryEvent(eh.BEFORE_APPLY,this),e(t),t&&t.handleHistoryEvent(eh.AFTER_APPLY,this)}unapply(t,e){t&&t.handleHistoryEvent(eh.BEFORE_UNAPPLY,this),e(),t&&t.handleHistoryEvent(eh.AFTER_UNAPPLY,this)}elements(){return[this.elem]}type(){return this.constructor.name}}let Xv=class extends Nl{constructor(t,e,i,s){super(),this.elem=t,this.text=s?"Move "+t.tagName+" to "+s:"Move "+t.tagName,this.oldNextSibling=e,this.oldParent=i,this.newNextSibling=t.nextSibling,this.newParent=t.parentNode}apply(t){super.apply(t,()=>{this.elem=this.newParent.insertBefore(this.elem,this.newNextSibling)})}unapply(t){super.unapply(t,()=>{this.elem=this.oldParent.insertBefore(this.elem,this.oldNextSibling)})}},zv=class extends Nl{constructor(t,e){super(),this.elem=t,this.text=e||"Create "+t.tagName,this.parent=t.parentNode,this.nextSibling=this.elem.nextSibling}apply(t){super.apply(t,()=>{this.elem=this.parent.insertBefore(this.elem,this.nextSibling)})}unapply(t){super.unapply(t,()=>{this.parent=this.elem.parentNode,this.elem.remove()})}},qv=class extends Nl{constructor(t,e,i,s){super(),this.elem=t,this.text=s||"Delete "+t.tagName,this.nextSibling=e,this.parent=i}apply(t){super.apply(t,()=>{this.parent=this.elem.parentNode,this.elem.remove()})}unapply(t){super.unapply(t,()=>{this.nextSibling||console.error("Reference element was lost"),this.parent.insertBefore(this.elem,this.nextSibling)})}},Ml=class extends Nl{constructor(t,e,i){super(),this.elem=t,this.text=i?"Change "+t.tagName+" "+i:"Change "+t.tagName,this.newValues={},this.oldValues=e;for(const s in e)s==="#text"?this.newValues[s]=t?t.textContent:"":s==="#href"?this.newValues[s]=$a(t):this.newValues[s]=t.getAttribute(s)}apply(t){super.apply(t,()=>{let e=!1;if(Object.entries(this.newValues).forEach(([i,s])=>{s?i==="#text"?this.elem.textContent=s:i==="#href"?ga(this.elem,s):this.elem.setAttribute(i,s):i==="#text"?this.elem.textContent="":(this.elem.setAttribute(i,""),this.elem.removeAttribute(i)),i==="transform"&&(e=!0)}),!e){const i=Ji(this.elem);if(i){const s=hi(this.elem),c=s.x+s.width/2,f=s.y+s.height/2,a=["rotate(",i," ",c,",",f,")"].join("");a!==this.elem.getAttribute("transform")&&this.elem.setAttribute("transform",a)}}})}unapply(t){super.unapply(t,()=>{let e=!1;if(Object.entries(this.oldValues).forEach(([i,s])=>{s?i==="#text"?this.elem.textContent=s:i==="#href"?ga(this.elem,s):this.elem.setAttribute(i,s):i==="#text"?this.elem.textContent="":this.elem.removeAttribute(i),i==="transform"&&(e=!0)}),!e){const i=Ji(this.elem);if(i){const s=hi(this.elem),c=s.x+s.width/2,f=s.y+s.height/2,a=["rotate(",i," ",c,",",f,")"].join("");a!==this.elem.getAttribute("transform")&&this.elem.setAttribute("transform",a)}}})}},rh=class extends Nl{constructor(t){super(),this.text=t||"Batch Command",this.stack=[]}apply(t){super.apply(t,()=>{this.stack.forEach(e=>{console.assert(e,"stack item should not be null"),e&&e.apply(t)})})}unapply(t){super.unapply(t,()=>{this.stack.reverse().forEach(e=>{console.assert(e,"stack item should not be null"),e&&e.unapply(t)})})}elements(){const t=[];let e=this.stack.length;for(;e--;){if(!this.stack[e])continue;const i=this.stack[e].elements();let s=i.length;for(;s--;)t.includes(i[s])||t.push(i[s])}return t}addSubCommand(t){console.assert(t!==null,"cmd should not be null"),this.stack.push(t)}isEmpty(){return!this.stack.length}};var No=Object.freeze({__proto__:null,BatchCommand:rh,ChangeElementCommand:Ml,Command:Nl,HistoryEventTypes:eh,InsertElementCommand:zv,MoveElementCommand:Xv,RemoveElementCommand:qv,UndoManager:class{constructor(t){this.handler_=t||null,this.undoStackPointer=0,this.undoStack=[],this.undoChangeStackPointer=-1,this.undoableChangeStack=[]}resetUndoStack(){this.undoStack=[],this.undoStackPointer=0}getUndoStackSize(){return this.undoStackPointer}getRedoStackSize(){return this.undoStack.length-this.undoStackPointer}getNextUndoCommandText(){return this.undoStackPointer>0?this.undoStack[this.undoStackPointer-1].getText():""}getNextRedoCommandText(){return this.undoStackPointer<this.undoStack.length?this.undoStack[this.undoStackPointer].getText():""}undo(){this.undoStackPointer>0&&this.undoStack[--this.undoStackPointer].unapply(this.handler_)}redo(){this.undoStackPointer<this.undoStack.length&&this.undoStack.length>0&&this.undoStack[this.undoStackPointer++].apply(this.handler_)}addCommandToHistory(t){this.undoStackPointer<this.undoStack.length&&this.undoStack.length>0&&(this.undoStack=this.undoStack.splice(0,this.undoStackPointer)),this.undoStack.push(t),this.undoStackPointer=this.undoStack.length}beginUndoableChange(t,e){const i=++this.undoChangeStackPointer;let s=e.length;const c=new Array(s),f=new Array(s);for(;s--;){const a=e[s];a&&(f[s]=a,c[s]=a.getAttribute(t))}this.undoableChangeStack[i]={attrName:t,oldValues:c,elements:f}}finishUndoableChange(){const t=this.undoChangeStackPointer--,e=this.undoableChangeStack[t],{attrName:i}=e,s=new rh("Change "+i);let c=e.elements.length;for(;c--;){const f=e.elements[c];if(!f)continue;const a={};a[i]=e.oldValues[c],a[i]!==f.getAttribute(i)&&s.addSubCommand(new Ml(f,a,i))}return this.undoableChangeStack[t]=null,s}}});/**
 * Path functionality.
 * @module path
 * @license MIT
 *
 * @copyright 2011 Alexis Deveria, 2011 Jeff Schiller
 */let Ti=null;const $S=r=>{Ti=r},sg=function(r,t){return Ti.getSegData()[r].map(s=>t[s])},Mo=function(r,t){const{path:e}=r;let i={x:t?t.x:r.item.x,y:t?t.y:r.item.y};e.matrix&&(i=vr(i.x,i.y,e.matrix));const s=Ti.getZoom();return i.x*=s,i.y*=s,i},$v=function(r,t){const e={x:r.x,y:r.y};t.matrix&&(r=vr(e.x,e.y,t.imatrix),e.x=r.x,e.y=r.y);const i=Ti.getZoom();return e.x/=i,e.y/=i,e},ko=function(){let r=wr("pathpointgrip_container");if(!r){const t=wr("selectorParentGroup");r=document.createElementNS(_e.SVG,"g"),t.append(r),r.id="pathpointgrip_container"}return r},ag=function(r,t,e){const i=ko();let s=wr("pathpointgrip_"+r);if(!s){s=document.createElementNS(_e.SVG,"circle");const c={id:"pathpointgrip_"+r,display:"none",r:4,fill:"#0FF",stroke:"#00F","stroke-width":2,cursor:"move",style:"pointer-events:all"},f=Ti.getUIStrings();"pathNodeTooltip"in f&&(c["xlink:title"]=f.pathNodeTooltip),br(s,c),i.append(s);const a=document.getElementById("pathpointgrip_"+r);a==null||a.addEventListener("dblclick",()=>{const n=Ti.getPathObj();n&&n.setSegType()})}return t&&e&&br(s,{cx:t,cy:e,display:"inline"}),s},Ag=function(r){let t=wr("ctrlpointgrip_"+r);if(t)return t;t=document.createElementNS(_e.SVG,"circle");const e={id:"ctrlpointgrip_"+r,display:"none",r:4,fill:"#0FF",stroke:"#55F","stroke-width":1,cursor:"move",style:"pointer-events:all"},i=Ti.getUIStrings();return"pathCtrlPtTooltip"in i&&(e["xlink:title"]=i.pathCtrlPtTooltip),br(t,e),ko().append(t),t},og=function(r){let t=wr("ctrlLine_"+r);return t||(t=document.createElementNS(_e.SVG,"line"),br(t,{id:"ctrlLine_"+r,stroke:"#555","stroke-width":1,style:"pointer-events:none"}),ko().append(t),t)},Yv=function(r,t){const{index:e}=r,i=ag(e);if(t){const s=Mo(r);br(i,{cx:s.x,cy:s.y,display:"inline"})}return i},Cu=function(r){const{item:t,index:e}=r;if(!("x1"in t)||!("x2"in t))return null;const i={};ko();const f=[Ti.getPathObj().segs[e-1].item,t];for(let a=1;a<3;a++){const n=e+"c"+a,l=i["c"+a+"_line"]=og(n),h=Mo(r,{x:t["x"+a],y:t["y"+a]}),o=Mo(r,{x:f[a-1].x,y:f[a-1].y});br(l,{x1:h.x,y1:h.y,x2:o.x,y2:o.y,display:"inline"}),i["c"+a+"_line"]=l;const u=i["c"+a]=Ag(n);br(u,{cx:h.x,cy:h.y,display:"inline"}),i["c"+a]=u}return i},qn=function(r,t,e,i){const s=Ti.getPathObj(),c=i||s.elem,a="createSVGPathSeg"+Ti.getPathFuncs()[r],n=c[a](...e);c.pathSegList.replaceItem(n,t)},lg=function(r,t){const{index:e}=r;let i=wr("segline_"+e);if(!i){const s=ko();i=document.createElementNS(_e.SVG,"path"),br(i,{id:"segline_"+e,display:"none",fill:"none",stroke:"#0FF","stroke-width":2,style:"pointer-events:none",d:"M0,0 0,0"}),s.append(i)}if(t){const{prev:s}=r;if(!s)return i.setAttribute("display","none"),i;const c=Mo(s);qn(2,0,[c.x,c.y],i);const f=sg(r.type,r.item);for(let a=0;a<f.length;a+=2){const n=Mo(r,{x:f[a],y:f[a+1]});f[a]=n.x,f[a+1]=n.y}qn(r.type,1,f,i)}return i};class YS{constructor(t,e){this.selected=!1,this.index=t,this.item=e,this.type=e.pathSegType,this.ctrlpts=[],this.ptgrip=null,this.segsel=null}showCtrlPts(t){for(const e in this.ctrlpts)({}).hasOwnProperty.call(this.ctrlpts,e)&&this.ctrlpts[e].setAttribute("display",t?"inline":"none")}selectCtrls(t){document.getElementById("ctrlpointgrip_"+this.index+"c1").setAttribute("fill",t?"#0FF":"#EEE"),document.getElementById("ctrlpointgrip_"+this.index+"c2").setAttribute("fill",t?"#0FF":"#EEE")}show(t){this.ptgrip&&(this.ptgrip.setAttribute("display",t?"inline":"none"),this.segsel.setAttribute("display",t?"inline":"none"),this.showCtrlPts(t))}select(t){this.ptgrip&&(this.ptgrip.setAttribute("stroke",t?"#0FF":"#00F"),this.segsel.setAttribute("display",t?"inline":"none"),this.ctrlpts&&this.selectCtrls(t),this.selected=t)}addGrip(){this.ptgrip=Yv(this,!0),this.ctrlpts=Cu(this),this.segsel=lg(this,!0)}update(t){if(this.ptgrip){const e=Mo(this);if(br(this.ptgrip,{cx:e.x,cy:e.y}),lg(this,!0),this.ctrlpts){if(t){const i=Ti.getPathObj();this.item=i.elem.pathSegList.getItem(this.index),this.type=this.item.pathSegType}Cu(this)}}}move(t,e){var c;const{item:i}=this,s=this.ctrlpts?[i.x+=t,i.y+=e,i.x1,i.y1,i.x2+=t,i.y2+=e]:[i.x+=t,i.y+=e];if(qn(this.type,this.index,this.type===10?sg(this.type,i):s),(c=this.next)!=null&&c.ctrlpts){const f=this.next.item,a=[f.x,f.y,f.x1+=t,f.y1+=e,f.x2,f.y2];qn(this.next.type,this.next.index,a)}if(this.mate){const{item:f}=this.mate,a=[f.x+=t,f.y+=e];qn(this.mate.type,this.mate.index,a)}this.update(!0),this.next&&this.next.update(!0)}setLinked(t){let e,i,s;if(t===2){if(i=1,e=this.next,!e)return;s=this.item}else{if(i=2,e=this.prev,!e)return;s=e.item}const{item:c}=e;c["x"+i]=s.x+(s.x-this.item["x"+t]),c["y"+i]=s.y+(s.y-this.item["y"+t]);const f=[c.x,c.y,c.x1,c.y1,c.x2,c.y2];qn(e.type,e.index,f),e.update(!0)}moveCtrl(t,e,i){const{item:s}=this;s["x"+t]+=e,s["y"+t]+=i;const c=[s.x,s.y,s.x1,s.y1,s.x2,s.y2];qn(this.type,this.index,c),this.update(!0)}setType(t,e){qn(t,this.index,e),this.type=t;const i=Ti.getPathObj();this.item=i.elem.pathSegList.getItem(this.index),this.showCtrlPts(t===6),this.ctrlpts=Cu(this),this.update(!0)}}class cg{constructor(t){if(!t||t.tagName!=="path")throw new Error("svgedit.path.Path constructed without a <path> element");this.elem=t,this.segs=[],this.selected_pts=[],Ti.setPathObj(this),this.init()}setPathContext(){Ti.setPathObj(this)}init(){const e=ko().querySelectorAll("*");Array.prototype.forEach.call(e,function(a){a.setAttribute("display","none")});const i=this.elem.pathSegList,s=i.numberOfItems;this.segs=[],this.selected_pts=[],this.first_seg=null;for(let a=0;a<s;a++){const n=i.getItem(a),l=new YS(a,n);l.path=this,this.segs.push(l)}const{segs:c}=this;let f=null;for(let a=0;a<s;a++){const n=c[a],l=a+1>=s?null:c[a+1],h=a-1<0?null:c[a-1];if(n.type===2){if(h&&h.type!==1){const o=c[f];o.next=c[f+1],o.next.prev=o,o.addGrip()}f=a}else if((l==null?void 0:l.type)===1)n.next=c[f+1],n.next.prev=n,n.mate=c[f],n.addGrip(),this.first_seg||(this.first_seg=n);else if(l)n.type!==1&&(n.addGrip(),l&&l.type!==2&&(n.next=l,n.next.prev=n));else if(n.type!==1){const o=c[f];o.next=c[f+1],o.next.prev=o,o.addGrip(),n.addGrip(),this.first_seg||(this.first_seg=c[f])}}return this}eachSeg(t){const e=this.segs.length;for(let i=0;i<e&&t.call(this.segs[i],i)!==!1;i++);}addSeg(t){const e=this.segs[t];if(!e.prev)return;const{prev:i}=e;let s,c,f;switch(e.item.pathSegType){case 4:{c=(e.item.x+i.item.x)/2,f=(e.item.y+i.item.y)/2,s=this.elem.createSVGPathSegLinetoAbs(c,f);break}case 6:{const n=(i.item.x+e.item.x1)/2,l=(e.item.x1+e.item.x2)/2,h=(e.item.x2+e.item.x)/2,o=(n+l)/2,u=(l+h)/2;c=(o+u)/2;const A=(i.item.y+e.item.y1)/2,g=(e.item.y1+e.item.y2)/2,p=(e.item.y2+e.item.y)/2,d=(A+g)/2,m=(g+p)/2;f=(d+m)/2,s=this.elem.createSVGPathSegCurvetoCubicAbs(c,f,n,A,o,d);const v=[e.item.x,e.item.y,u,m,h,p];qn(e.type,t,v);break}}this.elem.pathSegList.insertItemBefore(s,t)}deleteSeg(t){const e=this.segs[t],i=this.elem.pathSegList;e.show(!1);const{next:s}=e;if(e.mate){const c=[s.item.x,s.item.y];qn(2,s.index,c),qn(4,e.index,c),i.removeItem(e.mate.index)}else if(e.prev)i.removeItem(t);else{const c=[s.item.x,s.item.y];qn(2,e.next.index,c),i.removeItem(t)}}removePtFromSelection(t){const e=this.selected_pts.indexOf(t);e!==-1&&(this.segs[t].select(!1),this.selected_pts.splice(e,1))}clearSelection(){this.eachSeg(function(){this.select(!1)}),this.selected_pts=[]}storeD(){this.last_d=this.elem.getAttribute("d")}show(t){return this.eachSeg(function(){this.show(t)}),t&&this.selectPt(this.first_seg.index),this}movePts(t,e){let i=this.selected_pts.length;for(;i--;)this.segs[this.selected_pts[i]].move(t,e)}moveCtrl(t,e){const i=this.segs[this.selected_pts[0]];i.moveCtrl(this.dragctrl,t,e),Ti.getLinkControlPts()&&i.setLinked(this.dragctrl)}setSegType(t){this.storeD();let e=this.selected_pts.length,i;for(;e--;){const c=this.selected_pts[e],f=this.segs[c],{prev:a}=f;if(!a)continue;t||(i="Toggle Path Segment Type",t=f.type===6?4:6),t=Number(t);const n=f.item.x,l=f.item.y,h=a.item.x,o=a.item.y;let u;switch(t){case 6:{if(f.olditem){const A=f.olditem;u=[n,l,A.x1,A.y1,A.x2,A.y2]}else{const A=n-h,g=l-o,p=h+A/3,d=o+g/3,m=n-A/3,v=l-g/3;u=[n,l,p,d,m,v]}break}case 4:{u=[n,l],f.olditem=f.item;break}}f.setType(t,u)}Ti.getPathObj().endChanges(i)}selectPt(t,e){this.clearSelection(),t||this.eachSeg(function(i){this.prev&&(t=i)}),this.addPtsToSelection(t),e&&(this.dragctrl=e,Ti.getLinkControlPts()&&this.segs[t].setLinked(e))}update(){const{elem:t}=this;return Ji(t)?(this.matrix=$d(t),this.imatrix=this.matrix.inverse()):(this.matrix=null,this.imatrix=null),this.eachSeg(function(e){this.item=t.pathSegList.getItem(e),this.update()}),this}endChanges(t){const e=new Ml(this.elem,{d:this.last_d},t);Ti.endChanges({cmd:e,elem:this.elem})}addPtsToSelection(t){Array.isArray(t)||(t=[t]),t.forEach(c=>{this.segs[c].ptgrip&&!this.selected_pts.includes(c)&&c>=0&&this.selected_pts.push(c)}),this.selected_pts.sort();let e=this.selected_pts.length;const i=[];for(i.length=e;e--;){const c=this.selected_pts[e],f=this.segs[c];f.select(!0),i[e]=f.ptgrip}const s=cg.subpathIsClosed(this.selected_pts[0]);Ti.addPtsToSelection({grips:i,closedSubpath:s})}static subpathIsClosed(t){let e=!1;return Ti.getPathObj().eachSeg(function(s){return s<=t?!0:this.type===2?!1:this.type===1?(e=!0,!1):!0}),e}}/**
 * Path functionality.
 * @module path
 * @license MIT
 *
 * @copyright 2011 Alexis Deveria, 2011 Jeff Schiller
 */let fe=null,oe=null;const JS=r=>{fe=r},ZS=function(r,t){const{pathSegList:e}=r,i=e.numberOfItems;let s=0,c=0,f="",a=null;for(let n=0;n<i;++n){const l=e.getItem(n);let h=l.x||0,o=l.y||0,u=l.x1||0,A=l.y1||0,g=l.x2||0,p=l.y2||0,d=l.pathSegTypeAsLetter;switch(d){case"z":case"Z":f+="z",a&&!t&&(s=a[0],c=a[1]);break;case"H":h-=s;case"h":t?(o=0,s+=h,d="l"):(o=c,h+=s,s=h,d="L"),f+=Do(d,[[h,o]]);break;case"V":o-=c;case"v":t?(h=0,c+=o,d="l"):(h=s,o+=c,c=o,d="L"),f+=Do(d,[[h,o]]);break;case"M":case"L":case"T":h-=s,o-=c;case"l":case"m":case"t":t?(s+=h,c+=o,d=d.toLowerCase()):(h+=s,o+=c,s=h,c=o,d=d.toUpperCase()),(d==="m"||d==="M")&&(a=[s,c]),f+=Do(d,[[h,o]]);break;case"C":h-=s,u-=s,g-=s,o-=c,A-=c,p-=c;case"c":t?(s+=h,c+=o,d="c"):(h+=s,u+=s,g+=s,o+=c,A+=c,p+=c,s=h,c=o,d="C"),f+=Do(d,[[u,A],[g,p],[h,o]]);break;case"Q":h-=s,u-=s,o-=c,A-=c;case"q":t?(s+=h,c+=o,d="q"):(h+=s,u+=s,o+=c,A+=c,s=h,c=o,d="Q"),f+=Do(d,[[u,A],[h,o]]);break;case"A":h-=s,o-=c;case"a":t?(s+=h,c+=o,d="a"):(h+=s,o+=c,s=h,c=o,d="A"),f+=Do(d,[[l.r1,l.r2]],[l.angle,l.largeArcFlag?1:0,l.sweepFlag?1:0],[h,o]);break;case"S":h-=s,g-=s,o-=c,p-=c;case"s":t?(s+=h,c+=o,d="s"):(h+=s,g+=s,o+=c,p+=c,s=h,c=o,d="S"),f+=Do(d,[[g,p],[h,o]]);break}}return f};function Do(r,t,e,i){t.forEach(function(c,f){t[f]=ps(c)});let s=r+t.join(" ");return e&&(s+=" "+e.join(" ")),i&&(s+=" "+ps(i)),s}const pa=function(){let r=!1,t,e,i=null,s=!1;return{mouseDown(f,a,n,l){let h;if(fe.getCurrentMode()==="path"){let u=n,A=l;const g=fe.getZoom();let p=u/g,d=A/g,m=wr("path_stretch_line");t=[p,d],fe.getGridSnapping()&&(p=nr(p),d=nr(d),u=nr(u),A=nr(A)),m||(m=document.createElementNS(_e.SVG,"path"),br(m,{id:"path_stretch_line",stroke:"#22C","stroke-width":"0.5",fill:"none"}),wr("selectorParentGroup").append(m)),m.setAttribute("display","inline");let v=null,C;const x=fe.getDrawnPath();if(x){const E=x.pathSegList;let L=E.numberOfItems;const U=6/g;let O=!1;for(;L;){L--;const J=E.getItem(L),$=J.x,ht=J.y;if(p>=$-U&&p<=$+U&&d>=ht-U&&d<=ht+U){O=!0;break}}h=fe.getId(),fe.removePath_(h);const X=wr(h);let rt,M;const H=E.numberOfItems;if(O){if(L<=1&&H>=2){const J=E.getItem(0).x,$=E.getItem(0).y;M=m.pathSegList.getItem(1),rt=M.pathSegType===4?x.createSVGPathSegLinetoAbs(J,$):x.createSVGPathSegCurvetoCubicAbs(J,$,M.x1/g,M.y1/g,J,$);const ht=x.createSVGPathSegClosePath();E.appendItem(rt),E.appendItem(ht)}else if(H<3)return v=!1,v;if(m.remove(),fe.setDrawnPath(null),fe.setStarted(!1),r){oe.matrix&&fe.remapElement(X,{},oe.matrix.inverse());const J=X.getAttribute("d"),$=oe.elem.getAttribute("d");return oe.elem.setAttribute("d",$+J),X.parentNode.removeChild(X),oe.matrix&&fe.recalcRotatedPath(),pa.toEditMode(oe.elem),oe.selectPt(),!1}}else{if(!(fe.getContainer()!==fe.getMouseTarget(f)&&fe.getContainer().contains(fe.getMouseTarget(f))))return!1;const J=x.pathSegList.numberOfItems,$=x.pathSegList.getItem(J-1),ht=$.x,ut=$.y;f.shiftKey&&({x:p,y:d}=Yd(ht,ut,p,d)),M=m.pathSegList.getItem(1),rt=M.pathSegType===4?x.createSVGPathSegLinetoAbs(fe.round(p),fe.round(d)):x.createSVGPathSegCurvetoCubicAbs(fe.round(p),fe.round(d),M.x1/g,M.y1/g,M.x2/g,M.y2/g),x.pathSegList.appendItem(rt),p*=g,d*=g,m.setAttribute("d",["M",p,d,p,d].join(" ")),C=J,r&&(C+=oe.segs.length),fe.addPointGrip(C,p,d)}}else{const E="M"+p+","+d+" ";fe.setDrawnPath(fe.addSVGElementsFromJson({element:"path",curStyles:!0,attr:{d:E,id:fe.getNextId(),opacity:fe.getOpacity()/2}})),m.setAttribute("d",["M",u,A,u,A].join(" ")),C=r?oe.segs.length:0,fe.addPointGrip(C,u,A)}return}if(!oe)return;oe.storeD(),{id:h}=f.target;let o;if(h.substr(0,14)==="pathpointgrip_"){o=oe.cur_pt=Number.parseInt(h.substr(14)),oe.dragging=[n,l];const u=oe.segs[o];f.shiftKey?u.selected?oe.removePtFromSelection(o):oe.addPtsToSelection(o):((oe.selected_pts.length<=1||!u.selected)&&oe.clearSelection(),oe.addPtsToSelection(o))}else if(h.startsWith("ctrlpointgrip_")){oe.dragging=[n,l];const u=h.split("_")[1].split("c");o=Number(u[0]);const A=Number(u[1]);oe.selectPt(o,A)}if(!oe.dragging){let u=fe.getRubberBox();u||(u=fe.setRubberBox(fe.selectorManager.getRubberBandBox()));const A=fe.getZoom();br(u,{x:n*A,y:l*A,width:0,height:0,display:"inline"})}},mouseMove(f,a){const n=fe.getZoom();s=!0;const l=fe.getDrawnPath();if(fe.getCurrentMode()==="path"){if(!l)return;const h=l.pathSegList,o=h.numberOfItems-1;if(t){const u=fe.addCtrlGrip("1c1"),A=fe.addCtrlGrip("0c2");u.setAttribute("cx",f),u.setAttribute("cy",a),u.setAttribute("display","inline");const g=t[0],p=t[1],d=f/n,m=a/n,v=g+(g-d),C=p+(p-m);A.setAttribute("cx",v*n),A.setAttribute("cy",C*n),A.setAttribute("display","inline");const x=fe.getCtrlLine(1);if(br(x,{x1:f,y1:a,x2:v*n,y2:C*n,display:"inline"}),o===0)e=[f,a];else{const E=h.getItem(o-1);let L=E.x,U=E.y;E.pathSegType===6?(L+=L-E.x2,U+=U-E.y2):e&&(L=e[0]/n,U=e[1]/n),fe.replacePathSeg(6,o,[g,p,L,U,v,C],l)}}else{const u=wr("path_stretch_line");if(u){const A=h.getItem(o);if(A.pathSegType===6){const g=A.x+(A.x-A.x2),p=A.y+(A.y-A.y2);fe.replacePathSeg(6,1,[f,a,g*n,p*n,f,a],u)}else e?fe.replacePathSeg(6,1,[f,a,e[0],e[1],f,a],u):fe.replacePathSeg(4,1,[f,a],u)}}return}if(oe.dragging){const h=fe.getPointFromGrip({x:oe.dragging[0],y:oe.dragging[1]},oe),o=fe.getPointFromGrip({x:f,y:a},oe),u=o.x-h.x,A=o.y-h.y;oe.dragging=[f,a],oe.dragctrl?oe.moveCtrl(u,A):oe.movePts(u,A)}else oe.selected_pts=[],oe.eachSeg(function(h){const o=this;if(!o.next&&!o.prev)return;const u=fe.getRubberBox(),A=hi(u),g=fe.getGripPt(o),p={x:g.x,y:g.y,width:0,height:0},d=Pv(A,p);this.select(d),d&&oe.selected_pts.push(o.index)})},mouseUp(f,a,n,l){const h=fe.getDrawnPath();if(fe.getCurrentMode()==="path")return t=null,h||(a=wr(fe.getId()),fe.setStarted(!1),e=null),{keep:!0,element:a};const o=fe.getRubberBox();if(oe.dragging){const u=oe.cur_pt;oe.dragging=!1,oe.dragctrl=!1,oe.update(),s&&oe.endChanges("Move path point(s)"),!f.shiftKey&&!s&&oe.selectPt(u)}else(o==null?void 0:o.getAttribute("display"))!=="none"?(o.setAttribute("display","none"),o.getAttribute("width")<=2&&o.getAttribute("height")<=2&&pa.toSelectMode(f.target)):pa.toSelectMode(f.target);s=!1},toEditMode(f){oe=fe.getPath_(f),fe.setCurrentMode("pathedit"),fe.clearSelection(),oe.setPathContext(),oe.show(!0).update(),oe.oldbbox=hi(oe.elem),r=!1},toSelectMode(f){const a=f===oe.elem;fe.setCurrentMode("select"),oe.setPathContext(),oe.show(!1),i=!1,fe.clearSelection(),oe.matrix&&fe.recalcRotatedPath(),a&&(fe.call("selected",[f]),fe.addToSelection([f],!0))},addSubPath(f){f?(fe.setCurrentMode("path"),r=!0):(pa.clear(!0),pa.toEditMode(oe.elem))},select(f){i===f?(pa.toEditMode(f),fe.setCurrentMode("pathedit")):i=f},reorient(){const f=fe.getSelectedElements()[0];if(!f||Ji(f)===0)return;const n=new rh("Reorient path"),l={d:f.getAttribute("d"),transform:f.getAttribute("transform")};n.addSubCommand(new Ml(f,l)),fe.clearSelection(),this.resetOrientation(f),fe.addCommandToHistory(n),fe.getPath_(f).show(!1).matrix=null,this.clear(),fe.addToSelection([f],!0),fe.call("changed",fe.getSelectedElements())},clear(){const f=fe.getDrawnPath();if(i=null,f){const a=wr(fe.getId()),n=wr("path_stretch_line");n.parentNode.removeChild(n),a.parentNode.removeChild(a);const h=wr("pathpointgrip_container").querySelectorAll("*");Array.prototype.forEach.call(h,function(o){o.setAttribute("display","none")}),e=null,fe.setDrawnPath(null),fe.setStarted(!1)}else fe.getCurrentMode()==="pathedit"&&this.toSelectMode();oe&&oe.init().show(!1)},resetOrientation(f){if((f==null?void 0:f.nodeName)!=="path")return!1;const a=Nr(f),n=yr(a).matrix;a.clear(),f.removeAttribute("transform");const l=f.pathSegList,h=l.numberOfItems;for(let o=0;o<h;++o){const u=l.getItem(o),A=u.pathSegType;if(A===1)continue;const g=[];["",1,2].forEach(function(p){const d=u["x"+p],m=u["y"+p];if(d!==void 0&&m!==void 0){const v=vr(d,m,n);g.splice(g.length,0,v.x,v.y)}}),fe.replacePathSeg(A,o,g,f)}fe.reorientGrads(f,n)},zoomChange(){fe.getCurrentMode()==="pathedit"&&oe.update()},getNodePoint(){const f=oe.selected_pts.length?oe.selected_pts[0]:1,a=oe.segs[f];return{x:a.item.x,y:a.item.y,type:a.type}},linkControlPoints(f){fe.setLinkControlPoints(f)},clonePathNode(){oe.storeD();const f=oe.selected_pts;let a=f.length;const n=[];for(;a--;){const l=f[a];oe.addSeg(l),n.push(l+a),n.push(l+a+1)}oe.init().addPtsToSelection(n),oe.endChanges("Clone path node(s)")},opencloseSubPath(){const f=oe.selected_pts;if(f.length!==1)return;const{elem:a}=oe,n=a.pathSegList,l=f[0];let h=null,o=null;if(oe.eachSeg(function(m){return this.type===2&&m<=l&&(o=this.item),m<=l?!0:this.type===2?(h=m,!1):this.type===1?(h=!1,!1):!0}),h||(h=oe.segs.length-1),h!==!1){const m=a.createSVGPathSegLinetoAbs(o.x,o.y),v=a.createSVGPathSegClosePath();h===oe.segs.length-1?(n.appendItem(m),n.appendItem(v)):(n.insertItemBefore(v,h),n.insertItemBefore(m,h)),oe.init().selectPt(h+1);return}if(oe.segs[l].mate){n.removeItem(l),n.removeItem(l),oe.init().selectPt(l-1);return}let A,g;for(let m=0;m<n.numberOfItems;m++){const v=n.getItem(m);if(v.pathSegType===2)A=m;else if(m===l)n.removeItem(A);else if(v.pathSegType===1&&l<m){g=m-1,n.removeItem(m);break}}let p=l-A-1;for(;p--;)n.insertItemBefore(n.getItem(A),g);const d=n.getItem(A);fe.replacePathSeg(2,A,[d.x,d.y]),oe.init().selectPt(0)},deletePathNode(){if(!pa.canDeleteNodes)return;oe.storeD();const f=oe.selected_pts;let a=f.length;for(;a--;){const l=f[a];oe.deleteSeg(l)}const n=function(){const l=oe.elem.pathSegList;let h=l.numberOfItems;const o=function(u,A){for(;A--;)l.removeItem(u)};if(h<=1)return!0;for(;h--;){const u=l.getItem(h);if(u.pathSegType===1){const A=l.getItem(h-1),g=l.getItem(h-2);if(A.pathSegType===2){o(h-1,2),n();break}else if(g.pathSegType===2){o(h-2,3),n();break}}else if(u.pathSegType===2&&h>0){const A=l.getItem(h-1).pathSegType;if(A===2){o(h-1,1),n();break}else if(A===1&&l.numberOfItems-1===h){o(h,1),n();break}}}return!1};if(n(),oe.elem.pathSegList.numberOfItems<=1){pa.toSelectMode(oe.elem),fe.canvas.deleteSelectedElements();return}oe.init(),oe.clearSelection(),window.opera&&oe.elem.setAttribute("d",oe.elem.getAttribute("d")),oe.endChanges("Delete path node(s)")},smoothPolylineIntoPath:function(f){let a;const{points:n}=f,l=n.numberOfItems;if(l>=4){let h=n.getItem(0),o=null,u=[];for(u.push(["M",h.x,",",h.y," C"].join("")),a=1;a<=l-4;a+=3){let A=n.getItem(a);const g=n.getItem(a+1),p=n.getItem(a+2);if(o){const d=fe.smoothControlPoints(o,A,h);if((d==null?void 0:d.length)===2){const m=u[u.length-1].split(",");m[2]=d[0].x,m[3]=d[0].y,u[u.length-1]=m.join(","),A=d[1]}}u.push([A.x,A.y,g.x,g.y,p.x,p.y].join(",")),h=p,o=g}for(u.push("L");a<l;){const A=n.getItem(a);u.push([A.x,A.y].join(",")),a++}u=u.join(" "),f=fe.addSVGElementsFromJson({element:"path",curStyles:!0,attr:{id:fe.getId(),d:u,fill:"none"}})}return f},setSegType(f){oe==null||oe.setSegType(f)},moveNode(f,a){const n=oe.selected_pts;if(!n.length)return;oe.storeD();const l=oe.segs[n[0]],h={x:0,y:0};h[f]=a-l.item[f],l.move(h.x,h.y),oe.endChanges("Move path point")},fixEnd(f){const a=f.pathSegList,n=a.numberOfItems;let l;for(let h=0;h<n;++h){const o=a.getItem(h);if(o.pathSegType===2&&(l=o),o.pathSegType===1){const u=a.getItem(h-1);if(u.x!==l.x||u.y!==l.y){const A=f.createSVGPathSegLinetoAbs(l.x,l.y);a.insertItemBefore(A,h),pa.fixEnd(f);break}}}},convertPath:ZS}}();/**
 * Path functionality.
 * @module path
 * @license MIT
 *
 * @copyright 2011 Alexis Deveria, 2011 Jeff Schiller
 */const tx={2:["x","y"],4:["x","y"],6:["x","y","x1","y1","x2","y2"],8:["x","y","x1","y1"],10:["x","y","r1","r2","angle","largeArcFlag","sweepFlag"],12:["x"],14:["y"],16:["x","y","x2","y2"],18:["x","y"]};let Ai;const Jv={},Zv=r=>{Object.assign(Jv,r.ui)};let Bu=[],t1=!0,ih={};const e1=r=>{t1=r};let nh=null;const r1=r=>{Ai=r,Ai.replacePathSeg=qn,Ai.addPointGrip=ag,Ai.removePath_=hg,Ai.getPath_=a1,Ai.addCtrlGrip=Ag,Ai.getCtrlLine=og,Ai.getGripPt=i1,Ai.getPointFromGrip=$v,Ai.setLinkControlPoints=e1,Ai.reorientGrads=o1,Ai.getSegData=()=>tx,Ai.getUIStrings=()=>Jv,Ai.getPathObj=()=>nh,Ai.setPathObj=e=>{nh=e},Ai.getPathFuncs=()=>Bu,Ai.getLinkControlPts=()=>t1,Bu=[0,"ClosePath"],["Moveto","Lineto","CurvetoCubic","CurvetoQuadratic","Arc","LinetoHorizontal","LinetoVertical","CurvetoCubicSmooth","CurvetoQuadraticSmooth"].forEach(e=>{Bu.push(e+"Abs"),Bu.push(e+"Rel")}),JS(Ai),$S(Ai)},ex=sg,i1=Mo,rx=$v,ix=ag,nx=ko,sx=Ag,ax=og,Ax=Yv,ox=Cu,n1=qn,lx=lg,s1=(r,t,e)=>{const i=r.x-e.x,s=r.y-e.y,c=t.x-e.x,f=t.y-e.y;if((i!==0||s!==0)&&(c!==0||f!==0)){const a=Math.sqrt(i*i+s*s),n=Math.sqrt(c*c+f*f),l=Ai.getSvgRoot().createSVGPoint(),h=Ai.getSvgRoot().createSVGPoint();let o=Math.atan2(s,i),u=Math.atan2(f,c);o<0&&(o+=2*Math.PI),u<0&&(u+=2*Math.PI);const A=Math.abs(o-u),g=Math.abs(Math.PI-A)/2;let p,d;return o-u>0?(p=A<Math.PI?o+g:o-g,d=A<Math.PI?u-g:u+g):(p=A<Math.PI?o-g:o+g,d=A<Math.PI?u+g:u-g),l.x=a*Math.cos(p)+e.x,l.y=a*Math.sin(p)+e.y,h.x=n*Math.cos(d)+e.x,h.y=n*Math.sin(d)+e.y,[l,h]}},a1=r=>{let t=ih[r.id];return t||(t=ih[r.id]=new cg(r)),t},hg=r=>{r in ih&&delete ih[r]};let kl,Dl,sh,ah,Rl;const ug=(r,t)=>{let e=r-sh,i=t-ah,s=Math.sqrt(e*e+i*i),c=Math.atan2(i,e)+Rl;return e=s*Math.cos(c)+sh,i=s*Math.sin(c)+ah,e-=kl,i-=Dl,s=Math.sqrt(e*e+i*i),c=Math.atan2(i,e)-Rl,{x:s*Math.cos(c)+kl,y:s*Math.sin(c)+Dl}},cx=()=>{const r=nh.elem;if(Rl=Ji(r,!0),!Rl)return;const t=nh.oldbbox;sh=t.x+t.width/2,ah=t.y+t.height/2;const e=hi(r);kl=e.x+e.width/2,Dl=e.y+e.height/2;const i=kl-sh,s=Dl-ah,c=Math.sqrt(i*i+s*s),f=Math.atan2(s,i)+Rl;kl=c*Math.cos(f)+sh,Dl=c*Math.sin(f)+ah;const a=r.pathSegList;let n=a.numberOfItems;for(;n;){n-=1;const o=a.getItem(n),u=o.pathSegType;if(u===1)continue;const A=ug(o.x,o.y),g=[A.x,A.y];if(o.x1&&o.x2){const p=ug(o.x1,o.y1),d=ug(o.x2,o.y2);g.splice(g.length,0,p.x,p.y,d.x,d.y)}n1(u,n,g)}hi(r);const l=Ai.getSvgRoot().createSVGTransform(),h=Nr(r);l.setRotate(Rl*180/Math.PI,kl,Dl),h.replaceItem(l,0)},A1=()=>{ih={}},o1=(r,t)=>{const e=hi(r);for(let i=0;i<2;i++){const s=i===0?"fill":"stroke",c=r.getAttribute(s);if(c&&c.startsWith("url(")){const f=VA(c);if(f.tagName==="linearGradient"){let a=f.getAttribute("x1")||0,n=f.getAttribute("y1")||0,l=f.getAttribute("x2")||1,h=f.getAttribute("y2")||0;a=e.width*a+e.x,n=e.height*n+e.y,l=e.width*l+e.x,h=e.height*h+e.y;const o=vr(a,n,t),u=vr(l,h,t),A={x1:(o.x-e.x)/e.width,y1:(o.y-e.y)/e.height,x2:(u.x-e.x)/e.width,y2:(u.y-e.y)/e.height},g=f.cloneNode(!0);for(const[p,d]of Object.entries(A))g.setAttribute(p,d);g.id=Ai.getNextId(),ms().append(g),r.setAttribute(s,"url(#"+g.id+")")}}}},hx=[0,"z","M","m","L","l","C","c","Q","q","A","a","H","h","V","v","S","s","T","t"],ux=(r,t)=>{const{pathSegList:e}=r,i=e.numberOfItems;let s=0,c=0,f="",a=null;for(let n=0;n<i;++n){const l=e.getItem(n);let h=l.x||0,o=l.y||0,u=l.x1||0,A=l.y1||0,g=l.x2||0,p=l.y2||0;const d=l.pathSegType;let m=hx[d][t?"toLowerCase":"toUpperCase"]();switch(d){case 1:f+="z",a&&!t&&(s=a[0],c=a[1]);break;case 12:h-=s;case 13:t?(o=0,s+=h,m="l"):(o=c,h+=s,s=h,m="L"),f+=Ro(m,[[h,o]]);break;case 14:o-=c;case 15:t?(h=0,c+=o,m="l"):(h=s,o+=c,c=o,m="L"),f+=Ro(m,[[h,o]]);break;case 2:case 4:case 18:case 10:h-=s,o-=c;case 5:case 3:case 19:t?(s+=h,c+=o):(h+=s,o+=c,s=h,c=o),(d===2||d===3)&&(a=[s,c]),f+=Ro(m,[[h,o]]);break;case 6:h-=s,u-=s,g-=s,o-=c,A-=c,p-=c;case 7:t?(s+=h,c+=o):(h+=s,u+=s,g+=s,o+=c,A+=c,p+=c,s=h,c=o),f+=Ro(m,[[u,A],[g,p],[h,o]]);break;case 8:h-=s,u-=s,o-=c,A-=c;case 9:t?(s+=h,c+=o):(h+=s,u+=s,o+=c,A+=c,s=h,c=o),f+=Ro(m,[[u,A],[h,o]]);break;case 11:t?(s+=h,c+=o):(h+=s,o+=c,s=h,c=o),f+=Ro(m,[[l.r1,l.r2]],[l.angle,l.largeArcFlag?1:0,l.sweepFlag?1:0],[h,o]);break;case 16:h-=s,g-=s,o-=c,p-=c;case 17:t?(s+=h,c+=o):(h+=s,g+=s,o+=c,p+=c,s=h,c=o),f+=Ro(m,[[g,p],[h,o]]);break}}return f},Ro=(r,t,e,i)=>{t.forEach((c,f)=>{t[f]=ps(c)});let s=r+t.join(" ");return e&&(s+=" "+e.join(" ")),i&&(s+=" "+ps(i)),s};var l1=Object.freeze({__proto__:null,addCtrlGrip:sx,addPointGrip:ix,clearData:A1,convertPath:ux,getControlPoints:ox,getCtrlLine:ax,getGripContainer:nx,getGripPt:i1,getPath_:a1,getPointFromGrip:rx,getPointGrip:Ax,getSegSelector:lx,init:r1,get path(){return nh},pathActions:pa,ptObjToArr:ex,recalcRotatedPath:cx,removePath_:hg,reorientGrads:o1,replacePathSeg:n1,setLinkControlPoints:e1,setUiStrings:Zv,smoothControlPoints:s1});/**
 * Provides tools for the layer concept.
 * @module layer
 * @license MIT
 *
 * @copyright 2011 Jeff Schiller, 2016 Flint O'Brien
 */class vs{constructor(t,e,i){if(this.name_=t,this.group_=i?null:e,i){const s=i.ownerDocument;this.group_=s.createElementNS(_e.SVG,"g");const c=s.createElementNS(_e.SVG,"title");c.textContent=t,this.group_.append(c),e?e.insertAdjacentElement("afterend",this.group_):i.append(this.group_)}fx(this.group_),GA(this.group_,function(s){s.setAttribute("style","pointer-events:inherit")}),this.group_.setAttribute("style",i?"pointer-events:all":"pointer-events:none")}getName(){return this.name_}getGroup(){return this.group_}activate(){this.group_.setAttribute("style","pointer-events:all")}deactivate(){this.group_.setAttribute("style","pointer-events:none")}setVisible(t){const e=t===void 0||t?"inline":"none";this.group_.getAttribute("display")!==e&&this.group_.setAttribute("display",e)}isVisible(){return this.group_.getAttribute("display")!=="none"}getOpacity(){const t=this.group_.getAttribute("opacity");return t?Number.parseFloat(t):1}setOpacity(t){typeof t=="number"&&t>=0&&t<=1&&this.group_.setAttribute("opacity",t)}appendChildren(t){for(const e of t)this.group_.append(e)}getTitleElement(){const t=this.group_.childNodes.length;for(let e=0;e<t;++e){const i=this.group_.childNodes.item(e);if((i==null?void 0:i.tagName)==="title")return i}return null}setName(t,e){const i=this.name_;t=Zc(t);const s=this.getTitleElement();if(s){for(;s.firstChild;)s.removeChild(s.firstChild);return s.textContent=t,this.name_=t,e&&e.changeElement(s,{"#text":i}),this.name_}return null}removeGroup(){const t=this.group_;return this.group_.remove(),this.group_=void 0,t}static isLayer(t){return t&&t.tagName==="g"&&vs.CLASS_REGEX.test(t.getAttribute("class"))}}vs.CLASS_NAME="layer",vs.CLASS_REGEX=new RegExp("(\\s|^)"+vs.CLASS_NAME+"(\\s|$)");function fx(r){const t=r.getAttribute("class");!t||!t.length?r.setAttribute("class",vs.CLASS_NAME):vs.CLASS_REGEX.test(t)||r.setAttribute("class",t+" "+vs.CLASS_NAME)}/**
 * HistoryRecordingService component of history.
 * @module history
 * @license MIT
 * @copyright 2016 Flint O'Brien
 */class fg{constructor(t){this.undoManager_=t,this.currentBatchCommand_=null,this.batchCommandStack_=[]}startBatchCommand(t){return this.undoManager_?(this.currentBatchCommand_=new rh(t),this.batchCommandStack_.push(this.currentBatchCommand_),this):this}endBatchCommand(){if(!this.undoManager_)return this;if(this.currentBatchCommand_){const t=this.currentBatchCommand_;this.batchCommandStack_.pop();const{length:e}=this.batchCommandStack_;this.currentBatchCommand_=e?this.batchCommandStack_[e-1]:null,this.addCommand_(t)}return this}moveElement(t,e,i,s){return this.undoManager_?(this.addCommand_(new Xv(t,e,i,s)),this):this}insertElement(t,e){return this.undoManager_?(this.addCommand_(new zv(t,e)),this):this}removeElement(t,e,i,s){return this.undoManager_?(this.addCommand_(new qv(t,e,i,s)),this):this}changeElement(t,e,i){return this.undoManager_?(this.addCommand_(new Ml(t,e,i)),this):this}addCommand_(t){if(!this.undoManager_)return this;this.currentBatchCommand_?this.currentBatchCommand_.addSubCommand(t):this.undoManager_.addCommandToHistory(t)}}fg.NO_HISTORY=new fg;const c1=function(r,t){const e=document.createElementNS(r.namespaceURI,r.nodeName);if(Object.values(r.attributes).forEach(i=>{e.setAttributeNS(i.namespaceURI,i.nodeName,i.value)}),e.removeAttribute("id"),e.id=t(),r.childNodes.forEach(function(i){switch(i.nodeType){case 1:e.append(c1(i,t));break;case 3:e.textContent=i.nodeValue;break}}),r.dataset.gsvg)e.dataset.gsvg=e.firstChild;else if(r.dataset.symbol){const i=r.dataset.symbol;e.dataset.ref=i,e.dataset.symbol=i}else e.tagName==="image"&&ng(e);return e};/**
 * Tools for drawing.
 * @module draw
 * @license MIT
 * @copyright 2011 Jeff Schiller
 */const dx="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use".split(","),Ho={LET_DOCUMENT_DECIDE:0,ALWAYS_RANDOMIZE:1,NEVER_RANDOMIZE:2};let Ah=Ho.LET_DOCUMENT_DECIDE,Su=[];function oh(r){return r||new fg(He.undoMgr)}function gx(r){const t=r.querySelector("title");return t?t.textContent:""}function dg(r){let t=1;for(;r.includes("Layer "+t);)t++;return"Layer "+t}class gg{constructor(t,e){if(!t||!t.tagName||!t.namespaceURI||t.tagName!=="svg"||t.namespaceURI!==_e.SVG)throw new Error("Error: svgedit.draw.Drawing instance initialized without a <svg> element");this.svgElem_=t,this.obj_num=0,this.idPrefix=e||"svg_",this.releasedNums=[],this.all_layers=[],this.layer_map={},this.current_layer=null,this.nonce_="";const i=this.svgElem_.getAttributeNS(_e.SE,"nonce");i&&Ah!==Ho.NEVER_RANDOMIZE?this.nonce_=i:Ah===Ho.ALWAYS_RANDOMIZE&&this.setNonce(Math.floor(Math.random()*100001))}getElem_(t){return this.svgElem_.querySelector?this.svgElem_.querySelector("#"+t):this.svgElem_.querySelector("[id="+t+"]")}getSvgElem(){return this.svgElem_}getNonce(){return this.nonce_}setNonce(t){this.svgElem_.setAttributeNS(_e.XMLNS,"xmlns:se",_e.SE),this.svgElem_.setAttributeNS(_e.SE,"se:nonce",t),this.nonce_=t}clearNonce(){this.nonce_=""}getId(){return this.nonce_?this.idPrefix+this.nonce_+"_"+this.obj_num:this.idPrefix+this.obj_num}getNextId(){const t=this.obj_num;let e=!1;this.releasedNums.length>0?(this.obj_num=this.releasedNums.pop(),e=!0):this.obj_num++;let i=this.getId();for(;this.getElem_(i);)e&&(this.obj_num=t,e=!1),this.obj_num++,i=this.getId();return e&&(this.obj_num=t),i}releaseId(t){const e=this.idPrefix+(this.nonce_?this.nonce_+"_":"");if(typeof t!="string"||!t.startsWith(e))return!1;const i=Number.parseInt(t.substr(e.length));return typeof i!="number"||i<=0||this.releasedNums.includes(i)?!1:(this.releasedNums.push(i),!0)}getNumLayers(){return this.all_layers.length}hasLayer(t){return this.layer_map[t]!==void 0}getLayerName(t){return t>=0&&t<this.getNumLayers()?this.all_layers[t].getName():""}getCurrentLayer(){return this.current_layer?this.current_layer.getGroup():null}getLayerByName(t){const e=this.layer_map[t];return e?e.getGroup():null}getCurrentLayerName(){return this.current_layer?this.current_layer.getName():""}setCurrentLayerName(t,e){let i=null;if(this.current_layer){const s=this.current_layer.getName();i=this.current_layer.setName(t,e),i&&(delete this.layer_map[s],this.layer_map[i]=this.current_layer)}return i}setCurrentLayerPosition(t){const e=this.getNumLayers();if(!this.current_layer||t<0||t>=e)return null;const i=this.indexCurrentLayer();if(i===-1||i===t)return null;const s=this.current_layer.getGroup(),c=s.nextSibling;let f=null;return t>i?t<e-1&&(f=this.all_layers[t+1].getGroup()):f=this.all_layers[t].getGroup(),this.svgElem_.insertBefore(s,f),this.identifyLayers(),this.setCurrentLayer(this.getLayerName(t)),{currentGroup:s,oldNextSibling:c}}mergeLayer(t){const e=this.current_layer.getGroup(),i=e.previousElementSibling;if(!i)return;t.startBatchCommand("Merge Layer");const s=e.nextSibling;for(t.removeElement(e,s,this.svgElem_);e.firstChild;){const f=e.firstChild;if(f.localName==="title"){t.removeElement(f,f.nextSibling,e),f.remove();continue}const a=f.nextSibling;i.append(f),t.moveElement(f,a,e)}this.current_layer.removeGroup();const c=this.indexCurrentLayer();if(c>0){const f=this.current_layer.getName();this.current_layer=this.all_layers[c-1],this.all_layers.splice(c,1),delete this.layer_map[f]}t.endBatchCommand()}mergeAllLayers(t){for(this.current_layer=this.all_layers[this.all_layers.length-1],t.startBatchCommand("Merge all Layers");this.all_layers.length>1;)this.mergeLayer(t);t.endBatchCommand()}setCurrentLayer(t){const e=this.layer_map[t];return e?(this.current_layer&&this.current_layer.deactivate(),this.current_layer=e,this.current_layer.activate(),!0):!1}indexCurrentLayer(){return this.all_layers.indexOf(this.current_layer)}deleteCurrentLayer(){if(this.current_layer&&this.getNumLayers()>1){const t=this.current_layer.removeGroup();return this.identifyLayers(),t}return null}identifyLayers(){this.all_layers=[],this.layer_map={};const t=this.svgElem_.childNodes.length,e=[],i=[];let s=null,c=!1;for(let f=0;f<t;++f){const a=this.svgElem_.childNodes.item(f);if((a==null?void 0:a.nodeType)===1)if(a.tagName==="g"){c=!0;const n=gx(a);n?(i.push(n),s=new vs(n,a),this.all_layers.push(s),this.layer_map[n]=s):e.push(a)}else dx.includes(a.nodeName)&&e.push(a)}e.length>0||!c?(s=new vs(dg(i),null,this.svgElem_),s.appendChildren(e),this.all_layers.push(s),this.layer_map[name]=s):s.activate(),this.current_layer=s}createLayer(t,e){this.current_layer&&this.current_layer.deactivate(),(t==null||t===""||this.layer_map[t])&&(t=dg(Object.keys(this.layer_map)));const i=new vs(t,null,this.svgElem_);return e&&(e.startBatchCommand("Create Layer"),e.insertElement(i.getGroup()),e.endBatchCommand()),this.all_layers.push(i),this.layer_map[t]=i,this.current_layer=i,i.getGroup()}cloneLayer(t,e){if(!this.current_layer)return null;this.current_layer.deactivate(),(t==null||t===""||this.layer_map[t])&&(t=dg(Object.keys(this.layer_map)));const i=this.current_layer.getGroup(),s=new vs(t,i,this.svgElem_),c=s.getGroup();[...i.childNodes].forEach(n=>{n.localName!=="title"&&c.append(this.copyElem(n))}),e&&(e.startBatchCommand("Duplicate Layer"),e.insertElement(c),e.endBatchCommand());const a=this.indexCurrentLayer();return a>=0?this.all_layers.splice(a+1,0,s):this.all_layers.push(s),this.layer_map[t]=s,this.current_layer=s,c}getLayerVisibility(t){const e=this.layer_map[t];return e?e.isVisible():!1}setLayerVisibility(t,e){if(typeof e!="boolean")return null;const i=this.layer_map[t];return i?(i.setVisible(e),i.getGroup()):null}getLayerOpacity(t){const e=this.layer_map[t];return e?e.getOpacity():null}setLayerOpacity(t,e){if(typeof e!="number"||e<0||e>1)return;const i=this.layer_map[t];i&&i.setOpacity(e)}copyElem(t){const e=this;return c1(t,function(){return e.getNextId()})}}const h1=function(r,t){Ah=r===!1?Ho.NEVER_RANDOMIZE:Ho.ALWAYS_RANDOMIZE,Ah===Ho.ALWAYS_RANDOMIZE&&!t.getNonce()?t.setNonce(Math.floor(Math.random()*100001)):Ah===Ho.NEVER_RANDOMIZE&&t.getNonce()&&t.clearNonce()};let He;const px=r=>{He=r},lh=()=>{jA(),He.getCurrentDrawing().identifyLayers()},mx=()=>He.getCurrentDrawing().indexCurrentLayer(),vx=(r,t)=>{const e=He.getCurrentDrawing().createLayer(r,oh(t));He.clearSelection(),He.call("changed",[e])},yx=(r,t)=>{const e=He.getCurrentDrawing().cloneLayer(r,oh(t));He.clearSelection(),jA(),He.call("changed",[e])},wx=()=>{const{BatchCommand:r,RemoveElementCommand:t}=He.history;let e=He.getCurrentDrawing().getCurrentLayer();const{nextSibling:i}=e,s=e.parentNode;if(e=He.getCurrentDrawing().deleteCurrentLayer(),e){const c=new r("Delete Layer");return c.addSubCommand(new t(e,i,s)),He.addCommandToHistory(c),He.clearSelection(),He.call("changed",[s]),!0}return!1},bx=r=>{const t=He.getCurrentDrawing().setCurrentLayer(Zc(r));return t&&He.clearSelection(),t},Cx=r=>{const t=He.getCurrentDrawing(),e=t.getCurrentLayer();return e&&t.setCurrentLayerName(r,oh())?(He.call("changed",[e]),!0):!1},Bx=r=>{const{MoveElementCommand:t}=He.history,i=He.getCurrentDrawing().setCurrentLayerPosition(r);return i?(He.addCommandToHistory(new t(i.currentGroup,i.oldNextSibling,He.getSvgContent())),!0):!1},Sx=(r,t)=>{const{ChangeElementCommand:e}=He.history,i=He.getCurrentDrawing(),s=i.getLayerVisibility(r),c=i.setLayerVisibility(r,t);if(c){const f=s?"inline":"none";He.addCommandToHistory(new e(c,{display:f},"Layer Visibility"))}else return!1;return c===i.getCurrentLayer()&&(He.clearSelection(),He.pathActions.clear()),!0},xx=r=>{const{BatchCommand:t,MoveElementCommand:e}=He.history,s=He.getCurrentDrawing().getLayerByName(r);if(!s)return!1;const c=new t("Move Elements to Layer"),f=He.getSelectedElements();let a=f.length;for(;a--;){const n=f[a];if(!n)continue;const l=n.nextSibling,h=n.parentNode;s.append(n),c.addSubCommand(new e(n,l,h))}return He.addCommandToHistory(c),!0},_x=r=>{He.getCurrentDrawing().mergeLayer(oh(r)),He.clearSelection(),jA(),He.changeSvgContent()},Ex=r=>{He.getCurrentDrawing().mergeAllLayers(oh(r)),He.clearSelection(),jA(),He.changeSvgContent()},jA=()=>{const r=Su.length,t=He.getDataStorage();if(r){for(let e=0;e<r;e++){const i=Su[e],s=t.get(i,"orig_opac");s!==1?i.setAttribute("opacity",s):i.removeAttribute("opacity"),i.setAttribute("style","pointer-events: inherit")}Su=[],He.clearSelection(!0),He.call("contextset",null)}He.setCurrentGroup(null)},u1=r=>{const t=He.getDataStorage();jA(),typeof r=="string"&&(r=wr(r)),He.setCurrentGroup(r);const e=MS(r,"#svgcontent"),i=[];e.forEach(function(s){Array.prototype.filter.call(s.parentNode.children,function(f){return f!==s}).forEach(function(f){i.push(f)})}),i.forEach(function(s){const c=s.getAttribute("opacity")||1;t.put(s,"orig_opac",c),s.setAttribute("opacity",c*.33),s.setAttribute("style","pointer-events: none"),Su.push(s)}),He.clearSelection(),He.call("contextset",He.getCurrentGroup())},{InsertElementCommand:Fx,BatchCommand:Tx}=No;let Ls=null;const Lx=r=>{Ls=r},Ix=function(r,t,e){let i=JSON.parse(sessionStorage.getItem(Ls.getClipboardID()));if(!i)return;let s=i.length;if(!s)return;const c=[],f=new Tx("Paste elements"),a={};function n(l){var h;(h=l.attr)!=null&&h.id&&(a[l.attr.id]=Ls.getNextId(),l.attr.id=a[l.attr.id]),l.children&&l.children.forEach(o=>n(o))}for(i.forEach(l=>n(l)),Ls.runExtensions("IDsUpdated",{elems:i,changes:a},!0).forEach(function(l){!l||!("remove"in l)||l.remove.forEach(function(h){i=i.filter(function(o){return o.attr.id!==h})})});s--;){const l=i[s];if(!l)continue;const h=Ls.addSVGElementsFromJson(l);c.push(h),f.addSubCommand(new Fx(h)),Ls.restoreRefElements(h)}if(Ls.selectOnly(c),r!=="in_place"){let l,h;r?r==="point"&&(l=t,h=e):(l=Ls.getLastClickPoint("x"),h=Ls.getLastClickPoint("y"));const o=js(c),u=l-(o.x+o.width/2),A=h-(o.y+o.height/2),g=[],p=[];c.forEach(function(m){g.push(u),p.push(A)});const d=Ls.moveSelectedElements(g,p,!1);d&&f.addSubCommand(d)}Ls.addCommandToHistory(f),Ls.call("changed",c)},xu=r=>{r.preventDefault();const{changedTouches:t}=r,e=t[0];let i="";switch(r.type){case"touchstart":i="mousedown";break;case"touchmove":i="mousemove";break;case"touchend":i="mouseup";break;default:return}const{screenX:s,screenY:c,clientX:f,clientY:a}=e,n=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,detail:1,screenX:s,screenY:c,clientX:f,clientY:a,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});t.length<2&&e.target.dispatchEvent(n)},Px=r=>{r.svgroot.addEventListener("touchstart",xu),r.svgroot.addEventListener("touchmove",xu),r.svgroot.addEventListener("touchend",xu),r.svgroot.addEventListener("touchcancel",xu)};/**
 * Tools for SVG Root Element.
 * @module svgcanvas
 * @license MIT
 *
 * @copyright 2010 Alexis Deveria, 2010 Jeff Schiller
 */const Ux=function(r,t){return r.importNode(Zd(`<svg id="svgroot" xmlns="${_e.SVG}" xlinkns="${_e.XLINK}" width="${t[0]}" 
        height="${t[1]}" x="${t[0]}" y="${t[1]}" overflow="visible">
        <defs>
          <filter id="canvashadow" filterUnits="objectBoundingBox">
            <feGaussianBlur in="SourceAlpha" stdDeviation="4" result="blur"/>
            <feOffset in="blur" dx="5" dy="5" result="offsetBlur"/>
            <feMerge>
              <feMergeNode in="offsetBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
      </svg>`).documentElement,!0)};/**
 * Browser detection.
 * @module browser
 * @license MIT
 *
 * @copyright 2010 Jeff Schiller, 2010 Alexis Deveria
 */const pg="http://www.w3.org/2000/svg",{userAgent:_u}=navigator,Ox=_u.includes("AppleWebKit"),Qx=_u.includes("Gecko/"),Nx=_u.includes("Chrome/");_u.includes("Macintosh");const Mx=function(){const r=document.createElementNS(pg,"svg"),t=document.createElementNS(pg,"svg");document.documentElement.append(r),t.setAttribute("x",5),r.append(t);const e=document.createElementNS(pg,"text");e.textContent="a",t.append(e);try{return e.getStartPositionOfChar(0).x===0}catch{return!1}finally{r.remove()}}(),f1=()=>Ox,Go=()=>Qx,kx=()=>Nx,Dx=()=>Mx;/**
 * Tools for undo.
 * @module undo
 * @license MIT
 * @copyright 2011 Jeff Schiller
 */const{UndoManager:Rx,HistoryEventTypes:Hx}=No;let Sr=null;const Gx=r=>{Sr=r,r.undoMgr=Vx()},Vx=()=>new Rx({handleHistoryEvent(r,t){var i;const e=Hx;if(r===e.BEFORE_UNAPPLY||r===e.BEFORE_APPLY)Sr.clearSelection();else if(r===e.AFTER_APPLY||r===e.AFTER_UNAPPLY){const s=t.elements();Sr.pathActions.clear(),Sr.call("changed",s);const c=t.type(),f=r===e.AFTER_APPLY;if(c==="MoveElementCommand")(f?t.newParent:t.oldParent)===Sr.getSvgContent()&&lh();else if(c==="InsertElementCommand"||c==="RemoveElementCommand")t.parent===Sr.getSvgContent()&&lh(),c==="InsertElementCommand"?f&&Sr.restoreRefElements(t.elem):f||Sr.restoreRefElements(t.elem),((i=t.elem)==null?void 0:i.tagName)==="use"&&Sr.setUseData(t.elem);else if(c==="ChangeElementCommand"){t.elem.tagName==="title"&&t.elem.parentNode.parentNode===Sr.getSvgContent()&&lh();const a=f?t.newValues:t.oldValues;if(a.stdDeviation&&Sr.setBlurOffsets(t.elem.parentNode,a.stdDeviation),t.elem.tagName==="text"){const[n,l]=[t.newValues.x-t.oldValues.x,t.newValues.y-t.oldValues.y],h=t.elem.children;for(let o=0;o<h.length;o++){let u=Number(h[o].getAttribute("x")),A=Number(h[o].getAttribute("y"));const g=r===e.AFTER_UNAPPLY;u=g?u-n:u+n,A=g?A-l:A+l,h[o].setAttribute("x",u),h[o].setAttribute("y",A)}}}}}}),d1=function(r){if(!Go())return r;const t=r.cloneNode(!0);return r.before(t),r.remove(),Sr.selectorManager.releaseSelector(r),Sr.setSelectedElements(0,t),Sr.selectorManager.requestSelector(t).showGrips(!0),t},g1=(r,t,e)=>{if(r==="id"){const a=e[0],n=a.id;n!==t&&(Sr.clearSelection(),a.id=t,Sr.addToSelection([a],!0),Sr.call("elementRenamed",{elem:a,oldId:n,newId:t}));return}const i=Sr.getSelectedElements(),s=Sr.getZoom();Sr.getCurrentMode()==="pathedit"&&Sr.pathActions.moveNode(r,t),e=e??i;let c=e.length;const f=["g","polyline","path"];for(;c--;){let a=e[c];if(!a)continue;if((r==="x"||r==="y")&&f.includes(a.tagName)){const l=js([a]),h=r==="x"?parseFloat(t)-l.x:0,o=r==="y"?parseFloat(t)-l.y:0;Sr.moveSelectedElements(h*s,o*s,!0);continue}let n=r==="#text"?a.textContent:a.getAttribute(r);if(n||(n=""),n!==String(t)){r==="#text"?(a.textContent=t,/rotate/.test(a.getAttribute("transform"))&&(a=d1(a))):r==="#href"?ga(a,t):t?a.setAttribute(r,isNaN(parseFloat(t))?t:parseFloat(t)):typeof t=="number"?a.setAttribute(r,t):a.removeAttribute(r),Sr.getCurrentMode()==="textedit"&&r!=="#text"&&a.textContent.length&&Sr.textActions.toSelectMode(a),Go()&&a.nodeName==="text"&&/rotate/.test(a.getAttribute("transform"))&&(String(t).startsWith("url")||["font-size","font-family","x","y"].includes(r)&&a.textContent)&&(a=d1(a)),i.includes(a)&&setTimeout(function(){a.parentNode&&Sr.selectorManager.requestSelector(a).resize()},0);const l=Ji(a);if(l!==0&&r!=="transform"){const h=Nr(a);let o=h.numberOfItems;for(;o--;)if(h.getItem(o).type===4){h.removeItem(o);const A=hi(a),g=vr(A.x+A.width/2,A.y+A.height/2,yr(h).matrix),p=g.x,d=g.y,m=Sr.getSvgRoot().createSVGTransform();m.setRotate(l,p,d),h.insertItemBefore(m,o);break}}}}},jx=function(r,t,e){const i=Sr.getSelectedElements();e=e||i,Sr.undoMgr.beginUndoableChange(r,e),g1(r,t,e);const s=Sr.undoMgr.finishUndoableChange();s.isEmpty()||Sr.undoMgr.addCommandToHistory(s)};/**
 * Tools for selection.
 * @module selection
 * @license MIT
 * @copyright 2011 Jeff Schiller
 */const{BatchCommand:Kx}=No;let Fe=null;const Wx=r=>{Fe=r,Fe.getMouseTarget=qx,Fe.clearSelection=Xx,Fe.addToSelection=zx,Fe.getIntersectionList=Jx,Fe.runExtensions=$x,Fe.groupSvgElem=Zx,Fe.prepareSvg=t5,Fe.recalculateAllSelectedDimensions=r5,Fe.setRotationAngle=e5},Xx=r=>{Fe.getSelectedElements().forEach(e=>{e&&Fe.selectorManager.releaseSelector(e)}),Fe==null||Fe.setEmptySelectedElements(),r||Fe.call("selected",Fe.getSelectedElements())},zx=(r,t)=>{const e=Fe.getSelectedElements();if(!r.length)return;let i=0;for(;i<e.length&&e[i]!==null;)++i;let s=r.length;for(;s--;){let c=r[s];if(!(!c||!c.getBBox)&&(c.tagName==="a"&&c.childNodes.length===1&&(c=c.firstChild),!e.includes(c))){e[i]=c,i++;const f=Fe.selectorManager.requestSelector(c);e.length>1&&f.showGrips(!1)}}if(e.length)for(Fe.call("selected",e),e.length===1&&Fe.selectorManager.requestSelector(e[0]).showGrips(t),e.sort((c,f)=>c&&f&&c.compareDocumentPosition?3-(f.compareDocumentPosition(c)&6):c?0:1);!e[0];)e.shift(0)},qx=r=>{var f;if(!r)return null;let t=r.target;if(t.correspondingUseElement&&(t=t.correspondingUseElement),[_e.MATH,_e.HTML].includes(t.namespaceURI)&&t.id!=="svgcanvas"){for(;t.nodeName!=="foreignObject";)if(t=t.parentNode,!t)return Fe.getSvgRoot()}const e=Fe.getCurrentDrawing().getCurrentLayer(),i=Fe.getSvgRoot(),s=Fe.getDOMContainer(),c=Fe.getSvgContent();if([i,s,c,e].includes(t))return Fe.getSvgRoot();if(Yc(t.parentNode,"#selectorParentGroup"))return Fe.selectorManager.selectorParentGroup;for(;!((f=t==null?void 0:t.parentNode)!=null&&f.isSameNode(Fe.getCurrentGroup()||e));)t=t.parentNode;return t},$x=(r,t,e)=>{let i=e?[]:!1;for(const[s,c]of Object.entries(Fe.getExtensions()))if(typeof t=="function"&&(t=t(s)),c.eventBased){const f=new CustomEvent("svgedit",{detail:{action:r,vars:t}});document.dispatchEvent(f)}else c[r]&&(e?i.push(c[r](t)):i=c[r](t));return i},Yx=r=>{r||(r=Fe.getSvgContent().children);const t=[],e=r.children;return Array.from(e).forEach(i=>{i.getBBox&&t.push({elem:i,bbox:js([i])})}),t.reverse()},Jx=r=>{const t=Fe.getZoom();if(!Fe.getRubberBox())return null;const e=Fe.getCurrentGroup()||Fe.getCurrentDrawing().getCurrentLayer();let i;if(r)i=Fe.getSvgContent().createSVGRect(),i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height;else{i=hi(Fe.getRubberBox());const f=Fe.getSvgContent().createSVGRect();["x","y","width","height","top","right","bottom","left"].forEach(a=>{f[a]=i[a]/t}),i=f}const s=[];Fe.getCurBBoxes().length===0&&Fe.setCurBBoxes(Yx(e));let c=Fe.getCurBBoxes().length;for(;c--;){const f=Fe.getCurBBoxes();i.width&&f[c].bbox&&Pv(i,f[c].bbox)&&s.push(f[c].elem)}return s},Zx=r=>{const t=Fe.getDataStorage(),e=document.createElementNS(_e.SVG,"g");r.replaceWith(e),e.appendChild(r),t.put(e,"gsvg",r),e.id=Fe.getNextId()},t5=r=>{Fe.sanitizeSvg(r.documentElement),[...r.getElementsByTagNameNS(_e.SVG,"path")].forEach(e=>{const i=Fe.pathActions.convertPath(e);e.setAttribute("d",i),Fe.pathActions.fixEnd(e)})},e5=(r,t)=>{const e=Fe.getSelectedElements();r=Number.parseFloat(r);const i=e[0],s=i.getAttribute("transform"),c=hi(i),f=c.x+c.width/2,a=c.y+c.height/2,n=Nr(i);if(n.numberOfItems>0&&n.getItem(0).type===4&&n.removeItem(0),r!==0){const h=vr(f,a,yr(n).matrix),o=Fe.getSvgRoot().createSVGTransform();o.setRotate(r,h.x,h.y),n.numberOfItems?n.insertItemBefore(o,0):n.appendItem(o)}else n.numberOfItems===0&&i.removeAttribute("transform");if(!t){let h=i.getAttribute("transform");if(h){const o=h.split(" "),A=(g=>Math.round(Number(g)+Number.EPSILON))(o[1]);h=`${o[0]} ${A} ${o[2]}`}s?i.setAttribute("transform",s):i.removeAttribute("transform"),Fe.changeSelectedAttribute("transform",h,e),Fe.call("changed",e)}Fe.selectorManager.requestSelector(e[0]).resize(),Fe.getSelector().updateGripCursors(r)},r5=()=>{const r=Fe.getCurrentResizeMode()==="none"?"position":"size",t=new Kx(r),e=Fe.getSelectedElements();e.forEach(i=>{const s=Fe.recalculateDimensions(i);s&&t.addSubCommand(s)}),t.isEmpty()||(Fe.addCommandToHistory(t),Fe.call("changed",e))};/**
 * @module text-actions Tools for Text edit functions
 * @license MIT
 *
 * @copyright 2010 Alexis Deveria, 2010 Jeff Schiller
 */let Zr=null;const i5=r=>{Zr=r},n5=function(){let r,t,e,i,s,c=[],f,a,n,l,h;function o(x){const E=t.value==="";if(t.focus(),!arguments.length)if(E)x=0;else{if(t.selectionEnd!==t.selectionStart)return;x=t.selectionEnd}const L=c[x];E||t.setSelectionRange(x,x),e=wr("text_cursor"),e||(e=document.createElementNS(_e.SVG,"line"),br(e,{id:"text_cursor",stroke:"#333","stroke-width":1}),wr("selectorParentGroup").append(e)),s||(s=setInterval(function(){const X=e.getAttribute("display")==="none";e.setAttribute("display",X?"inline":"none")},600));const U=m(L.x,f.y),O=m(L.x,f.y+f.height);br(e,{x1:U.x,y1:U.y,x2:O.x,y2:O.y,visibility:"visible",display:"inline"}),i&&i.setAttribute("d","")}function u(x,E,L){if(x===E){o(E);return}L||t.setSelectionRange(x,E),i=wr("text_selectblock"),i||(i=document.createElementNS(_e.SVG,"path"),br(i,{id:"text_selectblock",fill:"green",opacity:.5,style:"pointer-events:none"}),wr("selectorParentGroup").append(i));const U=c[x],O=c[E];e.setAttribute("visibility","hidden");const X=m(U.x,f.y),rt=m(U.x+(O.x-U.x),f.y),M=m(U.x,f.y+f.height),H=m(U.x+(O.x-U.x),f.y+f.height),J="M"+X.x+","+X.y+" L"+rt.x+","+rt.y+" "+H.x+","+H.y+" "+M.x+","+M.y+"z";br(i,{d:J,display:"inline"})}function A(x,E){const L=Zr.getSvgRoot().createSVGPoint();if(L.x=x,L.y=E,c.length===1)return 0;let U=r.getCharNumAtPosition(L);U<0?(U=c.length-2,x<=c[0].x&&(U=0)):U>=c.length-2&&(U=c.length-2);const O=c[U],X=O.x+O.width/2;return x>X&&U++,U}function g(x,E){o(A(x,E))}function p(x,E,L){const U=t.selectionStart,O=A(x,E),X=Math.min(U,O),rt=Math.max(U,O);u(X,rt,!L)}function d(x,E){const L={x,y:E},U=Zr.getZoom();if(L.x/=U,L.y/=U,a){const O=vr(L.x,L.y,a.inverse());L.x=O.x,L.y=O.y}return L}function m(x,E){const L={x,y:E};if(a){const O=vr(L.x,L.y,a);L.x=O.x,L.y=O.y}const U=Zr.getZoom();return L.x*=U,L.y*=U,L}function v(x){u(0,r.textContent.length),x.target.removeEventListener("click",v)}function C(x){if(!h||!r)return;const E=Zr.getZoom(),L=vr(x.pageX,x.pageY,Zr.getrootSctm()),U=L.x*E,O=L.y*E,X=d(U,O),rt=A(X.x,X.y),M=r.textContent,H=M.substr(0,rt).replace(/[a-z\d]+$/i,"").length,J=M.substr(rt).match(/^[a-z\d]+/i),$=(J?J[0].length:0)+rt;u(H,$),Zr.$click(x.target,v),setTimeout(function(){x.target.removeEventListener("click",v)},300)}return{select(x,E,L){r=x,Zr.textActions.toEditMode(E,L)},start(x){r=x,Zr.textActions.toEditMode()},mouseDown(x,E,L,U){const O=d(L,U);t.focus(),g(O.x,O.y),n=L,l=U},mouseMove(x,E){const L=d(x,E);p(L.x,L.y)},mouseUp(x,E,L){const U=d(E,L);p(U.x,U.y,!0),x.target!==r&&E<n+2&&E>n-2&&L<l+2&&L>l-2&&Zr.textActions.toSelectMode(!0)},setCursor:o,toEditMode(x,E){if(h=!1,Zr.setCurrentMode("textedit"),Zr.selectorManager.requestSelector(r).showGrips(!1),Zr.selectorManager.requestSelector(r),Zr.textActions.init(),r.style.cursor="text",!arguments.length)o();else{const L=d(x,E);g(L.x,L.y)}setTimeout(function(){h=!0},300)},toSelectMode(x){Zr.setCurrentMode("select"),clearInterval(s),s=null,i&&i.setAttribute("display","none"),e&&e.setAttribute("visibility","hidden"),r.style.cursor="move",x&&(Zr.clearSelection(),r.style.cursor="move",Zr.call("selected",[r]),Zr.addToSelection([r],!0)),r!=null&&r.textContent.length||Zr.deleteSelectedElements(),t.blur(),r=!1},setInputElem(x){t=x},clear(){Zr.getCurrentMode()==="textedit"&&Zr.textActions.toSelectMode()},init(x){if(!r)return;let E,L;r.parentNode||(r=Zr.getSelectedElements()[0],Zr.selectorManager.requestSelector(r).showGrips(!1));const O=r.textContent.length,X=r.getAttribute("transform");for(f=hi(r),a=X?$d(r):null,c=[],c.length=O,t.focus(),r.removeEventListener("dblclick",C),r.addEventListener("dblclick",C),O||(L={x:f.x+f.width/2,width:0}),E=0;E<O;E++){const rt=r.getStartPositionOfChar(E);if(L=r.getEndPositionOfChar(E),!Dx()){const M=Zr.getZoom(),H=Zr.contentW*M;rt.x-=H,L.x-=H,rt.x/=M,L.x/=M}c[E]={x:rt.x,y:f.y,width:L.x-rt.x,height:f.height}}c.push({x:L.x,width:0}),u(t.selectionStart,t.selectionEnd,!0)}}}();/**
 * Tools for event.
 * @module event
 * @license MIT
 * @copyright 2011 Jeff Schiller
 */const{InsertElementCommand:s5}=No;let W=null,Eu=!1;const a5=r=>{W=r,W.mouseDownEvent=u5,W.mouseMoveEvent=o5,W.dblClickEvent=h5,W.mouseUpEvent=c5,W.mouseOutEvent=l5,W.DOMMouseScrollEvent=f5},p1=r=>{const t={x:0,y:0},e={x:W.getControllPoint2("x"),y:W.getControllPoint2("y")},i={x:W.getControllPoint1("x"),y:W.getControllPoint1("y")},s={x:W.getStart("x"),y:W.getStart("y")},c={x:W.getEnd("x"),y:W.getEnd("y")},f=1/6,a=r*r,n=a*r,l=[[-1,3,-3,1],[3,-6,3,0],[-3,0,3,0],[1,4,1,0]];return t.x=f*((e.x*l[0][0]+i.x*l[0][1]+s.x*l[0][2]+c.x*l[0][3])*n+(e.x*l[1][0]+i.x*l[1][1]+s.x*l[1][2]+c.x*l[1][3])*a+(e.x*l[2][0]+i.x*l[2][1]+s.x*l[2][2]+c.x*l[2][3])*r+(e.x*l[3][0]+i.x*l[3][1]+s.x*l[3][2]+c.x*l[3][3])),t.y=f*((e.y*l[0][0]+i.y*l[0][1]+s.y*l[0][2]+c.y*l[0][3])*n+(e.y*l[1][0]+i.y*l[1][1]+s.y*l[1][2]+c.y*l[1][3])*a+(e.y*l[2][0]+i.y*l[2][1]+s.y*l[2][2]+c.y*l[2][3])*r+(e.y*l[3][0]+i.y*l[3][1]+s.y*l[3][2]+c.y*l[3][3])),{x:t.x,y:t.y}},A5=(r,t,e,i)=>{const s=r.createSVGTransform();s.setTranslate(e,i);const c=Nr(t);c.numberOfItems?c.getItem(0).type===2?c.replaceItem(s,0):c.insertItemBefore(s,0):c.appendItem(s)},o5=r=>{var U;if(!W.getStarted()||r.button===1||W.spaceKey)return;W.textActions.init(),r.preventDefault();const t=W.getSelectedElements(),e=W.getZoom(),i=W.getSvgRoot(),s=t[0];let c,f,a,n,l,h,o,u,A;const g=vr(r.clientX,r.clientY,W.getrootSctm()),p=g.x*e,d=g.y*e,m=wr(W.getId());let v=p/e,C=v,x=d/e,E=x;W.getCurConfig().gridSnapping&&(C=nr(C),E=nr(E));let L;switch(W.getCurrentMode()){case"select":{if(s){l=C-W.getStartX(),h=E-W.getStartY(),W.getCurConfig().gridSnapping&&(l=nr(l),h=nr(h));const O=4,X=Math.abs(l)>O||Math.abs(h)>O;Eu=Eu||X,Eu&&(t.forEach(rt=>{rt&&(A5(i,rt,l,h),W.selectorManager.requestSelector(rt).resize())}),W.call("transition",t))}break}case"multiselect":{v*=e,x*=e,br(W.getRubberBox(),{x:Math.min(W.getRStartX(),v),y:Math.min(W.getRStartY(),x),width:Math.abs(v-W.getRStartX()),height:Math.abs(x-W.getRStartY())});const O=t.slice(),X=[],rt=W.getIntersectionList();for(o=rt.length,c=0;c<o;++c){const M=rt[c];t.includes(M)||X.push(M);const H=O.indexOf(M);H!==-1&&O.splice(H,1)}O.length>0&&W.removeFromSelection(O),X.length>0&&W.addToSelection(X);break}case"resize":{L=Nr(s);const O=Qo(L);A=O?W.getInitBbox():hi(s);let X=A.x,rt=A.y,{width:M,height:H}=A;if(l=C-W.getStartX(),h=E-W.getStartY(),W.getCurConfig().gridSnapping&&(l=nr(l),h=nr(h),H=nr(H),M=nr(M)),u=Ji(s),u){const it=Math.sqrt(l*l+h*h),P=Math.atan2(h,l)-u*Math.PI/180;l=it*Math.cos(P),h=it*Math.sin(P)}!W.getCurrentResizeMode().includes("n")&&!W.getCurrentResizeMode().includes("s")&&(h=0),!W.getCurrentResizeMode().includes("e")&&!W.getCurrentResizeMode().includes("w")&&(l=0);let J=0,$=0,ht=H?(H+h)/H:1,ut=M?(M+l)/M:1;W.getCurrentResizeMode().includes("n")&&(ht=H?(H-h)/H:1,$=H),W.getCurrentResizeMode().includes("w")&&(ut=M?(M-l)/M:1,J=M);const pt=i.createSVGTransform(),ft=i.createSVGTransform(),R=i.createSVGTransform();if(W.getCurConfig().gridSnapping&&(X=nr(X),J=nr(J),rt=nr(rt),$=nr($)),pt.setTranslate(-(X+J),-(rt+$)),(s.tagName!=="image"&&r.shiftKey||s.tagName==="image"&&!r.shiftKey)&&(ut===1?ut=ht:ht=ut),ft.setScale(ut,ht),R.setTranslate(X+J,rt+$),O){const it=u?1:0;L.replaceItem(pt,2+it),L.replaceItem(ft,1+it),L.replaceItem(R,Number(it))}else{const it=L.numberOfItems;L.replaceItem(R,it-3),L.replaceItem(ft,it-2),L.replaceItem(pt,it-1)}W.selectorManager.requestSelector(s).resize(),W.call("transition",t);break}case"zoom":{v*=e,x*=e,br(W.getRubberBox(),{x:Math.min(W.getRStartX()*e,v),y:Math.min(W.getRStartY()*e,x),width:Math.abs(v-W.getRStartX()*e),height:Math.abs(x-W.getRStartY()*e)});break}case"text":{br(m,{x:C,y:E});break}case"line":{W.getCurConfig().gridSnapping&&(C=nr(C),E=nr(E));let O=C,X=E;r.shiftKey&&(f=Yd(W.getStartX(),W.getStartY(),O,X),O=f.x,X=f.y),m.setAttribute("x2",O),m.setAttribute("y2",X);break}case"foreignObject":case"square":case"rect":case"image":{const O=W.getCurrentMode()==="square"||W.getCurrentMode()==="image"&&!r.shiftKey||W.getCurrentMode()!=="image"&&r.shiftKey;let X=Math.abs(C-W.getStartX()),rt=Math.abs(E-W.getStartY()),M,H;O?(X=rt=Math.max(X,rt),M=W.getStartX()<C?W.getStartX():W.getStartX()-X,H=W.getStartY()<E?W.getStartY():W.getStartY()-rt):(M=Math.min(W.getStartX(),C),H=Math.min(W.getStartY(),E)),W.getCurConfig().gridSnapping&&(X=nr(X),rt=nr(rt),M=nr(M),H=nr(H)),br(m,{width:X,height:rt,x:M,y:H});break}case"circle":{a=Number(m.getAttribute("cx")),n=Number(m.getAttribute("cy"));let O=Math.sqrt((C-a)*(C-a)+(E-n)*(E-n));W.getCurConfig().gridSnapping&&(O=nr(O)),m.setAttribute("r",O);break}case"ellipse":{a=Number(m.getAttribute("cx")),n=Number(m.getAttribute("cy")),W.getCurConfig().gridSnapping&&(C=nr(C),a=nr(a),E=nr(E),n=nr(n)),m.setAttribute("rx",Math.abs(C-a));const O=Math.abs(r.shiftKey?C-a:E-n);m.setAttribute("ry",O);break}case"fhellipse":case"fhrect":W.setFreehand("minx",Math.min(v,W.getFreehand("minx"))),W.setFreehand("maxx",Math.max(v,W.getFreehand("maxx"))),W.setFreehand("miny",Math.min(x,W.getFreehand("miny"))),W.setFreehand("maxy",Math.max(x,W.getFreehand("maxy")));case"fhpath":{if(W.setEnd("x",v),W.setEnd("y",x),W.getControllPoint2("x")&&W.getControllPoint2("y")){for(c=0;c<W.getStepCount()-1;c++)if(W.setParameter(c/W.getStepCount()),W.setNextParameter((c+1)/W.getStepCount()),W.setbSpline(p1(W.getNextParameter())),W.setNextPos({x:W.getbSpline("x"),y:W.getbSpline("y")}),W.setbSpline(p1(W.getParameter())),W.setSumDistance(W.getSumDistance()+Math.sqrt((W.getNextPos("x")-W.getbSpline("x"))*(W.getNextPos("x")-W.getbSpline("x"))+(W.getNextPos("y")-W.getbSpline("y"))*(W.getNextPos("y")-W.getbSpline("y")))),W.getSumDistance()>W.getThreSholdDist()){W.setSumDistance(W.getSumDistance()-W.getThreSholdDist());const O=W.getSvgContent().createSVGPoint();O.x=W.getbSpline("x"),O.y=W.getbSpline("y"),m.points.appendItem(O)}}W.setControllPoint2("x",W.getControllPoint1("x")),W.setControllPoint2("y",W.getControllPoint1("y")),W.setControllPoint1("x",W.getStart("x")),W.setControllPoint1("y",W.getStart("y")),W.setStart({x:W.getEnd("x"),y:W.getEnd("y")});break}case"path":case"pathedit":{if(C*=e,E*=e,W.getCurConfig().gridSnapping&&(C=nr(C),E=nr(E),W.setStartX(nr(W.getStartX())),W.setStartY(nr(W.getStartY()))),r.shiftKey){const{path:O}=l1;let X,rt;O?(X=O.dragging?O.dragging[0]:W.getStartX(),rt=O.dragging?O.dragging[1]:W.getStartY()):(X=W.getStartX(),rt=W.getStartY()),f=Yd(X,rt,C,E),{x:C,y:E}=f}((U=W.getRubberBox())==null?void 0:U.getAttribute("display"))!=="none"&&(v*=e,x*=e,br(W.getRubberBox(),{x:Math.min(W.getRStartX()*e,v),y:Math.min(W.getRStartY()*e,x),width:Math.abs(v-W.getRStartX()*e),height:Math.abs(x-W.getRStartY()*e)})),W.pathActions.mouseMove(C,E);break}case"textedit":{C*=e,E*=e,W.textActions.mouseMove(p,d);break}case"rotate":{A=hi(s),a=A.x+A.width/2,n=A.y+A.height/2;const O=$d(s),X=vr(a,n,O);a=X.x,n=X.y,u=(Math.atan2(n-E,a-C)*(180/Math.PI)-90)%360,W.getCurConfig().gridSnapping&&(u=nr(u)),r.shiftKey&&(u=Math.round(u/45)*45),W.setRotationAngle(u<-180?360+u:u,!0),W.call("transition",t);break}}W.runExtensions("mouseMove",{event:r,mouse_x:p,mouse_y:d,selected:s})},l5=()=>{const{$id:r}=W;if(W.getCurrentMode()!=="select"&&W.getStarted()){const t=new Event("mouseup");r("svgcanvas").dispatchEvent(t)}},c5=r=>{var p,d,m,v;if(Eu=!1,r.button===2||!W.getStarted())return;W.textActions.init();const t=W.getSelectedElements(),e=W.getZoom(),i=W.getJustSelected();W.setJustSelected(null);const s=vr(r.clientX,r.clientY,W.getrootSctm()),c=s.x*e,f=s.y*e,a=c/e,n=f/e;let l=wr(W.getId()),h=!1;const o=a,u=n;W.setStarted(!1);let A;switch(W.getCurrentMode()){case"resize":case"multiselect":W.getRubberBox()&&(W.getRubberBox().setAttribute("display","none"),W.setCurBBoxes([])),W.setCurrentMode("select");case"select":if(t[0]){if(!t[1]){const x=t[0];switch(x.tagName){case"g":case"use":case"image":case"foreignObject":break;case"text":W.setCurText("font_size",x.getAttribute("font-size")),W.setCurText("font_family",x.getAttribute("font-family"));default:W.setCurProperties("fill",x.getAttribute("fill")),W.setCurProperties("fill_opacity",x.getAttribute("fill-opacity")),W.setCurProperties("stroke",x.getAttribute("stroke")),W.setCurProperties("stroke_opacity",x.getAttribute("stroke-opacity")),W.setCurProperties("stroke_width",x.getAttribute("stroke-width")),W.setCurProperties("stroke_dasharray",x.getAttribute("stroke-dasharray")),W.setCurProperties("stroke_linejoin",x.getAttribute("stroke-linejoin")),W.setCurProperties("stroke_linecap",x.getAttribute("stroke-linecap"))}W.selectorManager.requestSelector(x).showGrips(!0)}if(W.recalculateAllSelectedDimensions(),o!==W.getRStartX()||u!==W.getRStartY()){const x=t.length;for(let E=0;E<x&&t[E];++E)W.selectorManager.requestSelector(t[E]).resize()}else A=r.target,t[0].nodeName==="path"&&!t[1]?W.pathActions.select(t[0]):r.shiftKey&&i!==A&&W.removeFromSelection([A]);const C=t[0];C&&(C.removeAttribute("style"),GA(C,x=>{x.removeAttribute("style")}))}return;case"zoom":{(p=W.getRubberBox())==null||p.setAttribute("display","none");const C=r.shiftKey?.5:2;W.call("zoomed",{x:Math.min(W.getRStartX(),o),y:Math.min(W.getRStartY(),u),width:Math.abs(o-W.getRStartX()),height:Math.abs(u-W.getRStartY()),factor:C});return}case"fhpath":{W.setSumDistance(0),W.setControllPoint2("x",0),W.setControllPoint2("y",0),W.setControllPoint1("x",0),W.setControllPoint1("y",0),W.setStart({x:0,y:0}),W.setEnd("x",0),W.setEnd("y",0);const C=l.getAttribute("points"),x=C.indexOf(",");h=x>=0?C.includes(",",x+1):C.includes(" ",C.indexOf(" ")+1),h&&(l=W.pathActions.smoothPolylineIntoPath(l));break}case"line":{const C=l.getAttribute("x1"),x=l.getAttribute("y1"),E=l.getAttribute("x2"),L=l.getAttribute("y2");h=C!==E||x!==L}break;case"foreignObject":case"square":case"rect":case"image":{const C=l.getAttribute("width"),x=l.getAttribute("height");h=C||x||W.getCurrentMode()==="image"}break;case"circle":h=l.getAttribute("r")!=="0";break;case"ellipse":{const C=Number(l.getAttribute("rx")),x=Number(l.getAttribute("ry"));h=C||x}break;case"fhellipse":W.getFreehand("maxx")-W.getFreehand("minx")>0&&W.getFreehand("maxy")-W.getFreehand("miny")>0&&(l=W.addSVGElementsFromJson({element:"ellipse",curStyles:!0,attr:{cx:(W.getFreehand("minx")+W.getFreehand("maxx"))/2,cy:(W.getFreehand("miny")+W.getFreehand("maxy"))/2,rx:(W.getFreehand("maxx")-W.getFreehand("minx"))/2,ry:(W.getFreehand("maxy")-W.getFreehand("miny"))/2,id:W.getId()}}),W.call("changed",[l]),h=!0);break;case"fhrect":W.getFreehand("maxx")-W.getFreehand("minx")>0&&W.getFreehand("maxy")-W.getFreehand("miny")>0&&(l=W.addSVGElementsFromJson({element:"rect",curStyles:!0,attr:{x:W.getFreehand("minx"),y:W.getFreehand("miny"),width:W.getFreehand("maxx")-W.getFreehand("minx"),height:W.getFreehand("maxy")-W.getFreehand("miny"),id:W.getId()}}),W.call("changed",[l]),h=!0);break;case"text":h=!0,W.selectOnly([l]),W.textActions.start(l);break;case"path":{l=null,W.setStarted(!0);const C=W.pathActions.mouseUp(r,l,c,f);({element:l}=C),{keep:h}=C;break}case"pathedit":h=!0,l=null,W.pathActions.mouseUp(r);break;case"textedit":h=!1,l=null,W.textActions.mouseUp(r,c,f);break;case"rotate":{h=!0,l=null,W.setCurrentMode("select");const C=W.undoMgr.finishUndoableChange();C.isEmpty()||W.addCommandToHistory(C),W.recalculateAllSelectedDimensions(),W.call("changed",t);break}}if(W.runExtensions("mouseUp",{event:r,mouse_x:c,mouse_y:f},!0).forEach(C=>{C&&(h=C.keep||h,{element:l}=C,W.setStarted(C.started||W.getStarted()))}),!h&&l){for(W.getCurrentDrawing().releaseId(W.getId()),l.remove(),l=null,A=r.target;((m=(d=A==null?void 0:A.parentNode)==null?void 0:d.parentNode)==null?void 0:m.tagName)==="g";)A=A.parentNode;(W.getCurrentMode()!=="path"||!W.getDrawnPath())&&A&&((v=A.parentNode)==null?void 0:v.id)!=="selectorParentGroup"&&A.id!=="svgcanvas"&&A.id!=="svgroot"&&(W.setMode("select"),W.selectOnly([A],!0))}else if(l){W.addedNew=!0;let C=.2,x;const E=W.getStyle(),L=W.getOpacAni();if(L.beginElement&&Number.parseFloat(l.getAttribute("opacity"))!==E.opacity){x=L.cloneNode(!0),x.setAttribute("to",E.opacity),x.setAttribute("dur",C),l.appendChild(x);try{x.beginElement()}catch{}}else C=0;setTimeout(()=>{x&&x.remove(),l.setAttribute("opacity",E.opacity),l.setAttribute("style","pointer-events:inherit"),wu(l),W.getCurrentMode()==="path"?W.pathActions.toEditMode(l):W.getCurConfig().selectNew&&(["circle","ellipse","square","rect","fhpath","line","fhellipse","fhrect","star","polygon"].indexOf(W.getCurrentMode())!==-1&&W.setMode("select"),W.selectOnly([l],!0)),W.addCommandToHistory(new s5(l)),W.call("changed",[l])},C*1e3)}W.setStartTransform(null)},h5=r=>{const t=W.getSelectedElements(),i=r.target.parentNode;let s=W.getMouseTarget(r);const{tagName:c}=s;if(c==="text"&&W.getCurrentMode()!=="textedit"){const f=vr(r.clientX,r.clientY,W.getrootSctm());W.textActions.select(s,f.x,f.y)}i!==W.getCurrentGroup()&&((c==="g"||c==="a")&&Ji(s)&&(W.pushGroupProperties(s),s=t[0],W.clearSelection(!0)),W.getCurrentGroup()&&jA(),!(i.tagName!=="g"&&i.tagName!=="a"||i===W.getCurrentDrawing().getCurrentLayer()||s===W.selectorManager.selectorParentGroup)&&u1(s))},u5=r=>{const t=W.getDataStorage(),e=W.getSelectedElements(),i=W.getZoom(),s=W.getStyle(),c=W.getSvgRoot(),{$id:f}=W;if(W.spaceKey||r.button===1)return;const a=r.button===2;r.altKey&&W.cloneSelectedElements(0,0),W.setRootSctm(f("svgcontent").querySelector("g").getScreenCTM().inverse());const n=vr(r.clientX,r.clientY,W.getrootSctm()),l=n.x*i,h=n.y*i;if(r.preventDefault(),a){if(W.getCurrentMode()==="path")return;W.setCurrentMode("select"),W.setLastClickPoint(n)}let o=l/i,u=h/i,A=W.getMouseTarget(r);A.tagName==="a"&&A.childNodes.length===1&&(A=A.firstChild);const g=o;W.setStartX(o),W.setRStartX(o);const p=u;if(W.setStartY(u),W.setRStartY(u),W.getCurConfig().gridSnapping&&(o=nr(o),u=nr(u),W.setStartX(nr(W.getStartX())),W.setStartY(nr(W.getStartY()))),A===W.selectorManager.selectorParentGroup&&e[0]){const v=r.target,C=t.get(v,"type");C==="rotate"?W.setCurrentMode("rotate"):C==="resize"&&(W.setCurrentMode("resize"),W.setCurrentResizeMode(t.get(v,"dir"))),A=e[0]}W.setStartTransform(A.getAttribute("transform"));const d=Nr(A);if(d.numberOfItems>1){const v=d.getItem(0);d.removeItem(0),d.consolidate(),d.insertItemBefore(v,0)}switch(W.getCurrentMode()){case"select":if(W.setStarted(!0),W.setCurrentResizeMode("none"),a&&W.setStarted(!1),A!==c){if(e.includes(A)||(r.shiftKey||W.clearSelection(!0),W.addToSelection([A]),W.setJustSelected(A),W.pathActions.clear()),!a)for(const v of e){if(!v)continue;const C=Nr(v);C.numberOfItems?C.insertItemBefore(c.createSVGTransform(),0):C.appendItem(c.createSVGTransform())}}else a||(W.clearSelection(),W.setCurrentMode("multiselect"),W.getRubberBox()||W.setRubberBox(W.selectorManager.getRubberBandBox()),W.setRStartX(W.getRStartX()*i),W.setRStartY(W.getRStartY()*i),br(W.getRubberBox(),{x:W.getRStartX(),y:W.getRStartY(),width:0,height:0,display:"inline"}));break;case"zoom":W.setStarted(!0),W.getRubberBox()||W.setRubberBox(W.selectorManager.getRubberBandBox()),br(W.getRubberBox(),{x:g*i,y:g*i,width:0,height:0,display:"inline"});break;case"resize":{W.setStarted(!0),W.setStartX(o),W.setStartY(u),W.setInitBbox(hi(f("selectedBox0")));const v={};for(const[x,E]of Object.entries(W.getInitBbox()))v[x]=E/i;W.setInitBbox(v);const C=Ji(A)?1:0;Qo(d)?(d.insertItemBefore(c.createSVGTransform(),C),d.insertItemBefore(c.createSVGTransform(),C),d.insertItemBefore(c.createSVGTransform(),C)):(d.appendItem(c.createSVGTransform()),d.appendItem(c.createSVGTransform()),d.appendItem(c.createSVGTransform()));break}case"fhellipse":case"fhrect":case"fhpath":W.setStart({x:g,y:p}),W.setControllPoint1("x",0),W.setControllPoint1("y",0),W.setControllPoint2("x",0),W.setControllPoint2("y",0),W.setStarted(!0),W.setDAttr(g+","+p+" "),W.addSVGElementsFromJson({element:"polyline",curStyles:!0,attr:{points:W.getDAttr(),id:W.getNextId(),fill:"none",opacity:s.opacity/2,"stroke-linecap":"round",style:"pointer-events:none"}}),W.setFreehand("minx",g),W.setFreehand("maxx",g),W.setFreehand("miny",p),W.setFreehand("maxy",p);break;case"image":{W.setStarted(!0);const v=W.addSVGElementsFromJson({element:"image",attr:{x:o,y:u,width:0,height:0,id:W.getNextId(),opacity:s.opacity/2,style:"pointer-events:inherit"}});ga(v,W.getLastGoodImgUrl()),ng(v);break}case"square":case"rect":W.setStarted(!0),W.setStartX(o),W.setStartY(u),W.addSVGElementsFromJson({element:"rect",curStyles:!0,attr:{x:o,y:u,width:0,height:0,id:W.getNextId(),opacity:s.opacity/2}});break;case"line":{W.setStarted(!0);const v=Number(s.stroke_width)===0?1:s.stroke_width;W.addSVGElementsFromJson({element:"line",curStyles:!0,attr:{x1:o,y1:u,x2:o,y2:u,id:W.getNextId(),stroke:s.stroke,"stroke-width":v,"stroke-dasharray":s.stroke_dasharray,"stroke-linejoin":s.stroke_linejoin,"stroke-linecap":s.stroke_linecap,"stroke-opacity":s.stroke_opacity,fill:"none",opacity:s.opacity/2,style:"pointer-events:none"}});break}case"circle":W.setStarted(!0),W.addSVGElementsFromJson({element:"circle",curStyles:!0,attr:{cx:o,cy:u,r:0,id:W.getNextId(),opacity:s.opacity/2}});break;case"ellipse":W.setStarted(!0),W.addSVGElementsFromJson({element:"ellipse",curStyles:!0,attr:{cx:o,cy:u,rx:0,ry:0,id:W.getNextId(),opacity:s.opacity/2}});break;case"text":W.setStarted(!0),W.addSVGElementsFromJson({element:"text",curStyles:!0,attr:{x:o,y:u,id:W.getNextId(),fill:W.getCurText("fill"),"stroke-width":W.getCurText("stroke_width"),"font-size":W.getCurText("font_size"),"font-family":W.getCurText("font_family"),"text-anchor":"middle","xml:space":"preserve",opacity:s.opacity}});break;case"path":case"pathedit":W.setStartX(W.getStartX()*i),W.setStartY(W.getStartY()*i),W.pathActions.mouseDown(r,A,W.getStartX(),W.getStartY()),W.setStarted(!0);break;case"textedit":W.setStartX(W.getStartX()*i),W.setStartY(W.getStartY()*i),W.textActions.mouseDown(r,A,W.getStartX(),W.getStartY()),W.setStarted(!0);break;case"rotate":W.setStarted(!0),W.undoMgr.beginUndoableChange("transform",e);break}W.runExtensions("mouseDown",{event:r,start_x:W.getStartX(),start_y:W.getStartY(),selectedElements:e},!0).forEach(v=>{v!=null&&v.started&&W.setStarted(!0)})},f5=r=>{const t=W.getZoom(),{$id:e}=W;if(!r.shiftKey)return;r.preventDefault(),W.setRootSctm(e("svgcontent").querySelector("g").getScreenCTM().inverse());const i=document.getElementById("workarea"),s=15,c=W.getCurConfig().showRulers?16:0,f=vr(r.clientX,r.clientY,W.getrootSctm()),a=parseFloat(getComputedStyle(i,null).width.replace("px","")),n=parseFloat(getComputedStyle(i,null).height.replace("px","")),l=a-s-c,h=n-s-c,o=l*W.getrootSctm().a,u=h*W.getrootSctm().d,A=NS(i),g=A.left+c,p=A.top+c,d=r.wheelDelta?r.wheelDelta:r.detail?-r.detail:0;if(!d)return;let m=Math.max(3/4,Math.min(4/3,d)),v,C;m>1?(v=Math.ceil(l/o*m*100)/100,C=Math.ceil(h/u*m*100)/100):(v=Math.floor(l/o*m*100)/100,C=Math.floor(h/u*m*100)/100);let x=Math.min(v,C);if(x=Math.min(10,Math.max(.01,x)),x===t)return;m=x/t;const E=vr(g,p,W.getrootSctm()),L={x:f.x-(f.x-E.x)/m,y:f.y-(f.y-E.y)/m},U={x:L.x*x,y:L.y*x},O={x:U.x-c+a/2,y:U.y-c+n/2};W.setZoom(x),document.getElementById("zoom").value=(x*100).toFixed(1),W.call("updateCanvas",{center:!1,newCtr:O}),W.call("zoomDone")};/**
 * Tools for SVG handle on JSON format.
 * @module svgcanvas
 * @license MIT
 *
 * @copyright 2010 Alexis Deveria, 2010 Jeff Schiller
 */let Fu=null,mg=null;const d5=r=>{Fu=r,mg=r.getDOMDocument()},m1=r=>{if(r.nodeType===3)return r.nodeValue;const t={element:r.tagName,attr:{},children:[]};for(let e=0,i;i=r.attributes[e];e++)t.attr[i.name]=i.value;for(let e=0,i;i=r.childNodes[e];e++)t.children[e]=m1(i);return t},v1=r=>{if(typeof r=="string")return mg.createTextNode(r);let t=wr(r.attr.id);const e=Fu.getDrawing().getCurrentLayer();if(t&&r.element!==t.tagName&&(t.remove(),t=null),!t){const s=r.namespace||_e.SVG;t=mg.createElementNS(s,r.element),e&&(Fu.getCurrentGroup()||e).append(t)}const i=Fu.getCurShape();return r.curStyles&&br(t,{fill:i.fill,stroke:i.stroke,"stroke-width":i.strokeWidth,"stroke-dasharray":i.stroke_dasharray,"stroke-linejoin":i.stroke_linejoin,"stroke-linecap":i.stroke_linecap,"stroke-opacity":i.stroke_opacity,"fill-opacity":i.fill_opacity,opacity:i.opacity/2,style:"pointer-events:inherit"}),br(t,r.attr),wu(t),r.children&&r.children.forEach(s=>{t.append(v1(s))}),t};/**
 * @module elem-get-set get and set methods.
 * @license MIT
 * @copyright 2011 Jeff Schiller
 */let Lt=null;const g5=r=>{Lt=r,Lt.getBold=L5,Lt.setBold=I5,Lt.getItalic=Q5,Lt.setItalic=N5,Lt.hasTextDecoration=P5,Lt.addTextDecoration=U5,Lt.removeTextDecoration=O5,Lt.setTextAnchor=M5,Lt.setLetterSpacing=k5,Lt.setWordSpacing=D5,Lt.setTextLength=R5,Lt.setLengthAdjust=H5,Lt.getFontFamily=G5,Lt.setFontFamily=V5,Lt.setFontColor=j5,Lt.getFontColor=K5,Lt.getFontSize=W5,Lt.setFontSize=X5,Lt.getText=z5,Lt.setTextContent=q5,Lt.setImageURL=$5,Lt.setLinkURL=Y5,Lt.setRectRadius=J5,Lt.makeHyperlink=Z5,Lt.removeHyperlink=t_,Lt.setSegType=e_,Lt.setStrokeWidth=F5,Lt.getResolution=p5,Lt.getTitle=m5,Lt.setGroupTitle=v5,Lt.setStrokeAttr=T5,Lt.setBackground=r_,Lt.setDocumentTitle=y5,Lt.getEditorNS=b5,Lt.setResolution=w5,Lt.setBBoxZoom=C5,Lt.setCurrentZoom=B5,Lt.setColor=S5,Lt.setGradient=x5,Lt.setPaint=E5},p5=()=>{const r=Lt.getZoom(),t=Lt.getSvgContent().getAttribute("width")/r,e=Lt.getSvgContent().getAttribute("height")/r;return{w:t,h:e,zoom:r}},m5=r=>{const t=Lt.getSelectedElements(),e=Lt.getDataStorage();if(r=r||t[0],!r)return;e.has(r,"gsvg")?r=e.get(r,"gsvg"):e.has(r,"symbol")&&(r=e.get(r,"symbol"));const i=r.childNodes;for(const s of i)if(s.nodeName==="title")return s.textContent;return""},v5=r=>{const{InsertElementCommand:t,RemoveElementCommand:e,ChangeElementCommand:i,BatchCommand:s}=Lt.history,c=Lt.getSelectedElements(),f=Lt.getDataStorage();let a=c[0];f.has(a,"gsvg")&&(a=f.get(a,"gsvg"));const n=a.querySelectorAll("title"),l=new s("Set Label");let h;if(r.length===0){const o=n.nextSibling;l.addSubCommand(new e(n[0],o,a)),n.remove()}else n.length?(h=n[0],l.addSubCommand(new i(h,{"#text":h.textContent})),h.textContent=r):(h=Lt.getDOMDocument().createElementNS(_e.SVG,"title"),h.textContent=r,a.insertBefore(h,a.firstChild),l.addSubCommand(new t(h)));Lt.addCommandToHistory(l)},y5=r=>{const{ChangeElementCommand:t,BatchCommand:e}=Lt.history,i=Lt.getSvgContent().childNodes;let s=!1,c="";const f=new e("Change Image Title");for(const a of i)if(a.nodeName==="title"){s=a,c=s.textContent;break}s||(s=Lt.getDOMDocument().createElementNS(_e.SVG,"title"),Lt.getSvgContent().insertBefore(s,Lt.getSvgContent().firstChild)),r.length?s.textContent=r:s.remove(),f.addSubCommand(new t(s,{"#text":c})),Lt.addCommandToHistory(f)},w5=(r,t)=>{const{ChangeElementCommand:e,BatchCommand:i}=Lt.history,s=Lt.getZoom(),c=Lt.getResolution(),{w:f,h:a}=c;let n;if(r==="fit"){const l=js();if(l){n=new i("Fit Canvas to Content");const h=th();Lt.addToSelection(h);const o=[],u=[];h.forEach((g,p)=>{o.push(l.x*-1),u.push(l.y*-1)});const A=Lt.moveSelectedElements(o,u,!0);n.addSubCommand(A),Lt.clearSelection(),r=Math.round(l.width),t=Math.round(l.height)}else return!1}return(r!==f||t!==a)&&(n||(n=new i("Change Image Dimensions")),r=za("width",r),t=za("height",t),Lt.getSvgContent().setAttribute("width",r),Lt.getSvgContent().setAttribute("height",t),Lt.contentW=r,Lt.contentH=t,n.addSubCommand(new e(Lt.getSvgContent(),{width:f,height:a})),Lt.getSvgContent().setAttribute("viewBox",[0,0,r/s,t/s].join(" ")),n.addSubCommand(new e(Lt.getSvgContent(),{viewBox:["0 0",f,a].join(" ")})),Lt.addCommandToHistory(n),Lt.call("changed",[Lt.getSvgContent()])),!0},b5=r=>(r&&Lt.getSvgContent().setAttribute("xmlns:se",_e.SE),_e.SE),C5=(r,t,e)=>{const i=Lt.getZoom(),s=Lt.getSelectedElements();let c=.85,f;const a=n=>{if(!n)return!1;const l=Math.round(t/n.width*100*c)/100,h=Math.round(e/n.height*100*c)/100,o=Math.min(l,h);return Lt.setZoom(o),{zoom:o,bbox:n}};if(typeof r=="object"){if(f=r,f.width===0||f.height===0){const n=f.zoom?f.zoom:i*f.factor;return Lt.setZoom(n),{zoom:i,bbox:f}}return a(f)}switch(r){case"selection":{if(!s[0])return;const n=s.map((l,h)=>{if(l)return l});f=js(n);break}case"canvas":{const n=Lt.getResolution();c=.95,f={width:n.w,height:n.h,x:0,y:0};break}case"content":f=js();break;case"layer":f=js(th(Lt.getCurrentDrawing().getCurrentLayer()));break;default:return}return a(f)},B5=r=>{const t=Lt.getSelectedElements(),e=Lt.getResolution();Lt.getSvgContent().setAttribute("viewBox","0 0 "+e.w/r+" "+e.h/r),Lt.setZoom(r),t.forEach(i=>{i&&Lt.selectorManager.requestSelector(i).resize()}),Lt.pathActions.zoomChange(),Lt.runExtensions("zoomChanged",r)},S5=(r,t,e)=>{const i=Lt.getSelectedElements();Lt.setCurShape(r,t),Lt.setCurProperties(r+"_paint",{type:"solidColor"});const s=[],c=a=>{a.nodeName!=="g"&&s.push(a)};let f=i.length;for(;f--;){const a=i[f];a&&(a.tagName==="g"?GA(a,c):r==="fill"?a.tagName!=="polyline"&&a.tagName!=="line"&&s.push(a):s.push(a))}s.length>0&&(e?Lt.changeSelectedAttributeNoUndo(r,t,s):(Lt.changeSelectedAttribute(r,t,s),Lt.call("changed",s)))},x5=r=>{if(!Lt.getCurProperties(r+"_paint")||Lt.getCurProperties(r+"_paint").type==="solidColor")return;let e=Lt[r+"Grad"];const i=_5(e),s=ms();i?e=i:(e=Lt.getDOMDocument().importNode(e,!0),s.append(e),e.id=Lt.getNextId()),Lt.setColor(r,"url(#"+e.id+")")},_5=r=>{const e=ms().querySelectorAll("linearGradient, radialGradient");let i=e.length;const s=["r","cx","cy","fx","fy"];for(;i--;){const c=e[i];if(r.tagName==="linearGradient"){if(r.getAttribute("x1")!==c.getAttribute("x1")||r.getAttribute("y1")!==c.getAttribute("y1")||r.getAttribute("x2")!==c.getAttribute("x2")||r.getAttribute("y2")!==c.getAttribute("y2"))continue}else{const l={r:Number(r.getAttribute("r")),cx:Number(r.getAttribute("cx")),cy:Number(r.getAttribute("cy")),fx:Number(r.getAttribute("fx")),fy:Number(r.getAttribute("fy"))},h={r:Number(c.getAttribute("r")),cx:Number(c.getAttribute("cx")),cy:Number(c.getAttribute("cy")),fx:Number(c.getAttribute("fx")),fy:Number(c.getAttribute("fy"))};let o=!1;if(s.forEach(u=>{l[u]!==h[u]&&(o=!0)}),o)continue}const f=r.getElementsByTagNameNS(_e.SVG,"stop"),a=c.getElementsByTagNameNS(_e.SVG,"stop");if(f.length!==a.length)continue;let n=f.length;for(;n--;){const l=f[n],h=a[n];if(l.getAttribute("offset")!==h.getAttribute("offset")||l.getAttribute("stop-opacity")!==h.getAttribute("stop-opacity")||l.getAttribute("stop-color")!==h.getAttribute("stop-color"))break}if(n===-1)return c}return null},E5=(r,t)=>{const e=new _v(t);switch(Lt.setPaintOpacity(r,e.alpha/100,!0),Lt.setCurProperties(r+"_paint",e),e.type){case"solidColor":Lt.setColor(r,e.solidColor!=="none"?"#"+e.solidColor:"none");break;case"linearGradient":case"radialGradient":Lt.setCanvas(r+"Grad",e[e.type]),Lt.setGradient(r);break}},F5=r=>{const t=Lt.getSelectedElements();if(r===0&&["line","path"].includes(Lt.getMode())){Lt.setStrokeWidth(1);return}Lt.setCurProperties("stroke_width",r);const e=[],i=c=>{c.nodeName!=="g"&&e.push(c)};let s=t.length;for(;s--;){const c=t[s];c&&(c.tagName==="g"?GA(c,i):e.push(c))}e.length>0&&(Lt.changeSelectedAttribute("stroke-width",r,e),Lt.call("changed",t))},T5=(r,t)=>{const e=Lt.getSelectedElements();Lt.setCurShape(r.replace("-","_"),t);const i=[];let s=e.length;for(;s--;){const c=e[s];c&&(c.tagName==="g"?GA(c,f=>{f.nodeName!=="g"&&i.push(f)}):i.push(c))}i.length>0&&(Lt.changeSelectedAttribute(r,t,i),Lt.call("changed",e))},L5=()=>Lt.getSelectedElements().filter(e=>(e==null?void 0:e.tagName)==="text").every(e=>e.getAttribute("font-weight")==="bold"),I5=r=>{const e=Lt.getSelectedElements().filter(i=>(i==null?void 0:i.tagName)==="text");Lt.changeSelectedAttribute("font-weight",r?"bold":"normal",e),e.some(i=>i.textContent)||Lt.textActions.setCursor()},P5=r=>Lt.getSelectedElements().filter(i=>(i==null?void 0:i.tagName)==="text").every(i=>(i.getAttribute("text-decoration")||"").includes(r)),U5=r=>{const{ChangeElementCommand:t,BatchCommand:e}=Lt.history,s=Lt.getSelectedElements().filter(f=>(f==null?void 0:f.tagName)==="text"),c=new e;s.forEach(f=>{const a=f.getAttribute("text-decoration")||"";a.includes(r)||(c.addSubCommand(new t(f,{"text-decoration":a})),Lt.changeSelectedAttributeNoUndo("text-decoration",(a+" "+r).trim(),[f]))}),c.isEmpty()||Lt.undoMgr.addCommandToHistory(c),s.some(f=>f.textContent)||Lt.textActions.setCursor()},O5=r=>{const{ChangeElementCommand:t,BatchCommand:e}=Lt.history,s=Lt.getSelectedElements().filter(f=>(f==null?void 0:f.tagName)==="text"),c=new e;s.forEach(f=>{const a=f.getAttribute("text-decoration")||"";c.addSubCommand(new t(f,{"text-decoration":a})),Lt.changeSelectedAttributeNoUndo("text-decoration",a.replace(r,"").trim(),[f])}),c.isEmpty()||Lt.undoMgr.addCommandToHistory(c),s.some(f=>f.textContent)||Lt.textActions.setCursor()},Q5=()=>Lt.getSelectedElements().filter(e=>(e==null?void 0:e.tagName)==="text").every(e=>e.getAttribute("font-style")==="italic"),N5=r=>{const e=Lt.getSelectedElements().filter(i=>(i==null?void 0:i.tagName)==="text");Lt.changeSelectedAttribute("font-style",r?"italic":"normal",e),e.some(i=>i.textContent)||Lt.textActions.setCursor()},M5=r=>{const e=Lt.getSelectedElements().filter(i=>(i==null?void 0:i.tagName)==="text");Lt.changeSelectedAttribute("text-anchor",r,e)},k5=r=>{const e=Lt.getSelectedElements().filter(i=>(i==null?void 0:i.tagName)==="text");Lt.changeSelectedAttribute("letter-spacing",r,e),e.some(i=>i.textContent)||Lt.textActions.setCursor()},D5=r=>{const e=Lt.getSelectedElements().filter(i=>(i==null?void 0:i.tagName)==="text");Lt.changeSelectedAttribute("word-spacing",r,e),e.some(i=>i.textContent)||Lt.textActions.setCursor()},R5=r=>{const e=Lt.getSelectedElements().filter(i=>(i==null?void 0:i.tagName)==="text");Lt.changeSelectedAttribute("textLength",r,e),e.some(i=>i.textContent)||Lt.textActions.setCursor()},H5=r=>{const e=Lt.getSelectedElements().filter(i=>(i==null?void 0:i.tagName)==="text");Lt.changeSelectedAttribute("lengthAdjust",r,e),e.some(i=>i.textContent)||Lt.textActions.setCursor()},G5=()=>Lt.getCurText("font_family"),V5=r=>{const e=Lt.getSelectedElements().filter(i=>(i==null?void 0:i.tagName)==="text");Lt.setCurText("font_family",r),Lt.changeSelectedAttribute("font-family",r,e),e.some(i=>i.textContent)||Lt.textActions.setCursor()},j5=r=>{Lt.setCurText("fill",r),Lt.changeSelectedAttribute("fill",r)},K5=()=>Lt.getCurText("fill"),W5=()=>Lt.getCurText("font_size"),X5=r=>{var e;const t=Lt.getSelectedElements();Lt.setCurText("font_size",r),Lt.changeSelectedAttribute("font-size",r),(e=t[0])!=null&&e.textContent||Lt.textActions.setCursor()},z5=()=>{const t=Lt.getSelectedElements()[0];return t?t.textContent:""},q5=r=>{Lt.changeSelectedAttribute("#text",r),Lt.textActions.init(r),Lt.textActions.setCursor()},$5=r=>{const{ChangeElementCommand:t,BatchCommand:e}=Lt.history,s=Lt.getSelectedElements()[0];if(!s)return;const c={width:s.getAttribute("width"),height:s.getAttribute("height")},f=!c.width||!c.height,a=$a(s);if(a===r&&!f)return;const n=new e("Change Image URL");ga(s,r),n.addSubCommand(new t(s,{"#href":a}));const l=new Image;l.onload=function(){const h={width:s.getAttribute("width"),height:s.getAttribute("height")};s.setAttribute("width",this.width),s.setAttribute("height",this.height),Lt.selectorManager.requestSelector(s).resize(),n.addSubCommand(new t(s,h)),Lt.addCommandToHistory(n),Lt.call("changed",[s])},l.src=r},Y5=r=>{const{ChangeElementCommand:t,BatchCommand:e}=Lt.history;let s=Lt.getSelectedElements()[0];if(!s)return;if(s.tagName!=="a"){const a=Jc(s.parentNode,"a");if(a!=null&&a.length)s=a[0];else return}const c=$a(s);if(c===r)return;const f=new e("Change Link URL");ga(s,r),f.addSubCommand(new t(s,{"#href":c})),Lt.addCommandToHistory(f)},J5=r=>{const{ChangeElementCommand:t}=Lt.history,i=Lt.getSelectedElements()[0];if((i==null?void 0:i.tagName)==="rect"){const s=Number(i.getAttribute("rx"));s!==r&&(i.setAttribute("rx",r),i.setAttribute("ry",r),Lt.addCommandToHistory(new t(i,{rx:s,ry:s},"Radius")),Lt.call("changed",[i]))}},Z5=r=>{Lt.groupSelectedElements("a",r)},t_=()=>{Lt.ungroupSelectedElement()},e_=r=>{Lt.pathActions.setSegType(r)},r_=(r,t)=>{const e=wr("canvasBackground"),i=e.querySelector("rect");let s=wr("background_image"),c=wr("background_pattern");if(i.setAttribute("fill",r==="chessboard"?"#fff":r),r==="chessboard"){if(!c){c=Lt.getDOMDocument().createElementNS(_e.SVG,"foreignObject"),Lt.assignAttributes(c,{id:"background_pattern",width:"100%",height:"100%",preserveAspectRatio:"xMinYMin",style:"pointer-events:none"});const f=document.createElement("div");Lt.assignAttributes(f,{style:"pointer-events:none;width:100%;height:100%;background-image:url(data:image/gif;base64,R0lGODlhEAAQAIAAAP///9bW1iH5BAAAAAAALAAAAAAQABAAAAIfjG+gq4jM3IFLJgpswNly/XkcBpIiVaInlLJr9FZWAQA7);"}),c.append(f),e.append(c)}}else c&&c.remove();t?(s||(s=Lt.getDOMDocument().createElementNS(_e.SVG,"image"),Lt.assignAttributes(s,{id:"background_image",width:"100%",height:"100%",preserveAspectRatio:"xMinYMin",style:"pointer-events:none"})),ga(s,t),e.append(s)):s&&s.remove()};/**
 * Manipulating coordinates.
 * @module coords
 * @license MIT
 */const i_=[0,"z","M","m","L","l","C","c","Q","q","A","a","H","h","V","v","S","s","T","t"];let Hl=null;const n_=r=>{Hl=r},Tu=(r,t,e)=>{const i=(h,o)=>vr(h,o,e),s=h=>e.a*h,c=h=>e.d*h,f=Hl.getGridSnapping()&&r.parentNode.parentNode.localName==="svg",a=()=>{f&&Object.entries(t).forEach(([h,o])=>{t[h]=nr(o)}),br(r,t,1e3,!0)},n=hi(r);["fill","stroke"].forEach(h=>{const o=r.getAttribute(h);if(o!=null&&o.startsWith("url(")&&(e.a<0||e.d<0)){const A=VA(o).cloneNode(!0);if(e.a<0){const g=A.getAttribute("x1"),p=A.getAttribute("x2");A.setAttribute("x1",-(g-1)),A.setAttribute("x2",-(p-1))}if(e.d<0){const g=A.getAttribute("y1"),p=A.getAttribute("y2");A.setAttribute("y1",-(g-1)),A.setAttribute("y2",-(p-1))}A.id=Hl.getCurrentDrawing().getNextId(),ms().append(A),r.setAttribute(h,"url(#"+A.id+")")}});const l=r.tagName;if(l==="g"||l==="text"||l==="tspan"||l==="use")if(e.a===1&&e.b===0&&e.c===0&&e.d===1&&(e.e!==0||e.f!==0)){const h=yr(r).matrix,o=Fi(h.inverse(),e,h);t.x=Number.parseFloat(t.x)+o.e,t.y=Number.parseFloat(t.y)+o.f}else{const h=Nr(r),o=Hl.getSvgRoot().createSVGTransform();o.setMatrix(Fi(yr(h).matrix,e)),h.clear(),h.appendItem(o)}switch(l){case"foreignObject":case"rect":case"image":{if(l==="image"&&(e.a<0||e.d<0)){const h=Nr(r),o=Hl.getSvgRoot().createSVGTransform();o.setMatrix(Fi(yr(h).matrix,e)),h.clear(),h.appendItem(o)}else{const h=i(t.x,t.y);t.width=s(t.width),t.height=c(t.height),t.x=h.x+Math.min(0,t.width),t.y=h.y+Math.min(0,t.height),t.width=Math.abs(t.width),t.height=Math.abs(t.height)}a();break}case"ellipse":{const h=i(t.cx,t.cy);t.cx=h.x,t.cy=h.y,t.rx=s(t.rx),t.ry=c(t.ry),t.rx=Math.abs(t.rx),t.ry=Math.abs(t.ry),a();break}case"circle":{const h=i(t.cx,t.cy);t.cx=h.x,t.cy=h.y;const o=qd(n.x,n.y,n.width,n.height,e),u=o.tr.x-o.tl.x,A=o.bl.y-o.tl.y;t.r=Math.min(u/2,A/2),t.r&&(t.r=Math.abs(t.r)),a();break}case"line":{const h=i(t.x1,t.y1),o=i(t.x2,t.y2);t.x1=h.x,t.y1=h.y,t.x2=o.x,t.y2=o.y}case"text":case"tspan":case"use":{a();break}case"g":{const o=Hl.getDataStorage().get(r,"gsvg");o&&br(o,t,1e3,!0);break}case"polyline":case"polygon":{t.points.forEach(o=>{const{x:u,y:A}=i(o.x,o.y);o.x=u,o.y=A});let h="";t.points.forEach(o=>{h+=o.x+","+o.y+" "}),r.setAttribute("points",h);break}case"path":{const h=r.pathSegList;let o=h.numberOfItems;t.d=[];for(let p=0;p<o;++p){const d=h.getItem(p);t.d[p]={type:d.pathSegType,x:d.x,y:d.y,x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,r1:d.r1,r2:d.r2,angle:d.angle,largeArcFlag:d.largeArcFlag,sweepFlag:d.sweepFlag}}o=t.d.length;const u=t.d[0];let A;o>0&&(A=i(u.x,u.y),t.d[0].x=A.x,t.d[0].y=A.y);for(let p=1;p<o;++p){const d=t.d[p],{type:m}=d;if(m%2===0){const v=d.x!==void 0?d.x:A.x,C=d.y!==void 0?d.y:A.y,x=i(v,C),E=i(d.x1,d.y1),L=i(d.x2,d.y2);d.x=x.x,d.y=x.y,d.x1=E.x,d.y1=E.y,d.x2=L.x,d.y2=L.y,d.r1=s(d.r1),d.r2=c(d.r2)}else d.x=s(d.x),d.y=c(d.y),d.x1=s(d.x1),d.y1=c(d.y1),d.x2=s(d.x2),d.y2=c(d.y2),d.r1=s(d.r1),d.r2=c(d.r2)}let g="";t.d.forEach(p=>{const{type:d}=p;switch(g+=i_[d],d){case 13:case 12:g+=p.x+" ";break;case 15:case 14:g+=p.y+" ";break;case 3:case 5:case 19:case 2:case 4:case 18:g+=p.x+","+p.y+" ";break;case 7:case 6:g+=p.x1+","+p.y1+" "+p.x2+","+p.y2+" "+p.x+","+p.y+" ";break;case 9:case 8:g+=p.x1+","+p.y1+" "+p.x+","+p.y+" ";break;case 11:case 10:g+=p.r1+","+p.r2+" "+p.angle+" "+Number(p.largeArcFlag)+" "+Number(p.sweepFlag)+" "+p.x+","+p.y+" ";break;case 17:case 16:g+=p.x2+","+p.y2+" "+p.x+","+p.y+" ";break}}),r.setAttribute("d",g);break}}};/**
 * Recalculate.
 * @module recalculate
 * @license MIT
 */let Zi;const s_=r=>{Zi=r},a_=(r,t,e)=>{const i=VA(r).firstChild,s=Nr(i),c=Zi.getSvgRoot().createSVGTransform();c.setTranslate(t,e),s.appendItem(c),Is(i)},Is=r=>{if(!r)return null;const t=Zi.getSvgRoot(),e=Zi.getDataStorage(),i=Nr(r);if((i==null?void 0:i.numberOfItems)>0){let o=i.numberOfItems;const u=o;for(;o--;){const A=i.getItem(o);if(A.type===0)i.removeItem(o);else if(A.type===1){if(Iv(A.matrix)){if(u===1)return r.removeAttribute("transform"),null;i.removeItem(o)}}else A.type===4&&A.angle===0&&i.removeItem(o)}if(i.numberOfItems===1&&Ji(r))return null}if(!i||i.numberOfItems===0)return r.setAttribute("transform",""),r.removeAttribute("transform"),null;if(i){let o=[],u=i.numberOfItems;for(;u--;){const A=i.getItem(u);A.type===1?o.push([A.matrix,u]):o.length&&(o=[])}if(o.length===2){const A=t.createSVGTransformFromMatrix(Fi(o[1][0],o[0][0]));i.removeItem(o[0][1]),i.removeItem(o[1][1]),i.insertItemBefore(A,o[1][1])}if(u=i.numberOfItems,u>=2&&i.getItem(u-2).type===1&&i.getItem(u-1).type===2){const A=t.createSVGTransform(),g=Fi(i.getItem(u-2).matrix,i.getItem(u-1).matrix);A.setMatrix(g),i.removeItem(u-2),i.removeItem(u-2),i.appendItem(A)}}switch(r.tagName){case"line":case"polyline":case"polygon":case"path":break;default:if(i.numberOfItems===1&&i.getItem(0).type===1||i.numberOfItems===2&&i.getItem(0).type===1&&i.getItem(0).type===4)return null}const s=e.has(r,"gsvg")?e.get(r,"gsvg"):void 0,c=new rh("Transform");let f={},a=null,n=[];switch(r.tagName){case"line":n=["x1","y1","x2","y2"];break;case"circle":n=["cx","cy","r"];break;case"ellipse":n=["cx","cy","rx","ry"];break;case"foreignObject":case"rect":case"image":n=["width","height","x","y"];break;case"use":case"text":case"tspan":n=["x","y"];break;case"polygon":case"polyline":{a={},a.points=r.getAttribute("points");const o=r.points,u=o.numberOfItems;f.points=new Array(u);for(let A=0;A<u;++A){const g=o.getItem(A);f.points[A]={x:g.x,y:g.y}}break}case"path":a={},a.d=r.getAttribute("d"),f.d=r.getAttribute("d");break}if(n.length?n.forEach(o=>{f[o]=za(o,r.getAttribute(o))}):s&&(f={x:Number(s.getAttribute("x"))||0,y:Number(s.getAttribute("y"))||0}),!a){a=$c({},f);for(const[o,u]of Object.entries(a))a[o]=za(o,u)}a.transform=Zi.getStartTransform()||"";let l,h;if(r.tagName==="g"&&!s||r.tagName==="a"){const o=hi(r);l={x:o.x+o.width/2,y:o.y+o.height/2},h=vr(o.x+o.width/2,o.y+o.height/2,yr(i).matrix);const u=Ji(r);if(u){const C=u*Math.PI/180,x=Math.abs(C)>1e-10?Math.sin(C)/(1-Math.cos(C)):2/C;for(let E=0;E<i.numberOfItems;++E){const L=i.getItem(E);if(L.type===4){const U=L.matrix;l.y=(x*U.e+U.f)/2,l.x=(U.e-x*U.f)/2,i.removeItem(E);break}}}const A=i.numberOfItems;let g=0,p=0,d=0,m;A&&(m=i.getItem(0).matrix);let v;if(A>=3&&i.getItem(A-2).type===3&&i.getItem(A-3).type===2&&i.getItem(A-1).type===2){d=3;const C=i.getItem(A-3).matrix,x=i.getItem(A-2).matrix,E=i.getItem(A-1).matrix,L=r.childNodes;let U=L.length;for(;U--;){const O=L.item(U);if(g=0,p=0,O.nodeType===1){const X=Nr(O);if(!X)continue;const rt=yr(X).matrix,M=Ji(O);if(v=Zi.getStartTransform(),Zi.setStartTransform(O.getAttribute("transform")),M||Qo(X)){const J=t.createSVGTransform();J.setMatrix(Fi(C,x,E,rt)),X.clear(),X.appendItem(J)}else{const J=Fi(rt.inverse(),E,rt),$=t.createSVGMatrix();$.e=-J.e,$.f=-J.f;const ht=Fi($.inverse(),rt.inverse(),C,x,E,rt,J.inverse()),ut=t.createSVGTransform(),pt=t.createSVGTransform(),ft=t.createSVGTransform();ut.setTranslate(J.e,J.f),pt.setScale(ht.a,ht.d),ft.setTranslate($.e,$.f),X.appendItem(ft),X.appendItem(pt),X.appendItem(ut)}const H=Is(O);H&&c.addSubCommand(H),Zi.setStartTransform(v)}}i.removeItem(A-1),i.removeItem(A-2),i.removeItem(A-3)}else if(A>=3&&i.getItem(A-1).type===1){d=3;const C=yr(i).matrix,x=t.createSVGTransform();x.setMatrix(C),i.clear(),i.appendItem(x)}else if((A===1||A>1&&i.getItem(1).type!==3)&&i.getItem(0).type===2){d=2;const C=yr(i).matrix;i.removeItem(0);const x=yr(i).matrix.inverse(),E=Fi(x,C);if(g=E.e,p=E.f,g!==0||p!==0){const L=r.childNodes;let U=L.length;const O=[];for(;U--;){const X=L.item(U);if(X.nodeType===1){if(X.getAttribute("clip-path")){const M=X.getAttribute("clip-path");O.includes(M)||(a_(M,g,p),O.push(M))}v=Zi.getStartTransform(),Zi.setStartTransform(X.getAttribute("transform"));const rt=Nr(X);if(rt){const M=t.createSVGTransform();M.setTranslate(g,p),rt.numberOfItems?rt.insertItemBefore(M,0):rt.appendItem(M);const H=Is(X);H&&c.addSubCommand(H);const J=r.getElementsByTagNameNS(_e.SVG,"use"),$="#"+X.id;let ht=J.length;for(;ht--;){const ut=J.item(ht);if($===$a(ut)){const pt=t.createSVGTransform();pt.setTranslate(-g,-p),ut.transform.baseVal.insertItemBefore(pt,0),c.addSubCommand(Is(ut))}}Zi.setStartTransform(v)}}}Zi.setStartTransform(v)}}else if(A===1&&i.getItem(0).type===1&&!u){d=1;const C=i.getItem(0).matrix,x=r.childNodes;let E=x.length;for(;E--;){const L=x.item(E);if(L.nodeType===1){v=Zi.getStartTransform(),Zi.setStartTransform(L.getAttribute("transform"));const U=Nr(L);if(!U)continue;const O=Fi(C,yr(U).matrix),X=t.createSVGTransform();X.setMatrix(O),U.clear(),U.appendItem(X,0);const rt=Is(L);rt&&c.addSubCommand(rt),Zi.setStartTransform(v);const M=L.getAttribute("stroke-width");if(L.getAttribute("stroke")!=="none"&&!isNaN(M)){const H=(Math.abs(O.a)+Math.abs(O.d))/2;L.setAttribute("stroke-width",M*H)}}}i.clear()}else{if(u){const C=t.createSVGTransform();C.setRotate(u,h.x,h.y),i.numberOfItems?i.insertItemBefore(C,0):i.appendItem(C)}return i.numberOfItems===0&&r.removeAttribute("transform"),null}if(d===2){if(u){h={x:l.x+m.e,y:l.y+m.f};const C=t.createSVGTransform();C.setRotate(u,h.x,h.y),i.numberOfItems?i.insertItemBefore(C,0):i.appendItem(C)}}else if(d===3){const C=yr(i).matrix,x=t.createSVGTransform();x.setRotate(u,l.x,l.y);const E=x.matrix,L=t.createSVGTransform();L.setRotate(u,h.x,h.y);const U=L.matrix.inverse(),O=C.inverse(),X=Fi(O,U,E,C);if(g=X.e,p=X.f,g!==0||p!==0){const rt=r.childNodes;let M=rt.length;for(;M--;){const H=rt.item(M);if(H.nodeType===1){v=Zi.getStartTransform(),Zi.setStartTransform(H.getAttribute("transform"));const J=Nr(H),$=t.createSVGTransform();$.setTranslate(g,p),J.numberOfItems?J.insertItemBefore($,0):J.appendItem($);const ht=Is(H);ht&&c.addSubCommand(ht),Zi.setStartTransform(v)}}}u&&(i.numberOfItems?i.insertItemBefore(L,0):i.appendItem(L))}}else{const o=hi(r);if(!o&&r.tagName!=="path")return null;let u;const A=Ji(r);if(A){l={x:o.x+o.width/2,y:o.y+o.height/2},h=vr(o.x+o.width/2,o.y+o.height/2,yr(i).matrix);const m=A*Math.PI/180,v=Math.abs(m)>1e-10?Math.sin(m)/(1-Math.cos(m)):2/m;for(let C=0;C<i.numberOfItems;++C){const x=i.getItem(C);if(x.type===4){const E=x.matrix;l.y=(v*E.e+E.f)/2,l.x=(E.e-v*E.f)/2,i.removeItem(C);break}}}let g=0;const p=i.numberOfItems,d=r.getAttribute("fill");if(d!=null&&d.startsWith("url(")){const m=VA(d);if(m){let v="pattern";if((m==null?void 0:m.tagName)!==v&&(v="gradient"),m.getAttribute(v+"Units")==="userSpaceOnUse"){u=yr(i).matrix;const x=Nr(m),E=yr(x).matrix;u=Fi(u,E);const L="matrix("+[u.a,u.b,u.c,u.d,u.e,u.f].join(",")+")";m.setAttribute(v+"Transform",L)}}}if(p>=3&&i.getItem(p-2).type===3&&i.getItem(p-3).type===2&&i.getItem(p-1).type===2)g=3,u=yr(i,p-3,p-1).matrix,i.removeItem(p-1),i.removeItem(p-2),i.removeItem(p-3);else if(p===4&&i.getItem(p-1).type===1){g=3,u=yr(i).matrix;const m=t.createSVGTransform();m.setMatrix(u),i.clear(),i.appendItem(m),u=t.createSVGMatrix()}else if((p===1||p>1&&i.getItem(1).type!==3)&&i.getItem(0).type===2){g=2;const m=i.getItem(0).matrix,v=yr(i,1).matrix,C=v.inverse();u=Fi(C,m,v),i.removeItem(0)}else if(p===1&&i.getItem(0).type===1&&!A)switch(u=yr(i).matrix,r.tagName){case"line":f={x1:r.getAttribute("x1"),y1:r.getAttribute("y1"),x2:r.getAttribute("x2"),y2:r.getAttribute("y2")};case"polyline":case"polygon":if(f.points=r.getAttribute("points"),f.points){const m=r.points,v=m.numberOfItems;f.points=new Array(v);for(let C=0;C<v;++C){const x=m.getItem(C);f.points[C]={x:x.x,y:x.y}}}case"path":f.d=r.getAttribute("d"),g=1,i.clear();break}else{if(A){const m=t.createSVGTransform();m.setRotate(A,h.x,h.y),i.numberOfItems?i.insertItemBefore(m,0):i.appendItem(m)}return i.numberOfItems===0&&r.removeAttribute("transform"),null}if((g===1||g===2||g===3)&&Tu(r,f,u),g===2){if(A){Qo(i)||(h={x:l.x+u.e,y:l.y+u.f});const m=t.createSVGTransform();m.setRotate(A,h.x,h.y),i.numberOfItems?i.insertItemBefore(m,0):i.appendItem(m)}if(r.tagName==="text"){const m=r.childNodes;let v=m.length;for(;v--;){const C=m.item(v);if(C.tagName==="tspan"){const x={x:Number(C.getAttribute("x"))||0,y:Number(C.getAttribute("y"))||0};Tu(C,x,u)}}}}else if(g===3&&A){const{matrix:m}=yr(i),v=t.createSVGTransform();v.setRotate(A,l.x,l.y);const C=v.matrix,x=t.createSVGTransform();x.setRotate(A,h.x,h.y);const E=x.matrix.inverse(),L=m.inverse(),U=Fi(L,E,C,m);Tu(r,f,U),A&&(i.numberOfItems?i.insertItemBefore(x,0):i.appendItem(x))}}return i.numberOfItems===0&&r.removeAttribute("transform"),c.addSubCommand(new Ml(r,a)),c};/**
 * Tools for SVG selected element operation.
 * @module selected-elem
 * @license MIT
 *
 * @copyright 2010 Alexis Deveria, 2010 Jeff Schiller
 */const{MoveElementCommand:ch,BatchCommand:Vo,InsertElementCommand:vg,RemoveElementCommand:hh,ChangeElementCommand:A_}=No;let ee=null;const o_=r=>{ee=r,ee.copySelectedElements=v_,ee.groupSelectedElements=y_,ee.pushGroupProperties=wg,ee.ungroupSelectedElement=w_,ee.moveToTopSelectedElement=l_,ee.moveToBottomSelectedElement=c_,ee.moveUpDownSelected=h_,ee.moveSelectedElements=yg,ee.cloneSelectedElements=u_,ee.alignSelectedElements=f_,ee.updateCanvas=b_,ee.cycleElement=C_,ee.deleteSelectedElements=m_},l_=()=>{const[r]=ee.getSelectedElements();if(r){const t=r,e=t.parentNode,i=t.nextSibling;t.parentNode.append(t),i!==t.nextSibling&&(ee.addCommandToHistory(new ch(t,i,e,"top")),ee.call("changed",[t]))}},c_=()=>{const[r]=ee.getSelectedElements();if(r){let t=r;const e=t.parentNode,i=t.nextSibling;let{firstChild:s}=t.parentNode;s.tagName==="title"&&(s=s.nextSibling),s.tagName==="defs"&&(s=s.nextSibling),t=t.parentNode.insertBefore(t,s),i!==t.nextSibling&&(ee.addCommandToHistory(new ch(t,i,e,"bottom")),ee.call("changed",[t]))}},h_=r=>{const e=ee.getSelectedElements()[0];if(!e)return;ee.setCurBBoxes([]);let i,s;const c=ee.getIntersectionList(js([e]));if(r==="Down"&&c.reverse(),Array.prototype.forEach.call(c,l=>s?(i===void 0&&(i=l),!1):(l===e&&(s=!0),!0)),!i)return;const f=e,a=f.parentNode,n=f.nextSibling;r==="Down"?i.insertAdjacentElement("beforebegin",f):i.insertAdjacentElement("afterend",f),n!==f.nextSibling&&(ee.addCommandToHistory(new ch(f,n,a,"Move "+r)),ee.call("changed",[f]))},yg=(r,t,e=!0)=>{const i=ee.getSelectedElements(),s=ee.getZoom();Array.isArray(r)||(r/=s,t/=s);const c=new Vo("position");if(i.forEach((f,a)=>{if(f){const n=ee.getSvgRoot().createSVGTransform(),l=Nr(f);Array.isArray(r)?n.setTranslate(r[a],t[a]):n.setTranslate(r,t),l.numberOfItems?l.insertItemBefore(n,0):l.appendItem(n);const h=Is(f);h&&c.addSubCommand(h),ee.gettingSelectorManager().requestSelector(f).resize()}}),!c.isEmpty())return e&&ee.addCommandToHistory(c),ee.call("changed",i),c},u_=(r,t)=>{const e=ee.getSelectedElements(),i=ee.getCurrentGroup();let s,c;const f=new Vo("Clone Elements"),a=e.length,n=u=>{if(!u)return-1;let A=0;do A++;while(u===u.previousElementSibling);return A},l=(u,A)=>n(A)-n(u);for(e.sort(l),s=0;s<a&&(c=e[s],!!c);++s);const h=e.slice(0,s);ee.clearSelection(!0);const o=ee.getDrawing();for(s=h.length;s--;)c=h[s]=o.copyElem(h[s]),(i||o.getCurrentLayer()).append(c),f.addSubCommand(new vg(c));f.isEmpty()||(ee.addToSelection(h.reverse()),yg(r,t,!1),ee.addCommandToHistory(f))},f_=(r,t)=>{const e=ee.getSelectedElements(),i=[],s=e.length;if(!s)return;let c=Number.MAX_VALUE,f=Number.MIN_VALUE,a=Number.MAX_VALUE,n=Number.MIN_VALUE;const l=A=>["l","c","r","left","center","right"].includes(A),h=A=>["t","m","b","top","middle","bottom"].includes(A);for(let A=0;A<s&&e[A];++A){const g=e[A];i[A]=js([g])}switch(["smallest","largest"].includes(t)&&["dh","distrib_horiz","dv","distrib_verti"].includes(r)&&(t="selected"),t){case"smallest":if(l(r)||h(r)){const g=i.slice().sort((p,d)=>p.width-d.width)[0];c=g.x,a=g.y,f=g.x+g.width,n=g.y+g.height}break;case"largest":if(l(r)||h(r)){const g=i.slice().sort((p,d)=>p.width-d.width)[i.length-1];c=g.x,a=g.y,f=g.x+g.width,n=g.y+g.height}break;case"page":c=0,a=0,f=ee.getContentW(),n=ee.getContentH();break;default:c=Math.min(...i.map(A=>A.x)),a=Math.min(...i.map(A=>A.y)),f=Math.max(...i.map(A=>A.x+A.width)),n=Math.max(...i.map(A=>A.y+A.height));break}let o=[],u=[];["dh","distrib_horiz"].includes(r)?[o,u]=d_(t,e,i,c,f,a,n):["dv","distrib_verti"].includes(r)?[o,u]=g_(t,e,i,c,f,a,n):[o,u]=p_(r,e,i,c,f,a,n),yg(o,u)},d_=(r,t,e,i,s,c,f)=>{const a=[],n=[];for(let g=0;g<t.length;g++)n[g]=0;const l=e.slice().sort((g,p)=>{const d=g.x+g.width,m=p.x+p.width;return d===m?0:d>m?1:-1});r==="page"&&(l.unshift({x:0,y:0,width:0,height:f}),l.push({x:s,y:0,width:0,height:f}));const h=s-i,o=l.map(g=>g.width).reduce((g,p)=>g+p,0),u=(h-o)/(l.length-1),A=[];for(let g=0;g<l.length;++g){if(A[g]=0,g===0)continue;const p=l[g].x;l[g].x=l[g-1].x+l[g-1].width+u,A[g]=l[g].x-p}return l.forEach((g,p)=>{const d=e.findIndex(m=>m===g);d!==-1&&(a[d]=A[p])}),[a,n]},g_=(r,t,e,i,s,c,f)=>{const a=[],n=[];for(let g=0;g<t.length;g++)a[g]=0;const l=e.slice().sort((g,p)=>{const d=g.y+g.height,m=p.y+p.height;return d===m?0:d>m?1:-1});r==="page"&&(l.unshift({x:0,y:0,width:s,height:0}),l.push({x:0,y:f,width:s,height:0}));const h=f-c,o=l.map(g=>g.height).reduce((g,p)=>g+p,0),u=(h-o)/(l.length-1),A=[];for(let g=0;g<l.length;++g){if(A[g]=0,g===0)continue;const p=l[g].y;l[g].y=l[g-1].y+l[g-1].height+u,A[g]=l[g].y-p}return l.forEach((g,p)=>{const d=e.findIndex(m=>m===g);d!==-1&&(n[d]=A[p])}),[a,n]},p_=(r,t,e,i,s,c,f)=>{const a=t.length,n=new Array(a),l=new Array(a);for(let h=0;h<a&&t[h];++h){const o=e[h];switch(n[h]=0,l[h]=0,r){case"l":case"left":n[h]=i-o.x;break;case"c":case"center":n[h]=(i+s)/2-(o.x+o.width/2);break;case"r":case"right":n[h]=s-(o.x+o.width);break;case"t":case"top":l[h]=c-o.y;break;case"m":case"middle":l[h]=(c+f)/2-(o.y+o.height/2);break;case"b":case"bottom":l[h]=f-(o.y+o.height);break}}return[n,l]},m_=()=>{const r=ee.getSelectedElements(),t=new Vo("Delete Elements"),e=[];r.forEach(i=>{if(i){let s=i.parentNode,c=i;ee.gettingSelectorManager().releaseSelector(c),hg(c.id),s.tagName==="a"&&s.childNodes.length===1&&(c=s,s=s.parentNode);const{nextSibling:f}=c;c.remove();const a=c;e.push(i),t.addSubCommand(new hh(a,f,s))}}),ee.setEmptySelectedElements(),t.isEmpty()||ee.addCommandToHistory(t),ee.call("changed",e),ee.clearSelection()},v_=()=>{const r=ee.getSelectedElements(),t=JSON.stringify(r.map(i=>ee.getJsonFromSvgElements(i)));sessionStorage.setItem(ee.getClipboardID(),t),ee.flashStorage(),document.getElementById("se-cmenu_canvas").setAttribute("enablemenuitems","#paste,#paste_in_place")},y_=(r,t)=>{const e=ee.getSelectedElements();r||(r="g");let i="",s;switch(r){case"a":{i="Make hyperlink",s=t||"";break}default:{r="g",i="Group Elements";break}}const c=new Vo(i),f=ee.addSVGElementsFromJson({element:r,attr:{id:ee.getNextId()}});r==="a"&&ga(f,s),c.addSubCommand(new vg(f));let a=e.length;for(;a--;){let n=e[a];if(!n)continue;n.parentNode.tagName==="a"&&n.parentNode.childNodes.length===1&&(n=n.parentNode);const l=n.nextSibling,h=n.parentNode;f.append(n),c.addSubCommand(new ch(n,l,h))}c.isEmpty()||ee.addCommandToHistory(c),ee.selectOnly([f],!0)},wg=(r,t)=>{const e=r.childNodes,i=e.length,s=r.getAttribute("transform"),c=Nr(r),f=yr(c).matrix,a=new Vo("Push group properties"),n=Ji(r),l={filter:r.getAttribute("filter"),opacity:r.getAttribute("opacity")};let h,o,u;const A=ee.getDrawing();for(let g=0;g<i;g++){const p=e[g];if(p.nodeType!==1)continue;if(l.opacity!==null&&l.opacity!==1){const m=Math.round((p.getAttribute("opacity")||1)*l.opacity*100)/100;ee.changeSelectedAttribute("opacity",m,[p])}if(l.filter){let m=ee.getBlur(p);const v=m;if(o||(o=ee.getBlur(r)),m?m=Number(o)+Number(m):m===0&&(m=o),v)h=VA(p.getAttribute("filter"));else if(!h)h=VA(l.filter);else{h=A.copyElem(h),ms().append(h);const x=ig(h),E=(x==null?void 0:x.tagName)==="feGaussianBlur"?"blur":"filter";h.id=p.id+"_"+E,ee.changeSelectedAttribute("filter","url(#"+h.id+")",[p])}const C=ig(h);m&&(ee.changeSelectedAttribute("stdDeviation",m,[C]),ee.setBlurOffsets(h,m))}let d=Nr(p);if(p.tagName.includes("Gradient")&&(d=null),!!d&&p.tagName!=="defs"&&c.numberOfItems){if(n&&c.numberOfItems===1){const v=c.getItem(0).matrix;let C=ee.getSvgRoot().createSVGMatrix();const x=Ji(p);x&&(C=d.getItem(0).matrix);const E=hi(p),L=yr(d).matrix,U=vr(E.x+E.width/2,E.y+E.height/2,L),O=n+x,X=ee.getSvgRoot().createSVGTransform();X.setRotate(O,U.x,U.y);const rt=Fi(v,C,X.matrix.inverse());if(x&&d.removeItem(0),O&&(d.numberOfItems?d.insertItemBefore(X,0):d.appendItem(X)),rt.e||rt.f){const M=ee.getSvgRoot().createSVGTransform();M.setTranslate(rt.e,rt.f),d.numberOfItems?d.insertItemBefore(M,0):d.appendItem(M)}}else{const v=p.getAttribute("transform");u={},u.transform=v||"";const C=ee.getSvgRoot().createSVGTransform(),x=yr(d).matrix,E=x.inverse(),L=Fi(E,f,x);C.setMatrix(L),d.appendItem(C)}const m=Is(p);m&&a.addSubCommand(m)}}if(s&&(u={},u.transform=s,r.setAttribute("transform",""),r.removeAttribute("transform"),a.addSubCommand(new A_(r,u))),t&&!a.isEmpty())return a},y1=r=>{const t=ee.getSelectedElements();r||(r=t[0]);const e=r,i=new Vo;let s;const c=ee.getDataStorage();if(c.has(e,"gsvg")){const f=r.firstChild,a={x:Number(f.getAttribute("x")),y:Number(f.getAttribute("y"))},n=r.firstChild.firstChild;n&&(n.outerHTML=n.innerHTML),c.remove(r,"gsvg");const l=Nr(r),h=ee.getSvgRoot().createSVGTransform();h.setTranslate(a.x,a.y),l.appendItem(h),Is(r),ee.call("selected",[r])}else if(c.has(e,"symbol")){r=c.get(e,"symbol"),s=e.getAttribute("transform")||"";const f={x:Number(e.getAttribute("x")),y:Number(e.getAttribute("y"))},a=r.getAttribute("viewBox");if(a){const m=a.split(" ");f.x-=Number(m[0]),f.y-=Number(m[1])}s+=" translate("+(f.x||0)+","+(f.y||0)+")";const n=e.previousElementSibling;i.addSubCommand(new hh(e,e.nextElementSibling,e.parentNode)),e.remove();const h=ee.getSvgContent().querySelectorAll("use").length,o=ee.getDOMDocument().createElementNS(_e.SVG,"g"),u=r.childNodes;let A;for(A=0;A<u.length;A++)o.append(u[A].cloneNode(!0));if(Go()){const v=ms().querySelectorAll("linearGradient,radialGradient,pattern");for(let C=0,x=v.length;x>C;C++)o.appendChild(v[C].cloneNode(!0))}s&&o.setAttribute("transform",s);const g=r.parentNode;if(ee.uniquifyElems(o),Go()){const m=ms(),v=o.querySelectorAll("linearGradient,radialGradient,pattern");for(let C=0,x=v.length;x>C;C++)m.appendChild(v[C])}if(o.id=ee.getNextId(),n.after(o),g){if(!h){const{nextSibling:m}=r;r.remove(),i.addSubCommand(new hh(r,m,g))}i.addSubCommand(new vg(o))}ee.setUseData(o),Go()?ee.convertGradients(ms()):ee.convertGradients(o),WS(o,m=>{try{Is(m)}catch(v){console.error(v)}});const p=o.querySelectorAll(ee.getVisElems());Array.prototype.forEach.call(p,m=>{m.id||(m.id=ee.getNextId())}),ee.selectOnly([o]);const d=wg(o,!0);d&&i.addSubCommand(d),ee.addCommandToHistory(i)}else console.warn("Unexpected element to ungroup:",r)},w_=()=>{const r=ee.getSelectedElements(),t=ee.getDataStorage();let e=r[0];if(!e)return;if(t.has(e,"gsvg")||t.has(e,"symbol")){y1(e);return}if(e.tagName==="use"){const s=wr($a(e).substr(1));t.put(e,"symbol",s),t.put(e,"ref",s),y1(e);return}const i=Jc(e.parentNode,"a");if(i!=null&&i.length&&(e=i[0]),e.tagName==="g"||e.tagName==="a"){const s=new Vo("Ungroup Elements"),c=wg(e,!0);c&&s.addSubCommand(c);const f=e.parentNode,a=e.nextSibling,n=new Array(e.childNodes.length);let l=0;for(;e.firstChild;){const o=e.firstChild,u=o.nextSibling,A=o.parentNode;if(o.tagName==="title"){const{nextSibling:g}=o;s.addSubCommand(new hh(o,g,A)),o.remove();continue}n[l++]=f.insertBefore(o,a),s.addSubCommand(new ch(o,u,A))}ee.clearSelection();const h=e.nextSibling;e.remove(),s.addSubCommand(new hh(e,h,f)),s.isEmpty()||ee.addCommandToHistory(s),ee.addToSelection(n)}},b_=(r,t)=>{ee.getSvgRoot().setAttribute("width",r),ee.getSvgRoot().setAttribute("height",t);const e=ee.getZoom(),i=document.getElementById("canvasBackground"),s=Number(ee.getSvgContent().getAttribute("x")),c=Number(ee.getSvgContent().getAttribute("y")),f=(r-ee.contentW*e)/2,a=(t-ee.contentH*e)/2;br(ee.getSvgContent(),{width:ee.contentW*e,height:ee.contentH*e,x:f,y:a,viewBox:"0 0 "+ee.contentW+" "+ee.contentH}),br(i,{width:ee.getSvgContent().getAttribute("width"),height:ee.getSvgContent().getAttribute("height"),x:f,y:a});const n=wr("background_image");return n&&br(n,{width:"100%",height:"100%"}),ee.selectorManager.selectorParentGroup.setAttribute("transform","translate("+f+","+a+")"),ee.runExtensions("canvasUpdated",{new_x:f,new_y:a,old_x:s,old_y:c,d_x:f-s,d_y:a-c}),{x:f,y:a,old_x:s,old_y:c,d_x:f-s,d_y:a-c}},C_=r=>{const t=ee.getSelectedElements(),e=ee.getCurrentGroup();let i;const s=t[0];let c=!1;const f=th(e||ee.getCurrentDrawing().getCurrentLayer());if(f.length){if(!s)i=r?f.length-1:0,c=f[i];else{let a=f.length;for(;a--;)if(f[a]===s){i=r?a-1:a+1,i>=f.length?i=0:i<0&&(i=f.length-1),c=f[i];break}}ee.selectOnly([c],!0),ee.call("selected",t)}};/**
 * Tools for blur event.
 * @module blur
 * @license MIT
 * @copyright 2011 Jeff Schiller
 */let rr=null;const B_=r=>{rr=r},S_=function(r){const t=rr.getSelectedElements();if(!rr.getFilter()){rr.setBlur(r);return}if(r===0)rr.changeSelectedAttributeNoUndo("filter",""),rr.setFilterHidden(!0);else{const e=t[0];rr.getFilterHidden()&&rr.changeSelectedAttributeNoUndo("filter","url(#"+e.id+"_blur)");const i=rr.getFilter();rr.changeSelectedAttributeNoUndo("stdDeviation",r,[i.firstChild]),rr.setBlurOffsets(i,r)}};function w1(){const r=rr.undoMgr.finishUndoableChange();rr.getCurCommand().addSubCommand(r),rr.addCommandToHistory(rr.getCurCommand()),rr.setCurCommand(null),rr.setFilter(null)}const x_=function(r,t){t>3?rr.assignAttributes(r,{x:"-50%",y:"-50%",width:"200%",height:"200%"},100):(r.removeAttribute("x"),r.removeAttribute("y"),r.removeAttribute("width"),r.removeAttribute("height"))},__=function(r,t){const{InsertElementCommand:e,ChangeElementCommand:i,BatchCommand:s}=rr.history,c=rr.getSelectedElements();if(rr.getCurCommand()){w1();return}const f=c[0],a=f.id;rr.setFilter(rr.getElement(a+"_blur")),r-=0;const n=new s;if(rr.getFilter())r===0&&rr.setFilter(null);else{const o=rr.addSVGElementsFromJson({element:"feGaussianBlur",attr:{in:"SourceGraphic",stdDeviation:r}});rr.setFilter(rr.addSVGElementsFromJson({element:"filter",attr:{id:a+"_blur"}})),rr.getFilter().append(o),rr.findDefs().append(rr.getFilter()),n.addSubCommand(new e(rr.getFilter()))}const l={filter:f.getAttribute("filter")};if(r===0){f.removeAttribute("filter"),n.addSubCommand(new i(f,l));return}rr.changeSelectedAttribute("filter","url(#"+a+"_blur)"),n.addSubCommand(new i(f,l)),rr.setBlurOffsets(rr.getFilter(),r);const h=rr.getFilter();rr.setCurCommand(n),rr.undoMgr.beginUndoableChange("stdDeviation",[h?h.firstChild:null]),t&&(rr.setBlurNoUndo(r),w1())};/**
 * Tools for SVG sanitization.
 * @module sanitize
 * @license MIT
 *
 * @copyright 2010 Alexis Deveria, 2010 Jeff Schiller
 */const E_=Lv(),F_=["class","id","display","transform","style"],uh={a:["clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","mask","opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","systemLanguage","xlink:href","xlink:title"],circle:["clip-path","clip-rule","cx","cy","enable-background","fill","fill-opacity","fill-rule","filter","mask","opacity","r","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","systemLanguage"],clipPath:["clipPathUnits"],defs:[],desc:[],ellipse:["clip-path","clip-rule","cx","cy","fill","fill-opacity","fill-rule","filter","mask","opacity","requiredFeatures","rx","ry","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","systemLanguage"],feBlend:["in","in2"],feColorMatrix:["in","type","value","result","values"],feComposite:["in","operator","result","in2"],feFlood:["flood-color","in","result","flood-opacity"],feGaussianBlur:["color-interpolation-filters","in","requiredFeatures","stdDeviation","result"],feMerge:[],feMergeNode:["in"],feMorphology:["in","operator","radius"],feOffset:["dx","in","dy","result"],filter:["color-interpolation-filters","filterRes","filterUnits","height","primitiveUnits","requiredFeatures","width","x","xlink:href","y"],foreignObject:["font-size","height","opacity","requiredFeatures","width","x","y"],g:["clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","systemLanguage","font-family","font-size","font-style","font-weight","text-anchor"],image:["clip-path","clip-rule","filter","height","mask","opacity","requiredFeatures","systemLanguage","width","x","xlink:href","xlink:title","y"],line:["clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","marker-end","marker-mid","marker-start","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","systemLanguage","x1","x2","y1","y2"],linearGradient:["gradientTransform","gradientUnits","requiredFeatures","spreadMethod","systemLanguage","x1","x2","xlink:href","y1","y2"],marker:["markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","se_type","systemLanguage","viewBox"],mask:["height","maskContentUnits","maskUnits","width","x","y"],metadata:[],path:["clip-path","clip-rule","d","enable-background","fill","fill-opacity","fill-rule","filter","marker-end","marker-mid","marker-start","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","systemLanguage"],pattern:["height","patternContentUnits","patternTransform","patternUnits","requiredFeatures","systemLanguage","viewBox","width","x","xlink:href","y"],polygon:["clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","marker-end","marker-mid","marker-start","mask","opacity","points","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","systemLanguage","sides","shape","edge","point","starRadiusMultiplier","r","radialshift","r2","orient","cx","cy"],polyline:["clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","marker-end","marker-mid","marker-start","mask","opacity","points","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","systemLanguage","se:connector"],radialGradient:["cx","cy","fx","fy","gradientTransform","gradientUnits","r","requiredFeatures","spreadMethod","systemLanguage","xlink:href"],rect:["clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","height","mask","opacity","requiredFeatures","rx","ry","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","systemLanguage","width","x","y"],stop:["offset","requiredFeatures","stop-opacity","systemLanguage","stop-color","gradientUnits","gradientTransform"],style:["type"],svg:["clip-path","clip-rule","enable-background","filter","height","mask","preserveAspectRatio","requiredFeatures","systemLanguage","version","viewBox","width","x","xmlns","xmlns:se","xmlns:xlink","xmlns:oi","oi:animations","y","stroke-linejoin","fill-rule","aria-label","stroke-width","fill-rule","xml:space"],switch:["requiredFeatures","systemLanguage"],symbol:["fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","opacity","overflow","preserveAspectRatio","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","systemLanguage","viewBox","width","height"],text:["clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","systemLanguage","text-anchor","letter-spacing","word-spacing","text-decoration","textLength","lengthAdjust","x","xml:space","y"],textPath:["method","requiredFeatures","spacing","startOffset","systemLanguage","xlink:href"],title:[],tspan:["clip-path","clip-rule","dx","dy","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","mask","opacity","requiredFeatures","rotate","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","systemLanguage","text-anchor","textLength","x","xml:space","y"],use:["clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","height","mask","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","width","x","xlink:href","y","overflow"],annotation:["encoding"],"annotation-xml":["encoding"],maction:["actiontype","other","selection"],math:["xmlns"],menclose:["notation"],merror:[],mfrac:["linethickness"],mi:["mathvariant"],mmultiscripts:[],mn:[],mo:["fence","lspace","maxsize","minsize","rspace","stretchy"],mover:[],mpadded:["lspace","width","height","depth","voffset"],mphantom:[],mprescripts:[],mroot:[],mrow:["xlink:href","xlink:type","xmlns:xlink"],mspace:["depth","height","width"],msqrt:[],mstyle:["displaystyle","mathbackground","mathcolor","mathvariant","scriptlevel"],msub:[],msubsup:[],msup:[],mtable:["align","columnalign","columnlines","columnspacing","displaystyle","equalcolumns","equalrows","frame","rowalign","rowlines","rowspacing","width"],mtd:["columnalign","columnspan","rowalign","rowspan"],mtext:[],mtr:["columnalign","rowalign"],munder:[],munderover:[],none:[],semantics:[]};Object.keys(uh).forEach(r=>{uh[r]=[...uh[r],...F_]});const b1={};Object.entries(uh).forEach(([r,t])=>{const e={};Object.entries(t).forEach(([i,s])=>{if(s.includes(":")){const c=s.split(":");e[c[1]]=_e[c[0].toUpperCase()]}else e[s]=s==="xmlns"?_e.XMLNS:null}),b1[r]=e});const bg=r=>{if(r.nodeType===3&&(r.nodeValue=r.nodeValue.trim(),r.nodeValue.length||r.remove()),r.nodeType!==1)return;const t=r.ownerDocument,e=r.parentNode;if(!t||!e)return;const i=uh[r.nodeName],s=b1[r.nodeName];if(typeof i<"u"){const c=[];let f=r.attributes.length;for(;f--;){const n=r.attributes.item(f),l=n.nodeName,h=n.localName,o=n.namespaceURI;if(o!==s[h]&&o!==_e.XMLNS&&!(o===_e.XMLNS&&E_[n.value]))if(l.startsWith("se:")||l.startsWith("oi:")||l.startsWith("data-")){const u=l.startsWith("se:")?_e.SE:l.startsWith("oi:")?_e.OI:null;c.push([l,n.value,u])}else console.warn(`sanitizeSvg: attribute ${l} in element ${r.nodeName} not in whitelist is removed`),r.removeAttributeNS(o,h);if(l==="style"){const u=n.value.split(";");let A=u.length;for(;A--;){const[g,p]=u[A].split(":"),d=(g||"").trim(),m=(p||"").trim();i.includes(d)&&r.setAttribute(d,m)}r.removeAttribute("style")}}Object.values(c).forEach(([n,l,h])=>{r.setAttributeNS(h,n,l)});const a=$a(r);if(a&&["filter","linearGradient","pattern","radialGradient","textPath","use"].includes(r.nodeName)&&a[0]!=="#"&&(ga(r,""),console.warn(`sanitizeSvg: attribute href in element ${r.nodeName} pointing to a non-local reference (${a}) is removed`),r.removeAttributeNS(_e.XLINK,"href")),r.nodeName==="use"&&!$a(r)){console.warn(`sanitizeSvg: element ${r.nodeName} without a xlink:href is removed`),r.remove();return}for(f=r.childNodes.length;f--;)bg(r.childNodes.item(f))}else{console.warn(`sanitizeSvg: element ${r.nodeName} not supported is removed`);const c=[];for(;r.hasChildNodes();)c.push(e.insertBefore(r.firstChild,r));r.remove();let f=c.length;for(;f--;)bg(c[f])}};function dr(r){"@babel/helpers - typeof";return dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dr(r)}var $n=Uint8Array,In=Uint16Array,fh=Uint32Array,Lu=new $n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Iu=new $n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cg=new $n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C1=function(r,t){for(var e=new In(31),i=0;i<31;++i)e[i]=t+=1<<r[i-1];for(var s=new fh(e[30]),i=1;i<30;++i)for(var c=e[i];c<e[i+1];++c)s[c]=c-e[i]<<5|i;return[e,s]},B1=C1(Lu,2),S1=B1[0],Bg=B1[1];S1[28]=258,Bg[258]=28;for(var x1=C1(Iu,0),T_=x1[0],_1=x1[1],Sg=new In(32768),ti=0;ti<32768;++ti){var KA=(ti&43690)>>>1|(ti&21845)<<1;KA=(KA&52428)>>>2|(KA&13107)<<2,KA=(KA&61680)>>>4|(KA&3855)<<4,Sg[ti]=((KA&65280)>>>8|(KA&255)<<8)>>>1}for(var ma=function(r,t,e){for(var i=r.length,s=0,c=new In(t);s<i;++s)++c[r[s]-1];var f=new In(t);for(s=0;s<t;++s)f[s]=f[s-1]+c[s-1]<<1;var a;if(e){a=new In(1<<t);var n=15-t;for(s=0;s<i;++s)if(r[s])for(var l=s<<4|r[s],h=t-r[s],o=f[r[s]-1]++<<h,u=o|(1<<h)-1;o<=u;++o)a[Sg[o]>>>n]=l}else for(a=new In(i),s=0;s<i;++s)a[s]=Sg[f[r[s]-1]++]>>>15-r[s];return a},WA=new $n(288),ti=0;ti<144;++ti)WA[ti]=8;for(var ti=144;ti<256;++ti)WA[ti]=9;for(var ti=256;ti<280;++ti)WA[ti]=7;for(var ti=280;ti<288;++ti)WA[ti]=8;for(var dh=new $n(32),ti=0;ti<32;++ti)dh[ti]=5;var L_=ma(WA,9,0),I_=ma(WA,9,1),P_=ma(dh,5,0),U_=ma(dh,5,1),xg=function(r){for(var t=r[0],e=1;e<r.length;++e)r[e]>t&&(t=r[e]);return t},Ks=function(r,t,e){var i=t/8>>0;return(r[i]|r[i+1]<<8)>>>(t&7)&e},_g=function(r,t){var e=t/8>>0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>>(t&7)},Eg=function(r){return(r/8>>0)+(r&7&&1)},E1=function(r,t,e){(e==null||e>r.length)&&(e=r.length);var i=new(r instanceof In?In:r instanceof fh?fh:$n)(e-t);return i.set(r.subarray(t,e)),i},O_=function(r,t,e){var i=r.length,s=!t||e,c=!e||e.i;e||(e={}),t||(t=new $n(i*3));var f=function(Z){var st=t.length;if(Z>st){var ct=new $n(Math.max(st*2,Z));ct.set(t),t=ct}},a=e.f||0,n=e.p||0,l=e.b||0,h=e.l,o=e.d,u=e.m,A=e.n,g=i*8;do{if(!h){e.f=a=Ks(r,n,1);var p=Ks(r,n+1,3);if(n+=3,p)if(p==1)h=I_,o=U_,u=9,A=5;else if(p==2){var C=Ks(r,n,31)+257,x=Ks(r,n+10,15)+4,E=C+Ks(r,n+5,31)+1;n+=14;for(var L=new $n(E),U=new $n(19),O=0;O<x;++O)U[Cg[O]]=Ks(r,n+O*3,7);n+=x*3;var X=xg(U),rt=(1<<X)-1;if(!c&&n+E*(X+7)>g)break;for(var M=ma(U,X,1),O=0;O<E;){var H=M[Ks(r,n,rt)];n+=H&15;var d=H>>>4;if(d<16)L[O++]=d;else{var J=0,$=0;for(d==16?($=3+Ks(r,n,3),n+=2,J=L[O-1]):d==17?($=3+Ks(r,n,7),n+=3):d==18&&($=11+Ks(r,n,127),n+=7);$--;)L[O++]=J}}var ht=L.subarray(0,C),ut=L.subarray(C);u=xg(ht),A=xg(ut),h=ma(ht,u,1),o=ma(ut,A,1)}else throw"invalid block type";else{var d=Eg(n)+4,m=r[d-4]|r[d-3]<<8,v=d+m;if(v>i){if(c)throw"unexpected EOF";break}s&&f(l+m),t.set(r.subarray(d,v),l),e.b=l+=m,e.p=n=v*8;continue}if(n>g)throw"unexpected EOF"}s&&f(l+131072);for(var pt=(1<<u)-1,ft=(1<<A)-1,R=u+A+18;c||n+R<g;){var J=h[_g(r,n)&pt],G=J>>>4;if(n+=J&15,n>g)throw"unexpected EOF";if(!J)throw"invalid length/literal";if(G<256)t[l++]=G;else if(G==256){h=null;break}else{var it=G-254;if(G>264){var O=G-257,P=Lu[O];it=Ks(r,n,(1<<P)-1)+S1[O],n+=P}var V=o[_g(r,n)&ft],k=V>>>4;if(!V)throw"invalid distance";n+=V&15;var ut=T_[k];if(k>3){var P=Iu[k];ut+=_g(r,n)&(1<<P)-1,n+=P}if(n>g)throw"unexpected EOF";s&&f(l+131072);for(var N=l+it;l<N;l+=4)t[l]=t[l-ut],t[l+1]=t[l+1-ut],t[l+2]=t[l+2-ut],t[l+3]=t[l+3-ut];l=N}}e.l=h,e.p=n,e.b=l,h&&(a=1,e.m=u,e.d=o,e.n=A)}while(!a);return l==t.length?t:E1(t,0,l)},Ya=function(r,t,e){e<<=t&7;var i=t/8>>0;r[i]|=e,r[i+1]|=e>>>8},gh=function(r,t,e){e<<=t&7;var i=t/8>>0;r[i]|=e,r[i+1]|=e>>>8,r[i+2]|=e>>>16},Fg=function(r,t){for(var e=[],i=0;i<r.length;++i)r[i]&&e.push({s:i,f:r[i]});var s=e.length,c=e.slice();if(!s)return[new $n(0),0];if(s==1){var f=new $n(e[0].s+1);return f[e[0].s]=1,[f,1]}e.sort(function(E,L){return E.f-L.f}),e.push({s:-1,f:25001});var a=e[0],n=e[1],l=0,h=1,o=2;for(e[0]={s:-1,f:a.f+n.f,l:a,r:n};h!=s-1;)a=e[e[l].f<e[o].f?l++:o++],n=e[l!=h&&e[l].f<e[o].f?l++:o++],e[h++]={s:-1,f:a.f+n.f,l:a,r:n};for(var u=c[0].s,i=1;i<s;++i)c[i].s>u&&(u=c[i].s);var A=new In(u+1),g=Tg(e[h-1],A,0);if(g>t){var i=0,p=0,d=g-t,m=1<<d;for(c.sort(function(L,U){return A[U.s]-A[L.s]||L.f-U.f});i<s;++i){var v=c[i].s;if(A[v]>t)p+=m-(1<<g-A[v]),A[v]=t;else break}for(p>>>=d;p>0;){var C=c[i].s;A[C]<t?p-=1<<t-A[C]++-1:++i}for(;i>=0&&p;--i){var x=c[i].s;A[x]==t&&(--A[x],++p)}g=t}return[new $n(A),g]},Tg=function(r,t,e){return r.s==-1?Math.max(Tg(r.l,t,e+1),Tg(r.r,t,e+1)):t[r.s]=e},F1=function(r){for(var t=r.length;t&&!r[--t];);for(var e=new In(++t),i=0,s=r[0],c=1,f=function(n){e[i++]=n},a=1;a<=t;++a)if(r[a]==s&&a!=t)++c;else{if(!s&&c>2){for(;c>138;c-=138)f(32754);c>2&&(f(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(f(s),--c;c>6;c-=6)f(8304);c>2&&(f(c-3<<5|8208),c=0)}for(;c--;)f(s);c=1,s=r[a]}return[e.subarray(0,i),t]},ph=function(r,t){for(var e=0,i=0;i<t.length;++i)e+=r[i]*t[i];return e},Lg=function(r,t,e){var i=e.length,s=Eg(t+2);r[s]=i&255,r[s+1]=i>>>8,r[s+2]=r[s]^255,r[s+3]=r[s+1]^255;for(var c=0;c<i;++c)r[s+c+4]=e[c];return(s+4+i)*8},T1=function(r,t,e,i,s,c,f,a,n,l,h){Ya(t,h++,e),++s[256];for(var o=Fg(s,15),u=o[0],A=o[1],g=Fg(c,15),p=g[0],d=g[1],m=F1(u),v=m[0],C=m[1],x=F1(p),E=x[0],L=x[1],U=new In(19),O=0;O<v.length;++O)U[v[O]&31]++;for(var O=0;O<E.length;++O)U[E[O]&31]++;for(var X=Fg(U,7),rt=X[0],M=X[1],H=19;H>4&&!rt[Cg[H-1]];--H);var J=l+5<<3,$=ph(s,WA)+ph(c,dh)+f,ht=ph(s,u)+ph(c,p)+f+14+3*H+ph(U,rt)+(2*U[16]+3*U[17]+7*U[18]);if(J<=$&&J<=ht)return Lg(t,h,r.subarray(n,n+l));var ut,pt,ft,R;if(Ya(t,h,1+(ht<$)),h+=2,ht<$){ut=ma(u,A,0),pt=u,ft=ma(p,d,0),R=p;var G=ma(rt,M,0);Ya(t,h,C-257),Ya(t,h+5,L-1),Ya(t,h+10,H-4),h+=14;for(var O=0;O<H;++O)Ya(t,h+3*O,rt[Cg[O]]);h+=3*H;for(var it=[v,E],P=0;P<2;++P)for(var V=it[P],O=0;O<V.length;++O){var k=V[O]&31;Ya(t,h,G[k]),h+=rt[k],k>15&&(Ya(t,h,V[O]>>>5&127),h+=V[O]>>>12)}}else ut=L_,pt=WA,ft=P_,R=dh;for(var O=0;O<a;++O)if(i[O]>255){var k=i[O]>>>18&31;gh(t,h,ut[k+257]),h+=pt[k+257],k>7&&(Ya(t,h,i[O]>>>23&31),h+=Lu[k]);var N=i[O]&31;gh(t,h,ft[N]),h+=R[N],N>3&&(gh(t,h,i[O]>>>5&8191),h+=Iu[N])}else gh(t,h,ut[i[O]]),h+=pt[i[O]];return gh(t,h,ut[256]),h+pt[256]},Q_=new fh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),N_=function(r,t,e,i,s,c){var f=r.length,a=new $n(i+f+5*(1+Math.floor(f/7e3))+s),n=a.subarray(i,a.length-s),l=0;if(!t||f<8)for(var h=0;h<=f;h+=65535){var o=h+65535;o<f?l=Lg(n,l,r.subarray(h,o)):(n[h]=c,l=Lg(n,l,r.subarray(h,f)))}else{for(var u=Q_[t-1],A=u>>>13,g=u&8191,p=(1<<e)-1,d=new In(32768),m=new In(p+1),v=Math.ceil(e/3),C=2*v,x=function(mt){return(r[mt]^r[mt+1]<<v^r[mt+2]<<C)&p},E=new fh(25e3),L=new In(288),U=new In(32),O=0,X=0,h=0,rt=0,M=0,H=0;h<f;++h){var J=x(h),$=h&32767,ht=m[J];if(d[$]=ht,m[J]=$,M<=h){var ut=f-h;if((O>7e3||rt>24576)&&ut>423){l=T1(r,n,0,E,L,U,X,rt,H,h-H,l),rt=O=X=0,H=h;for(var pt=0;pt<286;++pt)L[pt]=0;for(var pt=0;pt<30;++pt)U[pt]=0}var ft=2,R=0,G=g,it=$-ht&32767;if(ut>2&&J==x(h-it))for(var P=Math.min(A,ut)-1,V=Math.min(32767,h),k=Math.min(258,ut);it<=V&&--G&&$!=ht;){if(r[h+ft]==r[h+ft-it]){for(var N=0;N<k&&r[h+N]==r[h+N-it];++N);if(N>ft){if(ft=N,R=it,N>P)break;for(var Z=Math.min(it,N-2),st=0,pt=0;pt<Z;++pt){var ct=h-it+pt+32768&32767,ot=d[ct],wt=ct-ot+32768&32767;wt>st&&(st=wt,ht=ct)}}}$=ht,ht=d[$],it+=$-ht+32768&32767}if(R){E[rt++]=268435456|Bg[ft]<<18|_1[R];var _t=Bg[ft]&31,Nt=_1[R]&31;X+=Lu[_t]+Iu[Nt],++L[257+_t],++U[Nt],M=h+ft,++O}else E[rt++]=r[h],++L[r[h]]}}l=T1(r,n,c,E,L,U,X,rt,H,h-H,l)}return E1(a,0,i+Eg(l)+s)},M_=function(){var r=1,t=0;return{p:function(e){for(var i=r,s=t,c=e.length,f=0;f!=c;){for(var a=Math.min(f+5552,c);f<a;++f)i+=e[f],s+=i;i%=65521,s%=65521}r=i,t=s},d:function(){return(r>>>8<<16|(t&255)<<8|t>>>8)+((r&255)<<23)*2}}},k_=function(r,t,e,i,s){return N_(r,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):12+t.mem,e,i,!s)},D_=function(r,t,e){for(;e;++t)r[t]=e,e>>>=8},R_=function(r,t){var e=t.level,i=e==0?0:e<6?1:e==9?3:2;r[0]=120,r[1]=i<<6|(i?32-2*i:1)},H_=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ig(r,t){t===void 0&&(t={});var e=M_();e.p(r);var i=k_(r,t,2,4);return R_(i,t),D_(i,i.length-4,e.d()),i}function G_(r,t){return O_((H_(r),r.subarray(2,-4)),t)}/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.1 Built on 2022-01-28T15:37:57.791Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Holländer <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */var De=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Pg(){De.console&&typeof De.console.log=="function"&&De.console.log.apply(De.console,arguments)}var Vr={log:Pg,warn:function(r){De.console&&(typeof De.console.warn=="function"?De.console.warn.apply(De.console,arguments):Pg.call(null,arguments))},error:function(r){De.console&&(typeof De.console.error=="function"?De.console.error.apply(De.console,arguments):Pg(r))}};function Ug(r,t,e){var i=new XMLHttpRequest;i.open("GET",r),i.responseType="blob",i.onload=function(){jo(i.response,t,e)},i.onerror=function(){Vr.error("could not download file")},i.send()}function L1(r){var t=new XMLHttpRequest;t.open("HEAD",r,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Pu(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(t)}}var mh,Og,jo=De.saveAs||((typeof window>"u"?"undefined":dr(window))!=="object"||window!==De?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,t,e){var i=De.URL||De.webkitURL,s=document.createElement("a");t=t||r.name||"download",s.download=t,s.rel="noopener",typeof r=="string"?(s.href=r,s.origin!==location.origin?L1(s.href)?Ug(r,t,e):Pu(s,s.target="_blank"):Pu(s)):(s.href=i.createObjectURL(r),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){Pu(s)},0))}:"msSaveOrOpenBlob"in navigator?function(r,t,e){if(t=t||r.name||"download",typeof r=="string")if(L1(r))Ug(r,t,e);else{var i=document.createElement("a");i.href=r,i.target="_blank",setTimeout(function(){Pu(i)})}else navigator.msSaveOrOpenBlob(function(s,c){return c===void 0?c={autoBom:!1}:dr(c)!=="object"&&(Vr.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(r,e),t)}:function(r,t,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof r=="string")return Ug(r,t,e);var s=r.type==="application/octet-stream",c=/constructor/i.test(De.HTMLElement)||De.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||s&&c)&&(typeof FileReader>"u"?"undefined":dr(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=f?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=h:location=h,i=null},a.readAsDataURL(r)}else{var n=De.URL||De.webkitURL,l=n.createObjectURL(r);i?i.location=l:location.href=l,i=null,setTimeout(function(){n.revokeObjectURL(l)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function I1(r){var t;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],i=0;i<e.length;i++){var s=e[i].re,c=e[i].process,f=s.exec(r);f&&(t=c(f),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),n=this.g.toString(16),l=this.b.toString(16);return a.length==1&&(a="0"+a),n.length==1&&(n="0"+n),l.length==1&&(l="0"+l),"#"+a+n+l}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Qg(r,t){var e=r[0],i=r[1],s=r[2],c=r[3];e=wn(e,i,s,c,t[0],7,-680876936),c=wn(c,e,i,s,t[1],12,-389564586),s=wn(s,c,e,i,t[2],17,606105819),i=wn(i,s,c,e,t[3],22,-1044525330),e=wn(e,i,s,c,t[4],7,-176418897),c=wn(c,e,i,s,t[5],12,1200080426),s=wn(s,c,e,i,t[6],17,-1473231341),i=wn(i,s,c,e,t[7],22,-45705983),e=wn(e,i,s,c,t[8],7,1770035416),c=wn(c,e,i,s,t[9],12,-1958414417),s=wn(s,c,e,i,t[10],17,-42063),i=wn(i,s,c,e,t[11],22,-1990404162),e=wn(e,i,s,c,t[12],7,1804603682),c=wn(c,e,i,s,t[13],12,-40341101),s=wn(s,c,e,i,t[14],17,-1502002290),e=bn(e,i=wn(i,s,c,e,t[15],22,1236535329),s,c,t[1],5,-165796510),c=bn(c,e,i,s,t[6],9,-1069501632),s=bn(s,c,e,i,t[11],14,643717713),i=bn(i,s,c,e,t[0],20,-373897302),e=bn(e,i,s,c,t[5],5,-701558691),c=bn(c,e,i,s,t[10],9,38016083),s=bn(s,c,e,i,t[15],14,-660478335),i=bn(i,s,c,e,t[4],20,-405537848),e=bn(e,i,s,c,t[9],5,568446438),c=bn(c,e,i,s,t[14],9,-1019803690),s=bn(s,c,e,i,t[3],14,-187363961),i=bn(i,s,c,e,t[8],20,1163531501),e=bn(e,i,s,c,t[13],5,-1444681467),c=bn(c,e,i,s,t[2],9,-51403784),s=bn(s,c,e,i,t[7],14,1735328473),e=Cn(e,i=bn(i,s,c,e,t[12],20,-1926607734),s,c,t[5],4,-378558),c=Cn(c,e,i,s,t[8],11,-2022574463),s=Cn(s,c,e,i,t[11],16,1839030562),i=Cn(i,s,c,e,t[14],23,-35309556),e=Cn(e,i,s,c,t[1],4,-1530992060),c=Cn(c,e,i,s,t[4],11,1272893353),s=Cn(s,c,e,i,t[7],16,-155497632),i=Cn(i,s,c,e,t[10],23,-1094730640),e=Cn(e,i,s,c,t[13],4,681279174),c=Cn(c,e,i,s,t[0],11,-358537222),s=Cn(s,c,e,i,t[3],16,-722521979),i=Cn(i,s,c,e,t[6],23,76029189),e=Cn(e,i,s,c,t[9],4,-640364487),c=Cn(c,e,i,s,t[12],11,-421815835),s=Cn(s,c,e,i,t[15],16,530742520),e=Bn(e,i=Cn(i,s,c,e,t[2],23,-995338651),s,c,t[0],6,-198630844),c=Bn(c,e,i,s,t[7],10,1126891415),s=Bn(s,c,e,i,t[14],15,-1416354905),i=Bn(i,s,c,e,t[5],21,-57434055),e=Bn(e,i,s,c,t[12],6,1700485571),c=Bn(c,e,i,s,t[3],10,-1894986606),s=Bn(s,c,e,i,t[10],15,-1051523),i=Bn(i,s,c,e,t[1],21,-2054922799),e=Bn(e,i,s,c,t[8],6,1873313359),c=Bn(c,e,i,s,t[15],10,-30611744),s=Bn(s,c,e,i,t[6],15,-1560198380),i=Bn(i,s,c,e,t[13],21,1309151649),e=Bn(e,i,s,c,t[4],6,-145523070),c=Bn(c,e,i,s,t[11],10,-1120210379),s=Bn(s,c,e,i,t[2],15,718787259),i=Bn(i,s,c,e,t[9],21,-343485551),r[0]=XA(e,r[0]),r[1]=XA(i,r[1]),r[2]=XA(s,r[2]),r[3]=XA(c,r[3])}function Uu(r,t,e,i,s,c){return t=XA(XA(t,r),XA(i,c)),XA(t<<s|t>>>32-s,e)}function wn(r,t,e,i,s,c,f){return Uu(t&e|~t&i,r,t,s,c,f)}function bn(r,t,e,i,s,c,f){return Uu(t&i|e&~i,r,t,s,c,f)}function Cn(r,t,e,i,s,c,f){return Uu(t^e^i,r,t,s,c,f)}function Bn(r,t,e,i,s,c,f){return Uu(e^(t|~i),r,t,s,c,f)}function P1(r){var t,e=r.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=r.length;t+=64)Qg(i,V_(r.substring(t-64,t)));r=r.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r.length;t++)s[t>>2]|=r.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(Qg(i,s),t=0;t<16;t++)s[t]=0;return s[14]=8*e,Qg(i,s),i}function V_(r){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24);return e}mh=De.atob.bind(De),Og=De.btoa.bind(De);var U1="0123456789abcdef".split("");function j_(r){for(var t="",e=0;e<4;e++)t+=U1[r>>8*e+4&15]+U1[r>>8*e&15];return t}function K_(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function Ng(r){return P1(r).map(K_).join("")}var W_=function(r){for(var t=0;t<r.length;t++)r[t]=j_(r[t]);return r.join("")}(P1("hello"))!="5d41402abc4b2a76b9719d911017c592";function XA(r,t){if(W_){var e=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(e>>16)<<16|65535&e}return r+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Mg(r,t){var e,i,s,c;if(r!==e){for(var f=(s=r,c=1+(256/r.length>>0),new Array(c+1).join(s)),a=[],n=0;n<256;n++)a[n]=n;var l=0;for(n=0;n<256;n++){var h=a[n];l=(l+h+f.charCodeAt(n))%256,a[n]=a[l],a[l]=h}e=r,i=a}else a=i;var o=t.length,u=0,A=0,g="";for(n=0;n<o;n++)A=(A+(h=a[u=(u+1)%256]))%256,a[u]=a[A],a[A]=h,f=a[(a[u]+a[A])%256],g+=String.fromCharCode(t.charCodeAt(n)^f);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var O1={print:4,modify:8,copy:16,"annot-forms":32};function Gl(r,t,e,i){this.v=1,this.r=2;var s=192;r.forEach(function(a){if(O1.perm!==void 0)throw new Error("Invalid permission: "+a);s+=O1[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var c=(t+this.padding).substr(0,32),f=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(c,f),this.P=-(1+(255^s)),this.encryptionKey=Ng(c+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=Mg(this.encryptionKey,this.padding)}function Vl(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var t="",e=r.length,i=0;i<e;i++){var s=r.charCodeAt(i);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=r[i]}return t}function Q1(r){if(dr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,i,s){if(s=s||!1,typeof e!="string"||typeof i!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var c=Math.random().toString(35);return t[e][c]=[i,!!s],c},this.unsubscribe=function(e){for(var i in t)if(t[i][e])return delete t[i][e],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),s=[];for(var c in t[e]){var f=t[e][c];try{f[0].apply(r,i)}catch(a){De.console&&Vr.error("jsPDF PubSub Error",a.message,a)}f[1]&&s.push(c)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Ko(r){if(!(this instanceof Ko))return new Ko(r);var t="opacity,stroke-opacity".split(",");for(var e in r)r.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=r[e]);this.id="",this.objectNumber=-1}function N1(r,t){this.gState=r,this.matrix=t,this.id="",this.objectNumber=-1}function zA(r,t,e,i,s){if(!(this instanceof zA))return new zA(r,t,e,i,s);this.type=r==="axial"?2:3,this.coords=t,this.colors=e,N1.call(this,i,s)}function Wo(r,t,e,i,s){if(!(this instanceof Wo))return new Wo(r,t,e,i,s);this.boundingBox=r,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,N1.call(this,i,s)}function Me(r){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],s=arguments[2],c=arguments[3],f=[],a=1,n=16,l="S",h=null;dr(r=r||{})==="object"&&(e=r.orientation,i=r.unit||i,s=r.format||s,c=r.compress||r.compressPdf||c,(h=r.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(t=r.precision),r.floatPrecision!==void 0&&(n=r.floatPrecision),l=r.defaultPathOperation||"S"),f=r.filters||(c===!0?["FlateEncode"]:f),i=i||"mm",e=(""+(e||"P")).toLowerCase();var o=r.putOnlyUsedFonts||!1,u={},A={internal:{},__private__:{}};A.__private__.PubSub=Q1;var g="1.3",p=A.__private__.getPdfVersion=function(){return g};A.__private__.setPdfVersion=function(F){g=F};var d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return d};var m=A.__private__.getPageFormat=function(F){return d[F]};s=s||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},C=v.COMPAT;function x(){this.saveGraphicsState(),tt(new Le(te,0,0,-te,0,Na()*te).toString()+" cm"),this.setFontSize(this.getFontSize()/te),l="n",C=v.ADVANCED}function E(){this.restoreGraphicsState(),l="S",C=v.COMPAT}var L=A.__private__.combineFontStyleAndFontWeight=function(F,K){if(F=="bold"&&K=="normal"||F=="bold"&&K==400||F=="normal"&&K=="italic"||F=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(F=K==400||K==="normal"?F==="italic"?"italic":"normal":K!=700&&K!=="bold"||F!=="normal"?(K==700?"bold":K)+""+F:"bold"),F};A.advancedAPI=function(F){var K=C===v.COMPAT;return K&&x.call(this),typeof F!="function"||(F(this),K&&E.call(this)),this},A.compatAPI=function(F){var K=C===v.ADVANCED;return K&&E.call(this),typeof F!="function"||(F(this),K&&x.call(this)),this},A.isAdvancedAPI=function(){return C===v.ADVANCED};var U,O=function(F){if(C!==v.ADVANCED)throw new Error(F+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},X=A.roundToPrecision=A.__private__.roundToPrecision=function(F,K){var dt=t||K;if(isNaN(F)||isNaN(dt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return F.toFixed(dt).replace(/0+$/,"")};U=A.hpf=A.__private__.hpf=typeof n=="number"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return X(F,n)}:n==="smart"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return X(F,F>-1&&F<1?16:5)}:function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return X(F,16)};var rt=A.f2=A.__private__.f2=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f2");return X(F,2)},M=A.__private__.f3=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f3");return X(F,3)},H=A.scale=A.__private__.scale=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.scale");return C===v.COMPAT?F*te:C===v.ADVANCED?F:void 0},J=function(F){return C===v.COMPAT?Na()-F:C===v.ADVANCED?F:void 0},$=function(F){return H(J(F))};A.__private__.setPrecision=A.setPrecision=function(F){typeof parseInt(F,10)=="number"&&(t=parseInt(F,10))};var ht,ut="00000000000000000000000000000000",pt=A.__private__.getFileId=function(){return ut},ft=A.__private__.setFileId=function(F){return ut=F!==void 0&&/^[a-fA-F0-9]{32}$/.test(F)?F.toUpperCase():ut.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(ri=new Gl(h.userPermissions,h.userPassword,h.ownerPassword,ut)),ut};A.setFileId=function(F){return ft(F),this},A.getFileId=function(){return pt()};var R=A.__private__.convertDateToPDFDate=function(F){var K=F.getTimezoneOffset(),dt=K<0?"+":"-",yt=Math.floor(Math.abs(K/60)),Ot=Math.abs(K%60),Vt=[dt,k(yt),"'",k(Ot),"'"].join("");return["D:",F.getFullYear(),k(F.getMonth()+1),k(F.getDate()),k(F.getHours()),k(F.getMinutes()),k(F.getSeconds()),Vt].join("")},G=A.__private__.convertPDFDateToDate=function(F){var K=parseInt(F.substr(2,4),10),dt=parseInt(F.substr(6,2),10)-1,yt=parseInt(F.substr(8,2),10),Ot=parseInt(F.substr(10,2),10),Vt=parseInt(F.substr(12,2),10),se=parseInt(F.substr(14,2),10);return new Date(K,dt,yt,Ot,Vt,se,0)},it=A.__private__.setCreationDate=function(F){var K;if(F===void 0&&(F=new Date),F instanceof Date)K=R(F);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(F))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=F}return ht=K},P=A.__private__.getCreationDate=function(F){var K=ht;return F==="jsDate"&&(K=G(ht)),K};A.setCreationDate=function(F){return it(F),this},A.getCreationDate=function(F){return P(F)};var V,k=A.__private__.padd2=function(F){return("0"+parseInt(F)).slice(-2)},N=A.__private__.padd2Hex=function(F){return("00"+(F=F.toString())).substr(F.length)},Z=0,st=[],ct=[],ot=0,wt=[],_t=[],Nt=!1,vt=ct,mt=function(){Z=0,ot=0,ct=[],st=[],wt=[],hn=kr(),sn=kr()};A.__private__.setCustomOutputDestination=function(F){Nt=!0,vt=F};var gt=function(F){Nt||(vt=F)};A.__private__.resetCustomOutputDestination=function(){Nt=!1,vt=ct};var tt=A.__private__.out=function(F){return F=F.toString(),ot+=F.length+1,vt.push(F),vt},It=A.__private__.write=function(F){return tt(arguments.length===1?F.toString():Array.prototype.join.call(arguments," "))},Pt=A.__private__.getArrayBuffer=function(F){for(var K=F.length,dt=new ArrayBuffer(K),yt=new Uint8Array(dt);K--;)yt[K]=F.charCodeAt(K);return dt},Ut=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return Ut};var Gt=r.fontSize||16;A.__private__.setFontSize=A.setFontSize=function(F){return Gt=C===v.ADVANCED?F/te:F,this};var Dt,bt=A.__private__.getFontSize=A.getFontSize=function(){return C===v.COMPAT?Gt:Gt*te},Kt=r.R2L||!1;A.__private__.setR2L=A.setR2L=function(F){return Kt=F,this},A.__private__.getR2L=A.getR2L=function(){return Kt};var Zt,le=A.__private__.setZoomMode=function(F){var K=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(F))Dt=F;else if(isNaN(F)){if(K.indexOf(F)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+F+'" is not recognized.');Dt=F}else Dt=parseInt(F,10)};A.__private__.getZoomMode=function(){return Dt};var pe,Rt=A.__private__.setPageMode=function(F){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(F)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+F+'" is not recognized.');Zt=F};A.__private__.getPageMode=function(){return Zt};var zt=A.__private__.setLayoutMode=function(F){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(F)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+F+'" is not recognized.');pe=F};A.__private__.getLayoutMode=function(){return pe},A.__private__.setDisplayMode=A.setDisplayMode=function(F,K,dt){return le(F),zt(K),Rt(dt),this};var Xt={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function(F){if(Object.keys(Xt).indexOf(F)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xt[F]},A.__private__.getDocumentProperties=function(){return Xt},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(F){for(var K in Xt)Xt.hasOwnProperty(K)&&F[K]&&(Xt[K]=F[K]);return this},A.__private__.setDocumentProperty=function(F,K){if(Object.keys(Xt).indexOf(F)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xt[F]=K};var ae,te,Ne,Be,Ar,Ke={},qe={},nn=[],Xe={},_n={},sr={},ei={},_r=null,Mr=0,ke=[],Ze=new Q1(A),On=r.hotfixes||[],or={},ji={},Ki=[],Le=function F(K,dt,yt,Ot,Vt,se){if(!(this instanceof F))return new F(K,dt,yt,Ot,Vt,se);isNaN(K)&&(K=1),isNaN(dt)&&(dt=0),isNaN(yt)&&(yt=0),isNaN(Ot)&&(Ot=1),isNaN(Vt)&&(Vt=0),isNaN(se)&&(se=0),this._matrix=[K,dt,yt,Ot,Vt,se]};Object.defineProperty(Le.prototype,"sx",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(Le.prototype,"shy",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(Le.prototype,"shx",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(Le.prototype,"sy",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(Le.prototype,"tx",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(Le.prototype,"ty",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(Le.prototype,"a",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(Le.prototype,"b",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(Le.prototype,"c",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(Le.prototype,"d",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(Le.prototype,"e",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(Le.prototype,"f",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(Le.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Le.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Le.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Le.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Le.prototype.join=function(F){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(F)},Le.prototype.multiply=function(F){var K=F.sx*this.sx+F.shy*this.shx,dt=F.sx*this.shy+F.shy*this.sy,yt=F.shx*this.sx+F.sy*this.shx,Ot=F.shx*this.shy+F.sy*this.sy,Vt=F.tx*this.sx+F.ty*this.shx+this.tx,se=F.tx*this.shy+F.ty*this.sy+this.ty;return new Le(K,dt,yt,Ot,Vt,se)},Le.prototype.decompose=function(){var F=this.sx,K=this.shy,dt=this.shx,yt=this.sy,Ot=this.tx,Vt=this.ty,se=Math.sqrt(F*F+K*K),ve=(F/=se)*dt+(K/=se)*yt;dt-=F*ve,yt-=K*ve;var Pe=Math.sqrt(dt*dt+yt*yt);return ve/=Pe,F*(yt/=Pe)<K*(dt/=Pe)&&(F=-F,K=-K,ve=-ve,se=-se),{scale:new Le(se,0,0,Pe,0,0),translate:new Le(1,0,0,1,Ot,Vt),rotate:new Le(F,K,-K,F,0,0),skew:new Le(1,0,ve,1,0,0)}},Le.prototype.toString=function(F){return this.join(" ")},Le.prototype.inversed=function(){var F=this.sx,K=this.shy,dt=this.shx,yt=this.sy,Ot=this.tx,Vt=this.ty,se=1/(F*yt-K*dt),ve=yt*se,Pe=-K*se,Ge=-dt*se,$e=F*se;return new Le(ve,Pe,Ge,$e,-ve*Ot-Ge*Vt,-Pe*Ot-$e*Vt)},Le.prototype.applyToPoint=function(F){var K=F.x*this.sx+F.y*this.shx+this.tx,dt=F.x*this.shy+F.y*this.sy+this.ty;return new uo(K,dt)},Le.prototype.applyToRectangle=function(F){var K=this.applyToPoint(F),dt=this.applyToPoint(new uo(F.x+F.w,F.y+F.h));return new dl(K.x,K.y,dt.x-K.x,dt.y-K.y)},Le.prototype.clone=function(){var F=this.sx,K=this.shy,dt=this.shx,yt=this.sy,Ot=this.tx,Vt=this.ty;return new Le(F,K,dt,yt,Ot,Vt)},A.Matrix=Le;var Qn=A.matrixMult=function(F,K){return K.multiply(F)},Zn=new Le(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=Zn;var Wi=function(F,K){if(!_n[F]){var dt=(K instanceof zA?"Sh":"P")+(Object.keys(Xe).length+1).toString(10);K.id=dt,_n[F]=dt,Xe[dt]=K,Ze.publish("addPattern",K)}};A.ShadingPattern=zA,A.TilingPattern=Wo,A.addShadingPattern=function(F,K){return O("addShadingPattern()"),Wi(F,K),this},A.beginTilingPattern=function(F){O("beginTilingPattern()"),wc(F.boundingBox[0],F.boundingBox[1],F.boundingBox[2]-F.boundingBox[0],F.boundingBox[3]-F.boundingBox[1],F.matrix)},A.endTilingPattern=function(F,K){O("endTilingPattern()"),K.stream=_t[V].join(`
`),Wi(F,K),Ze.publish("endTilingPattern",K),Ki.pop().restore()};var Te=A.__private__.newObject=function(){var F=kr();return Dr(F,!0),F},kr=A.__private__.newObjectDeferred=function(){return Z++,st[Z]=function(){return ot},Z},Dr=function(F,K){return K=typeof K=="boolean"&&K,st[F]=ot,K&&tt(F+" 0 obj"),F},Qi=A.__private__.newAdditionalObject=function(){var F={objId:kr(),content:""};return wt.push(F),F},hn=kr(),sn=kr(),En=A.__private__.decodeColorString=function(F){var K=F.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length===5&&(K[4]==="k"||K[4]==="K")&&(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var dt=parseFloat(K[0]);K=[dt,dt,dt,"r"]}for(var yt="#",Ot=0;Ot<3;Ot++)yt+=("0"+Math.floor(255*parseFloat(K[Ot])).toString(16)).slice(-2);return yt},Nn=A.__private__.encodeColorString=function(F){var K;typeof F=="string"&&(F={ch1:F});var dt=F.ch1,yt=F.ch2,Ot=F.ch3,Vt=F.ch4,se=F.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof dt=="string"&&dt.charAt(0)!=="#"){var ve=new I1(dt);if(ve.ok)dt=ve.toHex();else if(!/^\d*\.?\d*$/.test(dt))throw new Error('Invalid color "'+dt+'" passed to jsPDF.encodeColorString.')}if(typeof dt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(dt)&&(dt="#"+dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]),typeof dt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(dt)){var Pe=parseInt(dt.substr(1),16);dt=Pe>>16&255,yt=Pe>>8&255,Ot=255&Pe}if(yt===void 0||Vt===void 0&&dt===yt&&yt===Ot)if(typeof dt=="string")K=dt+" "+se[0];else switch(F.precision){case 2:K=rt(dt/255)+" "+se[0];break;case 3:default:K=M(dt/255)+" "+se[0]}else if(Vt===void 0||dr(Vt)==="object"){if(Vt&&!isNaN(Vt.a)&&Vt.a===0)return K=["1.","1.","1.",se[1]].join(" ");if(typeof dt=="string")K=[dt,yt,Ot,se[1]].join(" ");else switch(F.precision){case 2:K=[rt(dt/255),rt(yt/255),rt(Ot/255),se[1]].join(" ");break;default:case 3:K=[M(dt/255),M(yt/255),M(Ot/255),se[1]].join(" ")}}else if(typeof dt=="string")K=[dt,yt,Ot,Vt,se[2]].join(" ");else switch(F.precision){case 2:K=[rt(dt),rt(yt),rt(Ot),rt(Vt),se[2]].join(" ");break;case 3:default:K=[M(dt),M(yt),M(Ot),M(Vt),se[2]].join(" ")}return K},Mn=A.__private__.getFilters=function(){return f},un=A.__private__.putStream=function(F){var K=(F=F||{}).data||"",dt=F.filters||Mn(),yt=F.alreadyAppliedFilters||[],Ot=F.addLength1||!1,Vt=K.length,se=F.objectId,ve=function(on){return on};if(h!==null&&se===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(ve=ri.encryptor(se,0));var Pe={};dt===!0&&(dt=["FlateEncode"]);var Ge=F.additionalKeyValues||[],$e=(Pe=Me.API.processDataByFilters!==void 0?Me.API.processDataByFilters(K,dt):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(yt)?yt.join(" "):yt.toString());if(Pe.data.length!==0&&(Ge.push({key:"Length",value:Pe.data.length}),Ot===!0&&Ge.push({key:"Length1",value:Vt})),$e.length!=0)if($e.split("/").length-1==1)Ge.push({key:"Filter",value:$e});else{Ge.push({key:"Filter",value:"["+$e+"]"});for(var ar=0;ar<Ge.length;ar+=1)if(Ge[ar].key==="DecodeParms"){for(var Ir=[],Pr=0;Pr<Pe.reverseChain.split("/").length-1;Pr+=1)Ir.push("null");Ir.push(Ge[ar].value),Ge[ar].value="["+Ir.join(" ")+"]"}}tt("<<");for(var Re=0;Re<Ge.length;Re++)tt("/"+Ge[Re].key+" "+Ge[Re].value);tt(">>"),Pe.data.length!==0&&(tt("stream"),tt(ve(Pe.data)),tt("endstream"))},Fn=A.__private__.putPage=function(F){var K=F.number,dt=F.data,yt=F.objId,Ot=F.contentsObjId;Dr(yt,!0),tt("<</Type /Page"),tt("/Parent "+F.rootDictionaryObjId+" 0 R"),tt("/Resources "+F.resourceDictionaryObjId+" 0 R"),tt("/MediaBox ["+parseFloat(U(F.mediaBox.bottomLeftX))+" "+parseFloat(U(F.mediaBox.bottomLeftY))+" "+U(F.mediaBox.topRightX)+" "+U(F.mediaBox.topRightY)+"]"),F.cropBox!==null&&tt("/CropBox ["+U(F.cropBox.bottomLeftX)+" "+U(F.cropBox.bottomLeftY)+" "+U(F.cropBox.topRightX)+" "+U(F.cropBox.topRightY)+"]"),F.bleedBox!==null&&tt("/BleedBox ["+U(F.bleedBox.bottomLeftX)+" "+U(F.bleedBox.bottomLeftY)+" "+U(F.bleedBox.topRightX)+" "+U(F.bleedBox.topRightY)+"]"),F.trimBox!==null&&tt("/TrimBox ["+U(F.trimBox.bottomLeftX)+" "+U(F.trimBox.bottomLeftY)+" "+U(F.trimBox.topRightX)+" "+U(F.trimBox.topRightY)+"]"),F.artBox!==null&&tt("/ArtBox ["+U(F.artBox.bottomLeftX)+" "+U(F.artBox.bottomLeftY)+" "+U(F.artBox.topRightX)+" "+U(F.artBox.topRightY)+"]"),typeof F.userUnit=="number"&&F.userUnit!==1&&tt("/UserUnit "+F.userUnit),Ze.publish("putPage",{objId:yt,pageContext:ke[K],pageNumber:K,page:dt}),tt("/Contents "+Ot+" 0 R"),tt(">>"),tt("endobj");var Vt=dt.join(`
`);return C===v.ADVANCED&&(Vt+=`
Q`),Dr(Ot,!0),un({data:Vt,filters:Mn(),objectId:Ot}),tt("endobj"),yt},Er=A.__private__.putPages=function(){var F,K,dt=[];for(F=1;F<=Mr;F++)ke[F].objId=kr(),ke[F].contentsObjId=kr();for(F=1;F<=Mr;F++)dt.push(Fn({number:F,data:_t[F],objId:ke[F].objId,contentsObjId:ke[F].contentsObjId,mediaBox:ke[F].mediaBox,cropBox:ke[F].cropBox,bleedBox:ke[F].bleedBox,trimBox:ke[F].trimBox,artBox:ke[F].artBox,userUnit:ke[F].userUnit,rootDictionaryObjId:hn,resourceDictionaryObjId:sn}));Dr(hn,!0),tt("<</Type /Pages");var yt="/Kids [";for(K=0;K<Mr;K++)yt+=dt[K]+" 0 R ";tt(yt+"]"),tt("/Count "+Mr),tt(">>"),tt("endobj"),Ze.publish("postPutPages")},Os=function(F){Ze.publish("putFont",{font:F,out:tt,newObject:Te,putStream:un}),F.isAlreadyPutted!==!0&&(F.objectNumber=Te(),tt("<<"),tt("/Type /Font"),tt("/BaseFont /"+Vl(F.postScriptName)),tt("/Subtype /Type1"),typeof F.encoding=="string"&&tt("/Encoding /"+F.encoding),tt("/FirstChar 32"),tt("/LastChar 255"),tt(">>"),tt("endobj"))},Kr=function(){for(var F in Ke)Ke.hasOwnProperty(F)&&(o===!1||o===!0&&u.hasOwnProperty(F))&&Os(Ke[F])},ta=function(F){F.objectNumber=Te();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[U(F.x),U(F.y),U(F.x+F.width),U(F.y+F.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+F.matrix.toString()+"]"});var dt=F.pages[1].join(`
`);un({data:dt,additionalKeyValues:K,objectId:F.objectNumber}),tt("endobj")},Fr=function(){for(var F in or)or.hasOwnProperty(F)&&ta(or[F])},Qs=function(F,K){var dt,yt=[],Ot=1/(K-1);for(dt=0;dt<1;dt+=Ot)yt.push(dt);if(yt.push(1),F[0].offset!=0){var Vt={offset:0,color:F[0].color};F.unshift(Vt)}if(F[F.length-1].offset!=1){var se={offset:1,color:F[F.length-1].color};F.push(se)}for(var ve="",Pe=0,Ge=0;Ge<yt.length;Ge++){for(dt=yt[Ge];dt>F[Pe+1].offset;)Pe++;var $e=F[Pe].offset,ar=(dt-$e)/(F[Pe+1].offset-$e),Ir=F[Pe].color,Pr=F[Pe+1].color;ve+=N(Math.round((1-ar)*Ir[0]+ar*Pr[0]).toString(16))+N(Math.round((1-ar)*Ir[1]+ar*Pr[1]).toString(16))+N(Math.round((1-ar)*Ir[2]+ar*Pr[2]).toString(16))}return ve.trim()},lA=function(F,K){K||(K=21);var dt=Te(),yt=Qs(F.colors,K),Ot=[];Ot.push({key:"FunctionType",value:"0"}),Ot.push({key:"Domain",value:"[0.0 1.0]"}),Ot.push({key:"Size",value:"["+K+"]"}),Ot.push({key:"BitsPerSample",value:"8"}),Ot.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ot.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),un({data:yt,additionalKeyValues:Ot,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:dt}),tt("endobj"),F.objectNumber=Te(),tt("<< /ShadingType "+F.type),tt("/ColorSpace /DeviceRGB");var Vt="/Coords ["+U(parseFloat(F.coords[0]))+" "+U(parseFloat(F.coords[1]))+" ";F.type===2?Vt+=U(parseFloat(F.coords[2]))+" "+U(parseFloat(F.coords[3])):Vt+=U(parseFloat(F.coords[2]))+" "+U(parseFloat(F.coords[3]))+" "+U(parseFloat(F.coords[4]))+" "+U(parseFloat(F.coords[5])),tt(Vt+="]"),F.matrix&&tt("/Matrix ["+F.matrix.toString()+"]"),tt("/Function "+dt+" 0 R"),tt("/Extend [true true]"),tt(">>"),tt("endobj")},oo=function(F,K){var dt=kr(),yt=Te();K.push({resourcesOid:dt,objectOid:yt}),F.objectNumber=yt;var Ot=[];Ot.push({key:"Type",value:"/Pattern"}),Ot.push({key:"PatternType",value:"1"}),Ot.push({key:"PaintType",value:"1"}),Ot.push({key:"TilingType",value:"1"}),Ot.push({key:"BBox",value:"["+F.boundingBox.map(U).join(" ")+"]"}),Ot.push({key:"XStep",value:U(F.xStep)}),Ot.push({key:"YStep",value:U(F.yStep)}),Ot.push({key:"Resources",value:dt+" 0 R"}),F.matrix&&Ot.push({key:"Matrix",value:"["+F.matrix.toString()+"]"}),un({data:F.stream,additionalKeyValues:Ot,objectId:F.objectNumber}),tt("endobj")},Tn=function(F){var K;for(K in Xe)Xe.hasOwnProperty(K)&&(Xe[K]instanceof zA?lA(Xe[K]):Xe[K]instanceof Wo&&oo(Xe[K],F))},Fa=function(F){for(var K in F.objectNumber=Te(),tt("<<"),F)switch(K){case"opacity":tt("/ca "+rt(F[K]));break;case"stroke-opacity":tt("/CA "+rt(F[K]))}tt(">>"),tt("endobj")},ea=function(){var F;for(F in sr)sr.hasOwnProperty(F)&&Fa(sr[F])},kn=function(){for(var F in tt("/XObject <<"),or)or.hasOwnProperty(F)&&or[F].objectNumber>=0&&tt("/"+F+" "+or[F].objectNumber+" 0 R");Ze.publish("putXobjectDict"),tt(">>")},fn=function(){ri.oid=Te(),tt("<<"),tt("/Filter /Standard"),tt("/V "+ri.v),tt("/R "+ri.r),tt("/U <"+ri.toHexString(ri.U)+">"),tt("/O <"+ri.toHexString(ri.O)+">"),tt("/P "+ri.P),tt(">>"),tt("endobj")},Ta=function(){for(var F in tt("/Font <<"),Ke)Ke.hasOwnProperty(F)&&(o===!1||o===!0&&u.hasOwnProperty(F))&&tt("/"+F+" "+Ke[F].objectNumber+" 0 R");tt(">>")},cA=function(){if(Object.keys(Xe).length>0){for(var F in tt("/Shading <<"),Xe)Xe.hasOwnProperty(F)&&Xe[F]instanceof zA&&Xe[F].objectNumber>=0&&tt("/"+F+" "+Xe[F].objectNumber+" 0 R");Ze.publish("putShadingPatternDict"),tt(">>")}},an=function(F){if(Object.keys(Xe).length>0){for(var K in tt("/Pattern <<"),Xe)Xe.hasOwnProperty(K)&&Xe[K]instanceof A.TilingPattern&&Xe[K].objectNumber>=0&&Xe[K].objectNumber<F&&tt("/"+K+" "+Xe[K].objectNumber+" 0 R");Ze.publish("putTilingPatternDict"),tt(">>")}},ts=function(){if(Object.keys(sr).length>0){var F;for(F in tt("/ExtGState <<"),sr)sr.hasOwnProperty(F)&&sr[F].objectNumber>=0&&tt("/"+F+" "+sr[F].objectNumber+" 0 R");Ze.publish("putGStateDict"),tt(">>")}},Rr=function(F){Dr(F.resourcesOid,!0),tt("<<"),tt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ta(),cA(),an(F.objectOid),ts(),kn(),tt(">>"),tt("endobj")},hA=function(){var F=[];Kr(),ea(),Fr(),Tn(F),Ze.publish("putResources"),F.forEach(Rr),Rr({resourcesOid:sn,objectOid:Number.MAX_SAFE_INTEGER}),Ze.publish("postPutResources")},uA=function(){Ze.publish("putAdditionalObjects");for(var F=0;F<wt.length;F++){var K=wt[F];Dr(K.objId,!0),tt(K.content),tt("endobj")}Ze.publish("postPutAdditionalObjects")},ra=function(F){qe[F.fontName]=qe[F.fontName]||{},qe[F.fontName][F.fontStyle]=F.id},es=function(F,K,dt,yt,Ot){var Vt={id:"F"+(Object.keys(Ke).length+1).toString(10),postScriptName:F,fontName:K,fontStyle:dt,encoding:yt,isStandardFont:Ot||!1,metadata:{}};return Ze.publish("addFont",{font:Vt,instance:this}),Ke[Vt.id]=Vt,ra(Vt),Vt.id},Dn=function(F){for(var K=0,dt=Ut.length;K<dt;K++){var yt=es.call(this,F[K][0],F[K][1],F[K][2],Ut[K][3],!0);o===!1&&(u[yt]=!0);var Ot=F[K][0].split("-");ra({id:yt,fontName:Ot[0],fontStyle:Ot[1]||""})}Ze.publish("addFonts",{fonts:Ke,dictionary:qe})},Ni=function(F){return F.foo=function(){try{return F.apply(this,arguments)}catch(yt){var K=yt.stack||"";~K.indexOf(" at ")&&(K=K.split(" at ")[1]);var dt="Error in function "+K.split(`
`)[0].split("<")[0]+": "+yt.message;if(!De.console)throw new Error(dt);De.console.error(dt,yt),De.alert&&alert(dt)}},F.foo.bar=F,F.foo},Hr=function(F,K){var dt,yt,Ot,Vt,se,ve,Pe,Ge,$e;if(Ot=(K=K||{}).sourceEncoding||"Unicode",se=K.outputEncoding,(K.autoencode||se)&&Ke[ae].metadata&&Ke[ae].metadata[Ot]&&Ke[ae].metadata[Ot].encoding&&(Vt=Ke[ae].metadata[Ot].encoding,!se&&Ke[ae].encoding&&(se=Ke[ae].encoding),!se&&Vt.codePages&&(se=Vt.codePages[0]),typeof se=="string"&&(se=Vt[se]),se)){for(Pe=!1,ve=[],dt=0,yt=F.length;dt<yt;dt++)(Ge=se[F.charCodeAt(dt)])?ve.push(String.fromCharCode(Ge)):ve.push(F[dt]),ve[dt].charCodeAt(0)>>8&&(Pe=!0);F=ve.join("")}for(dt=F.length;Pe===void 0&&dt!==0;)F.charCodeAt(dt-1)>>8&&(Pe=!0),dt--;if(!Pe)return F;for(ve=K.noBOM?[]:[254,255],dt=0,yt=F.length;dt<yt;dt++){if(($e=(Ge=F.charCodeAt(dt))>>8)>>8)throw new Error("Character at position "+dt+" of string '"+F+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ve.push($e),ve.push(Ge-($e<<8))}return String.fromCharCode.apply(void 0,ve)},Xi=A.__private__.pdfEscape=A.pdfEscape=function(F,K){return Hr(F,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},La=A.__private__.beginPage=function(F){_t[++Mr]=[],ke[Mr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(F[0]),topRightY:Number(F[1])}},gA(Mr),gt(_t[V])},fA=function(F,K){var dt,yt,Ot;switch(e=K||e,typeof F=="string"&&(dt=m(F.toLowerCase()),Array.isArray(dt)&&(yt=dt[0],Ot=dt[1])),Array.isArray(F)&&(yt=F[0]*te,Ot=F[1]*te),isNaN(yt)&&(yt=s[0],Ot=s[1]),(yt>14400||Ot>14400)&&(Vr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),yt=Math.min(14400,yt),Ot=Math.min(14400,Ot)),s=[yt,Ot],e.substr(0,1)){case"l":Ot>yt&&(s=[Ot,yt]);break;case"p":yt>Ot&&(s=[Ot,yt])}La(s),ho(aa),tt(lr),SA!==0&&tt(SA+" J"),fl!==0&&tt(fl+" j"),Ze.publish("addPage",{pageNumber:Mr})},dA=function(F){F>0&&F<=Mr&&(_t.splice(F,1),ke.splice(F,1),Mr--,V>Mr&&(V=Mr),this.setPage(V))},gA=function(F){F>0&&F<=Mr&&(V=F)},Ia=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return _t.length-1},ia=function(F,K,dt){var yt,Ot=void 0;return dt=dt||{},F=F!==void 0?F:Ke[ae].fontName,K=K!==void 0?K:Ke[ae].fontStyle,yt=F.toLowerCase(),qe[yt]!==void 0&&qe[yt][K]!==void 0?Ot=qe[yt][K]:qe[F]!==void 0&&qe[F][K]!==void 0?Ot=qe[F][K]:dt.disableWarning===!1&&Vr.warn("Unable to look up font label for font '"+F+"', '"+K+"'. Refer to getFontList() for available fonts."),Ot||dt.noFallback||(Ot=qe.times[K])==null&&(Ot=qe.times.normal),Ot},Rn=A.__private__.putInfo=function(){var F=Te(),K=function(yt){return yt};for(var dt in h!==null&&(K=ri.encryptor(F,0)),tt("<<"),tt("/Producer ("+Xi(K("jsPDF "+Me.version))+")"),Xt)Xt.hasOwnProperty(dt)&&Xt[dt]&&tt("/"+dt.substr(0,1).toUpperCase()+dt.substr(1)+" ("+Xi(K(Xt[dt]))+")");tt("/CreationDate ("+Xi(K(ht))+")"),tt(">>"),tt("endobj")},dn=A.__private__.putCatalog=function(F){var K=(F=F||{}).rootDictionaryObjId||hn;switch(Te(),tt("<<"),tt("/Type /Catalog"),tt("/Pages "+K+" 0 R"),Dt||(Dt="fullwidth"),Dt){case"fullwidth":tt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":tt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":tt("/OpenAction [3 0 R /Fit]");break;case"original":tt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var dt=""+Dt;dt.substr(dt.length-1)==="%"&&(Dt=parseInt(Dt)/100),typeof Dt=="number"&&tt("/OpenAction [3 0 R /XYZ null null "+rt(Dt)+"]")}switch(pe||(pe="continuous"),pe){case"continuous":tt("/PageLayout /OneColumn");break;case"single":tt("/PageLayout /SinglePage");break;case"two":case"twoleft":tt("/PageLayout /TwoColumnLeft");break;case"tworight":tt("/PageLayout /TwoColumnRight")}Zt&&tt("/PageMode /"+Zt),Ze.publish("putCatalog"),tt(">>"),tt("endobj")},pA=A.__private__.putTrailer=function(){tt("trailer"),tt("<<"),tt("/Size "+(Z+1)),tt("/Root "+Z+" 0 R"),tt("/Info "+(Z-1)+" 0 R"),h!==null&&tt("/Encrypt "+ri.oid+" 0 R"),tt("/ID [ <"+ut+"> <"+ut+"> ]"),tt(">>")},Pa=A.__private__.putHeader=function(){tt("%PDF-"+g),tt("%ºß¬à")},hl=A.__private__.putXRef=function(){var F="0000000000";tt("xref"),tt("0 "+(Z+1)),tt("0000000000 65535 f ");for(var K=1;K<=Z;K++)typeof st[K]=="function"?tt((F+st[K]()).slice(-10)+" 00000 n "):st[K]!==void 0?tt((F+st[K]).slice(-10)+" 00000 n "):tt("0000000000 00000 n ")},zi=A.__private__.buildDocument=function(){mt(),gt(ct),Ze.publish("buildDocument"),Pa(),Er(),uA(),hA(),h!==null&&fn(),Rn(),dn();var F=ot;return hl(),pA(),tt("startxref"),tt(""+F),tt("%%EOF"),gt(_t[V]),ct.join(`
`)},na=A.__private__.getBlob=function(F){return new Blob([Pt(F)],{type:"application/pdf"})},Ns=A.output=A.__private__.output=Ni(function(F,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",F){case void 0:return zi();case"save":A.save(K.filename);break;case"arraybuffer":return Pt(zi());case"blob":return na(zi());case"bloburi":case"bloburl":if(De.URL!==void 0&&typeof De.URL.createObjectURL=="function")return De.URL&&De.URL.createObjectURL(na(zi()))||void 0;Vr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var dt="",yt=zi();try{dt=Og(yt)}catch{dt=Og(unescape(encodeURIComponent(yt)))}return"data:application/pdf;filename="+K.filename+";base64,"+dt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(De)==="[object Window]"){var Ot="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Vt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(Ot=K.pdfObjectUrl,Vt="");var se='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ot+'"'+Vt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",ve=De.open();return ve!==null&&ve.document.write(se),ve}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(De)==="[object Window]"){var Pe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',Ge=De.open();if(Ge!==null){Ge.document.write(Pe);var $e=this;Ge.document.documentElement.querySelector("#pdfViewer").onload=function(){Ge.document.title=K.filename,Ge.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open($e.output("bloburl"))}}return Ge}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(De)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',Ir=De.open();if(Ir!==null&&(Ir.document.write(ar),Ir.document.title=K.filename),Ir||typeof safari>"u")return Ir;break;case"datauri":case"dataurl":return De.document.location.href=this.output("datauristring",K);default:return null}}),Cr=function(F){return Array.isArray(On)===!0&&On.indexOf(F)>-1};switch(i){case"pt":te=1;break;case"mm":te=72/25.4;break;case"cm":te=72/2.54;break;case"in":te=72;break;case"px":te=Cr("px_scaling")==1?.75:96/72;break;case"pc":case"em":te=12;break;case"ex":te=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);te=i}var ri=null;it(),ft();var ul=function(F){return h!==null?ri.encryptor(F,0):function(K){return K}},mA=A.__private__.getPageInfo=A.getPageInfo=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ke[F].objId,pageNumber:F,pageContext:ke[F]}},Ue=A.__private__.getPageInfoByObjId=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in ke)if(ke[K].objId===F)break;return mA(K)},lo=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:ke[V].objId,pageNumber:V,pageContext:ke[V]}};A.addPage=function(){return fA.apply(this,arguments),this},A.setPage=function(){return gA.apply(this,arguments),gt.call(this,_t[V]),this},A.insertPage=function(F){return this.addPage(),this.movePage(V,F),this},A.movePage=function(F,K){var dt,yt;if(F>K){dt=_t[F],yt=ke[F];for(var Ot=F;Ot>K;Ot--)_t[Ot]=_t[Ot-1],ke[Ot]=ke[Ot-1];_t[K]=dt,ke[K]=yt,this.setPage(K)}else if(F<K){dt=_t[F],yt=ke[F];for(var Vt=F;Vt<K;Vt++)_t[Vt]=_t[Vt+1],ke[Vt]=ke[Vt+1];_t[K]=dt,ke[K]=yt,this.setPage(K)}return this},A.deletePage=function(){return dA.apply(this,arguments),this},A.__private__.text=A.text=function(F,K,dt,yt,Ot){var Vt,se,ve,Pe,Ge,$e,ar,Ir,Pr,Re=(yt=yt||{}).scope||this;if(typeof F=="number"&&typeof K=="number"&&(typeof dt=="string"||Array.isArray(dt))){var on=dt;dt=K,K=F,F=on}if(arguments[3]instanceof Le?(O("The transform parameter of text() with a Matrix value"),Pr=Ot):(ve=arguments[4],Pe=arguments[5],dr(ar=arguments[3])==="object"&&ar!==null||(typeof ve=="string"&&(Pe=ve,ve=null),typeof ar=="string"&&(Pe=ar,ar=null),typeof ar=="number"&&(ve=ar,ar=null),yt={flags:ar,angle:ve,align:Pe})),isNaN(K)||isNaN(dt)||F==null)throw new Error("Invalid arguments passed to jsPDF.text");if(F.length===0)return Re;var gi="",is=!1,Di=typeof yt.lineHeightFactor=="number"?yt.lineHeightFactor:ws,Ri=Re.internal.scaleFactor;function bc(Ur){return Ur=Ur.split("	").join(Array(yt.TabLen||9).join(" ")),Xi(Ur,ar)}function ns(Ur){for(var Or,ni=Ur.concat(),mi=[],Rs=ni.length;Rs--;)typeof(Or=ni.shift())=="string"?mi.push(Or):Array.isArray(Ur)&&(Or.length===1||Or[1]===void 0&&Or[2]===void 0)?mi.push(Or[0]):mi.push([Or[0],Or[1],Or[2]]);return mi}function $r(Ur,Or){var ni;if(typeof Ur=="string")ni=Or(Ur)[0];else if(Array.isArray(Ur)){for(var mi,Rs,ha=Ur.concat(),IA=[],bl=ha.length;bl--;)typeof(mi=ha.shift())=="string"?IA.push(Or(mi)[0]):Array.isArray(mi)&&typeof mi[0]=="string"&&(Rs=Or(mi[0],mi[1],mi[2]),IA.push([Rs[0],Rs[1],Rs[2]]));ni=IA}return ni}var _A=!1,ci=!0;if(typeof F=="string")_A=!0;else if(Array.isArray(F)){var EA=F.concat();se=[];for(var Vn,Hi=EA.length;Hi--;)(typeof(Vn=EA.shift())!="string"||Array.isArray(Vn)&&typeof Vn[0]!="string")&&(ci=!1);_A=ci}if(_A===!1)throw new Error('Type of text must be string or Array. "'+F+'" is not recognized.');typeof F=="string"&&(F=F.match(/[\r?\n]/)?F.split(/\r\n|\r|\n/g):[F]);var ur=Gt/Re.internal.scaleFactor,FA=ur*(Di-1);switch(yt.baseline){case"bottom":dt-=FA;break;case"top":dt+=ur-FA;break;case"hanging":dt+=ur-2*FA;break;case"middle":dt+=ur/2-FA}if(($e=yt.maxWidth||0)>0&&(typeof F=="string"?F=Re.splitTextToSize(F,$e):Object.prototype.toString.call(F)==="[object Array]"&&(F=F.reduce(function(Ur,Or){return Ur.concat(Re.splitTextToSize(Or,$e))},[]))),Vt={text:F,x:K,y:dt,options:yt,mutex:{pdfEscape:Xi,activeFontKey:ae,fonts:Ke,activeFontSize:Gt}},Ze.publish("preProcessText",Vt),F=Vt.text,ve=(yt=Vt.options).angle,!(Pr instanceof Le)&&ve&&typeof ve=="number"){ve*=Math.PI/180,yt.rotationDirection===0&&(ve=-ve),C===v.ADVANCED&&(ve=-ve);var TA=Math.cos(ve),go=Math.sin(ve);Pr=new Le(TA,go,-go,TA,0,0)}else ve&&ve instanceof Le&&(Pr=ve);C!==v.ADVANCED||Pr||(Pr=Zn),(Ge=yt.charSpace||An)!==void 0&&(gi+=U(H(Ge))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ir=yt.horizontalScale)!==void 0&&(gi+=U(100*Ir)+` Tz
`),yt.lang;var gn=-1,po=yt.renderingMode!==void 0?yt.renderingMode:yt.stroke,mo=Re.internal.getCurrentPageInfo().pageContext;switch(po){case 0:case!1:case"fill":gn=0;break;case 1:case!0:case"stroke":gn=1;break;case 2:case"fillThenStroke":gn=2;break;case 3:case"invisible":gn=3;break;case 4:case"fillAndAddForClipping":gn=4;break;case 5:case"strokeAndAddPathForClipping":gn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gn=6;break;case 7:case"addToPathForClipping":gn=7}var vl=mo.usedRenderingMode!==void 0?mo.usedRenderingMode:-1;gn!==-1?gi+=gn+` Tr
`:vl!==-1&&(gi+=`0 Tr
`),gn!==-1&&(mo.usedRenderingMode=gn),Pe=yt.align||"left";var ii,ss=Gt*Di,Ms=Re.internal.pageSize.getWidth(),pi=Ke[ae];Ge=yt.charSpace||An,$e=yt.maxWidth||0,ar=Object.assign({autoencode:!0,noBOM:!0},yt.flags);var pn=[];if(Object.prototype.toString.call(F)==="[object Array]"){var jn;se=ns(F),Pe!=="left"&&(ii=se.map(function(Ur){return Re.getStringUnitWidth(Ur,{font:pi,charSpace:Ge,fontSize:Gt,doKerning:!1})*Gt/Ri}));var as,ks=0;if(Pe==="right"){K-=ii[0],F=[],Hi=se.length;for(var bs=0;bs<Hi;bs++)bs===0?(as=he(K),jn=Ye(dt)):(as=H(ks-ii[bs]),jn=-ss),F.push([se[bs],as,jn]),ks=ii[bs]}else if(Pe==="center"){K-=ii[0]/2,F=[],Hi=se.length;for(var oa=0;oa<Hi;oa++)oa===0?(as=he(K),jn=Ye(dt)):(as=H((ks-ii[oa])/2),jn=-ss),F.push([se[oa],as,jn]),ks=ii[oa]}else if(Pe==="left"){F=[],Hi=se.length;for(var Ds=0;Ds<Hi;Ds++)F.push(se[Ds])}else{if(Pe!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');F=[],Hi=se.length,$e=$e!==0?$e:Ms;for(var Si=0;Si<Hi;Si++)jn=Si===0?Ye(dt):-ss,as=Si===0?he(K):0,Si<Hi-1?pn.push(U(H(($e-ii[Si])/(se[Si].split(" ").length-1)))):pn.push(0),F.push([se[Si],as,jn])}}var vo=typeof yt.R2L=="boolean"?yt.R2L:Kt;vo===!0&&(F=$r(F,function(Ur,Or,ni){return[Ur.split("").reverse().join(""),Or,ni]})),Vt={text:F,x:K,y:dt,options:yt,mutex:{pdfEscape:Xi,activeFontKey:ae,fonts:Ke,activeFontSize:Gt}},Ze.publish("postProcessText",Vt),F=Vt.text,is=Vt.mutex.isHex||!1;var yl=Ke[ae].encoding;yl!=="WinAnsiEncoding"&&yl!=="StandardEncoding"||(F=$r(F,function(Ur,Or,ni){return[bc(Ur),Or,ni]})),se=ns(F),F=[];for(var Cs,As,la,LA=0,ln=1,Ma=Array.isArray(se[0])?ln:LA,ka="",wl=function(Ur,Or,ni){var mi="";return ni instanceof Le?(ni=typeof yt.angle=="number"?Qn(ni,new Le(1,0,0,1,Ur,Or)):Qn(new Le(1,0,0,1,Ur,Or),ni),C===v.ADVANCED&&(ni=Qn(new Le(1,0,0,-1,0,0),ni)),mi=ni.join(" ")+` Tm
`):mi=U(Ur)+" "+U(Or)+` Td
`,mi},mn=0;mn<se.length;mn++){switch(ka="",Ma){case ln:la=(is?"<":"(")+se[mn][0]+(is?">":")"),Cs=parseFloat(se[mn][1]),As=parseFloat(se[mn][2]);break;case LA:la=(is?"<":"(")+se[mn]+(is?">":")"),Cs=he(K),As=Ye(dt)}pn!==void 0&&pn[mn]!==void 0&&(ka=pn[mn]+` Tw
`),mn===0?F.push(ka+wl(Cs,As,Pr)+la):Ma===LA?F.push(ka+la):Ma===ln&&F.push(ka+wl(Cs,As,Pr)+la)}F=Ma===LA?F.join(` Tj
T* `):F.join(` Tj
`),F+=` Tj
`;var ca=`BT
/`;return ca+=ae+" "+Gt+` Tf
`,ca+=U(Gt*Di)+` TL
`,ca+=Lr+`
`,ca+=gi,ca+=F,tt(ca+="ET"),u[ae]=!0,Re};var co=A.__private__.clip=A.clip=function(F){return tt(F==="evenodd"?"W*":"W"),this};A.clipEvenOdd=function(){return co("evenodd")},A.__private__.discardPath=A.discardPath=function(){return tt("n"),this};var rs=A.__private__.isValidStyle=function(F){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(F)!==-1&&(K=!0),K};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function(F){return rs(F)&&(l=F),this};var sa=A.__private__.getStyle=A.getStyle=function(F){var K=l;switch(F){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=F}return K},Ua=A.close=function(){return tt("h"),this};A.stroke=function(){return tt("S"),this},A.fill=function(F){return Oa("f",F),this},A.fillEvenOdd=function(F){return Oa("f*",F),this},A.fillStroke=function(F){return Oa("B",F),this},A.fillStrokeEvenOdd=function(F){return Oa("B*",F),this};var Oa=function(F,K){dr(K)==="object"?vA(K,F):tt(F)},qr=function(F){F===null||C===v.ADVANCED&&F===void 0||(F=sa(F),tt(F))};function Qa(F,K,dt,yt,Ot){var Vt=new Wo(K||this.boundingBox,dt||this.xStep,yt||this.yStep,this.gState,Ot||this.matrix);Vt.stream=this.stream;var se=F+"$$"+this.cloneIndex+++"$$";return Wi(se,Vt),Vt}var vA=function(F,K){var dt=_n[F.key],yt=Xe[dt];if(yt instanceof zA)tt("q"),tt(yA(K)),yt.gState&&A.setGState(yt.gState),tt(F.matrix.toString()+" cm"),tt("/"+dt+" sh"),tt("Q");else if(yt instanceof Wo){var Ot=new Le(1,0,0,-1,0,Na());F.matrix&&(Ot=Ot.multiply(F.matrix||Zn),dt=Qa.call(yt,F.key,F.boundingBox,F.xStep,F.yStep,Ot).id),tt("q"),tt("/Pattern cs"),tt("/"+dt+" scn"),yt.gState&&A.setGState(yt.gState),tt(K),tt("Q")}},yA=function(F){switch(F){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},wA=A.moveTo=function(F,K){return tt(U(H(F))+" "+U($(K))+" m"),this},Hn=A.lineTo=function(F,K){return tt(U(H(F))+" "+U($(K))+" l"),this},Mi=A.curveTo=function(F,K,dt,yt,Ot,Vt){return tt([U(H(F)),U($(K)),U(H(dt)),U($(yt)),U(H(Ot)),U($(Vt)),"c"].join(" ")),this};A.__private__.line=A.line=function(F,K,dt,yt,Ot){if(isNaN(F)||isNaN(K)||isNaN(dt)||isNaN(yt)||!rs(Ot))throw new Error("Invalid arguments passed to jsPDF.line");return C===v.COMPAT?this.lines([[dt-F,yt-K]],F,K,[1,1],Ot||"S"):this.lines([[dt-F,yt-K]],F,K,[1,1]).stroke()},A.__private__.lines=A.lines=function(F,K,dt,yt,Ot,Vt){var se,ve,Pe,Ge,$e,ar,Ir,Pr,Re,on,gi,is;if(typeof F=="number"&&(is=dt,dt=K,K=F,F=is),yt=yt||[1,1],Vt=Vt||!1,isNaN(K)||isNaN(dt)||!Array.isArray(F)||!Array.isArray(yt)||!rs(Ot)||typeof Vt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(wA(K,dt),se=yt[0],ve=yt[1],Ge=F.length,on=K,gi=dt,Pe=0;Pe<Ge;Pe++)($e=F[Pe]).length===2?(on=$e[0]*se+on,gi=$e[1]*ve+gi,Hn(on,gi)):(ar=$e[0]*se+on,Ir=$e[1]*ve+gi,Pr=$e[2]*se+on,Re=$e[3]*ve+gi,on=$e[4]*se+on,gi=$e[5]*ve+gi,Mi(ar,Ir,Pr,Re,on,gi));return Vt&&Ua(),qr(Ot),this},A.path=function(F){for(var K=0;K<F.length;K++){var dt=F[K],yt=dt.c;switch(dt.op){case"m":wA(yt[0],yt[1]);break;case"l":Hn(yt[0],yt[1]);break;case"c":Mi.apply(this,yt);break;case"h":Ua()}}return this},A.__private__.rect=A.rect=function(F,K,dt,yt,Ot){if(isNaN(F)||isNaN(K)||isNaN(dt)||isNaN(yt)||!rs(Ot))throw new Error("Invalid arguments passed to jsPDF.rect");return C===v.COMPAT&&(yt=-yt),tt([U(H(F)),U($(K)),U(H(dt)),U(H(yt)),"re"].join(" ")),qr(Ot),this},A.__private__.triangle=A.triangle=function(F,K,dt,yt,Ot,Vt,se){if(isNaN(F)||isNaN(K)||isNaN(dt)||isNaN(yt)||isNaN(Ot)||isNaN(Vt)||!rs(se))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[dt-F,yt-K],[Ot-dt,Vt-yt],[F-Ot,K-Vt]],F,K,[1,1],se,!0),this},A.__private__.roundedRect=A.roundedRect=function(F,K,dt,yt,Ot,Vt,se){if(isNaN(F)||isNaN(K)||isNaN(dt)||isNaN(yt)||isNaN(Ot)||isNaN(Vt)||!rs(se))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ve=4/3*(Math.SQRT2-1);return Ot=Math.min(Ot,.5*dt),Vt=Math.min(Vt,.5*yt),this.lines([[dt-2*Ot,0],[Ot*ve,0,Ot,Vt-Vt*ve,Ot,Vt],[0,yt-2*Vt],[0,Vt*ve,-Ot*ve,Vt,-Ot,Vt],[2*Ot-dt,0],[-Ot*ve,0,-Ot,-Vt*ve,-Ot,-Vt],[0,2*Vt-yt],[0,-Vt*ve,Ot*ve,-Vt,Ot,-Vt]],F+Ot,K,[1,1],se,!0),this},A.__private__.ellipse=A.ellipse=function(F,K,dt,yt,Ot){if(isNaN(F)||isNaN(K)||isNaN(dt)||isNaN(yt)||!rs(Ot))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Vt=4/3*(Math.SQRT2-1)*dt,se=4/3*(Math.SQRT2-1)*yt;return wA(F+dt,K),Mi(F+dt,K-se,F+Vt,K-yt,F,K-yt),Mi(F-Vt,K-yt,F-dt,K-se,F-dt,K),Mi(F-dt,K+se,F-Vt,K+yt,F,K+yt),Mi(F+Vt,K+yt,F+dt,K+se,F+dt,K),qr(Ot),this},A.__private__.circle=A.circle=function(F,K,dt,yt){if(isNaN(F)||isNaN(K)||isNaN(dt)||!rs(yt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(F,K,dt,dt,yt)},A.setFont=function(F,K,dt){return dt&&(K=L(K,dt)),ae=ia(F,K,{disableWarning:!1}),this};var bA=A.__private__.getFont=A.getFont=function(){return Ke[ia.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var F,K,dt={};for(F in qe)if(qe.hasOwnProperty(F))for(K in dt[F]=[],qe[F])qe[F].hasOwnProperty(K)&&dt[F].push(K);return dt},A.addFont=function(F,K,dt,yt,Ot){var Vt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Vt.indexOf(arguments[3])!==-1?Ot=arguments[3]:arguments[3]&&Vt.indexOf(arguments[3])==-1&&(dt=L(dt,yt)),Ot=Ot||"Identity-H",es.call(this,F,K,dt,Ot)};var ws,aa=r.lineWidth||.200025,Aa=A.__private__.getLineWidth=A.getLineWidth=function(){return aa},ho=A.__private__.setLineWidth=A.setLineWidth=function(F){return aa=F,tt(U(H(F))+" w"),this};A.__private__.setLineDash=Me.API.setLineDash=Me.API.setLineDashPattern=function(F,K){if(F=F||[],K=K||0,isNaN(K)||!Array.isArray(F))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return F=F.map(function(dt){return U(H(dt))}).join(" "),K=U(H(K)),tt("["+F+"] "+K+" d"),this};var de=A.__private__.getLineHeight=A.getLineHeight=function(){return Gt*ws};A.__private__.getLineHeight=A.getLineHeight=function(){return Gt*ws};var Ft=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(F){return typeof(F=F||1.15)=="number"&&(ws=F),this},re=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return ws};Ft(r.lineHeight);var he=A.__private__.getHorizontalCoordinate=function(F){return H(F)},Ye=A.__private__.getVerticalCoordinate=function(F){return C===v.ADVANCED?F:ke[V].mediaBox.topRightY-ke[V].mediaBox.bottomLeftY-H(F)},ki=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function(F){return U(he(F))},Wr=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function(F){return U(Ye(F))},lr=r.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return En(lr)},A.__private__.setStrokeColor=A.setDrawColor=function(F,K,dt,yt){return lr=Nn({ch1:F,ch2:K,ch3:dt,ch4:yt,pdfColorType:"draw",precision:2}),tt(lr),this};var Gn=r.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return En(Gn)},A.__private__.setFillColor=A.setFillColor=function(F,K,dt,yt){return Gn=Nn({ch1:F,ch2:K,ch3:dt,ch4:yt,pdfColorType:"fill",precision:2}),tt(Gn),this};var Lr=r.textColor||"0 g",CA=A.__private__.getTextColor=A.getTextColor=function(){return En(Lr)};A.__private__.setTextColor=A.setTextColor=function(F,K,dt,yt){return Lr=Nn({ch1:F,ch2:K,ch3:dt,ch4:yt,pdfColorType:"text",precision:3}),this};var An=r.charSpace,BA=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(An||0)};A.__private__.setCharSpace=A.setCharSpace=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return An=F,this};var SA=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(F){var K=A.CapJoinStyles[F];if(K===void 0)throw new Error("Line cap style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return SA=K,tt(K+" J"),this};var fl=0;A.__private__.setLineJoin=A.setLineJoin=function(F){var K=A.CapJoinStyles[F];if(K===void 0)throw new Error("Line join style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fl=K,tt(K+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function(F){if(F=F||0,isNaN(F))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return tt(U(H(F))+" M"),this},A.GState=Ko,A.setGState=function(F){(F=typeof F=="string"?sr[ei[F]]:yc(null,F)).equals(_r)||(tt("/"+F.id+" gs"),_r=F)};var yc=function(F,K){if(!F||!ei[F]){var dt=!1;for(var yt in sr)if(sr.hasOwnProperty(yt)&&sr[yt].equals(K)){dt=!0;break}if(dt)K=sr[yt];else{var Ot="GS"+(Object.keys(sr).length+1).toString(10);sr[Ot]=K,K.id=Ot}return F&&(ei[F]=K.id),Ze.publish("addGState",K),K}};A.addGState=function(F,K){return yc(F,K),this},A.saveGraphicsState=function(){return tt("q"),nn.push({key:ae,size:Gt,color:Lr}),this},A.restoreGraphicsState=function(){tt("Q");var F=nn.pop();return ae=F.key,Gt=F.size,Lr=F.color,_r=null,this},A.setCurrentTransformationMatrix=function(F){return tt(F.toString()+" cm"),this},A.comment=function(F){return tt("#"+F),this};var uo=function(F,K){var dt=F||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return dt},set:function(Vt){isNaN(Vt)||(dt=parseFloat(Vt))}});var yt=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return yt},set:function(Vt){isNaN(Vt)||(yt=parseFloat(Vt))}});var Ot="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ot},set:function(Vt){Ot=Vt.toString()}}),this},dl=function(F,K,dt,yt){uo.call(this,F,K),this.type="rect";var Ot=dt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ot},set:function(se){isNaN(se)||(Ot=parseFloat(se))}});var Vt=yt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Vt},set:function(se){isNaN(se)||(Vt=parseFloat(se))}}),this},gl=function(){this.page=Mr,this.currentPage=V,this.pages=_t.slice(0),this.pagesContext=ke.slice(0),this.x=Ne,this.y=Be,this.matrix=Ar,this.width=xA(V),this.height=Na(V),this.outputDestination=vt,this.id="",this.objectNumber=-1};gl.prototype.restore=function(){Mr=this.page,V=this.currentPage,ke=this.pagesContext,_t=this.pages,Ne=this.x,Be=this.y,Ar=this.matrix,pl(V,this.width),ml(V,this.height),vt=this.outputDestination};var wc=function(F,K,dt,yt,Ot){Ki.push(new gl),Mr=V=0,_t=[],Ne=F,Be=K,Ar=Ot,La([dt,yt])},Jh=function(F){if(ji[F])Ki.pop().restore();else{var K=new gl,dt="Xo"+(Object.keys(or).length+1).toString(10);K.id=dt,ji[F]=dt,or[dt]=K,Ze.publish("addFormObject",K),Ki.pop().restore()}};for(var fo in A.beginFormObject=function(F,K,dt,yt,Ot){return wc(F,K,dt,yt,Ot),this},A.endFormObject=function(F){return Jh(F),this},A.doFormObject=function(F,K){var dt=or[ji[F]];return tt("q"),tt(K.toString()+" cm"),tt("/"+dt.id+" Do"),tt("Q"),this},A.getFormObject=function(F){var K=or[ji[F]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},A.save=function(F,K){return F=F||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(jo(na(zi()),F),typeof jo.unload=="function"&&De.setTimeout&&setTimeout(jo.unload,911),this):new Promise(function(dt,yt){try{var Ot=jo(na(zi()),F);typeof jo.unload=="function"&&De.setTimeout&&setTimeout(jo.unload,911),dt(Ot)}catch(Vt){yt(Vt.message)}})},Me.API)Me.API.hasOwnProperty(fo)&&(fo==="events"&&Me.API.events.length?function(F,K){var dt,yt,Ot;for(Ot=K.length-1;Ot!==-1;Ot--)dt=K[Ot][0],yt=K[Ot][1],F.subscribe.apply(F,[dt].concat(typeof yt=="function"?[yt]:yt))}(Ze,Me.API.events):A[fo]=Me.API[fo]);var xA=A.getPageWidth=function(F){return(ke[F=F||V].mediaBox.topRightX-ke[F].mediaBox.bottomLeftX)/te},pl=A.setPageWidth=function(F,K){ke[F].mediaBox.topRightX=K*te+ke[F].mediaBox.bottomLeftX},Na=A.getPageHeight=function(F){return(ke[F=F||V].mediaBox.topRightY-ke[F].mediaBox.bottomLeftY)/te},ml=A.setPageHeight=function(F,K){ke[F].mediaBox.topRightY=K*te+ke[F].mediaBox.bottomLeftY};return A.internal={pdfEscape:Xi,getStyle:sa,getFont:bA,getFontSize:bt,getCharSpace:BA,getTextColor:CA,getLineHeight:de,getLineHeightFactor:re,getLineWidth:Aa,write:It,getHorizontalCoordinate:he,getVerticalCoordinate:Ye,getCoordinateString:ki,getVerticalCoordinateString:Wr,collections:{},newObject:Te,newAdditionalObject:Qi,newObjectDeferred:kr,newObjectDeferredBegin:Dr,getFilters:Mn,putStream:un,events:Ze,scaleFactor:te,pageSize:{getWidth:function(){return xA(V)},setWidth:function(F){pl(V,F)},getHeight:function(){return Na(V)},setHeight:function(F){ml(V,F)}},encryptionOptions:h,encryption:ri,getEncryptor:ul,output:Ns,getNumberOfPages:Ia,pages:_t,out:tt,f2:rt,f3:M,getPageInfo:mA,getPageInfoByObjId:Ue,getCurrentPageInfo:lo,getPDFVersion:p,Point:uo,Rectangle:dl,Matrix:Le,hasHotfix:Cr},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return xA(V)},set:function(F){pl(V,F)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return Na(V)},set:function(F){ml(V,F)},enumerable:!0,configurable:!0}),Dn.call(A,Ut),ae="F1",fA(s,e),Ze.publish("initialized"),A}Gl.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},Gl.prototype.toHexString=function(r){return r.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Gl.prototype.hexToBytes=function(r){for(var t=[],e=0;e<r.length;e+=2)t.push(String.fromCharCode(parseInt(r.substr(e,2),16)));return t.join("")},Gl.prototype.processOwnerPassword=function(r,t){return Mg(Ng(t).substr(0,5),r)},Gl.prototype.encryptor=function(r,t){var e=Ng(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return Mg(e,i)}},Ko.prototype.equals=function(r){var t,e="id,objectNumber,equals";if(!r||dr(r)!==dr(this))return!1;var i=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!r.hasOwnProperty(t)||this[t]!==r[t])return!1;i++}for(t in r)r.hasOwnProperty(t)&&e.indexOf(t)<0&&i--;return i===0},Me.API={events:[]},Me.version="2.5.1";var ui=Me.API,kg=1,Xo=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},jl=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},We=function(r){return r.toFixed(2)},qA=function(r){return r.toFixed(5)};ui.__acroform__={};var Yn=function(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r},M1=function(r){return r*kg},va=function(r){var t=new D1,e=Se.internal.getHeight(r)||0,i=Se.internal.getWidth(r)||0;return t.BBox=[0,0,Number(We(i)),Number(We(e))],t},X_=ui.__acroform__.setBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<t},z_=ui.__acroform__.clearBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<t)},q_=ui.__acroform__.getBit=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<t?1:0},yi=ui.__acroform__.getBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return q_(r,t-1)},wi=ui.__acroform__.setBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return X_(r,t-1)},bi=ui.__acroform__.clearBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return z_(r,t-1)},$_=ui.__acroform__.calculateCoordinates=function(r,t){var e=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,s=r[0],c=r[1],f=r[2],a=r[3],n={};return n.lowerLeft_X=e(s)||0,n.lowerLeft_Y=i(c+a)||0,n.upperRight_X=e(s+f)||0,n.upperRight_Y=i(c)||0,[Number(We(n.lowerLeft_X)),Number(We(n.lowerLeft_Y)),Number(We(n.upperRight_X)),Number(We(n.upperRight_Y))]},Y_=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var t=[],e=r._V||r.DV,i=Dg(r,e),s=r.scope.internal.getFont(r.fontName,r.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(r.scope.__private__.encodeColorString(r.color)),t.push("/"+s+" "+We(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var c=va(r);return c.scope=r.scope,c.stream=t.join(`
`),c}},Dg=function(r,t){var e=r.fontSize===0?r.maxFontSize:r.fontSize,i={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=r.multiline?s.map(function(M){return M.split(`
`)}):s.map(function(M){return[M]});var c=e,f=Se.internal.getHeight(r)||0;f=f<0?-f:f;var a=Se.internal.getWidth(r)||0;a=a<0?-a:a;var n=function(M,H,J){if(M+1<s.length){var $=H+" "+s[M+1][0];return Ou($,r,J).width<=a-4}return!1};c++;t:for(;c>0;){t="",c--;var l,h,o=Ou("3",r,c).height,u=r.multiline?f-c:(f-o)/2,A=u+=2,g=0,p=0,d=0;if(c<=0){t=`(...) Tj
`,t+="% Width of Text: "+Ou(t,r,c=12).width+", FieldWidth:"+a+`
`;break}for(var m="",v=0,C=0;C<s.length;C++)if(s.hasOwnProperty(C)){var x=!1;if(s[C].length!==1&&d!==s[C].length-1){if((o+2)*(v+2)+2>f)continue t;m+=s[C][d],x=!0,p=C,C--}else{m=(m+=s[C][d]+" ").substr(m.length-1)==" "?m.substr(0,m.length-1):m;var E=parseInt(C),L=n(E,m,c),U=C>=s.length-1;if(L&&!U){m+=" ",d=0;continue}if(L||U){if(U)p=E;else if(r.multiline&&(o+2)*(v+2)+2>f)continue t}else{if(!r.multiline||(o+2)*(v+2)+2>f)continue t;p=E}}for(var O="",X=g;X<=p;X++){var rt=s[X];if(r.multiline){if(X===p){O+=rt[d]+" ",d=(d+1)%rt.length;continue}if(X===g){O+=rt[rt.length-1]+" ";continue}}O+=rt[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,h=Ou(O,r,c).width,r.textAlign){case"right":l=a-h-2;break;case"center":l=(a-h)/2;break;case"left":default:l=2}t+=We(l)+" "+We(A)+` Td
`,t+="("+Xo(O)+`) Tj
`,t+=-We(l)+` 0 Td
`,A=-(c+2),h=0,g=x?p:p+1,v++,m=""}break}return i.text=t,i.fontSize=c,i},Ou=function(r,t,e){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(r,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:s}},J_={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Z_=function(r,t){var e={type:"reference",object:r};t.internal.getPageInfo(r.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})===void 0&&t.internal.getPageInfo(r.page).pageContext.annotations.push(e)},tE=function(r,t){for(var e in r)if(r.hasOwnProperty(e)){var i=e,s=r[e];t.internal.newObjectDeferredBegin(s.objId,!0),dr(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete r[i]}},eE=function(r,t){if(t.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(Ws.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(J_)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");kg=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new R1,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in i)if(i.hasOwnProperty(s)){var c=i[s];c.objId=void 0,c.hasAnnotation&&Z_(c,e)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(e){(function(i,s){var c=!i;for(var f in i||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(f)){var a=i[f],n=[],l=a.Rect;if(a.Rect&&(a.Rect=$_(a.Rect,s)),s.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Se.createDefaultAppearanceStream(a),dr(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(n=a.getKeyValueListForStream()),a.Rect=l,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=Y_(a);n.push({key:"AP",value:"<</N "+h+">>"}),s.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var o="";for(var u in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(u)){var A=a.appearanceStreamContent[u];if(o+="/"+u+" ",o+="<<",Object.keys(A).length>=1||Array.isArray(A)){for(var f in A)if(A.hasOwnProperty(f)){var g=A[f];typeof g=="function"&&(g=g.call(s,a)),o+="/"+f+" "+g+" ",s.internal.acroformPlugin.xForms.indexOf(g)>=0||s.internal.acroformPlugin.xForms.push(g)}}else typeof(g=A)=="function"&&(g=g.call(s,a)),o+="/"+f+" "+g,s.internal.acroformPlugin.xForms.indexOf(g)>=0||s.internal.acroformPlugin.xForms.push(g);o+=">>"}n.push({key:"AP",value:`<<
`+o+">>"})}s.internal.putStream({additionalKeyValues:n,objectId:a.objId}),s.internal.out("endobj")}c&&tE(s.internal.acroformPlugin.xForms,s)})(e,r)}),r.internal.acroformPlugin.isInitialized=!0}},k1=ui.__acroform__.arrayToPdfArray=function(r,t,e){var i=function(f){return f};if(Array.isArray(r)){for(var s="[",c=0;c<r.length;c++)switch(c!==0&&(s+=" "),dr(r[c])){case"boolean":case"number":case"object":s+=r[c].toString();break;case"string":r[c].substr(0,1)!=="/"?(t!==void 0&&e&&(i=e.internal.getEncryptor(t)),s+="("+Xo(i(r[c].toString()))+")"):s+=r[c].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Rg=function(r,t,e){var i=function(s){return s};return t!==void 0&&e&&(i=e.internal.getEncryptor(t)),(r=r||"").toString(),r="("+Xo(i(r))+")"},ya=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ya.prototype.toString=function(){return this.objId+" 0 R"},ya.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},ya.prototype.getKeyValueListForStream=function(){var r=[],t=Object.getOwnPropertyNames(this).filter(function(c){return c!="content"&&c!="appearanceStreamContent"&&c!="scope"&&c!="objId"&&c.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var i=t[e],s=this[i];s&&(Array.isArray(s)?r.push({key:i,value:k1(s,this.objId,this.scope)}):s instanceof ya?(s.scope=this.scope,r.push({key:i,value:s.objId+" 0 R"})):typeof s!="function"&&r.push({key:i,value:s}))}return r};var D1=function(){ya.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){r=e.trim()},get:function(){return r||null}})};Yn(D1,ya);var R1=function(){ya.call(this);var r,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Xo(e(r))+")"}},set:function(e){r=e}})};Yn(R1,ya);var Ws=function r(){ya.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute F supplied.');t=m}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!yi(t,3)},set:function(m){m?this.F=wi(t,3):this.F=bi(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute Ff supplied.');e=m}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(m){i=m!==void 0?m:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(m){i[0]=m}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(m){i[1]=m}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(m){i[2]=m}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(m){i[3]=m}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(m){switch(m){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=m;break;default:throw new Error('Invalid value "'+m+'" for attribute FT supplied.')}}});var c=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!c||c.length<1){if(this instanceof Mu)return;c="FieldObject"+r.FieldNum++}var m=function(v){return v};return this.scope&&(m=this.scope.internal.getEncryptor(this.objId)),"("+Xo(m(c))+")"},set:function(m){c=m.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return c},set:function(m){c=m}});var f="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return f},set:function(m){f=m}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(m){a=m}});var n=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return n},set:function(m){n=m}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/kg:l},set:function(m){l=m}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(m){h=m}});var o="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!o||this instanceof Mu||this instanceof zo))return Rg(o,this.objId,this.scope)},set:function(m){m=m.toString(),o=m}});var u=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(u)return this instanceof tn?u:Rg(u,this.objId,this.scope)},set:function(m){m=m.toString(),u=this instanceof tn?m:m.substr(0,1)==="("?jl(m.substr(1,m.length-2)):jl(m)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof tn?jl(u.substr(1,u.length-1)):u},set:function(m){m=m.toString(),u=this instanceof tn?"/"+m:m}});var A=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(A)return A},set:function(m){this.V=m}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof tn?A:Rg(A,this.objId,this.scope)},set:function(m){m=m.toString(),A=this instanceof tn?m:m.substr(0,1)==="("?jl(m.substr(1,m.length-2)):jl(m)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof tn?jl(A.substr(1,A.length-1)):A},set:function(m){m=m.toString(),A=this instanceof tn?"/"+m:m}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(m){m=!!m,p=m}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(m){g=m}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,1)},set:function(m){m?this.Ff=wi(this.Ff,1):this.Ff=bi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,2)},set:function(m){m?this.Ff=wi(this.Ff,2):this.Ff=bi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,3)},set:function(m){m?this.Ff=wi(this.Ff,3):this.Ff=bi(this.Ff,3)}});var d=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(d!==null)return d},set:function(m){if([0,1,2].indexOf(m)===-1)throw new Error('Invalid value "'+m+'" for attribute Q supplied.');d=m}}),Object.defineProperty(this,"textAlign",{get:function(){var m;switch(d){case 0:default:m="left";break;case 1:m="center";break;case 2:m="right"}return m},configurable:!0,enumerable:!0,set:function(m){switch(m){case"right":case 2:d=2;break;case"center":case 1:d=1;break;case"left":case 0:default:d=0}}})};Yn(Ws,ya);var Kl=function(){Ws.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return k1(t,this.objId,this.scope)},set:function(e){var i,s;s=[],typeof(i=e)=="string"&&(s=function(c,f,a){a||(a=1);for(var n,l=[];n=f.exec(c);)l.push(n[a]);return l}(i,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,18)},set:function(e){e?this.Ff=wi(this.Ff,18):this.Ff=bi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=wi(this.Ff,19):this.Ff=bi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,20)},set:function(e){e?(this.Ff=wi(this.Ff,20),t.sort()):this.Ff=bi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,22)},set:function(e){e?this.Ff=wi(this.Ff,22):this.Ff=bi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,23)},set:function(e){e?this.Ff=wi(this.Ff,23):this.Ff=bi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,27)},set:function(e){e?this.Ff=wi(this.Ff,27):this.Ff=bi(this.Ff,27)}}),this.hasAppearanceStream=!1};Yn(Kl,Ws);var Wl=function(){Kl.call(this),this.fontName="helvetica",this.combo=!1};Yn(Wl,Kl);var Xl=function(){Wl.call(this),this.combo=!0};Yn(Xl,Wl);var Qu=function(){Xl.call(this),this.edit=!0};Yn(Qu,Xl);var tn=function(){Ws.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,15)},set:function(e){e?this.Ff=wi(this.Ff,15):this.Ff=bi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,16)},set:function(e){e?this.Ff=wi(this.Ff,16):this.Ff=bi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,17)},set:function(e){e?this.Ff=wi(this.Ff,17):this.Ff=bi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,26)},set:function(e){e?this.Ff=wi(this.Ff,26):this.Ff=bi(this.Ff,26)}});var r,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(c){return c};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,s=[];for(i in s.push("<<"),t)s.push("/"+i+" ("+Xo(e(t[i]))+")");return s.push(">>"),s.join(`
`)}},set:function(e){dr(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}})};Yn(tn,Ws);var Nu=function(){tn.call(this),this.pushButton=!0};Yn(Nu,tn);var zl=function(){tn.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t!==void 0?t:[]}})};Yn(zl,tn);var Mu=function(){var r,t;Ws.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(a){return a};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var c,f=[];for(c in f.push("<<"),i)f.push("/"+c+" ("+Xo(s(i[c]))+")");return f.push(">>"),f.join(`
`)},set:function(s){dr(s)==="object"&&(i=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(s){typeof s=="string"&&(i.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(s){e="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Se.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Yn(Mu,Ws),zl.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=r.createAppearanceStream(e.optionName),e.caption=r.getCA()}},zl.prototype.createOption=function(r){var t=new Mu;return t.Parent=this,t.optionName=r,this.Kids.push(t),rE.call(this.scope,t),t};var ku=function(){tn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Se.CheckBox.createAppearanceStream()};Yn(ku,tn);var zo=function(){Ws.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,13)},set:function(t){t?this.Ff=wi(this.Ff,13):this.Ff=bi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,21)},set:function(t){t?this.Ff=wi(this.Ff,21):this.Ff=bi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,23)},set:function(t){t?this.Ff=wi(this.Ff,23):this.Ff=bi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,24)},set:function(t){t?this.Ff=wi(this.Ff,24):this.Ff=bi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,25)},set:function(t){t?this.Ff=wi(this.Ff,25):this.Ff=bi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,26)},set:function(t){t?this.Ff=wi(this.Ff,26):this.Ff=bi(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){Number.isInteger(t)&&(r=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Yn(zo,Ws);var Du=function(){zo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!yi(this.Ff,14)},set:function(r){r?this.Ff=wi(this.Ff,14):this.Ff=bi(this.Ff,14)}}),this.password=!0};Yn(Du,zo);var Se={CheckBox:{createAppearanceStream:function(){return{N:{On:Se.CheckBox.YesNormal},D:{On:Se.CheckBox.YesPushDown,Off:Se.CheckBox.OffPushDown}}},YesPushDown:function(r){var t=va(r);t.scope=r.scope;var e=[],i=r.scope.internal.getFont(r.fontName,r.fontStyle).id,s=r.scope.__private__.encodeColorString(r.color),c=Dg(r,r.caption);return e.push("0.749023 g"),e.push("0 0 "+We(Se.internal.getWidth(r))+" "+We(Se.internal.getHeight(r))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+We(c.fontSize)+" Tf "+s),e.push("BT"),e.push(c.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(r){var t=va(r);t.scope=r.scope;var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),s=[],c=Se.internal.getHeight(r),f=Se.internal.getWidth(r),a=Dg(r,r.caption);return s.push("1 g"),s.push("0 0 "+We(f)+" "+We(c)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+We(f-1)+" "+We(c-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+e+" "+We(a.fontSize)+" Tf "+i),s.push(a.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(r){var t=va(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+We(Se.internal.getWidth(r))+" "+We(Se.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(r){var t={D:{Off:Se.RadioButton.Circle.OffPushDown},N:{}};return t.N[r]=Se.RadioButton.Circle.YesNormal,t.D[r]=Se.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(r){var t=va(r);t.scope=r.scope;var e=[],i=Se.internal.getWidth(r)<=Se.internal.getHeight(r)?Se.internal.getWidth(r)/4:Se.internal.getHeight(r)/4;i=Number((.9*i).toFixed(5));var s=Se.internal.Bezier_C,c=Number((i*s).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+qA(Se.internal.getWidth(r)/2)+" "+qA(Se.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+c+" "+c+" "+i+" 0 "+i+" c"),e.push("-"+c+" "+i+" -"+i+" "+c+" -"+i+" 0 c"),e.push("-"+i+" -"+c+" -"+c+" -"+i+" 0 -"+i+" c"),e.push(c+" -"+i+" "+i+" -"+c+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=va(r);t.scope=r.scope;var e=[],i=Se.internal.getWidth(r)<=Se.internal.getHeight(r)?Se.internal.getWidth(r)/4:Se.internal.getHeight(r)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),c=Number((s*Se.internal.Bezier_C).toFixed(5)),f=Number((i*Se.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+qA(Se.internal.getWidth(r)/2)+" "+qA(Se.internal.getHeight(r)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+c+" "+c+" "+s+" 0 "+s+" c"),e.push("-"+c+" "+s+" -"+s+" "+c+" -"+s+" 0 c"),e.push("-"+s+" -"+c+" -"+c+" -"+s+" 0 -"+s+" c"),e.push(c+" -"+s+" "+s+" -"+c+" "+s+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+qA(Se.internal.getWidth(r)/2)+" "+qA(Se.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+f+" "+f+" "+i+" 0 "+i+" c"),e.push("-"+f+" "+i+" -"+i+" "+f+" -"+i+" 0 c"),e.push("-"+i+" -"+f+" -"+f+" -"+i+" 0 -"+i+" c"),e.push(f+" -"+i+" "+i+" -"+f+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(r){var t=va(r);t.scope=r.scope;var e=[],i=Se.internal.getWidth(r)<=Se.internal.getHeight(r)?Se.internal.getWidth(r)/4:Se.internal.getHeight(r)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),c=Number((s*Se.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+qA(Se.internal.getWidth(r)/2)+" "+qA(Se.internal.getHeight(r)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+c+" "+c+" "+s+" 0 "+s+" c"),e.push("-"+c+" "+s+" -"+s+" "+c+" -"+s+" 0 c"),e.push("-"+s+" -"+c+" -"+c+" -"+s+" 0 -"+s+" c"),e.push(c+" -"+s+" "+s+" -"+c+" "+s+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(r){var t={D:{Off:Se.RadioButton.Cross.OffPushDown},N:{}};return t.N[r]=Se.RadioButton.Cross.YesNormal,t.D[r]=Se.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(r){var t=va(r);t.scope=r.scope;var e=[],i=Se.internal.calculateCross(r);return e.push("q"),e.push("1 1 "+We(Se.internal.getWidth(r)-2)+" "+We(Se.internal.getHeight(r)-2)+" re"),e.push("W"),e.push("n"),e.push(We(i.x1.x)+" "+We(i.x1.y)+" m"),e.push(We(i.x2.x)+" "+We(i.x2.y)+" l"),e.push(We(i.x4.x)+" "+We(i.x4.y)+" m"),e.push(We(i.x3.x)+" "+We(i.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=va(r);t.scope=r.scope;var e=Se.internal.calculateCross(r),i=[];return i.push("0.749023 g"),i.push("0 0 "+We(Se.internal.getWidth(r))+" "+We(Se.internal.getHeight(r))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+We(Se.internal.getWidth(r)-2)+" "+We(Se.internal.getHeight(r)-2)+" re"),i.push("W"),i.push("n"),i.push(We(e.x1.x)+" "+We(e.x1.y)+" m"),i.push(We(e.x2.x)+" "+We(e.x2.y)+" l"),i.push(We(e.x4.x)+" "+We(e.x4.y)+" m"),i.push(We(e.x3.x)+" "+We(e.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(r){var t=va(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+We(Se.internal.getWidth(r))+" "+We(Se.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(r){var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,e=r.scope.__private__.encodeColorString(r.color);return"/"+t+" "+r.fontSize+" Tf "+e}};Se.internal={Bezier_C:.551915024494,calculateCross:function(r){var t=Se.internal.getWidth(r),e=Se.internal.getHeight(r),i=Math.min(t,e);return{x1:{x:(t-i)/2,y:(e-i)/2+i},x2:{x:(t-i)/2+i,y:(e-i)/2},x3:{x:(t-i)/2,y:(e-i)/2},x4:{x:(t-i)/2+i,y:(e-i)/2+i}}}},Se.internal.getWidth=function(r){var t=0;return dr(r)==="object"&&(t=M1(r.Rect[2])),t},Se.internal.getHeight=function(r){var t=0;return dr(r)==="object"&&(t=M1(r.Rect[3])),t};var rE=ui.addField=function(r){if(eE(this,r),!(r instanceof Ws))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=r).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};ui.AcroFormChoiceField=Kl,ui.AcroFormListBox=Wl,ui.AcroFormComboBox=Xl,ui.AcroFormEditBox=Qu,ui.AcroFormButton=tn,ui.AcroFormPushButton=Nu,ui.AcroFormRadioButton=zl,ui.AcroFormCheckBox=ku,ui.AcroFormTextField=zo,ui.AcroFormPasswordField=Du,ui.AcroFormAppearance=Se,ui.AcroForm={ChoiceField:Kl,ListBox:Wl,ComboBox:Xl,EditBox:Qu,Button:tn,PushButton:Nu,RadioButton:zl,CheckBox:ku,TextField:zo,PasswordField:Du,Appearance:Se},Me.AcroForm={ChoiceField:Kl,ListBox:Wl,ComboBox:Xl,EditBox:Qu,Button:tn,PushButton:Nu,RadioButton:zl,CheckBox:ku,TextField:zo,PasswordField:Du,Appearance:Se};function H1(r){return r.reduce(function(t,e,i){return t[e]=i,t},{})}(function(r){r.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(M,H){var J,$,ht,ut,pt,ft=t;if((H=H||t)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if(L(M))for(pt in e)for(ht=e[pt],J=0;J<ht.length;J+=1){for(ut=!0,$=0;$<ht[J].length;$+=1)if(ht[J][$]!==void 0&&ht[J][$]!==M[$]){ut=!1;break}if(ut===!0){ft=pt;break}}else for(pt in e)for(ht=e[pt],J=0;J<ht.length;J+=1){for(ut=!0,$=0;$<ht[J].length;$+=1)if(ht[J][$]!==void 0&&ht[J][$]!==M.charCodeAt($)){ut=!1;break}if(ut===!0){ft=pt;break}}return ft===t&&H!==t&&(ft=H),ft},s=function M(H){for(var J=this.internal.write,$=this.internal.putStream,ht=(0,this.internal.getFilters)();ht.indexOf("FlateEncode")!==-1;)ht.splice(ht.indexOf("FlateEncode"),1);H.objectId=this.internal.newObject();var ut=[];if(ut.push({key:"Type",value:"/XObject"}),ut.push({key:"Subtype",value:"/Image"}),ut.push({key:"Width",value:H.width}),ut.push({key:"Height",value:H.height}),H.colorSpace===d.INDEXED?ut.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(H.palette.length/3-1)+" "+("sMask"in H&&H.sMask!==void 0?H.objectId+2:H.objectId+1)+" 0 R]"}):(ut.push({key:"ColorSpace",value:"/"+H.colorSpace}),H.colorSpace===d.DEVICE_CMYK&&ut.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ut.push({key:"BitsPerComponent",value:H.bitsPerComponent}),"decodeParameters"in H&&H.decodeParameters!==void 0&&ut.push({key:"DecodeParms",value:"<<"+H.decodeParameters+">>"}),"transparency"in H&&Array.isArray(H.transparency)){for(var pt="",ft=0,R=H.transparency.length;ft<R;ft++)pt+=H.transparency[ft]+" "+H.transparency[ft]+" ";ut.push({key:"Mask",value:"["+pt+"]"})}H.sMask!==void 0&&ut.push({key:"SMask",value:H.objectId+1+" 0 R"});var G=H.filter!==void 0?["/"+H.filter]:void 0;if($({data:H.data,additionalKeyValues:ut,alreadyAppliedFilters:G,objectId:H.objectId}),J("endobj"),"sMask"in H&&H.sMask!==void 0){var it="/Predictor "+H.predictor+" /Colors 1 /BitsPerComponent "+H.bitsPerComponent+" /Columns "+H.width,P={width:H.width,height:H.height,colorSpace:"DeviceGray",bitsPerComponent:H.bitsPerComponent,decodeParameters:it,data:H.sMask};"filter"in H&&(P.filter=H.filter),M.call(this,P)}if(H.colorSpace===d.INDEXED){var V=this.internal.newObject();$({data:O(new Uint8Array(H.palette)),objectId:V}),J("endobj")}},c=function(){var M=this.internal.collections.addImage_images;for(var H in M)s.call(this,M[H])},f=function(){var M,H=this.internal.collections.addImage_images,J=this.internal.write;for(var $ in H)J("/I"+(M=H[$]).index,M.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",f))},n=function(){var M=this.internal.collections.addImage_images;return a.call(this),M},l=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(M){return typeof r["process"+M.toUpperCase()]=="function"},o=function(M){return dr(M)==="object"&&M.nodeType===1},u=function(M,H){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var J=""+M.getAttribute("src");if(J.indexOf("data:image/")===0)return mh(unescape(J).split("base64,").pop());var $=r.loadFile(J,!0);if($!==void 0)return $}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var ht;switch(H){case"PNG":ht="image/png";break;case"WEBP":ht="image/webp";break;case"JPEG":case"JPG":default:ht="image/jpeg"}return mh(M.toDataURL(ht,1).split("base64,").pop())}},A=function(M){var H=this.internal.collections.addImage_images;if(H){for(var J in H)if(M===H[J].alias)return H[J]}},g=function(M,H,J){return M||H||(M=-96,H=-96),M<0&&(M=-1*J.width*72/M/this.internal.scaleFactor),H<0&&(H=-1*J.height*72/H/this.internal.scaleFactor),M===0&&(M=H*J.width/J.height),H===0&&(H=M*J.height/J.width),[M,H]},p=function(M,H,J,$,ht,ut){var pt=g.call(this,J,$,ht),ft=this.internal.getCoordinateString,R=this.internal.getVerticalCoordinateString,G=n.call(this);if(J=pt[0],$=pt[1],G[ht.index]=ht,ut){ut*=Math.PI/180;var it=Math.cos(ut),P=Math.sin(ut),V=function(N){return N.toFixed(4)},k=[V(it),V(P),V(-1*P),V(it),0,0,"cm"]}this.internal.write("q"),ut?(this.internal.write([1,"0","0",1,ft(M),R(H+$),"cm"].join(" ")),this.internal.write(k.join(" ")),this.internal.write([ft(J),"0","0",ft($),"0","0","cm"].join(" "))):this.internal.write([ft(J),"0","0",ft($),ft(M),R(H+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ht.index+" Do"),this.internal.write("Q")},d=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var m=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=r.__addimage__.sHashCode=function(M){var H,J,$=0;if(typeof M=="string")for(J=M.length,H=0;H<J;H++)$=($<<5)-$+M.charCodeAt(H),$|=0;else if(L(M))for(J=M.byteLength/2,H=0;H<J;H++)$=($<<5)-$+M[H],$|=0;return $},C=r.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var H=!0;return M.length===0&&(H=!1),M.length%4!=0&&(H=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(H=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(H=!1),H},x=r.__addimage__.extractImageFromDataUrl=function(M){var H=(M=M||"").split("base64,"),J=null;if(H.length===2){var $=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(H[0]);Array.isArray($)&&(J={mimeType:$[1],charset:$[2],data:H[1]})}return J},E=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(M){return E()&&M instanceof ArrayBuffer};var L=r.__addimage__.isArrayBufferView=function(M){return E()&&typeof Uint32Array<"u"&&(M instanceof Int8Array||M instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array)},U=r.__addimage__.binaryStringToUint8Array=function(M){for(var H=M.length,J=new Uint8Array(H),$=0;$<H;$++)J[$]=M.charCodeAt($);return J},O=r.__addimage__.arrayBufferToBinaryString=function(M){for(var H="",J=L(M)?M:new Uint8Array(M),$=0;$<J.length;$+=8192)H+=String.fromCharCode.apply(null,J.subarray($,$+8192));return H};r.addImage=function(){var M,H,J,$,ht,ut,pt,ft,R;if(typeof arguments[1]=="number"?(H=t,J=arguments[1],$=arguments[2],ht=arguments[3],ut=arguments[4],pt=arguments[5],ft=arguments[6],R=arguments[7]):(H=arguments[1],J=arguments[2],$=arguments[3],ht=arguments[4],ut=arguments[5],pt=arguments[6],ft=arguments[7],R=arguments[8]),dr(M=arguments[0])==="object"&&!o(M)&&"imageData"in M){var G=M;M=G.imageData,H=G.format||H||t,J=G.x||J||0,$=G.y||$||0,ht=G.w||G.width||ht,ut=G.h||G.height||ut,pt=G.alias||pt,ft=G.compression||ft,R=G.rotation||G.angle||R}var it=this.internal.getFilters();if(ft===void 0&&it.indexOf("FlateEncode")!==-1&&(ft="SLOW"),isNaN(J)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var P=X.call(this,M,H,pt,ft);return p.call(this,J,$,ht,ut,P,R),this};var X=function(M,H,J,$){var ht,ut,pt;if(typeof M=="string"&&i(M)===t){M=unescape(M);var ft=rt(M,!1);(ft!==""||(ft=r.loadFile(M,!0))!==void 0)&&(M=ft)}if(o(M)&&(M=u(M,H)),H=i(M,H),!h(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(((pt=J)==null||pt.length===0)&&(J=function(R){return typeof R=="string"||L(R)?v(R):L(R.data)?v(R.data):null}(M)),(ht=A.call(this,J))||(E()&&(M instanceof Uint8Array||H==="RGBA"||(ut=M,M=U(M))),ht=this["process"+H.toUpperCase()](M,l.call(this),J,function(R){return R&&typeof R=="string"&&(R=R.toUpperCase()),R in r.image_compression?R:m.NONE}($),ut)),!ht)throw new Error("An unknown error occurred whilst processing the image.");return ht},rt=r.__addimage__.convertBase64ToBinaryString=function(M,H){var J;H=typeof H!="boolean"||H;var $,ht="";if(typeof M=="string"){$=(J=x(M))!==null?J.data:M;try{ht=mh($)}catch(ut){if(H)throw C($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ut.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ht};r.getImageProperties=function(M){var H,J,$="";if(o(M)&&(M=u(M)),typeof M=="string"&&i(M)===t&&(($=rt(M,!1))===""&&($=r.loadFile(M)||""),M=$),J=i(M),!h(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(!E()||M instanceof Uint8Array||(M=U(M)),!(H=this["process"+J.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return H.fileType=J,H}})(Me.API),function(r){var t=function(e){if(e!==void 0&&e!="")return!0};Me.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(e){for(var i,s,c,f=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,n=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,h=!1,o=0;o<l.length&&!h;o++)switch((i=l[o]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){i=l[u];var A=this.internal.pdfEscape,g=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),d=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(p.objId),v=i.title||"Note";c="<</Type /Annot /Subtype /Text "+(s="/Rect ["+f(i.bounds.x)+" "+a(i.bounds.y+i.bounds.h)+" "+f(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y)+"] ")+"/Contents ("+A(m(i.contents))+")",c+=" /Popup "+d.objId+" 0 R",c+=" /P "+n.objId+" 0 R",c+=" /T ("+A(m(v))+") >>",p.content=c;var C=p.objId+" 0 R";c="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+f(i.bounds.x+30)+" "+a(i.bounds.y+i.bounds.h)+" "+f(i.bounds.x+i.bounds.w+30)+" "+a(i.bounds.y)+"] ")+" /Parent "+C,i.open&&(c+=" /Open true"),c+=" >>",d.content=c,this.internal.write(p.objId,"0 R",d.objId,"0 R");break;case"freetext":s="/Rect ["+f(i.bounds.x)+" "+a(i.bounds.y)+" "+f(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y+i.bounds.h)+"] ";var x=i.color||"#000000";c="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+A(g(i.contents))+")",c+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+x+")",c+=" /Border [0 0 0]",c+=" >>",this.internal.write(c);break;case"link":if(i.options.name){var E=this.annotations._nameMap[i.options.name];i.options.pageNumber=E.page,i.options.top=E.y}else i.options.top||(i.options.top=0);if(s="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",c="",i.options.url)c="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+A(g(i.options.url))+") >>";else if(i.options.pageNumber)switch(c="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":c+=" /Fit]";break;case"FitH":c+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,c+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var L=a(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),c+=" /XYZ "+i.options.left+" "+L+" "+i.options.zoom+"]"}c!=""&&(c+=" >>",this.internal.write(c))}}this.internal.write("]")}}]),r.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},r.link=function(e,i,s,c,f){var a=this.internal.getCurrentPageInfo(),n=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:n(e),y:l(i),w:n(e+s),h:l(i+c)},options:f,type:"link"})},r.textWithLink=function(e,i,s,c){var f,a,n=this.getTextWidth(e),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(c.maxWidth!==void 0){a=c.maxWidth;var h=this.splitTextToSize(e,a).length;f=Math.ceil(l*h)}else a=n,f=l;return this.text(e,i,s,c),s+=.2*l,c.align==="center"&&(i-=n/2),c.align==="right"&&(i-=n),this.link(i,s-l,a,f,c),n},r.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor}}(Me.API),function(r){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];r.__arabicParser__={};var c=r.__arabicParser__.isInArabicSubstitutionA=function(p){return t[p.charCodeAt(0)]!==void 0},f=r.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},a=r.__arabicParser__.isArabicEndLetter=function(p){return f(p)&&c(p)&&t[p.charCodeAt(0)].length<=2},n=r.__arabicParser__.isArabicAlfLetter=function(p){return f(p)&&s.indexOf(p.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return f(p)&&c(p)&&t[p.charCodeAt(0)].length>=1};var l=r.__arabicParser__.arabicLetterHasFinalForm=function(p){return f(p)&&c(p)&&t[p.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(p){return f(p)&&c(p)&&t[p.charCodeAt(0)].length>=3};var h=r.__arabicParser__.arabicLetterHasMedialForm=function(p){return f(p)&&c(p)&&t[p.charCodeAt(0)].length==4},o=r.__arabicParser__.resolveLigatures=function(p){var d=0,m=e,v="",C=0;for(d=0;d<p.length;d+=1)m[p.charCodeAt(d)]!==void 0?(C++,typeof(m=m[p.charCodeAt(d)])=="number"&&(v+=String.fromCharCode(m),m=e,C=0),d===p.length-1&&(m=e,v+=p.charAt(d-(C-1)),d-=C-1,C=0)):(m=e,v+=p.charAt(d-C),d-=C,C=0);return v};r.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&i[p.charCodeAt(0)]!==void 0};var u=r.__arabicParser__.getCorrectForm=function(p,d,m){return f(p)?c(p)===!1?-1:!l(p)||!f(d)&&!f(m)||!f(m)&&a(d)||a(p)&&!f(d)||a(p)&&n(d)||a(p)&&a(d)?0:h(p)&&f(d)&&!a(d)&&f(m)&&l(m)?3:a(p)||!f(m)?1:2:-1},A=function(p){var d=0,m=0,v=0,C="",x="",E="",L=(p=p||"").split("\\s+"),U=[];for(d=0;d<L.length;d+=1){for(U.push(""),m=0;m<L[d].length;m+=1)C=L[d][m],x=L[d][m-1],E=L[d][m+1],f(C)?(v=u(C,x,E),U[d]+=v!==-1?String.fromCharCode(t[C.charCodeAt(0)][v]):C):U[d]+=C;U[d]=o(U[d])}return U.join(" ")},g=r.__arabicParser__.processArabic=r.processArabic=function(){var p,d=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,m=[];if(Array.isArray(d)){var v=0;for(m=[],v=0;v<d.length;v+=1)Array.isArray(d[v])?m.push([A(d[v][0]),d[v][1],d[v][2]]):m.push([A(d[v])]);p=m}else p=A(d);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};r.events.push(["preProcessText",g])}(Me.API),Me.API.autoPrint=function(r){var t;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(r){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(a){e=a}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var c=[];Object.defineProperty(this,"childNodes",{get:function(){return c},set:function(a){c=a}});var f={};Object.defineProperty(this,"style",{get:function(){return f},set:function(a){f=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,i){var s;if((e=e||"2d")!=="2d")return null;for(s in i)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=i[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Me.API),function(r){var t={left:0,top:0,bottom:0,right:0},e=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new c,this.internal.__cell__.pages=1},c=function(){var n=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(p){n=p}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(p){l=p}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var o=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return o},set:function(p){o=p}});var u=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var A=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(p){g=p}}),this};c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},c.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(n){return i.call(this),this.internal.__cell__.headerFunction=typeof n=="function"?n:void 0,this},r.getTextDimensions=function(n,l){i.call(this);var h=(l=l||{}).fontSize||this.getFontSize(),o=l.font||this.getFont(),u=l.scaleFactor||this.internal.scaleFactor,A=0,g=0,p=0,d=this;if(!Array.isArray(n)&&typeof n!="string"){if(typeof n!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");n=String(n)}var m=l.maxWidth;m>0?typeof n=="string"?n=this.splitTextToSize(n,m):Object.prototype.toString.call(n)==="[object Array]"&&(n=n.reduce(function(C,x){return C.concat(d.splitTextToSize(x,m))},[])):n=Array.isArray(n)?n:[n];for(var v=0;v<n.length;v++)A<(p=this.getStringUnitWidth(n[v],{font:o})*h)&&(A=p);return A!==0&&(g=n.length),{w:A/=u,h:Math.max((g*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/u,0)}},r.cellAddPage=function(){i.call(this),this.addPage();var n=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new c(n.left,n.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var f=r.cell=function(){var n;n=arguments[0]instanceof c?arguments[0]:new c(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var l=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,u=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===n.lineNumber?(n.x=(l.x||0)+(l.width||0),n.y=l.y||0):l.y+l.height+n.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),n.y=o.top,A&&u&&(this.printHeaderRow(n.lineNumber,!0),n.y+=u[0].height)):n.y=l.y+l.height||n.y),n.text[0]!==void 0&&(this.rect(n.x,n.y,n.width,n.height,e===!0?"FD":void 0),n.align==="right"?this.text(n.text,n.x+n.width-h,n.y+h,{align:"right",baseline:"top"}):n.align==="center"?this.text(n.text,n.x+n.width/2,n.y+h,{align:"center",baseline:"top",maxWidth:n.width-h-h}):this.text(n.text,n.x+h,n.y+h,{align:"left",baseline:"top",maxWidth:n.width-h-h})),this.internal.__cell__.lastCell=n,this};r.table=function(n,l,h,o,u){if(i.call(this),!h)throw new Error("No data for PDF table.");var A,g,p,d,m=[],v=[],C=[],x={},E={},L=[],U=[],O=(u=u||{}).autoSize||!1,X=u.printHeaders!==!1,rt=u.css&&u.css["font-size"]!==void 0?16*u.css["font-size"]:u.fontSize||12,M=u.margins||Object.assign({width:this.getPageWidth()},t),H=typeof u.padding=="number"?u.padding:3,J=u.headerBackgroundColor||"#c8c8c8",$=u.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=X,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=rt,this.internal.__cell__.padding=H,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=$,this.setFontSize(rt),o==null)v=m=Object.keys(h[0]),C=m.map(function(){return"left"});else if(Array.isArray(o)&&dr(o[0])==="object")for(m=o.map(function(G){return G.name}),v=o.map(function(G){return G.prompt||G.name||""}),C=o.map(function(G){return G.align||"left"}),A=0;A<o.length;A+=1)E[o[A].name]=o[A].width*(19.049976/25.4);else Array.isArray(o)&&typeof o[0]=="string"&&(v=m=o,C=m.map(function(){return"left"}));if(O||Array.isArray(o)&&typeof o[0]=="string")for(A=0;A<m.length;A+=1){for(x[d=m[A]]=h.map(function(G){return G[d]}),this.setFont(void 0,"bold"),L.push(this.getTextDimensions(v[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=x[d],this.setFont(void 0,"normal"),p=0;p<g.length;p+=1)L.push(this.getTextDimensions(g[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);E[d]=Math.max.apply(null,L)+H+H,L=[]}if(X){var ht={};for(A=0;A<m.length;A+=1)ht[m[A]]={},ht[m[A]].text=v[A],ht[m[A]].align=C[A];var ut=a.call(this,ht,E);U=m.map(function(G){return new c(n,l,E[G],ut,ht[G].text,void 0,ht[G].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var pt=o.reduce(function(G,it){return G[it.name]=it.align,G},{});for(A=0;A<h.length;A+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:A,data:h[A]},this);var ft=a.call(this,h[A],E);for(p=0;p<m.length;p+=1){var R=h[A][m[p]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:A,col:p,data:R},this),f.call(this,new c(n,l,E[m[p]],ft,R,A+2,pt[m[p]]))}}return this.internal.__cell__.table_x=n,this.internal.__cell__.table_y=l,this};var a=function(n,l){var h=this.internal.__cell__.padding,o=this.internal.__cell__.table_font_size,u=this.internal.scaleFactor;return Object.keys(n).map(function(A){var g=n[A];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,l[A]-h-h)},this).map(function(A){return this.getLineHeightFactor()*A.length*o/u+h+h},this).reduce(function(A,g){return Math.max(A,g)},0)};r.setTableHeaderRow=function(n){i.call(this),this.internal.__cell__.tableHeaderRow=n},r.printHeaderRow=function(n,l){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new c(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var u=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){h=this.internal.__cell__.tableHeaderRow[A].clone(),l&&(h.y=this.internal.__cell__.margins.top||0,u.push(h)),h.lineNumber=n;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),f.call(this,h),this.setTextColor(g)}u.length>0&&this.setTableHeaderRow(u),this.setFont(void 0,"normal"),e=!1}}(Me.API);var G1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},V1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Hg=H1(V1),j1=[100,200,300,400,500,600,700,800,900],iE=H1(j1);function Gg(r){var t=r.family.replace(/"|'/g,"").toLowerCase(),e=function(c){return G1[c=c||"normal"]?c:"normal"}(r.style),i=function(c){if(!c)return 400;if(typeof c=="number")return c>=100&&c<=900&&c%100==0?c:400;if(/^\d00$/.test(c))return parseInt(c);switch(c){case"bold":return 700;case"normal":default:return 400}}(r.weight),s=function(c){return typeof Hg[c=c||"normal"]=="number"?c:"normal"}(r.stretch);return{family:t,style:e,weight:i,stretch:s,src:r.src||[],ref:r.ref||{name:t,style:[s,e,i].join(" ")}}}function K1(r,t,e,i){var s;for(s=e;s>=0&&s<t.length;s+=i)if(r[t[s]])return r[t[s]];for(s=e;s>=0&&s<t.length;s-=i)if(r[t[s]])return r[t[s]]}var nE={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},W1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function X1(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function sE(r,t,e){for(var i=(e=e||{}).defaultFontFamily||"times",s=Object.assign({},nE,e.genericFontFamilies||{}),c=null,f=null,a=0;a<t.length;++a)if(s[(c=Gg(t[a])).family]&&(c.family=s[c.family]),r.hasOwnProperty(c.family)){f=r[c.family];break}if(!(f=f||r[i]))throw new Error("Could not find a font-family for the rule '"+X1(c)+"' and default family '"+i+"'.");if(f=function(n,l){if(l[n])return l[n];var h=Hg[n],o=h<=Hg.normal?-1:1,u=K1(l,V1,h,o);if(!u)throw new Error("Could not find a matching font-stretch value for "+n);return u}(c.stretch,f),f=function(n,l){if(l[n])return l[n];for(var h=G1[n],o=0;o<h.length;++o)if(l[h[o]])return l[h[o]];throw new Error("Could not find a matching font-style for "+n)}(c.style,f),!(f=function(n,l){if(l[n])return l[n];if(n===400&&l[500])return l[500];if(n===500&&l[400])return l[400];var h=iE[n],o=K1(l,j1,h,n<400?-1:1);if(!o)throw new Error("Could not find a matching font-weight for value "+n);return o}(c.weight,f)))throw new Error("Failed to resolve a font for the rule '"+X1(c)+"'.");return f}function z1(r){return r.trimLeft()}function aE(r,t){for(var e=0;e<r.length;){if(r.charAt(e)===t)return[r.substring(0,e),r.substring(e+1)];e+=1}return null}function AE(r){var t=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],r.substring(t[0].length)]}var Ru,q1,$1,Vg=["times"];(function(r){var t,e,i,s,c,f,a,n,l,h=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new n,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new f,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new f,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new o(this),t=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,c=this.internal.getVerticalCoordinate,f=this.internal.Point,a=this.internal.Rectangle,n=this.internal.Matrix,l=new h}]);var o=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=P;Object.defineProperty(this,"pdf",{get:function(){return V}});var k=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return k},set:function(gt){k=!!gt}});var N=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return N},set:function(gt){N=!!gt}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(gt){isNaN(gt)||(Z=gt)}});var st=0;Object.defineProperty(this,"posY",{get:function(){return st},set:function(gt){isNaN(gt)||(st=gt)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(gt){var tt;typeof gt=="number"?tt=[gt,gt,gt,gt]:((tt=new Array(4))[0]=gt[0],tt[1]=gt.length>=2?gt[1]:tt[0],tt[2]=gt.length>=3?gt[2]:tt[0],tt[3]=gt.length>=4?gt[3]:tt[1]),l.margin=tt}});var ct=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ct},set:function(gt){ct=gt}});var ot=0;Object.defineProperty(this,"lastBreak",{get:function(){return ot},set:function(gt){ot=gt}});var wt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return wt},set:function(gt){wt=gt}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(gt){gt instanceof h&&(l=gt)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(gt){l.path=gt}});var _t=[];Object.defineProperty(this,"ctxStack",{get:function(){return _t},set:function(gt){_t=gt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(gt){var tt;tt=u(gt),this.ctx.fillStyle=tt.style,this.ctx.isFillTransparent=tt.a===0,this.ctx.fillOpacity=tt.a,this.pdf.setFillColor(tt.r,tt.g,tt.b,{a:tt.a}),this.pdf.setTextColor(tt.r,tt.g,tt.b,{a:tt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(gt){var tt=u(gt);this.ctx.strokeStyle=tt.style,this.ctx.isStrokeTransparent=tt.a===0,this.ctx.strokeOpacity=tt.a,tt.a===0?this.pdf.setDrawColor(255,255,255):(tt.a,this.pdf.setDrawColor(tt.r,tt.g,tt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(gt){["butt","round","square"].indexOf(gt)!==-1&&(this.ctx.lineCap=gt,this.pdf.setLineCap(gt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(gt){isNaN(gt)||(this.ctx.lineWidth=gt,this.pdf.setLineWidth(gt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(gt){["bevel","round","miter"].indexOf(gt)!==-1&&(this.ctx.lineJoin=gt,this.pdf.setLineJoin(gt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(gt){isNaN(gt)||(this.ctx.miterLimit=gt,this.pdf.setMiterLimit(gt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(gt){this.ctx.textBaseline=gt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(gt){["right","end","center","left","start"].indexOf(gt)!==-1&&(this.ctx.textAlign=gt)}});var Nt=null;function vt(gt,tt){if(Nt===null){var It=function(Pt){var Ut=[];return Object.keys(Pt).forEach(function(Gt){Pt[Gt].forEach(function(Dt){var bt=null;switch(Dt){case"bold":bt={family:Gt,weight:"bold"};break;case"italic":bt={family:Gt,style:"italic"};break;case"bolditalic":bt={family:Gt,weight:"bold",style:"italic"};break;case"":case"normal":bt={family:Gt}}bt!==null&&(bt.ref={name:Gt,style:Dt},Ut.push(bt))})}),Ut}(gt.getFontList());Nt=function(Pt){for(var Ut={},Gt=0;Gt<Pt.length;++Gt){var Dt=Gg(Pt[Gt]),bt=Dt.family,Kt=Dt.stretch,Zt=Dt.style,le=Dt.weight;Ut[bt]=Ut[bt]||{},Ut[bt][Kt]=Ut[bt][Kt]||{},Ut[bt][Kt][Zt]=Ut[bt][Kt][Zt]||{},Ut[bt][Kt][Zt][le]=Dt}return Ut}(It.concat(tt))}return Nt}var mt=null;Object.defineProperty(this,"fontFaces",{get:function(){return mt},set:function(gt){Nt=null,mt=gt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(gt){var tt;if(this.ctx.font=gt,(tt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(gt))!==null){var It=tt[1],Pt=(tt[2],tt[3]),Ut=tt[4],Gt=(tt[5],tt[6]),Dt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ut)[2];Ut=Math.floor(Dt==="px"?parseFloat(Ut)*this.pdf.internal.scaleFactor:Dt==="em"?parseFloat(Ut)*this.pdf.getFontSize():parseFloat(Ut)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ut);var bt=function(Xt){var ae,te,Ne=[],Be=Xt.trim();if(Be==="")return Vg;if(Be in W1)return[W1[Be]];for(;Be!=="";){switch(te=null,ae=(Be=z1(Be)).charAt(0)){case'"':case"'":te=aE(Be.substring(1),ae);break;default:te=AE(Be)}if(te===null||(Ne.push(te[0]),(Be=z1(te[1]))!==""&&Be.charAt(0)!==","))return Vg;Be=Be.replace(/^,/,"")}return Ne}(Gt);if(this.fontFaces){var Kt=sE(vt(this.pdf,this.fontFaces),bt.map(function(Xt){return{family:Xt,stretch:"normal",weight:Pt,style:It}}));this.pdf.setFont(Kt.ref.name,Kt.ref.style)}else{var Zt="";(Pt==="bold"||parseInt(Pt,10)>=700||It==="bold")&&(Zt="bold"),It==="italic"&&(Zt+="italic"),Zt.length===0&&(Zt="normal");for(var le="",pe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Rt=0;Rt<bt.length;Rt++){if(this.pdf.internal.getFont(bt[Rt],Zt,{noFallback:!0,disableWarning:!0})!==void 0){le=bt[Rt];break}if(Zt==="bolditalic"&&this.pdf.internal.getFont(bt[Rt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)le=bt[Rt],Zt="bold";else if(this.pdf.internal.getFont(bt[Rt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){le=bt[Rt],Zt="normal";break}}if(le===""){for(var zt=0;zt<bt.length;zt++)if(pe[bt[zt]]){le=pe[bt[zt]];break}}le=le===""?"Times":le,this.pdf.setFont(le,Zt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(gt){this.ctx.globalCompositeOperation=gt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(gt){this.ctx.globalAlpha=gt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(gt){this.ctx.lineDashOffset=gt,it.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(gt){this.ctx.lineDash=gt,it.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(gt){this.ctx.ignoreClearRect=!!gt}})};o.prototype.setLineDash=function(P){this.lineDash=P},o.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},o.prototype.fill=function(){x.call(this,"fill",!1)},o.prototype.stroke=function(){x.call(this,"stroke",!1)},o.prototype.beginPath=function(){this.path=[{type:"begin"}]},o.prototype.moveTo=function(P,V){if(isNaN(P)||isNaN(V))throw Vr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var k=this.ctx.transform.applyToPoint(new f(P,V));this.path.push({type:"mt",x:k.x,y:k.y}),this.ctx.lastPoint=new f(P,V)},o.prototype.closePath=function(){var P=new f(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&dr(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){P=new f(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new f(P.x,P.y)},o.prototype.lineTo=function(P,V){if(isNaN(P)||isNaN(V))throw Vr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var k=this.ctx.transform.applyToPoint(new f(P,V));this.path.push({type:"lt",x:k.x,y:k.y}),this.ctx.lastPoint=new f(k.x,k.y)},o.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},o.prototype.quadraticCurveTo=function(P,V,k,N){if(isNaN(k)||isNaN(N)||isNaN(P)||isNaN(V))throw Vr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new f(k,N)),st=this.ctx.transform.applyToPoint(new f(P,V));this.path.push({type:"qct",x1:st.x,y1:st.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new f(Z.x,Z.y)},o.prototype.bezierCurveTo=function(P,V,k,N,Z,st){if(isNaN(Z)||isNaN(st)||isNaN(P)||isNaN(V)||isNaN(k)||isNaN(N))throw Vr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ct=this.ctx.transform.applyToPoint(new f(Z,st)),ot=this.ctx.transform.applyToPoint(new f(P,V)),wt=this.ctx.transform.applyToPoint(new f(k,N));this.path.push({type:"bct",x1:ot.x,y1:ot.y,x2:wt.x,y2:wt.y,x:ct.x,y:ct.y}),this.ctx.lastPoint=new f(ct.x,ct.y)},o.prototype.arc=function(P,V,k,N,Z,st){if(isNaN(P)||isNaN(V)||isNaN(k)||isNaN(N)||isNaN(Z))throw Vr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(st=!!st,!this.ctx.transform.isIdentity){var ct=this.ctx.transform.applyToPoint(new f(P,V));P=ct.x,V=ct.y;var ot=this.ctx.transform.applyToPoint(new f(0,k)),wt=this.ctx.transform.applyToPoint(new f(0,0));k=Math.sqrt(Math.pow(ot.x-wt.x,2)+Math.pow(ot.y-wt.y,2))}Math.abs(Z-N)>=2*Math.PI&&(N=0,Z=2*Math.PI),this.path.push({type:"arc",x:P,y:V,radius:k,startAngle:N,endAngle:Z,counterclockwise:st})},o.prototype.arcTo=function(P,V,k,N,Z){throw new Error("arcTo not implemented.")},o.prototype.rect=function(P,V,k,N){if(isNaN(P)||isNaN(V)||isNaN(k)||isNaN(N))throw Vr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,V),this.lineTo(P+k,V),this.lineTo(P+k,V+N),this.lineTo(P,V+N),this.lineTo(P,V),this.lineTo(P+k,V),this.lineTo(P,V)},o.prototype.fillRect=function(P,V,k,N){if(isNaN(P)||isNaN(V)||isNaN(k)||isNaN(N))throw Vr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,V,k,N),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},o.prototype.strokeRect=function(P,V,k,N){if(isNaN(P)||isNaN(V)||isNaN(k)||isNaN(N))throw Vr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(P,V,k,N),this.stroke())},o.prototype.clearRect=function(P,V,k,N){if(isNaN(P)||isNaN(V)||isNaN(k)||isNaN(N))throw Vr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,V,k,N))},o.prototype.save=function(P){P=typeof P!="boolean"||P;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,k=0;k<this.pdf.internal.getNumberOfPages();k++)this.pdf.setPage(k+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var N=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=N}},o.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,k=0;k<this.pdf.internal.getNumberOfPages();k++)this.pdf.setPage(k+1),this.pdf.internal.out("Q");this.pdf.setPage(V),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},o.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var u=function(P){var V,k,N,Z;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))V=0,k=0,N=0,Z=0;else{var st=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(st!==null)V=parseInt(st[1]),k=parseInt(st[2]),N=parseInt(st[3]),Z=1;else if((st=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)V=parseInt(st[1]),k=parseInt(st[2]),N=parseInt(st[3]),Z=parseFloat(st[4]);else{if(Z=1,typeof P=="string"&&P.charAt(0)!=="#"){var ct=new I1(P);P=ct.ok?ct.toHex():"#000000"}P.length===4?(V=P.substring(1,2),V+=V,k=P.substring(2,3),k+=k,N=P.substring(3,4),N+=N):(V=P.substring(1,3),k=P.substring(3,5),N=P.substring(5,7)),V=parseInt(V,16),k=parseInt(k,16),N=parseInt(N,16)}}return{r:V,g:k,b:N,a:Z,style:P}},A=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};o.prototype.fillText=function(P,V,k,N){if(isNaN(V)||isNaN(k)||typeof P!="string")throw Vr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(N=isNaN(N)?void 0:N,!A.call(this)){var Z=ft(this.ctx.transform.rotation),st=this.ctx.transform.scaleX;H.call(this,{text:P,x:V,y:k,scale:st,angle:Z,align:this.textAlign,maxWidth:N})}},o.prototype.strokeText=function(P,V,k,N){if(isNaN(V)||isNaN(k)||typeof P!="string")throw Vr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){N=isNaN(N)?void 0:N;var Z=ft(this.ctx.transform.rotation),st=this.ctx.transform.scaleX;H.call(this,{text:P,x:V,y:k,scale:st,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:N})}},o.prototype.measureText=function(P){if(typeof P!="string")throw Vr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,k=this.pdf.internal.scaleFactor,N=V.internal.getFontSize(),Z=V.getStringUnitWidth(P)*N/V.internal.scaleFactor,st=function(ct){var ot=(ct=ct||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ot}}),this};return new st({width:Z*=Math.round(96*k/72*1e4)/1e4})},o.prototype.scale=function(P,V){if(isNaN(P)||isNaN(V))throw Vr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var k=new n(P,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(k)},o.prototype.rotate=function(P){if(isNaN(P))throw Vr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new n(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},o.prototype.translate=function(P,V){if(isNaN(P)||isNaN(V))throw Vr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var k=new n(1,0,0,1,P,V);this.ctx.transform=this.ctx.transform.multiply(k)},o.prototype.transform=function(P,V,k,N,Z,st){if(isNaN(P)||isNaN(V)||isNaN(k)||isNaN(N)||isNaN(Z)||isNaN(st))throw Vr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ct=new n(P,V,k,N,Z,st);this.ctx.transform=this.ctx.transform.multiply(ct)},o.prototype.setTransform=function(P,V,k,N,Z,st){P=isNaN(P)?1:P,V=isNaN(V)?0:V,k=isNaN(k)?0:k,N=isNaN(N)?1:N,Z=isNaN(Z)?0:Z,st=isNaN(st)?0:st,this.ctx.transform=new n(P,V,k,N,Z,st)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};o.prototype.drawImage=function(P,V,k,N,Z,st,ct,ot,wt){var _t=this.pdf.getImageProperties(P),Nt=1,vt=1,mt=1,gt=1;N!==void 0&&ot!==void 0&&(mt=ot/N,gt=wt/Z,Nt=_t.width/N*ot/N,vt=_t.height/Z*wt/Z),st===void 0&&(st=V,ct=k,V=0,k=0),N!==void 0&&ot===void 0&&(ot=N,wt=Z),N===void 0&&ot===void 0&&(ot=_t.width,wt=_t.height);for(var tt,It=this.ctx.transform.decompose(),Pt=ft(It.rotate.shx),Ut=new n,Gt=(Ut=(Ut=(Ut=Ut.multiply(It.translate)).multiply(It.skew)).multiply(It.scale)).applyToRectangle(new a(st-V*mt,ct-k*gt,N*Nt,Z*vt)),Dt=d.call(this,Gt),bt=[],Kt=0;Kt<Dt.length;Kt+=1)bt.indexOf(Dt[Kt])===-1&&bt.push(Dt[Kt]);if(C(bt),this.autoPaging)for(var Zt=bt[0],le=bt[bt.length-1],pe=Zt;pe<le+1;pe++){this.pdf.setPage(pe);var Rt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],zt=pe===1?this.posY+this.margin[0]:this.margin[0],Xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ae=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],te=pe===1?0:Xt+(pe-2)*ae;if(this.ctx.clip_path.length!==0){var Ne=this.path;tt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(tt,this.posX+this.margin[3],-te+zt+this.ctx.prevPageLastElemOffset),E.call(this,"fill",!0),this.path=Ne}var Be=JSON.parse(JSON.stringify(Gt));Be=v([Be],this.posX+this.margin[3],-te+zt+this.ctx.prevPageLastElemOffset)[0];var Ar=(pe>Zt||pe<le)&&p.call(this);Ar&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Rt,ae,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",Be.x,Be.y,Be.w,Be.h,null,null,Pt),Ar&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Gt.x,Gt.y,Gt.w,Gt.h,null,null,Pt)};var d=function(P,V,k){var N=[];V=V||this.pdf.internal.pageSize.width,k=k||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":N.push(Math.floor((P.y+Z)/k)+1);break;case"arc":N.push(Math.floor((P.y+Z-P.radius)/k)+1),N.push(Math.floor((P.y+Z+P.radius)/k)+1);break;case"qct":var st=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);N.push(Math.floor((st.y+Z)/k)+1),N.push(Math.floor((st.y+st.h+Z)/k)+1);break;case"bct":var ct=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);N.push(Math.floor((ct.y+Z)/k)+1),N.push(Math.floor((ct.y+ct.h+Z)/k)+1);break;case"rect":N.push(Math.floor((P.y+Z)/k)+1),N.push(Math.floor((P.y+P.h+Z)/k)+1)}for(var ot=0;ot<N.length;ot+=1)for(;this.pdf.internal.getNumberOfPages()<N[ot];)m.call(this);return N},m=function(){var P=this.fillStyle,V=this.strokeStyle,k=this.font,N=this.lineCap,Z=this.lineWidth,st=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=V,this.font=k,this.lineCap=N,this.lineWidth=Z,this.lineJoin=st},v=function(P,V,k){for(var N=0;N<P.length;N++)switch(P[N].type){case"bct":P[N].x2+=V,P[N].y2+=k;case"qct":P[N].x1+=V,P[N].y1+=k;case"mt":case"lt":case"arc":default:P[N].x+=V,P[N].y+=k}return P},C=function(P){return P.sort(function(V,k){return V-k})},x=function(P,V){for(var k,N,Z=this.fillStyle,st=this.strokeStyle,ct=this.lineCap,ot=this.lineWidth,wt=Math.abs(ot*this.ctx.transform.scaleX),_t=this.lineJoin,Nt=JSON.parse(JSON.stringify(this.path)),vt=JSON.parse(JSON.stringify(this.path)),mt=[],gt=0;gt<vt.length;gt++)if(vt[gt].x!==void 0)for(var tt=d.call(this,vt[gt]),It=0;It<tt.length;It+=1)mt.indexOf(tt[It])===-1&&mt.push(tt[It]);for(var Pt=0;Pt<mt.length;Pt++)for(;this.pdf.internal.getNumberOfPages()<mt[Pt];)m.call(this);if(C(mt),this.autoPaging)for(var Ut=mt[0],Gt=mt[mt.length-1],Dt=Ut;Dt<Gt+1;Dt++){this.pdf.setPage(Dt),this.fillStyle=Z,this.strokeStyle=st,this.lineCap=ct,this.lineWidth=wt,this.lineJoin=_t;var bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Kt=Dt===1?this.posY+this.margin[0]:this.margin[0],Zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],le=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pe=Dt===1?0:Zt+(Dt-2)*le;if(this.ctx.clip_path.length!==0){var Rt=this.path;k=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(k,this.posX+this.margin[3],-pe+Kt+this.ctx.prevPageLastElemOffset),E.call(this,P,!0),this.path=Rt}if(N=JSON.parse(JSON.stringify(Nt)),this.path=v(N,this.posX+this.margin[3],-pe+Kt+this.ctx.prevPageLastElemOffset),V===!1||Dt===0){var zt=(Dt>Ut||Dt<Gt)&&p.call(this);zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],bt,le,null).clip().discardPath()),E.call(this,P,V),zt&&this.pdf.restoreGraphicsState()}this.lineWidth=ot}else this.lineWidth=wt,E.call(this,P,V),this.lineWidth=ot;this.path=Nt},E=function(P,V){if((P!=="stroke"||V||!g.call(this))&&(P==="stroke"||V||!A.call(this))){for(var k,N,Z=[],st=this.path,ct=0;ct<st.length;ct++){var ot=st[ct];switch(ot.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:ot,deltas:[],abs:[]});break;case"lt":var wt=Z.length;if(st[ct-1]&&!isNaN(st[ct-1].x)&&(k=[ot.x-st[ct-1].x,ot.y-st[ct-1].y],wt>0)){for(;wt>=0;wt--)if(Z[wt-1].close!==!0&&Z[wt-1].begin!==!0){Z[wt-1].deltas.push(k),Z[wt-1].abs.push(ot);break}}break;case"bct":k=[ot.x1-st[ct-1].x,ot.y1-st[ct-1].y,ot.x2-st[ct-1].x,ot.y2-st[ct-1].y,ot.x-st[ct-1].x,ot.y-st[ct-1].y],Z[Z.length-1].deltas.push(k);break;case"qct":var _t=st[ct-1].x+2/3*(ot.x1-st[ct-1].x),Nt=st[ct-1].y+2/3*(ot.y1-st[ct-1].y),vt=ot.x+2/3*(ot.x1-ot.x),mt=ot.y+2/3*(ot.y1-ot.y),gt=ot.x,tt=ot.y;k=[_t-st[ct-1].x,Nt-st[ct-1].y,vt-st[ct-1].x,mt-st[ct-1].y,gt-st[ct-1].x,tt-st[ct-1].y],Z[Z.length-1].deltas.push(k);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(ot)}}N=V?null:P==="stroke"?"stroke":"fill";for(var It=!1,Pt=0;Pt<Z.length;Pt++)if(Z[Pt].arc)for(var Ut=Z[Pt].abs,Gt=0;Gt<Ut.length;Gt++){var Dt=Ut[Gt];Dt.type==="arc"?O.call(this,Dt.x,Dt.y,Dt.radius,Dt.startAngle,Dt.endAngle,Dt.counterclockwise,void 0,V,!It):J.call(this,Dt.x,Dt.y),It=!0}else if(Z[Pt].close===!0)this.pdf.internal.out("h"),It=!1;else if(Z[Pt].begin!==!0){var bt=Z[Pt].start.x,Kt=Z[Pt].start.y;$.call(this,Z[Pt].deltas,bt,Kt),It=!0}N&&X.call(this,N),V&&rt.call(this)}},L=function(P){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,k=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-k;case"top":return P+V-k;case"hanging":return P+V-2*k;case"middle":return P+V/2-k;case"ideographic":return P;case"alphabetic":default:return P}},U=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};o.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(V,k){this.colorStops.push([V,k])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},o.prototype.createPattern=function(){return this.createLinearGradient()},o.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(P,V,k,N,Z,st,ct,ot,wt){for(var _t=ut.call(this,k,N,Z,st),Nt=0;Nt<_t.length;Nt++){var vt=_t[Nt];Nt===0&&(wt?M.call(this,vt.x1+P,vt.y1+V):J.call(this,vt.x1+P,vt.y1+V)),ht.call(this,P,V,vt.x2,vt.y2,vt.x3,vt.y3,vt.x4,vt.y4)}ot?rt.call(this):X.call(this,ct)},X=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},rt=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(P,V){this.pdf.internal.out(e(P)+" "+i(V)+" m")},H=function(P){var V;switch(P.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var k=this.pdf.getTextDimensions(P.text),N=L.call(this,P.y),Z=U.call(this,N)-k.h,st=this.ctx.transform.applyToPoint(new f(P.x,N)),ct=this.ctx.transform.decompose(),ot=new n;ot=(ot=(ot=ot.multiply(ct.translate)).multiply(ct.skew)).multiply(ct.scale);for(var wt,_t,Nt,vt=this.ctx.transform.applyToRectangle(new a(P.x,N,k.w,k.h)),mt=ot.applyToRectangle(new a(P.x,Z,k.w,k.h)),gt=d.call(this,mt),tt=[],It=0;It<gt.length;It+=1)tt.indexOf(gt[It])===-1&&tt.push(gt[It]);if(C(tt),this.autoPaging)for(var Pt=tt[0],Ut=tt[tt.length-1],Gt=Pt;Gt<Ut+1;Gt++){this.pdf.setPage(Gt);var Dt=Gt===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Kt=this.pdf.internal.pageSize.height-this.margin[2],Zt=Kt-this.margin[0],le=this.pdf.internal.pageSize.width-this.margin[1],pe=le-this.margin[3],Rt=Gt===1?0:bt+(Gt-2)*Zt;if(this.ctx.clip_path.length!==0){var zt=this.path;wt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(wt,this.posX+this.margin[3],-1*Rt+Dt),E.call(this,"fill",!0),this.path=zt}var Xt=v([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-Rt+Dt+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(_t=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_t*P.scale),Nt=this.lineWidth,this.lineWidth=Nt*P.scale);var ae=this.autoPaging!=="text";if(ae||Xt.y+Xt.h<=Kt){if(ae||Xt.y>=Dt&&Xt.x<=le){var te=ae?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||le-Xt.x)[0],Ne=v([JSON.parse(JSON.stringify(vt))],this.posX+this.margin[3],-Rt+Dt+this.ctx.prevPageLastElemOffset)[0],Be=ae&&(Gt>Pt||Gt<Ut)&&p.call(this);Be&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pe,Zt,null).clip().discardPath()),this.pdf.text(te,Ne.x,Ne.y,{angle:P.angle,align:V,renderingMode:P.renderingMode}),Be&&this.pdf.restoreGraphicsState()}}else Xt.y<Kt&&(this.ctx.prevPageLastElemOffset+=Kt-Xt.y);P.scale>=.01&&(this.pdf.setFontSize(_t),this.lineWidth=Nt)}else P.scale>=.01&&(_t=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_t*P.scale),Nt=this.lineWidth,this.lineWidth=Nt*P.scale),this.pdf.text(P.text,st.x+this.posX,st.y+this.posY,{angle:P.angle,align:V,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(_t),this.lineWidth=Nt)},J=function(P,V,k,N){k=k||0,N=N||0,this.pdf.internal.out(e(P+k)+" "+i(V+N)+" l")},$=function(P,V,k){return this.pdf.lines(P,V,k,null,null)},ht=function(P,V,k,N,Z,st,ct,ot){this.pdf.internal.out([t(s(k+P)),t(c(N+V)),t(s(Z+P)),t(c(st+V)),t(s(ct+P)),t(c(ot+V)),"c"].join(" "))},ut=function(P,V,k,N){for(var Z=2*Math.PI,st=Math.PI/2;V>k;)V-=Z;var ct=Math.abs(k-V);ct<Z&&N&&(ct=Z-ct);for(var ot=[],wt=N?-1:1,_t=V;ct>1e-5;){var Nt=_t+wt*Math.min(ct,st);ot.push(pt.call(this,P,_t,Nt)),ct-=Math.abs(Nt-_t),_t=Nt}return ot},pt=function(P,V,k){var N=(k-V)/2,Z=P*Math.cos(N),st=P*Math.sin(N),ct=Z,ot=-st,wt=ct*ct+ot*ot,_t=wt+ct*Z+ot*st,Nt=4/3*(Math.sqrt(2*wt*_t)-_t)/(ct*st-ot*Z),vt=ct-Nt*ot,mt=ot+Nt*ct,gt=vt,tt=-mt,It=N+V,Pt=Math.cos(It),Ut=Math.sin(It);return{x1:P*Math.cos(V),y1:P*Math.sin(V),x2:vt*Pt-mt*Ut,y2:vt*Ut+mt*Pt,x3:gt*Pt-tt*Ut,y3:gt*Ut+tt*Pt,x4:P*Math.cos(k),y4:P*Math.sin(k)}},ft=function(P){return 180*P/Math.PI},R=function(P,V,k,N,Z,st){var ct=P+.5*(k-P),ot=V+.5*(N-V),wt=Z+.5*(k-Z),_t=st+.5*(N-st),Nt=Math.min(P,Z,ct,wt),vt=Math.max(P,Z,ct,wt),mt=Math.min(V,st,ot,_t),gt=Math.max(V,st,ot,_t);return new a(Nt,mt,vt-Nt,gt-mt)},G=function(P,V,k,N,Z,st,ct,ot){var wt,_t,Nt,vt,mt,gt,tt,It,Pt,Ut,Gt,Dt,bt,Kt,Zt=k-P,le=N-V,pe=Z-k,Rt=st-N,zt=ct-Z,Xt=ot-st;for(_t=0;_t<41;_t++)Pt=(tt=(Nt=P+(wt=_t/40)*Zt)+wt*((mt=k+wt*pe)-Nt))+wt*(mt+wt*(Z+wt*zt-mt)-tt),Ut=(It=(vt=V+wt*le)+wt*((gt=N+wt*Rt)-vt))+wt*(gt+wt*(st+wt*Xt-gt)-It),_t==0?(Gt=Pt,Dt=Ut,bt=Pt,Kt=Ut):(Gt=Math.min(Gt,Pt),Dt=Math.min(Dt,Ut),bt=Math.max(bt,Pt),Kt=Math.max(Kt,Ut));return new a(Math.round(Gt),Math.round(Dt),Math.round(bt-Gt),Math.round(Kt-Dt))},it=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,V,k=(P=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:V}));this.prevLineDash!==k&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=k)}}})(Me.API),function(r){var t=function(c){var f,a,n,l,h,o,u,A,g,p;for(a=[],n=0,l=(c+=f="\0\0\0\0".slice(c.length%4||4)).length;l>n;n+=4)(h=(c.charCodeAt(n)<<24)+(c.charCodeAt(n+1)<<16)+(c.charCodeAt(n+2)<<8)+c.charCodeAt(n+3))!==0?(o=(h=((h=((h=((h=(h-(p=h%85))/85)-(g=h%85))/85)-(A=h%85))/85)-(u=h%85))/85)%85,a.push(o+33,u+33,A+33,g+33,p+33)):a.push(122);return function(d,m){for(var v=m;v>0;v--)d.pop()}(a,f.length),String.fromCharCode.apply(String,a)+"~>"},e=function(c){var f,a,n,l,h,o=String,u="length",A=255,g="charCodeAt",p="slice",d="replace";for(c[p](-2),c=c[p](0,-2)[d](/\s/g,"")[d]("z","!!!!!"),n=[],l=0,h=(c+=f="uuuuu"[p](c[u]%5||5))[u];h>l;l+=5)a=52200625*(c[g](l)-33)+614125*(c[g](l+1)-33)+7225*(c[g](l+2)-33)+85*(c[g](l+3)-33)+(c[g](l+4)-33),n.push(A&a>>24,A&a>>16,A&a>>8,A&a);return function(m,v){for(var C=v;C>0;C--)m.pop()}(n,f[u]),o.fromCharCode.apply(o,n)},i=function(c){var f=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),f.test(c)===!1)return"";for(var a="",n=0;n<c.length;n+=2)a+=String.fromCharCode("0x"+(c[n]+c[n+1]));return a},s=function(c){for(var f=new Uint8Array(c.length),a=c.length;a--;)f[a]=c.charCodeAt(a);return c=(f=Ig(f)).reduce(function(n,l){return n+String.fromCharCode(l)},"")};r.processDataByFilters=function(c,f){var a=0,n=c||"",l=[];for(typeof(f=f||[])=="string"&&(f=[f]),a=0;a<f.length;a+=1)switch(f[a]){case"ASCII85Decode":case"/ASCII85Decode":n=e(n),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":n=t(n),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":n=i(n),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":n=n.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":n=s(n),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+f[a]+'" is not implemented')}return{data:n,reverseChain:l.reverse().join(" ")}}}(Me.API),function(r){r.loadFile=function(t,e,i){return function(s,c,f){c=c!==!1,f=typeof f=="function"?f:function(){};var a=void 0;try{a=function(n,l,h){var o=new XMLHttpRequest,u=0,A=function(g){var p=g.length,d=[],m=String.fromCharCode;for(u=0;u<p;u+=1)d.push(m(255&g.charCodeAt(u)));return d.join("")};if(o.open("GET",n,!l),o.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(o.onload=function(){o.status===200?h(A(this.responseText)):h(void 0)}),o.send(null),l&&o.status===200)return A(o.responseText)}(s,c,f)}catch{}return a}(t,e,i)},r.loadImageFile=r.loadFile}(Me.API),function(r){function t(){return(De.html2canvas?Promise.resolve(De.html2canvas):Promise.resolve().then(function(){return M4})).catch(function(f){return Promise.reject(new Error("Could not load html2canvas: "+f))}).then(function(f){return f.default?f.default:f})}function e(){return(De.DOMPurify?Promise.resolve(De.DOMPurify):Promise.resolve().then(function(){return oF})).catch(function(f){return Promise.reject(new Error("Could not load dompurify: "+f))}).then(function(f){return f.default?f.default:f})}var i=function(f){var a=dr(f);return a==="undefined"?"undefined":a==="string"||f instanceof String?"string":a==="number"||f instanceof Number?"number":a==="function"||f instanceof Function?"function":f&&f.constructor===Array?"array":f&&f.nodeType===1?"element":a==="object"?"object":"unknown"},s=function(f,a){var n=document.createElement(f);for(var l in a.className&&(n.className=a.className),a.innerHTML&&a.dompurify&&(n.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)n.style[l]=a.style[l];return n},c=function f(a){var n=Object.assign(f.convert(Promise.resolve()),JSON.parse(JSON.stringify(f.template))),l=f.convert(Promise.resolve(),n);return l=(l=l.setProgress(1,f,1,[f])).set(a)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(f,a){return f.__proto__=a||c.prototype,f},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(f,a){return this.then(function(){switch(a=a||function(n){switch(i(n)){case"string":return"string";case"element":return n.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(f)){case"string":return this.then(e).then(function(n){return this.set({src:s("div",{innerHTML:f,dompurify:n})})});case"element":return this.set({src:f});case"canvas":return this.set({canvas:f});case"img":return this.set({img:f});default:return this.error("Unknown source type.")}})},c.prototype.to=function(f){switch(f){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var f={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function n(l,h){for(var o=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),u=l.firstChild;u;u=u.nextSibling)h!==!0&&u.nodeType===1&&u.nodeName==="SCRIPT"||o.appendChild(n(u,h));return l.nodeType===1&&(l.nodeName==="CANVAS"?(o.width=l.width,o.height=l.height,o.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(o.value=l.value),o.addEventListener("load",function(){o.scrollTop=l.scrollTop,o.scrollLeft=l.scrollLeft},!0)),o}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(f.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:f}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(t).then(function(a){var n=Object.assign({},this.opt.html2canvas);return delete n.onrendered,a(this.prop.container,n)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(t).then(function(a){var n=this.opt.jsPDF,l=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,o=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete o.onrendered,n.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,n.context2d.posX=this.opt.x,n.context2d.posY=this.opt.y,n.context2d.margin=this.opt.margin,n.context2d.fontFaces=l,l)for(var u=0;u<l.length;++u){var A=l[u],g=A.src.find(function(p){return p.format==="truetype"});g&&n.addFont(g.url,A.ref.name,A.ref.style)}return o.windowHeight=o.windowHeight||0,o.windowHeight=o.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):o.windowHeight,n.context2d.save(!0),a(this.prop.container,o)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var f=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=f})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(f,a,n){return(n=n||"pdf").toLowerCase()==="img"||n.toLowerCase()==="image"?this.outputImg(f,a):this.outputPdf(f,a)},c.prototype.outputPdf=function(f,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(f,a)})},c.prototype.outputImg=function(f){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(f){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+f+'" is not supported.'}})},c.prototype.save=function(f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(f?{filename:f}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(f){if(i(f)!=="object")return this;var a=Object.keys(f||{}).map(function(n){if(n in c.template.prop)return function(){this.prop[n]=f[n]};switch(n){case"margin":return this.setMargin.bind(this,f.margin);case"jsPDF":return function(){return this.opt.jsPDF=f.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,f.pageSize);default:return function(){this.opt[n]=f[n]}}},this);return this.then(function(){return this.thenList(a)})},c.prototype.get=function(f,a){return this.then(function(){var n=f in c.template.prop?this.prop[f]:this.opt[f];return a?a(n):n})},c.prototype.setMargin=function(f){return this.then(function(){switch(i(f)){case"number":f=[f,f,f,f];case"array":if(f.length===2&&(f=[f[0],f[1],f[0],f[1]]),f.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=f}).then(this.setPageSize)},c.prototype.setPageSize=function(f){function a(n,l){return Math.floor(n*l/72*96)}return this.then(function(){(f=f||Me.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(f.inner={width:f.width-this.opt.margin[1]-this.opt.margin[3],height:f.height-this.opt.margin[0]-this.opt.margin[2]},f.inner.px={width:a(f.inner.width,f.k),height:a(f.inner.height,f.k)},f.inner.ratio=f.inner.height/f.inner.width),this.prop.pageSize=f})},c.prototype.setProgress=function(f,a,n,l){return f!=null&&(this.progress.val=f),a!=null&&(this.progress.state=a),n!=null&&(this.progress.n=n),l!=null&&(this.progress.stack=l),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(f,a,n,l){return this.setProgress(f?this.progress.val+f:null,a||null,n?this.progress.n+n:null,l?this.progress.stack.concat(l):null)},c.prototype.then=function(f,a){var n=this;return this.thenCore(f,a,function(l,h){return n.updateProgress(null,null,1,[l]),Promise.prototype.then.call(this,function(o){return n.updateProgress(null,l),o}).then(l,h).then(function(o){return n.updateProgress(1),o})})},c.prototype.thenCore=function(f,a,n){n=n||Promise.prototype.then,f&&(f=f.bind(this)),a&&(a=a.bind(this));var l=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:c.convert(Object.assign({},this),Promise.prototype),h=n.call(l,f,a);return c.convert(h,this.__proto__)},c.prototype.thenExternal=function(f,a){return Promise.prototype.then.call(this,f,a)},c.prototype.thenList=function(f){var a=this;return f.forEach(function(n){a=a.thenCore(n)}),a},c.prototype.catch=function(f){f&&(f=f.bind(this));var a=Promise.prototype.catch.call(this,f);return c.convert(a,this)},c.prototype.catchExternal=function(f){return Promise.prototype.catch.call(this,f)},c.prototype.error=function(f){return this.then(function(){throw new Error(f)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Me.getPageSize=function(f,a,n){if(dr(f)==="object"){var l=f;f=l.orientation,a=l.unit||a,n=l.format||n}a=a||"mm",n=n||"a4",f=(""+(f||"P")).toLowerCase();var h,o=(""+n).toLowerCase(),u={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var A,g=0,p=0;if(u.hasOwnProperty(o))g=u[o][1]/h,p=u[o][0]/h;else try{g=n[1],p=n[0]}catch{throw new Error("Invalid format: "+n)}if(f==="p"||f==="portrait")f="p",p>g&&(A=p,p=g,g=A);else{if(f!=="l"&&f!=="landscape")throw"Invalid orientation: "+f;f="l",g>p&&(A=p,p=g,g=A)}return{width:p,height:g,unit:a,k:h,orientation:f}},r.html=function(f,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Gg):null;var n=new c(a);return a.worker?n:n.from(f).doCallback()}}(Me.API),Me.API.addJS=function(r){return $1=r,this.internal.events.subscribe("postPutResources",function(){Ru=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ru+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),q1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ru!==void 0&&q1!==void 0&&this.internal.out("/Names <</JavaScript "+Ru+" 0 R>>")}),this},function(r){var t;r.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=e.outline.render().split(/\r\n/),c=0;c<s.length;c++){var f=s[c],a=i.exec(f);if(a!=null){var n=a[1];e.internal.newObjectDeferredBegin(n,!1)}e.internal.write(f)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,h=[];for(c=0;c<l;c++){var o=e.internal.newObject();h.push(o);var u=e.internal.getPageInfo(c+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var A=e.internal.newObject();for(e.internal.write("<< /Names [ "),c=0;c<h.length;c++)e.internal.write("(page_"+(c+1)+")"+h[c]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+A+" 0 R"),e.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),r.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,s,c){var f={title:s,options:c,children:[]};return i==null&&(i=this.root),i.children.push(f),f},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var s=0;s<i.children.length;s++)this.genIds_r(i.children[s])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,c=0;c<i.children.length;c++){var f=i.children[c];this.objStart(f),this.line("/Title "+this.makeString(f.title)),this.line("/Parent "+this.makeRef(i)),c>0&&this.line("/Prev "+this.makeRef(i.children[c-1])),c<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[c+1])),f.children.length>0&&(this.line("/First "+this.makeRef(f.children[0])),this.line("/Last "+this.makeRef(f.children[f.children.length-1])));var a=this.count=this.count_r({count:0},f);if(a>0&&this.line("/Count "+a),f.options&&f.options.pageNumber){var n=e.internal.getPageInfo(f.options.pageNumber);this.line("/Dest ["+n.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var l=0;l<i.children.length;l++)this.renderItems(i.children[l])},e.outline.line=function(i){this.ctx.val+=i+`\r
`},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(i,s){for(var c=0;c<s.children.length;c++)i.count++,this.count_r(i,s.children[c]);return i.count}}])}(Me.API),function(r){var t=[192,193,194,195,196,197,198,199];r.processJPEG=function(e,i,s,c,f,a){var n,l=this.decode.DCT_DECODE,h=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=f||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(n=function(o){for(var u,A=256*o.charCodeAt(4)+o.charCodeAt(5),g=o.length,p={width:0,height:0,numcomponents:1},d=4;d<g;d+=2){if(d+=A,t.indexOf(o.charCodeAt(d+1))!==-1){u=256*o.charCodeAt(d+5)+o.charCodeAt(d+6),p={width:256*o.charCodeAt(d+7)+o.charCodeAt(d+8),height:u,numcomponents:o.charCodeAt(d+9)};break}A=256*o.charCodeAt(d+2)+o.charCodeAt(d+3)}return p}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:e,width:n.width,height:n.height,colorSpace:a,bitsPerComponent:8,filter:l,index:i,alias:s}}return h}}(Me.API);var ql,Hu,Y1,J1,Z1,oE=function(){var r,t,e;function i(c){var f,a,n,l,h,o,u,A,g,p,d,m,v,C;for(this.data=c,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(f=this.readUInt32(),g=(function(){var x,E;for(E=[],x=0;x<4;++x)E.push(String.fromCharCode(this.data[this.pos++]));return E}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(f);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),l=this.readUInt16()||100,o.delay=1e3*h/l,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,f-=4),c=(o!=null?o.data:void 0)||this.imgData,m=0;0<=f?m<f:m>f;0<=f?++m:--m)c.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(n=this.palette.length/3,this.transparency.indexed=this.read(f),this.transparency.indexed.length>n)throw new Error("More transparent colors than palette size");if((p=n-this.transparency.indexed.length)>0)for(v=0;0<=p?v<p:v>p;0<=p?++v:--v)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(f)[0];break;case 2:this.transparency.rgb=this.read(f)}break;case"tEXt":u=(d=this.read(f)).indexOf(0),A=String.fromCharCode.apply(String,d.slice(0,u)),this.text[A]=String.fromCharCode.apply(String,d.slice(u+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=f}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(c){var f,a;for(a=[],f=0;0<=c?f<c:f>c;0<=c?++f:--f)a.push(this.data[this.pos++]);return a},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(c){var f=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*f),n=0,l=this;if(c==null&&(c=this.imgData),c.length===0)return new Uint8Array(0);function h(o,u,A,g){var p,d,m,v,C,x,E,L,U,O,X,rt,M,H,J,$,ht,ut,pt,ft,R,G=Math.ceil((l.width-o)/A),it=Math.ceil((l.height-u)/g),P=l.width==G&&l.height==it;for(H=f*G,rt=P?a:new Uint8Array(H*it),x=c.length,M=0,d=0;M<it&&n<x;){switch(c[n++]){case 0:for(v=ht=0;ht<H;v=ht+=1)rt[d++]=c[n++];break;case 1:for(v=ut=0;ut<H;v=ut+=1)p=c[n++],C=v<f?0:rt[d-f],rt[d++]=(p+C)%256;break;case 2:for(v=pt=0;pt<H;v=pt+=1)p=c[n++],m=(v-v%f)/f,J=M&&rt[(M-1)*H+m*f+v%f],rt[d++]=(J+p)%256;break;case 3:for(v=ft=0;ft<H;v=ft+=1)p=c[n++],m=(v-v%f)/f,C=v<f?0:rt[d-f],J=M&&rt[(M-1)*H+m*f+v%f],rt[d++]=(p+Math.floor((C+J)/2))%256;break;case 4:for(v=R=0;R<H;v=R+=1)p=c[n++],m=(v-v%f)/f,C=v<f?0:rt[d-f],M===0?J=$=0:(J=rt[(M-1)*H+m*f+v%f],$=m&&rt[(M-1)*H+(m-1)*f+v%f]),E=C+J-$,L=Math.abs(E-C),O=Math.abs(E-J),X=Math.abs(E-$),U=L<=O&&L<=X?C:O<=X?J:$,rt[d++]=(p+U)%256;break;default:throw new Error("Invalid filter algorithm: "+c[n-1])}if(!P){var V=((u+M*g)*l.width+o)*f,k=M*H;for(v=0;v<G;v+=1){for(var N=0;N<f;N+=1)a[V++]=rt[k++];V+=(A-1)*f}}M++}}return c=G_(c),l.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},i.prototype.decodePalette=function(){var c,f,a,n,l,h,o,u,A;for(a=this.palette,h=this.transparency.indexed||[],l=new Uint8Array((h.length||0)+a.length),n=0,c=0,f=o=0,u=a.length;o<u;f=o+=3)l[n++]=a[f],l[n++]=a[f+1],l[n++]=a[f+2],l[n++]=(A=h[c++])!=null?A:255;return l},i.prototype.copyToImageData=function(c,f){var a,n,l,h,o,u,A,g,p,d,m;if(n=this.colors,p=null,a=this.hasAlphaChannel,this.palette.length&&(p=(m=this._decodedPalette)!=null?m:this._decodedPalette=this.decodePalette(),n=4,a=!0),g=(l=c.data||c).length,o=p||f,h=u=0,n===1)for(;h<g;)A=p?4*f[h/4]:u,d=o[A++],l[h++]=d,l[h++]=d,l[h++]=d,l[h++]=a?o[A++]:255,u=A;else for(;h<g;)A=p?4*f[h/4]:u,l[h++]=o[A++],l[h++]=o[A++],l[h++]=o[A++],l[h++]=a?o[A++]:255,u=A},i.prototype.decode=function(){var c;return c=new Uint8Array(this.width*this.height*4),this.copyToImageData(c,this.decodePixels()),c};var s=function(){if(Object.prototype.toString.call(De)==="[object Window]"){try{t=De.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),r=function(c){var f;if(s()===!0)return e.width=c.width,e.height=c.height,e.clearRect(0,0,c.width,c.height),e.putImageData(c,0,0),(f=new Image).src=t.toDataURL(),f;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(c){var f,a,n,l,h,o,u,A;if(this.animation){for(A=[],a=h=0,o=(u=this.animation.frames).length;h<o;a=++h)f=u[a],n=c.createImageData(f.width,f.height),l=this.decodePixels(new Uint8Array(f.data)),this.copyToImageData(n,l),f.imageData=n,A.push(f.image=r(n));return A}},i.prototype.renderFrame=function(c,f){var a,n,l;return a=(n=this.animation.frames)[f],l=n[f-1],f===0&&c.clearRect(0,0,this.width,this.height),(l!=null?l.disposeOp:void 0)===1?c.clearRect(l.xOffset,l.yOffset,l.width,l.height):(l!=null?l.disposeOp:void 0)===2&&c.putImageData(l.imageData,l.xOffset,l.yOffset),a.blendOp===0&&c.clearRect(a.xOffset,a.yOffset,a.width,a.height),c.drawImage(a.image,a.xOffset,a.yOffset)},i.prototype.animate=function(c){var f,a,n,l,h,o,u=this;return a=0,o=this.animation,l=o.numFrames,n=o.frames,h=o.numPlays,(f=function(){var A,g;if(A=a++%l,g=n[A],u.renderFrame(c,A),l>1&&a/l<h)return u.animation._timeout=setTimeout(f,g.delay)})()},i.prototype.stopAnimation=function(){var c;return clearTimeout((c=this.animation)!=null?c._timeout:void 0)},i.prototype.render=function(c){var f,a;return c._png&&c._png.stopAnimation(),c._png=this,c.width=this.width,c.height=this.height,f=c.getContext("2d"),this.animation?(this.decodeFrames(f),this.animate(f)):(a=f.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),f.putImageData(a,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function lE(r){var t=0;if(r[t++]!==71||r[t++]!==73||r[t++]!==70||r[t++]!==56||(r[t++]+1&253)!=56||r[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=r[t++]|r[t++]<<8,i=r[t++]|r[t++]<<8,s=r[t++],c=s>>7,f=1<<(7&s)+1;r[t++],r[t++];var a=null,n=null;c&&(a=t,n=f,t+=3*f);var l=!0,h=[],o=0,u=null,A=0,g=null;for(this.width=e,this.height=i;l&&t<r.length;)switch(r[t++]){case 33:switch(r[t++]){case 255:if(r[t]!==11||r[t+1]==78&&r[t+2]==69&&r[t+3]==84&&r[t+4]==83&&r[t+5]==67&&r[t+6]==65&&r[t+7]==80&&r[t+8]==69&&r[t+9]==50&&r[t+10]==46&&r[t+11]==48&&r[t+12]==3&&r[t+13]==1&&r[t+16]==0)t+=14,g=r[t++]|r[t++]<<8,t++;else for(t+=12;;){if(!((M=r[t++])>=0))throw Error("Invalid block size");if(M===0)break;t+=M}break;case 249:if(r[t++]!==4||r[t+4]!==0)throw new Error("Invalid graphics extension block.");var p=r[t++];o=r[t++]|r[t++]<<8,u=r[t++],!(1&p)&&(u=null),A=p>>2&7,t++;break;case 254:for(;;){if(!((M=r[t++])>=0))throw Error("Invalid block size");if(M===0)break;t+=M}break;default:throw new Error("Unknown graphic control label: 0x"+r[t-1].toString(16))}break;case 44:var d=r[t++]|r[t++]<<8,m=r[t++]|r[t++]<<8,v=r[t++]|r[t++]<<8,C=r[t++]|r[t++]<<8,x=r[t++],E=x>>6&1,L=1<<(7&x)+1,U=a,O=n,X=!1;x>>7&&(X=!0,U=t,O=L,t+=3*L);var rt=t;for(t++;;){var M;if(!((M=r[t++])>=0))throw Error("Invalid block size");if(M===0)break;t+=M}h.push({x:d,y:m,width:v,height:C,has_local_palette:X,palette_offset:U,palette_size:O,data_offset:rt,data_length:t-rt,transparent_index:u,interlaced:!!E,delay:o,disposal:A});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+r[t-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return g},this.frameInfo=function(H){if(H<0||H>=h.length)throw new Error("Frame index out of range.");return h[H]},this.decodeAndBlitFrameBGRA=function(H,J){var $=this.frameInfo(H),ht=$.width*$.height,ut=new Uint8Array(ht);ty(r,$.data_offset,ut,ht);var pt=$.palette_offset,ft=$.transparent_index;ft===null&&(ft=256);var R=$.width,G=e-R,it=R,P=4*($.y*e+$.x),V=4*(($.y+$.height)*e+$.x),k=P,N=4*G;$.interlaced===!0&&(N+=4*e*7);for(var Z=8,st=0,ct=ut.length;st<ct;++st){var ot=ut[st];if(it===0&&(it=R,(k+=N)>=V&&(N=4*G+4*e*(Z-1),k=P+(R+G)*(Z<<1),Z>>=1)),ot===ft)k+=4;else{var wt=r[pt+3*ot],_t=r[pt+3*ot+1],Nt=r[pt+3*ot+2];J[k++]=Nt,J[k++]=_t,J[k++]=wt,J[k++]=255}--it}},this.decodeAndBlitFrameRGBA=function(H,J){var $=this.frameInfo(H),ht=$.width*$.height,ut=new Uint8Array(ht);ty(r,$.data_offset,ut,ht);var pt=$.palette_offset,ft=$.transparent_index;ft===null&&(ft=256);var R=$.width,G=e-R,it=R,P=4*($.y*e+$.x),V=4*(($.y+$.height)*e+$.x),k=P,N=4*G;$.interlaced===!0&&(N+=4*e*7);for(var Z=8,st=0,ct=ut.length;st<ct;++st){var ot=ut[st];if(it===0&&(it=R,(k+=N)>=V&&(N=4*G+4*e*(Z-1),k=P+(R+G)*(Z<<1),Z>>=1)),ot===ft)k+=4;else{var wt=r[pt+3*ot],_t=r[pt+3*ot+1],Nt=r[pt+3*ot+2];J[k++]=wt,J[k++]=_t,J[k++]=Nt,J[k++]=255}--it}}}function ty(r,t,e,i){for(var s=r[t++],c=1<<s,f=c+1,a=f+1,n=s+1,l=(1<<n)-1,h=0,o=0,u=0,A=r[t++],g=new Int32Array(4096),p=null;;){for(;h<16&&A!==0;)o|=r[t++]<<h,h+=8,A===1?A=r[t++]:--A;if(h<n)break;var d=o&l;if(o>>=n,h-=n,d!==c){if(d===f)break;for(var m=d<a?d:p,v=0,C=m;C>c;)C=g[C]>>8,++v;var x=C;if(u+v+(m!==d?1:0)>i)return void Vr.log("Warning, gif stream longer than expected.");e[u++]=x;var E=u+=v;for(m!==d&&(e[u++]=x),C=m;v--;)C=g[C],e[--E]=255&C,C>>=8;p!==null&&a<4096&&(g[a++]=p<<8|x,a>=l+1&&n<12&&(++n,l=l<<1|1)),p=d}else a=f+1,l=(1<<(n=s+1))-1,p=null}return u!==i&&Vr.log("Warning, gif stream shorter than expected."),e}/**
   * @license
    Copyright (c) 2008, Adobe Systems Incorporated
    All rights reserved.

    Redistribution and use in source and binary forms, with or without 
    modification, are permitted provided that the following conditions are
    met:

    * Redistributions of source code must retain the above copyright notice, 
      this list of conditions and the following disclaimer.
    
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the 
      documentation and/or other materials provided with the distribution.
    
    * Neither the name of Adobe Systems Incorporated nor the names of its 
      contributors may be used to endorse or promote products derived from 
      this software without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
    IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
    THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
    PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
    CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
    EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
    PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
    PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
    LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
    NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
    SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */function jg(r){var t,e,i,s,c,f=Math.floor,a=new Array(64),n=new Array(64),l=new Array(64),h=new Array(64),o=new Array(65535),u=new Array(65535),A=new Array(64),g=new Array(64),p=[],d=0,m=7,v=new Array(64),C=new Array(64),x=new Array(64),E=new Array(256),L=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],rt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],H=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ht=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ut(P,V){for(var k=0,N=0,Z=new Array,st=1;st<=16;st++){for(var ct=1;ct<=P[st];ct++)Z[V[N]]=[],Z[V[N]][0]=k,Z[V[N]][1]=st,N++,k++;k*=2}return Z}function pt(P){for(var V=P[0],k=P[1]-1;k>=0;)V&1<<k&&(d|=1<<m),k--,--m<0&&(d==255?(ft(255),ft(0)):ft(d),m=7,d=0)}function ft(P){p.push(P)}function R(P){ft(P>>8&255),ft(255&P)}function G(P,V,k,N,Z){for(var st,ct=Z[0],ot=Z[240],wt=function(Ut,Gt){var Dt,bt,Kt,Zt,le,pe,Rt,zt,Xt,ae,te=0;for(Xt=0;Xt<8;++Xt){Dt=Ut[te],bt=Ut[te+1],Kt=Ut[te+2],Zt=Ut[te+3],le=Ut[te+4],pe=Ut[te+5],Rt=Ut[te+6];var Ne=Dt+(zt=Ut[te+7]),Be=Dt-zt,Ar=bt+Rt,Ke=bt-Rt,qe=Kt+pe,nn=Kt-pe,Xe=Zt+le,_n=Zt-le,sr=Ne+Xe,ei=Ne-Xe,_r=Ar+qe,Mr=Ar-qe;Ut[te]=sr+_r,Ut[te+4]=sr-_r;var ke=.707106781*(Mr+ei);Ut[te+2]=ei+ke,Ut[te+6]=ei-ke;var Ze=.382683433*((sr=_n+nn)-(Mr=Ke+Be)),On=.5411961*sr+Ze,or=1.306562965*Mr+Ze,ji=.707106781*(_r=nn+Ke),Ki=Be+ji,Le=Be-ji;Ut[te+5]=Le+On,Ut[te+3]=Le-On,Ut[te+1]=Ki+or,Ut[te+7]=Ki-or,te+=8}for(te=0,Xt=0;Xt<8;++Xt){Dt=Ut[te],bt=Ut[te+8],Kt=Ut[te+16],Zt=Ut[te+24],le=Ut[te+32],pe=Ut[te+40],Rt=Ut[te+48];var Qn=Dt+(zt=Ut[te+56]),Zn=Dt-zt,Wi=bt+Rt,Te=bt-Rt,kr=Kt+pe,Dr=Kt-pe,Qi=Zt+le,hn=Zt-le,sn=Qn+Qi,En=Qn-Qi,Nn=Wi+kr,Mn=Wi-kr;Ut[te]=sn+Nn,Ut[te+32]=sn-Nn;var un=.707106781*(Mn+En);Ut[te+16]=En+un,Ut[te+48]=En-un;var Fn=.382683433*((sn=hn+Dr)-(Mn=Te+Zn)),Er=.5411961*sn+Fn,Os=1.306562965*Mn+Fn,Kr=.707106781*(Nn=Dr+Te),ta=Zn+Kr,Fr=Zn-Kr;Ut[te+40]=Fr+Er,Ut[te+24]=Fr-Er,Ut[te+8]=ta+Os,Ut[te+56]=ta-Os,te++}for(Xt=0;Xt<64;++Xt)ae=Ut[Xt]*Gt[Xt],A[Xt]=ae>0?ae+.5|0:ae-.5|0;return A}(P,V),_t=0;_t<64;++_t)g[U[_t]]=wt[_t];var Nt=g[0]-k;k=g[0],Nt==0?pt(N[0]):(pt(N[u[st=32767+Nt]]),pt(o[st]));for(var vt=63;vt>0&&g[vt]==0;)vt--;if(vt==0)return pt(ct),k;for(var mt,gt=1;gt<=vt;){for(var tt=gt;g[gt]==0&&gt<=vt;)++gt;var It=gt-tt;if(It>=16){mt=It>>4;for(var Pt=1;Pt<=mt;++Pt)pt(ot);It&=15}st=32767+g[gt],pt(Z[(It<<4)+u[st]]),pt(o[st]),gt++}return vt!=63&&pt(ct),k}function it(P){P=Math.min(Math.max(P,1),100),c!=P&&(function(V){for(var k=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],N=0;N<64;N++){var Z=f((k[N]*V+50)/100);Z=Math.min(Math.max(Z,1),255),a[U[N]]=Z}for(var st=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ct=0;ct<64;ct++){var ot=f((st[ct]*V+50)/100);ot=Math.min(Math.max(ot,1),255),n[U[ct]]=ot}for(var wt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_t=0,Nt=0;Nt<8;Nt++)for(var vt=0;vt<8;vt++)l[_t]=1/(a[U[_t]]*wt[Nt]*wt[vt]*8),h[_t]=1/(n[U[_t]]*wt[Nt]*wt[vt]*8),_t++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),c=P)}this.encode=function(P,V){V&&it(V),p=new Array,d=0,m=7,R(65496),R(65504),R(16),ft(74),ft(70),ft(73),ft(70),ft(0),ft(1),ft(1),ft(0),R(1),R(1),ft(0),ft(0),function(){R(65499),R(132),ft(0);for(var bt=0;bt<64;bt++)ft(a[bt]);ft(1);for(var Kt=0;Kt<64;Kt++)ft(n[Kt])}(),function(bt,Kt){R(65472),R(17),ft(8),R(Kt),R(bt),ft(3),ft(1),ft(17),ft(0),ft(2),ft(17),ft(1),ft(3),ft(17),ft(1)}(P.width,P.height),function(){R(65476),R(418),ft(0);for(var bt=0;bt<16;bt++)ft(O[bt+1]);for(var Kt=0;Kt<=11;Kt++)ft(X[Kt]);ft(16);for(var Zt=0;Zt<16;Zt++)ft(rt[Zt+1]);for(var le=0;le<=161;le++)ft(M[le]);ft(1);for(var pe=0;pe<16;pe++)ft(H[pe+1]);for(var Rt=0;Rt<=11;Rt++)ft(J[Rt]);ft(17);for(var zt=0;zt<16;zt++)ft($[zt+1]);for(var Xt=0;Xt<=161;Xt++)ft(ht[Xt])}(),R(65498),R(12),ft(3),ft(1),ft(0),ft(2),ft(17),ft(3),ft(17),ft(0),ft(63),ft(0);var k=0,N=0,Z=0;d=0,m=7,this.encode.displayName="_encode_";for(var st,ct,ot,wt,_t,Nt,vt,mt,gt,tt=P.data,It=P.width,Pt=P.height,Ut=4*It,Gt=0;Gt<Pt;){for(st=0;st<Ut;){for(_t=Ut*Gt+st,vt=-1,mt=0,gt=0;gt<64;gt++)Nt=_t+(mt=gt>>3)*Ut+(vt=4*(7&gt)),Gt+mt>=Pt&&(Nt-=Ut*(Gt+1+mt-Pt)),st+vt>=Ut&&(Nt-=st+vt-Ut+4),ct=tt[Nt++],ot=tt[Nt++],wt=tt[Nt++],v[gt]=(L[ct]+L[ot+256>>0]+L[wt+512>>0]>>16)-128,C[gt]=(L[ct+768>>0]+L[ot+1024>>0]+L[wt+1280>>0]>>16)-128,x[gt]=(L[ct+1280>>0]+L[ot+1536>>0]+L[wt+1792>>0]>>16)-128;k=G(v,l,k,t,i),N=G(C,h,N,e,s),Z=G(x,h,Z,e,s),st+=32}Gt+=8}if(m>=0){var Dt=[];Dt[1]=m+1,Dt[0]=(1<<m+1)-1,pt(Dt)}return R(65497),new Uint8Array(p)},r=r||50,function(){for(var P=String.fromCharCode,V=0;V<256;V++)E[V]=P(V)}(),t=ut(O,X),e=ut(H,J),i=ut(rt,M),s=ut($,ht),function(){for(var P=1,V=2,k=1;k<=15;k++){for(var N=P;N<V;N++)u[32767+N]=k,o[32767+N]=[],o[32767+N][1]=k,o[32767+N][0]=N;for(var Z=-(V-1);Z<=-P;Z++)u[32767+Z]=k,o[32767+Z]=[],o[32767+Z][1]=k,o[32767+Z][0]=V-1+Z;P<<=1,V<<=1}}(),function(){for(var P=0;P<256;P++)L[P]=19595*P,L[P+256>>0]=38470*P,L[P+512>>0]=7471*P+32768,L[P+768>>0]=-11059*P,L[P+1024>>0]=-21709*P,L[P+1280>>0]=32768*P+8421375,L[P+1536>>0]=-27439*P,L[P+1792>>0]=-5329*P}(),it(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Xs(r,t){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ey(r){function t(O){if(!O)throw Error("assert :P")}function e(O,X,rt){for(var M=0;4>M;M++)if(O[X+M]!=rt.charCodeAt(M))return!0;return!1}function i(O,X,rt,M,H){for(var J=0;J<H;J++)O[X+J]=rt[M+J]}function s(O,X,rt,M){for(var H=0;H<M;H++)O[X+H]=rt}function c(O){return new Int32Array(O)}function f(O,X){for(var rt=[],M=0;M<O;M++)rt.push(new X);return rt}function a(O,X){var rt=[];return function M(H,J,$){for(var ht=$[J],ut=0;ut<ht&&(H.push($.length>J+1?[]:new X),!($.length<J+1));ut++)M(H[ut],J+1,$)}(rt,0,O),rt}var n=function(){var O=this;function X(y,_){for(var T=1<<_-1>>>0;y&T;)T>>>=1;return T?(y&T-1)+T:y}function rt(y,_,T,Q,j){t(!(Q%T));do y[_+(Q-=T)]=j;while(0<Q)}function M(y,_,T,Q,j){if(t(2328>=j),512>=j)var z=c(512);else if((z=c(j))==null)return 0;return function(Y,et,nt,lt,Ct,Mt){var kt,xt,Yt=et,Ht=1<<nt,Bt=c(16),Et=c(16);for(t(Ct!=0),t(lt!=null),t(Y!=null),t(0<nt),xt=0;xt<Ct;++xt){if(15<lt[xt])return 0;++Bt[lt[xt]]}if(Bt[0]==Ct)return 0;for(Et[1]=0,kt=1;15>kt;++kt){if(Bt[kt]>1<<kt)return 0;Et[kt+1]=Et[kt]+Bt[kt]}for(xt=0;xt<Ct;++xt)kt=lt[xt],0<lt[xt]&&(Mt[Et[kt]++]=xt);if(Et[15]==1)return(lt=new H).g=0,lt.value=Mt[0],rt(Y,Yt,1,Ht,lt),Ht;var qt,Jt=-1,$t=Ht-1,ye=0,ue=1,Oe=1,ge=1<<nt;for(xt=0,kt=1,Ct=2;kt<=nt;++kt,Ct<<=1){if(ue+=Oe<<=1,0>(Oe-=Bt[kt]))return 0;for(;0<Bt[kt];--Bt[kt])(lt=new H).g=kt,lt.value=Mt[xt++],rt(Y,Yt+ye,Ct,ge,lt),ye=X(ye,kt)}for(kt=nt+1,Ct=2;15>=kt;++kt,Ct<<=1){if(ue+=Oe<<=1,0>(Oe-=Bt[kt]))return 0;for(;0<Bt[kt];--Bt[kt]){if(lt=new H,(ye&$t)!=Jt){for(Yt+=ge,qt=1<<(Jt=kt)-nt;15>Jt&&!(0>=(qt-=Bt[Jt]));)++Jt,qt<<=1;Ht+=ge=1<<(qt=Jt-nt),Y[et+(Jt=ye&$t)].g=qt+nt,Y[et+Jt].value=Yt-et-Jt}lt.g=kt-nt,lt.value=Mt[xt++],rt(Y,Yt+(ye>>nt),Ct,ge,lt),ye=X(ye,kt)}}return ue!=2*Et[15]-1?0:Ht}(y,_,T,Q,j,z)}function H(){this.value=this.g=0}function J(){this.value=this.g=0}function $(){this.G=f(5,H),this.H=c(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=f(Hi,J)}function ht(y,_,T,Q){t(y!=null),t(_!=null),t(2147483648>Q),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=_,y.pa=T,y.Jd=_,y.Yc=T+Q,y.Zc=4<=Q?T+Q-4+1:T,st(y)}function ut(y,_){for(var T=0;0<_--;)T|=ot(y,128)<<_;return T}function pt(y,_){var T=ut(y,_);return ct(y)?-T:T}function ft(y,_,T,Q){var j,z=0;for(t(y!=null),t(_!=null),t(4294967288>Q),y.Sb=Q,y.Ra=0,y.u=0,y.h=0,4<Q&&(Q=4),j=0;j<Q;++j)z+=_[T+j]<<8*j;y.Ra=z,y.bb=Q,y.oa=_,y.pa=T}function R(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<TA-8>>>0,++y.bb,y.u-=8;k(y)&&(y.h=1,y.u=0)}function G(y,_){if(t(0<=_),!y.h&&_<=FA){var T=V(y)&ur[_];return y.u+=_,R(y),T}return y.h=1,y.u=0}function it(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(y){return y.Ra>>>(y.u&TA-1)>>>0}function k(y){return t(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>TA}function N(y,_){y.u=_,y.h=k(y)}function Z(y){y.u>=go&&(t(y.u>=go),R(y))}function st(y){t(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(t(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function ct(y){return ut(y,1)}function ot(y,_){var T=y.Ca;0>y.b&&st(y);var Q=y.b,j=T*_>>>8,z=(y.I>>>Q>j)+0;for(z?(T-=j,y.I-=j+1<<Q>>>0):T=j+1,Q=T,j=0;256<=Q;)j+=8,Q>>=8;return Q=7^j+gn[Q],y.b-=Q,y.Ca=(T<<Q)-1,z}function wt(y,_,T){y[_+0]=T>>24&255,y[_+1]=T>>16&255,y[_+2]=T>>8&255,y[_+3]=T>>0&255}function _t(y,_){return y[_+0]<<0|y[_+1]<<8}function Nt(y,_){return _t(y,_)|y[_+2]<<16}function vt(y,_){return _t(y,_)|_t(y,_+2)<<16}function mt(y,_){var T=1<<_;return t(y!=null),t(0<_),y.X=c(T),y.X==null?0:(y.Mb=32-_,y.Xa=_,1)}function gt(y,_){t(y!=null),t(_!=null),t(y.Xa==_.Xa),i(_.X,0,y.X,0,1<<_.Xa)}function tt(){this.X=[],this.Xa=this.Mb=0}function It(y,_,T,Q){t(T!=null),t(Q!=null);var j=T[0],z=Q[0];return j==0&&(j=(y*z+_/2)/_),z==0&&(z=(_*j+y/2)/y),0>=j||0>=z?0:(T[0]=j,Q[0]=z,1)}function Pt(y,_){return y+(1<<_)-1>>>_}function Ut(y,_){return((4278255360&y)+(4278255360&_)>>>0&4278255360)+((16711935&y)+(16711935&_)>>>0&16711935)>>>0}function Gt(y,_){O[_]=function(T,Q,j,z,Y,et,nt){var lt;for(lt=0;lt<Y;++lt){var Ct=O[y](et[nt+lt-1],j,z+lt);et[nt+lt]=Ut(T[Q+lt],Ct)}}}function Dt(){this.ud=this.hd=this.jd=0}function bt(y,_){return((4278124286&(y^_))>>>1)+(y&_)>>>0}function Kt(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function Zt(y,_){return Kt(y+(y-_+.5>>1))}function le(y,_,T){return Math.abs(_-T)-Math.abs(y-T)}function pe(y,_,T,Q,j,z,Y){for(Q=z[Y-1],T=0;T<j;++T)z[Y+T]=Q=Ut(y[_+T],Q)}function Rt(y,_,T,Q,j){var z;for(z=0;z<T;++z){var Y=y[_+z],et=Y>>8&255,nt=16711935&(nt=(nt=16711935&Y)+((et<<16)+et));Q[j+z]=(4278255360&Y)+nt>>>0}}function zt(y,_){_.jd=y>>0&255,_.hd=y>>8&255,_.ud=y>>16&255}function Xt(y,_,T,Q,j,z){var Y;for(Y=0;Y<Q;++Y){var et=_[T+Y],nt=et>>>8,lt=et,Ct=255&(Ct=(Ct=et>>>16)+((y.jd<<24>>24)*(nt<<24>>24)>>>5));lt=255&(lt=(lt=lt+((y.hd<<24>>24)*(nt<<24>>24)>>>5))+((y.ud<<24>>24)*(Ct<<24>>24)>>>5)),j[z+Y]=(4278255360&et)+(Ct<<16)+lt}}function ae(y,_,T,Q,j){O[_]=function(z,Y,et,nt,lt,Ct,Mt,kt,xt){for(nt=Mt;nt<kt;++nt)for(Mt=0;Mt<xt;++Mt)lt[Ct++]=j(et[Q(z[Y++])])},O[y]=function(z,Y,et,nt,lt,Ct,Mt){var kt=8>>z.b,xt=z.Ea,Yt=z.K[0],Ht=z.w;if(8>kt)for(z=(1<<z.b)-1,Ht=(1<<kt)-1;Y<et;++Y){var Bt,Et=0;for(Bt=0;Bt<xt;++Bt)Bt&z||(Et=Q(nt[lt++])),Ct[Mt++]=j(Yt[Et&Ht]),Et>>=kt}else O["VP8LMapColor"+T](nt,lt,Yt,Ht,Ct,Mt,Y,et,xt)}}function te(y,_,T,Q,j){for(T=_+T;_<T;){var z=y[_++];Q[j++]=z>>16&255,Q[j++]=z>>8&255,Q[j++]=z>>0&255}}function Ne(y,_,T,Q,j){for(T=_+T;_<T;){var z=y[_++];Q[j++]=z>>16&255,Q[j++]=z>>8&255,Q[j++]=z>>0&255,Q[j++]=z>>24&255}}function Be(y,_,T,Q,j){for(T=_+T;_<T;){var z=(Y=y[_++])>>16&240|Y>>12&15,Y=Y>>0&240|Y>>28&15;Q[j++]=z,Q[j++]=Y}}function Ar(y,_,T,Q,j){for(T=_+T;_<T;){var z=(Y=y[_++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;Q[j++]=z,Q[j++]=Y}}function Ke(y,_,T,Q,j){for(T=_+T;_<T;){var z=y[_++];Q[j++]=z>>0&255,Q[j++]=z>>8&255,Q[j++]=z>>16&255}}function qe(y,_,T,Q,j,z){if(z==0)for(T=_+T;_<T;)wt(Q,((z=y[_++])[0]>>24|z[1]>>8&65280|z[2]<<8&16711680|z[3]<<24)>>>0),j+=32;else i(Q,j,y,_,T)}function nn(y,_){O[_][0]=O[y+"0"],O[_][1]=O[y+"1"],O[_][2]=O[y+"2"],O[_][3]=O[y+"3"],O[_][4]=O[y+"4"],O[_][5]=O[y+"5"],O[_][6]=O[y+"6"],O[_][7]=O[y+"7"],O[_][8]=O[y+"8"],O[_][9]=O[y+"9"],O[_][10]=O[y+"10"],O[_][11]=O[y+"11"],O[_][12]=O[y+"12"],O[_][13]=O[y+"13"],O[_][14]=O[y+"0"],O[_][15]=O[y+"0"]}function Xe(y){return y==Zh||y==tu||y==Tc||y==wo}function _n(){this.eb=[],this.size=this.A=this.fb=0}function sr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ei(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new _n,this.f.kb=new sr,this.sd=null}function _r(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Mr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ke(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function Ze(y,_){var T=y.T,Q=_.ba.f.RGBA,j=Q.eb,z=Q.fb+y.ka*Q.A,Y=cs[_.ba.S],et=y.y,nt=y.O,lt=y.f,Ct=y.N,Mt=y.ea,kt=y.W,xt=_.cc,Yt=_.dc,Ht=_.Mc,Bt=_.Nc,Et=y.ka,qt=y.ka+y.T,Jt=y.U,$t=Jt+1>>1;for(Et==0?Y(et,nt,null,null,lt,Ct,Mt,kt,lt,Ct,Mt,kt,j,z,null,null,Jt):(Y(_.ec,_.fc,et,nt,xt,Yt,Ht,Bt,lt,Ct,Mt,kt,j,z-Q.A,j,z,Jt),++T);Et+2<qt;Et+=2)xt=lt,Yt=Ct,Ht=Mt,Bt=kt,Ct+=y.Rc,kt+=y.Rc,z+=2*Q.A,Y(et,(nt+=2*y.fa)-y.fa,et,nt,xt,Yt,Ht,Bt,lt,Ct,Mt,kt,j,z-Q.A,j,z,Jt);return nt+=y.fa,y.j+qt<y.o?(i(_.ec,_.fc,et,nt,Jt),i(_.cc,_.dc,lt,Ct,$t),i(_.Mc,_.Nc,Mt,kt,$t),T--):1&qt||Y(et,nt,null,null,lt,Ct,Mt,kt,lt,Ct,Mt,kt,j,z+Q.A,null,null,Jt),T}function On(y,_,T){var Q=y.F,j=[y.J];if(Q!=null){var z=y.U,Y=_.ba.S,et=Y==Fc||Y==Tc;_=_.ba.f.RGBA;var nt=[0],lt=y.ka;nt[0]=y.T,y.Kb&&(lt==0?--nt[0]:(--lt,j[0]-=y.width),y.j+y.ka+y.T==y.o&&(nt[0]=y.o-y.j-lt));var Ct=_.eb;lt=_.fb+lt*_.A,y=bl(Q,j[0],y.width,z,nt,Ct,lt+(et?0:3),_.A),t(T==nt),y&&Xe(Y)&&ha(Ct,lt,et,z,nt,_.A)}return 0}function or(y){var _=y.ma,T=_.ba.S,Q=11>T,j=T==_c||T==Ec||T==Fc||T==yo||T==12||Xe(T);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!ci(_.Oa,y,j?11:12))return 0;if(j&&Xe(T)&&se(),y.da)alert("todo:use_scaling");else{if(Q){if(_.Ib=ke,y.Kb){if(T=y.U+1>>1,_.memory=c(y.U+2*T),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+y.U,_.Mc=_.cc,_.Nc=_.dc+T,_.Ib=Ze,se()}}else alert("todo:EmitYUV");j&&(_.Jb=On,Q&&Ot())}if(Q&&!od){for(y=0;256>y;++y)Wm[y]=89858*(y-128)+Pc>>Ic,qm[y]=-22014*(y-128)+Pc,zm[y]=-45773*(y-128),Xm[y]=113618*(y-128)+Pc>>Ic;for(y=Ra;y<iu;++y)_=76283*(y-16)+Pc>>Ic,$m[y-Ra]=Di(_,255),Ym[y-Ra]=Di(_+8>>4,15);od=1}return 1}function ji(y){var _=y.ma,T=y.U,Q=y.T;return t(!(1&y.ka)),0>=T||0>=Q?0:(T=_.Ib(y,_),_.Jb!=null&&_.Jb(y,_,T),_.Dc+=T,1)}function Ki(y){y.ma.memory=null}function Le(y,_,T,Q){return G(y,8)!=47?0:(_[0]=G(y,14)+1,T[0]=G(y,14)+1,Q[0]=G(y,1),G(y,3)!=0?0:!y.h)}function Qn(y,_){if(4>y)return y+1;var T=y-2>>1;return(2+(1&y)<<T)+G(_,T)+1}function Zn(y,_){return 120<_?_-120:1<=(T=((T=Um[_-1])>>4)*y+(8-(15&T)))?T:1;var T}function Wi(y,_,T){var Q=V(T),j=y[_+=255&Q].g-8;return 0<j&&(N(T,T.u+8),Q=V(T),_+=y[_].value,_+=Q&(1<<j)-1),N(T,T.u+y[_].g),y[_].value}function Te(y,_,T){return T.g+=y.g,T.value+=y.value<<_>>>0,t(8>=T.g),y.g}function kr(y,_,T){var Q=y.xc;return t((_=Q==0?0:y.vc[y.md*(T>>Q)+(_>>Q)])<y.Wb),y.Ya[_]}function Dr(y,_,T,Q){var j=y.ab,z=y.c*_,Y=y.C;_=Y+_;var et=T,nt=Q;for(Q=y.Ta,T=y.Ua;0<j--;){var lt=y.gc[j],Ct=Y,Mt=_,kt=et,xt=nt,Yt=(nt=Q,et=T,lt.Ea);switch(t(Ct<Mt),t(Mt<=lt.nc),lt.hc){case 2:vl(kt,xt,(Mt-Ct)*Yt,nt,et);break;case 0:var Ht=Ct,Bt=Mt,Et=nt,qt=et,Jt=(ge=lt).Ea;Ht==0&&(po(kt,xt,null,null,1,Et,qt),pe(kt,xt+1,0,0,Jt-1,Et,qt+1),xt+=Jt,qt+=Jt,++Ht);for(var $t=1<<ge.b,ye=$t-1,ue=Pt(Jt,ge.b),Oe=ge.K,ge=ge.w+(Ht>>ge.b)*ue;Ht<Bt;){var fr=Oe,gr=ge,ie=1;for(mo(kt,xt,Et,qt-Jt,1,Et,qt);ie<Jt;){var ir=(ie&~ye)+$t;ir>Jt&&(ir=Jt),(0,pn[fr[gr++]>>8&15])(kt,xt+ +ie,Et,qt+ie-Jt,ir-ie,Et,qt+ie),ie=ir}xt+=Jt,qt+=Jt,++Ht&ye||(ge+=ue)}Mt!=lt.nc&&i(nt,et-Yt,nt,et+(Mt-Ct-1)*Yt,Yt);break;case 1:for(Yt=kt,Bt=xt,Jt=(kt=lt.Ea)-(qt=kt&~(Et=(xt=1<<lt.b)-1)),Ht=Pt(kt,lt.b),$t=lt.K,lt=lt.w+(Ct>>lt.b)*Ht;Ct<Mt;){for(ye=$t,ue=lt,Oe=new Dt,ge=Bt+qt,fr=Bt+kt;Bt<ge;)zt(ye[ue++],Oe),jn(Oe,Yt,Bt,xt,nt,et),Bt+=xt,et+=xt;Bt<fr&&(zt(ye[ue++],Oe),jn(Oe,Yt,Bt,Jt,nt,et),Bt+=Jt,et+=Jt),++Ct&Et||(lt+=Ht)}break;case 3:if(kt==nt&&xt==et&&0<lt.b){for(Bt=nt,kt=Yt=et+(Mt-Ct)*Yt-(qt=(Mt-Ct)*Pt(lt.Ea,lt.b)),xt=nt,Et=et,Ht=[],qt=(Jt=qt)-1;0<=qt;--qt)Ht[qt]=xt[Et+qt];for(qt=Jt-1;0<=qt;--qt)Bt[kt+qt]=Ht[qt];ii(lt,Ct,Mt,nt,Yt,nt,et)}else ii(lt,Ct,Mt,kt,xt,nt,et)}et=Q,nt=T}nt!=T&&i(Q,T,et,nt,z)}function Qi(y,_){var T=y.V,Q=y.Ba+y.c*y.C,j=_-y.C;if(t(_<=y.l.o),t(16>=j),0<j){var z=y.l,Y=y.Ta,et=y.Ua,nt=z.width;if(Dr(y,j,T,Q),j=et=[et],t((T=y.C)<(Q=_)),t(z.v<z.va),Q>z.o&&(Q=z.o),T<z.j){var lt=z.j-T;T=z.j,j[0]+=lt*nt}if(T>=Q?T=0:(j[0]+=4*z.v,z.ka=T-z.j,z.U=z.va-z.v,z.T=Q-T,T=1),T){if(et=et[0],11>(T=y.ca).S){var Ct=T.f.RGBA,Mt=(Q=T.S,j=z.U,z=z.T,lt=Ct.eb,Ct.A),kt=z;for(Ct=Ct.fb+y.Ma*Ct.A;0<kt--;){var xt=Y,Yt=et,Ht=j,Bt=lt,Et=Ct;switch(Q){case xc:as(xt,Yt,Ht,Bt,Et);break;case _c:ks(xt,Yt,Ht,Bt,Et);break;case Zh:ks(xt,Yt,Ht,Bt,Et),ha(Bt,Et,0,Ht,1,0);break;case PA:Ds(xt,Yt,Ht,Bt,Et);break;case Ec:qe(xt,Yt,Ht,Bt,Et,1);break;case tu:qe(xt,Yt,Ht,Bt,Et,1),ha(Bt,Et,0,Ht,1,0);break;case Fc:qe(xt,Yt,Ht,Bt,Et,0);break;case Tc:qe(xt,Yt,Ht,Bt,Et,0),ha(Bt,Et,1,Ht,1,0);break;case yo:bs(xt,Yt,Ht,Bt,Et);break;case wo:bs(xt,Yt,Ht,Bt,Et),IA(Bt,Et,Ht,1,0);break;case td:oa(xt,Yt,Ht,Bt,Et);break;default:t(0)}et+=nt,Ct+=Mt}y.Ma+=z}else alert("todo:EmitRescaledRowsYUVA");t(y.Ma<=T.height)}}y.C=_,t(y.C<=y.i)}function hn(y){var _;if(0<y.ua)return 0;for(_=0;_<y.Wb;++_){var T=y.Ya[_].G,Q=y.Ya[_].H;if(0<T[1][Q[1]+0].g||0<T[2][Q[2]+0].g||0<T[3][Q[3]+0].g)return 0}return 1}function sn(y,_,T,Q,j,z){if(y.Z!=0){var Y=y.qd,et=y.rd;for(t(ua[y.Z]!=null);_<T;++_)ua[y.Z](Y,et,Q,j,Q,j,z),Y=Q,et=j,j+=z;y.qd=Y,y.rd=et}}function En(y,_){var T=y.l.ma,Q=T.Z==0||T.Z==1?y.l.j:y.C;if(Q=y.C<Q?Q:y.C,t(_<=y.l.o),_>Q){var j=y.l.width,z=T.ca,Y=T.tb+j*Q,et=y.V,nt=y.Ba+y.c*Q,lt=y.gc;t(y.ab==1),t(lt[0].hc==3),Ms(lt[0],Q,_,et,nt,z,Y),sn(T,Q,_,z,Y,j)}y.C=y.Ma=_}function Nn(y,_,T,Q,j,z,Y){var et=y.$/Q,nt=y.$%Q,lt=y.m,Ct=y.s,Mt=T+y.$,kt=Mt;j=T+Q*j;var xt=T+Q*z,Yt=280+Ct.ua,Ht=y.Pb?et:16777216,Bt=0<Ct.ua?Ct.Wa:null,Et=Ct.wc,qt=Mt<xt?kr(Ct,nt,et):null;t(y.C<z),t(xt<=j);var Jt=!1;t:for(;;){for(;Jt||Mt<xt;){var $t=0;if(et>=Ht){var ye=Mt-T;t((Ht=y).Pb),Ht.wd=Ht.m,Ht.xd=ye,0<Ht.s.ua&&gt(Ht.s.Wa,Ht.s.vb),Ht=et+Qm}if(nt&Et||(qt=kr(Ct,nt,et)),t(qt!=null),qt.Qb&&(_[Mt]=qt.qb,Jt=!0),!Jt)if(Z(lt),qt.jc){$t=lt,ye=_;var ue=Mt,Oe=qt.pd[V($t)&Hi-1];t(qt.jc),256>Oe.g?(N($t,$t.u+Oe.g),ye[ue]=Oe.value,$t=0):(N($t,$t.u+Oe.g-256),t(256<=Oe.value),$t=Oe.value),$t==0&&(Jt=!0)}else $t=Wi(qt.G[0],qt.H[0],lt);if(lt.h)break;if(Jt||256>$t){if(!Jt)if(qt.nd)_[Mt]=(qt.qb|$t<<8)>>>0;else{if(Z(lt),Jt=Wi(qt.G[1],qt.H[1],lt),Z(lt),ye=Wi(qt.G[2],qt.H[2],lt),ue=Wi(qt.G[3],qt.H[3],lt),lt.h)break;_[Mt]=(ue<<24|Jt<<16|$t<<8|ye)>>>0}if(Jt=!1,++Mt,++nt>=Q&&(nt=0,++et,Y!=null&&et<=z&&!(et%16)&&Y(y,et),Bt!=null))for(;kt<Mt;)$t=_[kt++],Bt.X[(506832829*$t&4294967295)>>>Bt.Mb]=$t}else if(280>$t){if($t=Qn($t-256,lt),ye=Wi(qt.G[4],qt.H[4],lt),Z(lt),ye=Zn(Q,ye=Qn(ye,lt)),lt.h)break;if(Mt-T<ye||j-Mt<$t)break t;for(ue=0;ue<$t;++ue)_[Mt+ue]=_[Mt+ue-ye];for(Mt+=$t,nt+=$t;nt>=Q;)nt-=Q,++et,Y!=null&&et<=z&&!(et%16)&&Y(y,et);if(t(Mt<=j),nt&Et&&(qt=kr(Ct,nt,et)),Bt!=null)for(;kt<Mt;)$t=_[kt++],Bt.X[(506832829*$t&4294967295)>>>Bt.Mb]=$t}else{if(!($t<Yt))break t;for(Jt=$t-280,t(Bt!=null);kt<Mt;)$t=_[kt++],Bt.X[(506832829*$t&4294967295)>>>Bt.Mb]=$t;$t=Mt,t(!(Jt>>>(ye=Bt).Xa)),_[$t]=ye.X[Jt],Jt=!0}Jt||t(lt.h==k(lt))}if(y.Pb&&lt.h&&Mt<j)t(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&gt(y.s.vb,y.s.Wa);else{if(lt.h)break t;Y!=null&&Y(y,et>z?z:et),y.a=0,y.$=Mt-T}return 1}return y.a=3,0}function Mn(y){t(y!=null),y.vc=null,y.yc=null,y.Ya=null;var _=y.Wa;_!=null&&(_.X=null),y.vb=null,t(y!=null)}function un(){var y=new Jh;return y==null?null:(y.a=0,y.xb=id,nn("Predictor","VP8LPredictors"),nn("Predictor","VP8LPredictors_C"),nn("PredictorAdd","VP8LPredictorsAdd"),nn("PredictorAdd","VP8LPredictorsAdd_C"),vl=Rt,jn=Xt,as=te,ks=Ne,bs=Be,oa=Ar,Ds=Ke,O.VP8LMapColor32b=ss,O.VP8LMapColor8b=pi,y)}function Fn(y,_,T,Q,j){var z=1,Y=[y],et=[_],nt=Q.m,lt=Q.s,Ct=null,Mt=0;t:for(;;){if(T)for(;z&&G(nt,1);){var kt=Y,xt=et,Yt=Q,Ht=1,Bt=Yt.m,Et=Yt.gc[Yt.ab],qt=G(Bt,2);if(Yt.Oc&1<<qt)z=0;else{switch(Yt.Oc|=1<<qt,Et.hc=qt,Et.Ea=kt[0],Et.nc=xt[0],Et.K=[null],++Yt.ab,t(4>=Yt.ab),qt){case 0:case 1:Et.b=G(Bt,3)+2,Ht=Fn(Pt(Et.Ea,Et.b),Pt(Et.nc,Et.b),0,Yt,Et.K),Et.K=Et.K[0];break;case 3:var Jt,$t=G(Bt,8)+1,ye=16<$t?0:4<$t?1:2<$t?2:3;if(kt[0]=Pt(Et.Ea,ye),Et.b=ye,Jt=Ht=Fn($t,1,0,Yt,Et.K)){var ue,Oe=$t,ge=Et,fr=1<<(8>>ge.b),gr=c(fr);if(gr==null)Jt=0;else{var ie=ge.K[0],ir=ge.w;for(gr[0]=ge.K[0][0],ue=1;ue<1*Oe;++ue)gr[ue]=Ut(ie[ir+ue],gr[ue-1]);for(;ue<4*fr;++ue)gr[ue]=0;ge.K[0]=null,ge.K[0]=gr,Jt=1}}Ht=Jt;break;case 2:break;default:t(0)}z=Ht}}if(Y=Y[0],et=et[0],z&&G(nt,1)&&!(z=1<=(Mt=G(nt,4))&&11>=Mt)){Q.a=3;break t}var Qr;if(Qr=z)e:{var pr,Qe,vi,vn=Q,Yr=Y,qi=et,Br=Mt,Wn=T,Xn=vn.m,Jr=vn.s,xi=[null],$i=1,hs=0,Ss=Om[Br];r:for(;;){if(Wn&&G(Xn,1)){var Gi=G(Xn,3)+2,xs=Pt(Yr,Gi),UA=Pt(qi,Gi),Co=xs*UA;if(!Fn(xs,UA,0,vn,xi))break r;for(xi=xi[0],Jr.xc=Gi,pr=0;pr<Co;++pr){var Ha=xi[pr]>>8&65535;xi[pr]=Ha,Ha>=$i&&($i=Ha+1)}}if(Xn.h)break r;for(Qe=0;5>Qe;++Qe){var si=ed[Qe];!Qe&&0<Br&&(si+=1<<Br),hs<si&&(hs=si)}var nu=f($i*Ss,H),ud=$i,fd=f(ud,$);if(fd==null)var Oc=null;else t(65536>=ud),Oc=fd;var Bo=c(hs);if(Oc==null||Bo==null||nu==null){vn.a=1;break r}var Qc=nu;for(pr=vi=0;pr<$i;++pr){var _s=Oc[pr],So=_s.G,OA=_s.H,dd=0,QA=1,gd=0;for(Qe=0;5>Qe;++Qe){si=ed[Qe],So[Qe]=Qc,OA[Qe]=vi,!Qe&&0<Br&&(si+=1<<Br);n:{var xo,xl=si,_l=vn,_o=Bo,Zm=Qc,pd=vi,El=0,Hs=_l.m,md=G(Hs,1);if(s(_o,0,0,xl),md){var vd=G(Hs,1)+1,yd=G(Hs,1),su=G(Hs,yd==0?1:8);_o[su]=1,vd==2&&(_o[su=G(Hs,8)]=1);var Eo=1}else{var wd=c(19),bd=G(Hs,4)+4;if(19<bd){_l.a=3;var Nc=0;break n}for(xo=0;xo<bd;++xo)wd[Lc[xo]]=G(Hs,3);var Ln=void 0,NA=void 0,Cd=_l,tv=wd,Mc=xl,Bd=_o,au=0,Ga=Cd.m,Sd=8,xd=f(128,H);i:for(;M(xd,0,7,tv,19);){if(G(Ga,1)){var ev=2+2*G(Ga,3);if((Ln=2+G(Ga,ev))>Mc)break i}else Ln=Mc;for(NA=0;NA<Mc&&Ln--;){Z(Ga);var Au=xd[0+(127&V(Ga))];N(Ga,Ga.u+Au.g);var Fo=Au.value;if(16>Fo)Bd[NA++]=Fo,Fo!=0&&(Sd=Fo);else{var ou=Fo==16,lu=Fo-16,Yi=Im[lu],To=G(Ga,Lm[lu])+Yi;if(NA+To>Mc)break i;for(var rv=ou?Sd:0;0<To--;)Bd[NA++]=rv}}au=1;break i}au||(Cd.a=3),Eo=au}(Eo=Eo&&!Hs.h)&&(El=M(Zm,pd,8,_o,xl)),Eo&&El!=0?Nc=El:(_l.a=3,Nc=0)}if(Nc==0)break r;if(QA&&Pm[Qe]==1&&(QA=Qc[vi].g==0),dd+=Qc[vi].g,vi+=Nc,3>=Qe){var Fl,kc=Bo[0];for(Fl=1;Fl<si;++Fl)Bo[Fl]>kc&&(kc=Bo[Fl]);gd+=kc}}if(_s.nd=QA,_s.Qb=0,QA&&(_s.qb=(So[3][OA[3]+0].value<<24|So[1][OA[1]+0].value<<16|So[2][OA[2]+0].value)>>>0,dd==0&&256>So[0][OA[0]+0].value&&(_s.Qb=1,_s.qb+=So[0][OA[0]+0].value<<8)),_s.jc=!_s.Qb&&6>gd,_s.jc){var Lo,fa=_s;for(Lo=0;Lo<Hi;++Lo){var Va=Lo,ja=fa.pd[Va],Dc=fa.G[0][fa.H[0]+Va];256<=Dc.value?(ja.g=Dc.g+256,ja.value=Dc.value):(ja.g=0,ja.value=0,Va>>=Te(Dc,8,ja),Va>>=Te(fa.G[1][fa.H[1]+Va],16,ja),Va>>=Te(fa.G[2][fa.H[2]+Va],0,ja),Te(fa.G[3][fa.H[3]+Va],24,ja))}}}Jr.vc=xi,Jr.Wb=$i,Jr.Ya=Oc,Jr.yc=nu,Qr=1;break e}Qr=0}if(!(z=Qr)){Q.a=3;break t}if(0<Mt){if(lt.ua=1<<Mt,!mt(lt.Wa,Mt)){Q.a=1,z=0;break t}}else lt.ua=0;var cu=Q,_d=Y,iv=et,hu=cu.s,Rc=hu.xc;if(cu.c=_d,cu.i=iv,hu.md=Pt(_d,Rc),hu.wc=Rc==0?-1:(1<<Rc)-1,T){Q.xb=Gm;break t}if((Ct=c(Y*et))==null){Q.a=1,z=0;break t}z=(z=Nn(Q,Ct,0,Y,et,et,null))&&!nt.h;break t}return z?(j!=null?j[0]=Ct:(t(Ct==null),t(T)),Q.$=0,T||Mn(lt)):Mn(lt),z}function Er(y,_){var T=y.c*y.i,Q=T+_+16*_;return t(y.c<=_),y.V=c(Q),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+T+_,1)}function Os(y,_){var T=y.C,Q=_-T,j=y.V,z=y.Ba+y.c*T;for(t(_<=y.l.o);0<Q;){var Y=16<Q?16:Q,et=y.l.ma,nt=y.l.width,lt=nt*Y,Ct=et.ca,Mt=et.tb+nt*T,kt=y.Ta,xt=y.Ua;Dr(y,Y,j,z),$f(kt,xt,Ct,Mt,lt),sn(et,T,T+Y,Ct,Mt,nt),Q-=Y,j+=Y*y.c,T+=Y}t(T==_),y.C=y.Ma=_}function Kr(){this.ub=this.yd=this.td=this.Rb=0}function ta(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Fr(){this.Fb=this.Bb=this.Cb=0,this.Zb=c(4),this.Lb=c(4)}function Qs(){this.Yb=function(){var y=[];return function _(T,Q,j){for(var z=j[Q],Y=0;Y<z&&(T.push(j.length>Q+1?[]:0),!(j.length<Q+1));Y++)_(T[Y],Q+1,j)}(y,0,[3,11]),y}()}function lA(){this.jb=c(3),this.Wc=a([4,8],Qs),this.Xc=a([4,17],Qs)}function oo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new c(4),this.od=new c(4)}function Tn(){this.ld=this.La=this.dd=this.tc=0}function Fa(){this.Na=this.la=0}function ea(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function kn(){this.ad=c(384),this.Za=0,this.Ob=c(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function fn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Tn),this.Y=0,this.ya=Array(new kn),this.aa=0,this.l=new an}function Ta(){this.y=c(16),this.f=c(8),this.ea=c(8)}function cA(){this.cb=this.a=0,this.sc="",this.m=new it,this.Od=new Kr,this.Kc=new ta,this.ed=new oo,this.Qa=new Fr,this.Ic=this.$c=this.Aa=0,this.D=new fn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=f(8,it),this.ia=0,this.pb=f(4,ea),this.Pa=new lA,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ta),this.Hd=0,this.rb=Array(new Fa),this.sb=0,this.wa=Array(new Tn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new kn),this.L=this.aa=0,this.gd=a([4,2],Tn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function an(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ts(){var y=new cA;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,Bl||(Bl=ra)),y}function Rr(y,_,T){return y.a==0&&(y.a=_,y.sc=T,y.cb=0),0}function hA(y,_,T){return 3<=T&&y[_+0]==157&&y[_+1]==1&&y[_+2]==42}function uA(y,_){if(y==null)return 0;if(y.a=0,y.sc="OK",_==null)return Rr(y,2,"null VP8Io passed to VP8GetHeaders()");var T=_.data,Q=_.w,j=_.ha;if(4>j)return Rr(y,7,"Truncated header.");var z=T[Q+0]|T[Q+1]<<8|T[Q+2]<<16,Y=y.Od;if(Y.Rb=!(1&z),Y.td=z>>1&7,Y.yd=z>>4&1,Y.ub=z>>5,3<Y.td)return Rr(y,3,"Incorrect keyframe parameters.");if(!Y.yd)return Rr(y,4,"Frame not displayable.");Q+=3,j-=3;var et=y.Kc;if(Y.Rb){if(7>j)return Rr(y,7,"cannot parse picture header");if(!hA(T,Q,j))return Rr(y,3,"Bad code word");et.c=16383&(T[Q+4]<<8|T[Q+3]),et.Td=T[Q+4]>>6,et.i=16383&(T[Q+6]<<8|T[Q+5]),et.Ud=T[Q+6]>>6,Q+=7,j-=7,y.za=et.c+15>>4,y.Ub=et.i+15>>4,_.width=et.c,_.height=et.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,s((z=y.Pa).jb,0,255,z.jb.length),t((z=y.Qa)!=null),z.Cb=0,z.Bb=0,z.Fb=1,s(z.Zb,0,0,z.Zb.length),s(z.Lb,0,0,z.Lb)}if(Y.ub>j)return Rr(y,7,"bad partition length");ht(z=y.m,T,Q,Y.ub),Q+=Y.ub,j-=Y.ub,Y.Rb&&(et.Ld=ct(z),et.Kd=ct(z)),et=y.Qa;var nt,lt=y.Pa;if(t(z!=null),t(et!=null),et.Cb=ct(z),et.Cb){if(et.Bb=ct(z),ct(z)){for(et.Fb=ct(z),nt=0;4>nt;++nt)et.Zb[nt]=ct(z)?pt(z,7):0;for(nt=0;4>nt;++nt)et.Lb[nt]=ct(z)?pt(z,6):0}if(et.Bb)for(nt=0;3>nt;++nt)lt.jb[nt]=ct(z)?ut(z,8):255}else et.Bb=0;if(z.Ka)return Rr(y,3,"cannot parse segment header");if((et=y.ed).zd=ct(z),et.Tb=ut(z,6),et.wb=ut(z,3),et.Pc=ct(z),et.Pc&&ct(z)){for(lt=0;4>lt;++lt)ct(z)&&(et.vd[lt]=pt(z,6));for(lt=0;4>lt;++lt)ct(z)&&(et.od[lt]=pt(z,6))}if(y.L=et.Tb==0?0:et.zd?1:2,z.Ka)return Rr(y,3,"cannot parse filter header");var Ct=j;if(j=nt=Q,Q=nt+Ct,et=Ct,y.Xb=(1<<ut(y.m,2))-1,Ct<3*(lt=y.Xb))T=7;else{for(nt+=3*lt,et-=3*lt,Ct=0;Ct<lt;++Ct){var Mt=T[j+0]|T[j+1]<<8|T[j+2]<<16;Mt>et&&(Mt=et),ht(y.Jc[+Ct],T,nt,Mt),nt+=Mt,et-=Mt,j+=3}ht(y.Jc[+lt],T,nt,et),T=nt<Q?0:5}if(T!=0)return Rr(y,T,"cannot parse partitions");for(T=ut(nt=y.m,7),j=ct(nt)?pt(nt,4):0,Q=ct(nt)?pt(nt,4):0,et=ct(nt)?pt(nt,4):0,lt=ct(nt)?pt(nt,4):0,nt=ct(nt)?pt(nt,4):0,Ct=y.Qa,Mt=0;4>Mt;++Mt){if(Ct.Cb){var kt=Ct.Zb[Mt];Ct.Fb||(kt+=T)}else{if(0<Mt){y.pb[Mt]=y.pb[0];continue}kt=T}var xt=y.pb[Mt];xt.Sc[0]=eu[Di(kt+j,127)],xt.Sc[1]=bo[Di(kt+0,127)],xt.Eb[0]=2*eu[Di(kt+Q,127)],xt.Eb[1]=101581*bo[Di(kt+et,127)]>>16,8>xt.Eb[1]&&(xt.Eb[1]=8),xt.Qc[0]=eu[Di(kt+lt,117)],xt.Qc[1]=bo[Di(kt+nt,127)],xt.lc=kt+nt}if(!Y.Rb)return Rr(y,4,"Not a key frame.");for(ct(z),Y=y.Pa,T=0;4>T;++T){for(j=0;8>j;++j)for(Q=0;3>Q;++Q)for(et=0;11>et;++et)lt=ot(z,Rm[T][j][Q][et])?ut(z,8):km[T][j][Q][et],Y.Wc[T][j].Yb[Q][et]=lt;for(j=0;17>j;++j)Y.Xc[T][j]=Y.Wc[T][Hm[j]]}return y.kc=ct(z),y.kc&&(y.Bd=ut(z,8)),y.cb=1}function ra(y,_,T,Q,j,z,Y){var et=_[j].Yb[T];for(T=0;16>j;++j){if(!ot(y,et[T+0]))return j;for(;!ot(y,et[T+1]);)if(et=_[++j].Yb[0],T=0,j==16)return 16;var nt=_[j+1].Yb;if(ot(y,et[T+2])){var lt=y,Ct=0;if(ot(lt,(kt=et)[(Mt=T)+3]))if(ot(lt,kt[Mt+6])){for(et=0,Mt=2*(Ct=ot(lt,kt[Mt+8]))+(kt=ot(lt,kt[Mt+9+Ct])),Ct=0,kt=Nm[Mt];kt[et];++et)Ct+=Ct+ot(lt,kt[et]);Ct+=3+(8<<Mt)}else ot(lt,kt[Mt+7])?(Ct=7+2*ot(lt,165),Ct+=ot(lt,145)):Ct=5+ot(lt,159);else Ct=ot(lt,kt[Mt+4])?3+ot(lt,kt[Mt+5]):2;et=nt[2]}else Ct=1,et=nt[1];nt=Y+Mm[j],0>(lt=y).b&&st(lt);var Mt,kt=lt.b,xt=(Mt=lt.Ca>>1)-(lt.I>>kt)>>31;--lt.b,lt.Ca+=xt,lt.Ca|=1,lt.I-=(Mt+1&xt)<<kt,z[nt]=((Ct^xt)-xt)*Q[(0<j)+0]}return 16}function es(y){var _=y.rb[y.sb-1];_.la=0,_.Na=0,s(y.zc,0,0,y.zc.length),y.ja=0}function Dn(y,_){if(y==null)return 0;if(_==null)return Rr(y,2,"NULL VP8Io parameter in VP8Decode().");if(!y.cb&&!uA(y,_))return 0;if(t(y.cb),_.ac==null||_.ac(_)){_.ob&&(y.L=0);var T=Uc[y.L];if(y.L==2?(y.yb=0,y.zb=0):(y.yb=_.v-T>>4,y.zb=_.j-T>>4,0>y.yb&&(y.yb=0),0>y.zb&&(y.zb=0)),y.Va=_.o+15+T>>4,y.Hb=_.va+15+T>>4,y.Hb>y.za&&(y.Hb=y.za),y.Va>y.Ub&&(y.Va=y.Ub),0<y.L){var Q=y.ed;for(T=0;4>T;++T){var j;if(y.Qa.Cb){var z=y.Qa.Lb[T];y.Qa.Fb||(z+=Q.Tb)}else z=Q.Tb;for(j=0;1>=j;++j){var Y=y.gd[T][j],et=z;if(Q.Pc&&(et+=Q.vd[0],j&&(et+=Q.od[0])),0<(et=0>et?0:63<et?63:et)){var nt=et;0<Q.wb&&(nt=4<Q.wb?nt>>2:nt>>1)>9-Q.wb&&(nt=9-Q.wb),1>nt&&(nt=1),Y.dd=nt,Y.tc=2*et+nt,Y.ld=40<=et?2:15<=et?1:0}else Y.tc=0;Y.La=j}}}T=0}else Rr(y,6,"Frame setup failed"),T=y.a;if(T=T==0){if(T){y.$c=0,0<y.Aa||(y.Ic=Jm);t:{T=y.Ic,Q=4*(nt=y.za);var lt=32*nt,Ct=nt+1,Mt=0<y.L?nt*(0<y.Aa?2:1):0,kt=(y.Aa==2?2:1)*nt;if((Y=Q+832+(j=3*(16*T+Uc[y.L])/2*lt)+(z=y.Fa!=null&&0<y.Fa.length?y.Kc.c*y.Kc.i:0))!=Y)T=0;else{if(Y>y.Vb){if(y.Vb=0,y.Ec=c(Y),y.Fc=0,y.Ec==null){T=Rr(y,1,"no memory during frame initialization.");break t}y.Vb=Y}Y=y.Ec,et=y.Fc,y.Ac=Y,y.Bc=et,et+=Q,y.Gd=f(lt,Ta),y.Hd=0,y.rb=f(Ct+1,Fa),y.sb=1,y.wa=Mt?f(Mt,Tn):null,y.Y=0,y.D.Nb=0,y.D.wa=y.wa,y.D.Y=y.Y,0<y.Aa&&(y.D.Y+=nt),t(!0),y.oc=Y,y.pc=et,et+=832,y.ya=f(kt,kn),y.aa=0,y.D.ya=y.ya,y.D.aa=y.aa,y.Aa==2&&(y.D.aa+=nt),y.R=16*nt,y.B=8*nt,nt=(lt=Uc[y.L])*y.R,lt=lt/2*y.B,y.sa=Y,y.ta=et+nt,y.qa=y.sa,y.ra=y.ta+16*T*y.R+lt,y.Ha=y.qa,y.Ia=y.ra+8*T*y.B+lt,y.$c=0,et+=j,y.mb=z?Y:null,y.nb=z?et:null,t(et+z<=y.Fc+y.Vb),es(y),s(y.Ac,y.Bc,0,Q),T=1}}if(T){if(_.ka=0,_.y=y.sa,_.O=y.ta,_.f=y.qa,_.N=y.ra,_.ea=y.Ha,_.Vd=y.Ia,_.fa=y.R,_.Rc=y.B,_.F=null,_.J=0,!Zf){for(T=-255;255>=T;++T)Cl[255+T]=0>T?-T:T;for(T=-1020;1020>=T;++T)Yf[1020+T]=-128>T?-128:127<T?127:T;for(T=-112;112>=T;++T)Jf[112+T]=-16>T?-16:15<T?15:T;for(T=-255;510>=T;++T)Cc[255+T]=0>T?0:255<T?255:T;Zf=1}Si=Rn,vo=dA,Cs=gA,As=Ia,la=ia,yl=fA,LA=Gn,ln=Lr,Ma=BA,ka=SA,wl=CA,mn=An,ca=fl,Ur=yc,Or=re,ni=he,mi=Ye,Rs=ki,Bs[0]=rs,Bs[1]=pA,Bs[2]=lo,Bs[3]=co,Bs[4]=sa,Bs[5]=Oa,Bs[6]=Ua,Bs[7]=qr,Bs[8]=vA,Bs[9]=Qa,Da[0]=Cr,Da[1]=hl,Da[2]=zi,Da[3]=na,Da[4]=ri,Da[5]=ul,Da[6]=mA,ls[0]=Mi,ls[1]=Pa,ls[2]=yA,ls[3]=wA,ls[4]=ws,ls[5]=bA,ls[6]=aa,T=1}else T=0}T&&(T=function(xt,Yt){for(xt.M=0;xt.M<xt.Va;++xt.M){var Ht,Bt=xt.Jc[xt.M&xt.Xb],Et=xt.m,qt=xt;for(Ht=0;Ht<qt.za;++Ht){var Jt=Et,$t=qt,ye=$t.Ac,ue=$t.Bc+4*Ht,Oe=$t.zc,ge=$t.ya[$t.aa+Ht];if($t.Qa.Bb?ge.$b=ot(Jt,$t.Pa.jb[0])?2+ot(Jt,$t.Pa.jb[2]):ot(Jt,$t.Pa.jb[1]):ge.$b=0,$t.kc&&(ge.Ad=ot(Jt,$t.Bd)),ge.Za=!ot(Jt,145)+0,ge.Za){var fr=ge.Ob,gr=0;for($t=0;4>$t;++$t){var ie,ir=Oe[0+$t];for(ie=0;4>ie;++ie){ir=Dm[ye[ue+ie]][ir];for(var Qr=rd[ot(Jt,ir[0])];0<Qr;)Qr=rd[2*Qr+ot(Jt,ir[Qr])];ir=-Qr,ye[ue+ie]=ir}i(fr,gr,ye,ue,4),gr+=4,Oe[0+$t]=ir}}else ir=ot(Jt,156)?ot(Jt,128)?1:3:ot(Jt,163)?2:0,ge.Ob[0]=ir,s(ye,ue,ir,4),s(Oe,0,ir,4);ge.Dd=ot(Jt,142)?ot(Jt,114)?ot(Jt,183)?1:3:2:0}if(qt.m.Ka)return Rr(xt,7,"Premature end-of-partition0 encountered.");for(;xt.ja<xt.za;++xt.ja){if(qt=Bt,Jt=(Et=xt).rb[Et.sb-1],ye=Et.rb[Et.sb+Et.ja],Ht=Et.ya[Et.aa+Et.ja],ue=Et.kc?Ht.Ad:0)Jt.la=ye.la=0,Ht.Za||(Jt.Na=ye.Na=0),Ht.Hc=0,Ht.Gc=0,Ht.ia=0;else{var pr,Qe;if(Jt=ye,ye=qt,ue=Et.Pa.Xc,Oe=Et.ya[Et.aa+Et.ja],ge=Et.pb[Oe.$b],$t=Oe.ad,fr=0,gr=Et.rb[Et.sb-1],ir=ie=0,s($t,fr,0,384),Oe.Za)var vi=0,vn=ue[3];else{Qr=c(16);var Yr=Jt.Na+gr.Na;if(Yr=Bl(ye,ue[1],Yr,ge.Eb,0,Qr,0),Jt.Na=gr.Na=(0<Yr)+0,1<Yr)Si(Qr,0,$t,fr);else{var qi=Qr[0]+3>>3;for(Qr=0;256>Qr;Qr+=16)$t[fr+Qr]=qi}vi=1,vn=ue[0]}var Br=15&Jt.la,Wn=15&gr.la;for(Qr=0;4>Qr;++Qr){var Xn=1&Wn;for(qi=Qe=0;4>qi;++qi)Br=Br>>1|(Xn=(Yr=Bl(ye,vn,Yr=Xn+(1&Br),ge.Sc,vi,$t,fr))>vi)<<7,Qe=Qe<<2|(3<Yr?3:1<Yr?2:$t[fr+0]!=0),fr+=16;Br>>=4,Wn=Wn>>1|Xn<<7,ie=(ie<<8|Qe)>>>0}for(vn=Br,vi=Wn>>4,pr=0;4>pr;pr+=2){for(Qe=0,Br=Jt.la>>4+pr,Wn=gr.la>>4+pr,Qr=0;2>Qr;++Qr){for(Xn=1&Wn,qi=0;2>qi;++qi)Yr=Xn+(1&Br),Br=Br>>1|(Xn=0<(Yr=Bl(ye,ue[2],Yr,ge.Qc,0,$t,fr)))<<3,Qe=Qe<<2|(3<Yr?3:1<Yr?2:$t[fr+0]!=0),fr+=16;Br>>=2,Wn=Wn>>1|Xn<<5}ir|=Qe<<4*pr,vn|=Br<<4<<pr,vi|=(240&Wn)<<pr}Jt.la=vn,gr.la=vi,Oe.Hc=ie,Oe.Gc=ir,Oe.ia=43690&ir?0:ge.ia,ue=!(ie|ir)}if(0<Et.L&&(Et.wa[Et.Y+Et.ja]=Et.gd[Ht.$b][Ht.Za],Et.wa[Et.Y+Et.ja].La|=!ue),qt.Ka)return Rr(xt,7,"Premature end-of-file encountered.")}if(es(xt),Et=Yt,qt=1,Ht=(Bt=xt).D,Jt=0<Bt.L&&Bt.M>=Bt.zb&&Bt.M<=Bt.Va,Bt.Aa==0)t:{if(Ht.M=Bt.M,Ht.uc=Jt,$r(Bt,Ht),qt=1,Ht=(Qe=Bt.D).Nb,Jt=(ir=Uc[Bt.L])*Bt.R,ye=ir/2*Bt.B,Qr=16*Ht*Bt.R,qi=8*Ht*Bt.B,ue=Bt.sa,Oe=Bt.ta-Jt+Qr,ge=Bt.qa,$t=Bt.ra-ye+qi,fr=Bt.Ha,gr=Bt.Ia-ye+qi,Wn=(Br=Qe.M)==0,ie=Br>=Bt.Va-1,Bt.Aa==2&&$r(Bt,Qe),Qe.uc)for(Xn=(Yr=Bt).D.M,t(Yr.D.uc),Qe=Yr.yb;Qe<Yr.Hb;++Qe){vi=Qe,vn=Xn;var Jr=(xi=(si=Yr).D).Nb;pr=si.R;var xi=xi.wa[xi.Y+vi],$i=si.sa,hs=si.ta+16*Jr*pr+16*vi,Ss=xi.dd,Gi=xi.tc;if(Gi!=0)if(t(3<=Gi),si.L==1)0<vi&&ni($i,hs,pr,Gi+4),xi.La&&Rs($i,hs,pr,Gi),0<vn&&Or($i,hs,pr,Gi+4),xi.La&&mi($i,hs,pr,Gi);else{var xs=si.B,UA=si.qa,Co=si.ra+8*Jr*xs+8*vi,Ha=si.Ha,si=si.Ia+8*Jr*xs+8*vi;Jr=xi.ld,0<vi&&(ln($i,hs,pr,Gi+4,Ss,Jr),ka(UA,Co,Ha,si,xs,Gi+4,Ss,Jr)),xi.La&&(mn($i,hs,pr,Gi,Ss,Jr),Ur(UA,Co,Ha,si,xs,Gi,Ss,Jr)),0<vn&&(LA($i,hs,pr,Gi+4,Ss,Jr),Ma(UA,Co,Ha,si,xs,Gi+4,Ss,Jr)),xi.La&&(wl($i,hs,pr,Gi,Ss,Jr),ca(UA,Co,Ha,si,xs,Gi,Ss,Jr))}}if(Bt.ia&&alert("todo:DitherRow"),Et.put!=null){if(Qe=16*Br,Br=16*(Br+1),Wn?(Et.y=Bt.sa,Et.O=Bt.ta+Qr,Et.f=Bt.qa,Et.N=Bt.ra+qi,Et.ea=Bt.Ha,Et.W=Bt.Ia+qi):(Qe-=ir,Et.y=ue,Et.O=Oe,Et.f=ge,Et.N=$t,Et.ea=fr,Et.W=gr),ie||(Br-=ir),Br>Et.o&&(Br=Et.o),Et.F=null,Et.J=null,Bt.Fa!=null&&0<Bt.Fa.length&&Qe<Br&&(Et.J=ml(Bt,Et,Qe,Br-Qe),Et.F=Bt.mb,Et.F==null&&Et.F.length==0)){qt=Rr(Bt,3,"Could not decode alpha data.");break t}Qe<Et.j&&(ir=Et.j-Qe,Qe=Et.j,t(!(1&ir)),Et.O+=Bt.R*ir,Et.N+=Bt.B*(ir>>1),Et.W+=Bt.B*(ir>>1),Et.F!=null&&(Et.J+=Et.width*ir)),Qe<Br&&(Et.O+=Et.v,Et.N+=Et.v>>1,Et.W+=Et.v>>1,Et.F!=null&&(Et.J+=Et.v),Et.ka=Qe-Et.j,Et.U=Et.va-Et.v,Et.T=Br-Qe,qt=Et.put(Et))}Ht+1!=Bt.Ic||ie||(i(Bt.sa,Bt.ta-Jt,ue,Oe+16*Bt.R,Jt),i(Bt.qa,Bt.ra-ye,ge,$t+8*Bt.B,ye),i(Bt.Ha,Bt.Ia-ye,fr,gr+8*Bt.B,ye))}if(!qt)return Rr(xt,6,"Output aborted.")}return 1}(y,_)),_.bc!=null&&_.bc(_),T&=1}return T?(y.cb=0,T):0}function Ni(y,_,T,Q,j){j=y[_+T+32*Q]+(j>>3),y[_+T+32*Q]=-256&j?0>j?0:255:j}function Hr(y,_,T,Q,j,z){Ni(y,_,0,T,Q+j),Ni(y,_,1,T,Q+z),Ni(y,_,2,T,Q-z),Ni(y,_,3,T,Q-j)}function Xi(y){return(20091*y>>16)+y}function La(y,_,T,Q){var j,z=0,Y=c(16);for(j=0;4>j;++j){var et=y[_+0]+y[_+8],nt=y[_+0]-y[_+8],lt=(35468*y[_+4]>>16)-Xi(y[_+12]),Ct=Xi(y[_+4])+(35468*y[_+12]>>16);Y[z+0]=et+Ct,Y[z+1]=nt+lt,Y[z+2]=nt-lt,Y[z+3]=et-Ct,z+=4,_++}for(j=z=0;4>j;++j)et=(y=Y[z+0]+4)+Y[z+8],nt=y-Y[z+8],lt=(35468*Y[z+4]>>16)-Xi(Y[z+12]),Ni(T,Q,0,0,et+(Ct=Xi(Y[z+4])+(35468*Y[z+12]>>16))),Ni(T,Q,1,0,nt+lt),Ni(T,Q,2,0,nt-lt),Ni(T,Q,3,0,et-Ct),z++,Q+=32}function fA(y,_,T,Q){var j=y[_+0]+4,z=35468*y[_+4]>>16,Y=Xi(y[_+4]),et=35468*y[_+1]>>16;Hr(T,Q,0,j+Y,y=Xi(y[_+1]),et),Hr(T,Q,1,j+z,y,et),Hr(T,Q,2,j-z,y,et),Hr(T,Q,3,j-Y,y,et)}function dA(y,_,T,Q,j){La(y,_,T,Q),j&&La(y,_+16,T,Q+4)}function gA(y,_,T,Q){vo(y,_+0,T,Q,1),vo(y,_+32,T,Q+128,1)}function Ia(y,_,T,Q){var j;for(y=y[_+0]+4,j=0;4>j;++j)for(_=0;4>_;++_)Ni(T,Q,_,j,y)}function ia(y,_,T,Q){y[_+0]&&As(y,_+0,T,Q),y[_+16]&&As(y,_+16,T,Q+4),y[_+32]&&As(y,_+32,T,Q+128),y[_+48]&&As(y,_+48,T,Q+128+4)}function Rn(y,_,T,Q){var j,z=c(16);for(j=0;4>j;++j){var Y=y[_+0+j]+y[_+12+j],et=y[_+4+j]+y[_+8+j],nt=y[_+4+j]-y[_+8+j],lt=y[_+0+j]-y[_+12+j];z[0+j]=Y+et,z[8+j]=Y-et,z[4+j]=lt+nt,z[12+j]=lt-nt}for(j=0;4>j;++j)Y=(y=z[0+4*j]+3)+z[3+4*j],et=z[1+4*j]+z[2+4*j],nt=z[1+4*j]-z[2+4*j],lt=y-z[3+4*j],T[Q+0]=Y+et>>3,T[Q+16]=lt+nt>>3,T[Q+32]=Y-et>>3,T[Q+48]=lt-nt>>3,Q+=64}function dn(y,_,T){var Q,j=_-32,z=Kn,Y=255-y[j-1];for(Q=0;Q<T;++Q){var et,nt=z,lt=Y+y[_-1];for(et=0;et<T;++et)y[_+et]=nt[lt+y[j+et]];_+=32}}function pA(y,_){dn(y,_,4)}function Pa(y,_){dn(y,_,8)}function hl(y,_){dn(y,_,16)}function zi(y,_){var T;for(T=0;16>T;++T)i(y,_+32*T,y,_-32,16)}function na(y,_){var T;for(T=16;0<T;--T)s(y,_,y[_-1],16),_+=32}function Ns(y,_,T){var Q;for(Q=0;16>Q;++Q)s(_,T+32*Q,y,16)}function Cr(y,_){var T,Q=16;for(T=0;16>T;++T)Q+=y[_-1+32*T]+y[_+T-32];Ns(Q>>5,y,_)}function ri(y,_){var T,Q=8;for(T=0;16>T;++T)Q+=y[_-1+32*T];Ns(Q>>4,y,_)}function ul(y,_){var T,Q=8;for(T=0;16>T;++T)Q+=y[_+T-32];Ns(Q>>4,y,_)}function mA(y,_){Ns(128,y,_)}function Ue(y,_,T){return y+2*_+T+2>>2}function lo(y,_){var T,Q=_-32;for(Q=new Uint8Array([Ue(y[Q-1],y[Q+0],y[Q+1]),Ue(y[Q+0],y[Q+1],y[Q+2]),Ue(y[Q+1],y[Q+2],y[Q+3]),Ue(y[Q+2],y[Q+3],y[Q+4])]),T=0;4>T;++T)i(y,_+32*T,Q,0,Q.length)}function co(y,_){var T=y[_-1],Q=y[_-1+32],j=y[_-1+64],z=y[_-1+96];wt(y,_+0,16843009*Ue(y[_-1-32],T,Q)),wt(y,_+32,16843009*Ue(T,Q,j)),wt(y,_+64,16843009*Ue(Q,j,z)),wt(y,_+96,16843009*Ue(j,z,z))}function rs(y,_){var T,Q=4;for(T=0;4>T;++T)Q+=y[_+T-32]+y[_-1+32*T];for(Q>>=3,T=0;4>T;++T)s(y,_+32*T,Q,4)}function sa(y,_){var T=y[_-1+0],Q=y[_-1+32],j=y[_-1+64],z=y[_-1-32],Y=y[_+0-32],et=y[_+1-32],nt=y[_+2-32],lt=y[_+3-32];y[_+0+96]=Ue(Q,j,y[_-1+96]),y[_+1+96]=y[_+0+64]=Ue(T,Q,j),y[_+2+96]=y[_+1+64]=y[_+0+32]=Ue(z,T,Q),y[_+3+96]=y[_+2+64]=y[_+1+32]=y[_+0+0]=Ue(Y,z,T),y[_+3+64]=y[_+2+32]=y[_+1+0]=Ue(et,Y,z),y[_+3+32]=y[_+2+0]=Ue(nt,et,Y),y[_+3+0]=Ue(lt,nt,et)}function Ua(y,_){var T=y[_+1-32],Q=y[_+2-32],j=y[_+3-32],z=y[_+4-32],Y=y[_+5-32],et=y[_+6-32],nt=y[_+7-32];y[_+0+0]=Ue(y[_+0-32],T,Q),y[_+1+0]=y[_+0+32]=Ue(T,Q,j),y[_+2+0]=y[_+1+32]=y[_+0+64]=Ue(Q,j,z),y[_+3+0]=y[_+2+32]=y[_+1+64]=y[_+0+96]=Ue(j,z,Y),y[_+3+32]=y[_+2+64]=y[_+1+96]=Ue(z,Y,et),y[_+3+64]=y[_+2+96]=Ue(Y,et,nt),y[_+3+96]=Ue(et,nt,nt)}function Oa(y,_){var T=y[_-1+0],Q=y[_-1+32],j=y[_-1+64],z=y[_-1-32],Y=y[_+0-32],et=y[_+1-32],nt=y[_+2-32],lt=y[_+3-32];y[_+0+0]=y[_+1+64]=z+Y+1>>1,y[_+1+0]=y[_+2+64]=Y+et+1>>1,y[_+2+0]=y[_+3+64]=et+nt+1>>1,y[_+3+0]=nt+lt+1>>1,y[_+0+96]=Ue(j,Q,T),y[_+0+64]=Ue(Q,T,z),y[_+0+32]=y[_+1+96]=Ue(T,z,Y),y[_+1+32]=y[_+2+96]=Ue(z,Y,et),y[_+2+32]=y[_+3+96]=Ue(Y,et,nt),y[_+3+32]=Ue(et,nt,lt)}function qr(y,_){var T=y[_+0-32],Q=y[_+1-32],j=y[_+2-32],z=y[_+3-32],Y=y[_+4-32],et=y[_+5-32],nt=y[_+6-32],lt=y[_+7-32];y[_+0+0]=T+Q+1>>1,y[_+1+0]=y[_+0+64]=Q+j+1>>1,y[_+2+0]=y[_+1+64]=j+z+1>>1,y[_+3+0]=y[_+2+64]=z+Y+1>>1,y[_+0+32]=Ue(T,Q,j),y[_+1+32]=y[_+0+96]=Ue(Q,j,z),y[_+2+32]=y[_+1+96]=Ue(j,z,Y),y[_+3+32]=y[_+2+96]=Ue(z,Y,et),y[_+3+64]=Ue(Y,et,nt),y[_+3+96]=Ue(et,nt,lt)}function Qa(y,_){var T=y[_-1+0],Q=y[_-1+32],j=y[_-1+64],z=y[_-1+96];y[_+0+0]=T+Q+1>>1,y[_+2+0]=y[_+0+32]=Q+j+1>>1,y[_+2+32]=y[_+0+64]=j+z+1>>1,y[_+1+0]=Ue(T,Q,j),y[_+3+0]=y[_+1+32]=Ue(Q,j,z),y[_+3+32]=y[_+1+64]=Ue(j,z,z),y[_+3+64]=y[_+2+64]=y[_+0+96]=y[_+1+96]=y[_+2+96]=y[_+3+96]=z}function vA(y,_){var T=y[_-1+0],Q=y[_-1+32],j=y[_-1+64],z=y[_-1+96],Y=y[_-1-32],et=y[_+0-32],nt=y[_+1-32],lt=y[_+2-32];y[_+0+0]=y[_+2+32]=T+Y+1>>1,y[_+0+32]=y[_+2+64]=Q+T+1>>1,y[_+0+64]=y[_+2+96]=j+Q+1>>1,y[_+0+96]=z+j+1>>1,y[_+3+0]=Ue(et,nt,lt),y[_+2+0]=Ue(Y,et,nt),y[_+1+0]=y[_+3+32]=Ue(T,Y,et),y[_+1+32]=y[_+3+64]=Ue(Q,T,Y),y[_+1+64]=y[_+3+96]=Ue(j,Q,T),y[_+1+96]=Ue(z,j,Q)}function yA(y,_){var T;for(T=0;8>T;++T)i(y,_+32*T,y,_-32,8)}function wA(y,_){var T;for(T=0;8>T;++T)s(y,_,y[_-1],8),_+=32}function Hn(y,_,T){var Q;for(Q=0;8>Q;++Q)s(_,T+32*Q,y,8)}function Mi(y,_){var T,Q=8;for(T=0;8>T;++T)Q+=y[_+T-32]+y[_-1+32*T];Hn(Q>>4,y,_)}function bA(y,_){var T,Q=4;for(T=0;8>T;++T)Q+=y[_+T-32];Hn(Q>>3,y,_)}function ws(y,_){var T,Q=4;for(T=0;8>T;++T)Q+=y[_-1+32*T];Hn(Q>>3,y,_)}function aa(y,_){Hn(128,y,_)}function Aa(y,_,T){var Q=y[_-T],j=y[_+0],z=3*(j-Q)+Bc[1020+y[_-2*T]-y[_+T]],Y=Sc[112+(z+4>>3)];y[_-T]=Kn[255+Q+Sc[112+(z+3>>3)]],y[_+0]=Kn[255+j-Y]}function ho(y,_,T,Q){var j=y[_+0],z=y[_+T];return os[255+y[_-2*T]-y[_-T]]>Q||os[255+z-j]>Q}function de(y,_,T,Q){return 4*os[255+y[_-T]-y[_+0]]+os[255+y[_-2*T]-y[_+T]]<=Q}function Ft(y,_,T,Q,j){var z=y[_-3*T],Y=y[_-2*T],et=y[_-T],nt=y[_+0],lt=y[_+T],Ct=y[_+2*T],Mt=y[_+3*T];return 4*os[255+et-nt]+os[255+Y-lt]>Q?0:os[255+y[_-4*T]-z]<=j&&os[255+z-Y]<=j&&os[255+Y-et]<=j&&os[255+Mt-Ct]<=j&&os[255+Ct-lt]<=j&&os[255+lt-nt]<=j}function re(y,_,T,Q){var j=2*Q+1;for(Q=0;16>Q;++Q)de(y,_+Q,T,j)&&Aa(y,_+Q,T)}function he(y,_,T,Q){var j=2*Q+1;for(Q=0;16>Q;++Q)de(y,_+Q*T,1,j)&&Aa(y,_+Q*T,1)}function Ye(y,_,T,Q){var j;for(j=3;0<j;--j)re(y,_+=4*T,T,Q)}function ki(y,_,T,Q){var j;for(j=3;0<j;--j)he(y,_+=4,T,Q)}function Wr(y,_,T,Q,j,z,Y,et){for(z=2*z+1;0<j--;){if(Ft(y,_,T,z,Y))if(ho(y,_,T,et))Aa(y,_,T);else{var nt=y,lt=_,Ct=T,Mt=nt[lt-2*Ct],kt=nt[lt-Ct],xt=nt[lt+0],Yt=nt[lt+Ct],Ht=nt[lt+2*Ct],Bt=27*(qt=Bc[1020+3*(xt-kt)+Bc[1020+Mt-Yt]])+63>>7,Et=18*qt+63>>7,qt=9*qt+63>>7;nt[lt-3*Ct]=Kn[255+nt[lt-3*Ct]+qt],nt[lt-2*Ct]=Kn[255+Mt+Et],nt[lt-Ct]=Kn[255+kt+Bt],nt[lt+0]=Kn[255+xt-Bt],nt[lt+Ct]=Kn[255+Yt-Et],nt[lt+2*Ct]=Kn[255+Ht-qt]}_+=Q}}function lr(y,_,T,Q,j,z,Y,et){for(z=2*z+1;0<j--;){if(Ft(y,_,T,z,Y))if(ho(y,_,T,et))Aa(y,_,T);else{var nt=y,lt=_,Ct=T,Mt=nt[lt-Ct],kt=nt[lt+0],xt=nt[lt+Ct],Yt=Sc[112+((Ht=3*(kt-Mt))+4>>3)],Ht=Sc[112+(Ht+3>>3)],Bt=Yt+1>>1;nt[lt-2*Ct]=Kn[255+nt[lt-2*Ct]+Bt],nt[lt-Ct]=Kn[255+Mt+Ht],nt[lt+0]=Kn[255+kt-Yt],nt[lt+Ct]=Kn[255+xt-Bt]}_+=Q}}function Gn(y,_,T,Q,j,z){Wr(y,_,T,1,16,Q,j,z)}function Lr(y,_,T,Q,j,z){Wr(y,_,1,T,16,Q,j,z)}function CA(y,_,T,Q,j,z){var Y;for(Y=3;0<Y;--Y)lr(y,_+=4*T,T,1,16,Q,j,z)}function An(y,_,T,Q,j,z){var Y;for(Y=3;0<Y;--Y)lr(y,_+=4,1,T,16,Q,j,z)}function BA(y,_,T,Q,j,z,Y,et){Wr(y,_,j,1,8,z,Y,et),Wr(T,Q,j,1,8,z,Y,et)}function SA(y,_,T,Q,j,z,Y,et){Wr(y,_,1,j,8,z,Y,et),Wr(T,Q,1,j,8,z,Y,et)}function fl(y,_,T,Q,j,z,Y,et){lr(y,_+4*j,j,1,8,z,Y,et),lr(T,Q+4*j,j,1,8,z,Y,et)}function yc(y,_,T,Q,j,z,Y,et){lr(y,_+4,1,j,8,z,Y,et),lr(T,Q+4,1,j,8,z,Y,et)}function uo(){this.ba=new ei,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Mr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function dl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function gl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function wc(){this.ua=0,this.Wa=new tt,this.vb=new tt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new H}function Jh(){this.xb=this.a=0,this.l=new an,this.ca=new ei,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new wc,this.ab=0,this.gc=f(4,gl),this.Oc=0}function fo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new an,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xA(y,_,T,Q,j,z,Y){for(y=y==null?0:y[_+0],_=0;_<Y;++_)j[z+_]=y+T[Q+_]&255,y=j[z+_]}function pl(y,_,T,Q,j,z,Y){var et;if(y==null)xA(null,null,T,Q,j,z,Y);else for(et=0;et<Y;++et)j[z+et]=y[_+et]+T[Q+et]&255}function Na(y,_,T,Q,j,z,Y){if(y==null)xA(null,null,T,Q,j,z,Y);else{var et,nt=y[_+0],lt=nt,Ct=nt;for(et=0;et<Y;++et)lt=Ct+(nt=y[_+et])-lt,Ct=T[Q+et]+(-256&lt?0>lt?0:255:lt)&255,lt=nt,j[z+et]=Ct}}function ml(y,_,T,Q){var j=_.width,z=_.o;if(t(y!=null&&_!=null),0>T||0>=Q||T+Q>z)return null;if(!y.Cc){if(y.ga==null){var Y;if(y.ga=new fo,(Y=y.ga==null)||(Y=_.width*_.o,t(y.Gb.length==0),y.Gb=c(Y),y.Uc=0,y.Gb==null?Y=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,Y=1),Y=!Y),!Y){Y=y.ga;var et=y.Fa,nt=y.P,lt=y.qc,Ct=y.mb,Mt=y.nb,kt=nt+1,xt=lt-1,Yt=Y.l;if(t(et!=null&&Ct!=null&&_!=null),ua[0]=null,ua[1]=xA,ua[2]=pl,ua[3]=Na,Y.ca=Ct,Y.tb=Mt,Y.c=_.width,Y.i=_.height,t(0<Y.c&&0<Y.i),1>=lt)_=0;else if(Y.$a=et[nt+0]>>0&3,Y.Z=et[nt+0]>>2&3,Y.Lc=et[nt+0]>>4&3,nt=et[nt+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||nt)_=0;else if(Yt.put=ji,Yt.ac=or,Yt.bc=Ki,Yt.ma=Y,Yt.width=_.width,Yt.height=_.height,Yt.Da=_.Da,Yt.v=_.v,Yt.va=_.va,Yt.j=_.j,Yt.o=_.o,Y.$a)t:{t(Y.$a==1),_=un();e:for(;;){if(_==null){_=0;break t}if(t(Y!=null),Y.mc=_,_.c=Y.c,_.i=Y.i,_.l=Y.l,_.l.ma=Y,_.l.width=Y.c,_.l.height=Y.i,_.a=0,ft(_.m,et,kt,xt),!Fn(Y.c,Y.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&hn(_.s)?(Y.ic=1,et=_.c*_.i,_.Ta=null,_.Ua=0,_.V=c(et),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(Y.ic=0,_=Er(_,Y.c)),!_))break e;_=1;break t}Y.mc=null,_=0}else _=xt>=Y.c*Y.i;Y=!_}if(Y)return null;y.ga.Lc!=1?y.Ga=0:Q=z-T}t(y.ga!=null),t(T+Q<=z);t:{if(_=(et=y.ga).c,z=et.l.o,et.$a==0){if(kt=y.rc,xt=y.Vc,Yt=y.Fa,nt=y.P+1+T*_,lt=y.mb,Ct=y.nb+T*_,t(nt<=y.P+y.qc),et.Z!=0)for(t(ua[et.Z]!=null),Y=0;Y<Q;++Y)ua[et.Z](kt,xt,Yt,nt,lt,Ct,_),kt=lt,xt=Ct,Ct+=_,nt+=_;else for(Y=0;Y<Q;++Y)i(lt,Ct,Yt,nt,_),kt=lt,xt=Ct,Ct+=_,nt+=_;y.rc=kt,y.Vc=xt}else{if(t(et.mc!=null),_=T+Q,t((Y=et.mc)!=null),t(_<=Y.i),Y.C>=_)_=1;else if(et.ic||Ot(),et.ic){et=Y.V,kt=Y.Ba,xt=Y.c;var Ht=Y.i,Bt=(Yt=1,nt=Y.$/xt,lt=Y.$%xt,Ct=Y.m,Mt=Y.s,Y.$),Et=xt*Ht,qt=xt*_,Jt=Mt.wc,$t=Bt<qt?kr(Mt,lt,nt):null;t(Bt<=Et),t(_<=Ht),t(hn(Mt));e:for(;;){for(;!Ct.h&&Bt<qt;){if(lt&Jt||($t=kr(Mt,lt,nt)),t($t!=null),Z(Ct),256>(Ht=Wi($t.G[0],$t.H[0],Ct)))et[kt+Bt]=Ht,++Bt,++lt>=xt&&(lt=0,++nt<=_&&!(nt%16)&&En(Y,nt));else{if(!(280>Ht)){Yt=0;break e}Ht=Qn(Ht-256,Ct);var ye,ue=Wi($t.G[4],$t.H[4],Ct);if(Z(Ct),!(Bt>=(ue=Zn(xt,ue=Qn(ue,Ct)))&&Et-Bt>=Ht)){Yt=0;break e}for(ye=0;ye<Ht;++ye)et[kt+Bt+ye]=et[kt+Bt+ye-ue];for(Bt+=Ht,lt+=Ht;lt>=xt;)lt-=xt,++nt<=_&&!(nt%16)&&En(Y,nt);Bt<qt&&lt&Jt&&($t=kr(Mt,lt,nt))}t(Ct.h==k(Ct))}En(Y,nt>_?_:nt);break e}!Yt||Ct.h&&Bt<Et?(Yt=0,Y.a=Ct.h?5:3):Y.$=Bt,_=Yt}else _=Nn(Y,Y.V,Y.Ba,Y.c,Y.i,_,Os);if(!_){Q=0;break t}}T+Q>=z&&(y.Cc=1),Q=1}if(!Q)return null;if(y.Cc&&((Q=y.ga)!=null&&(Q.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+T*j}function F(y,_,T,Q,j,z){for(;0<j--;){var Y,et=y,nt=_+(T?1:0),lt=y,Ct=_+(T?0:3);for(Y=0;Y<Q;++Y){var Mt=lt[Ct+4*Y];Mt!=255&&(Mt*=32897,et[nt+4*Y+0]=et[nt+4*Y+0]*Mt>>23,et[nt+4*Y+1]=et[nt+4*Y+1]*Mt>>23,et[nt+4*Y+2]=et[nt+4*Y+2]*Mt>>23)}_+=z}}function K(y,_,T,Q,j){for(;0<Q--;){var z;for(z=0;z<T;++z){var Y=y[_+2*z+0],et=15&(lt=y[_+2*z+1]),nt=4369*et,lt=(240&lt|lt>>4)*nt>>16;y[_+2*z+0]=(240&Y|Y>>4)*nt>>16&240|(15&Y|Y<<4)*nt>>16>>4&15,y[_+2*z+1]=240&lt|et}_+=j}}function dt(y,_,T,Q,j,z,Y,et){var nt,lt,Ct=255;for(lt=0;lt<j;++lt){for(nt=0;nt<Q;++nt){var Mt=y[_+nt];z[Y+4*nt]=Mt,Ct&=Mt}_+=T,Y+=et}return Ct!=255}function yt(y,_,T,Q,j){var z;for(z=0;z<j;++z)T[Q+z]=y[_+z]>>8}function Ot(){ha=F,IA=K,bl=dt,$f=yt}function Vt(y,_,T){O[y]=function(Q,j,z,Y,et,nt,lt,Ct,Mt,kt,xt,Yt,Ht,Bt,Et,qt,Jt){var $t,ye=Jt-1>>1,ue=et[nt+0]|lt[Ct+0]<<16,Oe=Mt[kt+0]|xt[Yt+0]<<16;t(Q!=null);var ge=3*ue+Oe+131074>>2;for(_(Q[j+0],255&ge,ge>>16,Ht,Bt),z!=null&&(ge=3*Oe+ue+131074>>2,_(z[Y+0],255&ge,ge>>16,Et,qt)),$t=1;$t<=ye;++$t){var fr=et[nt+$t]|lt[Ct+$t]<<16,gr=Mt[kt+$t]|xt[Yt+$t]<<16,ie=ue+fr+Oe+gr+524296,ir=ie+2*(fr+Oe)>>3;ge=ir+ue>>1,ue=(ie=ie+2*(ue+gr)>>3)+fr>>1,_(Q[j+2*$t-1],255&ge,ge>>16,Ht,Bt+(2*$t-1)*T),_(Q[j+2*$t-0],255&ue,ue>>16,Ht,Bt+(2*$t-0)*T),z!=null&&(ge=ie+Oe>>1,ue=ir+gr>>1,_(z[Y+2*$t-1],255&ge,ge>>16,Et,qt+(2*$t-1)*T),_(z[Y+2*$t+0],255&ue,ue>>16,Et,qt+(2*$t+0)*T)),ue=fr,Oe=gr}1&Jt||(ge=3*ue+Oe+131074>>2,_(Q[j+Jt-1],255&ge,ge>>16,Ht,Bt+(Jt-1)*T),z!=null&&(ge=3*Oe+ue+131074>>2,_(z[Y+Jt-1],255&ge,ge>>16,Et,qt+(Jt-1)*T)))}}function se(){cs[xc]=Vm,cs[_c]=Sl,cs[PA]=ru,cs[Ec]=nd,cs[Fc]=sd,cs[yo]=ad,cs[td]=jm,cs[Zh]=Sl,cs[tu]=nd,cs[Tc]=sd,cs[wo]=ad}function ve(y){return y&~Km?0>y?0:255:y>>Ad}function Pe(y,_){return ve((19077*y>>8)+(26149*_>>8)-14234)}function Ge(y,_,T){return ve((19077*y>>8)-(6419*_>>8)-(13320*T>>8)+8708)}function $e(y,_){return ve((19077*y>>8)+(33050*_>>8)-17685)}function ar(y,_,T,Q,j){Q[j+0]=Pe(y,T),Q[j+1]=Ge(y,_,T),Q[j+2]=$e(y,_)}function Ir(y,_,T,Q,j){Q[j+0]=$e(y,_),Q[j+1]=Ge(y,_,T),Q[j+2]=Pe(y,T)}function Pr(y,_,T,Q,j){var z=Ge(y,_,T);_=z<<3&224|$e(y,_)>>3,Q[j+0]=248&Pe(y,T)|z>>5,Q[j+1]=_}function Re(y,_,T,Q,j){var z=240&$e(y,_)|15;Q[j+0]=240&Pe(y,T)|Ge(y,_,T)>>4,Q[j+1]=z}function on(y,_,T,Q,j){Q[j+0]=255,ar(y,_,T,Q,j+1)}function gi(y,_,T,Q,j){Ir(y,_,T,Q,j),Q[j+3]=255}function is(y,_,T,Q,j){ar(y,_,T,Q,j),Q[j+3]=255}function Di(y,_){return 0>y?0:y>_?_:y}function Ri(y,_,T){O[y]=function(Q,j,z,Y,et,nt,lt,Ct,Mt){for(var kt=Ct+(-2&Mt)*T;Ct!=kt;)_(Q[j+0],z[Y+0],et[nt+0],lt,Ct),_(Q[j+1],z[Y+0],et[nt+0],lt,Ct+T),j+=2,++Y,++nt,Ct+=2*T;1&Mt&&_(Q[j+0],z[Y+0],et[nt+0],lt,Ct)}}function bc(y,_,T){return T==0?y==0?_==0?6:5:_==0?4:0:T}function ns(y,_,T,Q,j){switch(y>>>30){case 3:vo(_,T,Q,j,0);break;case 2:yl(_,T,Q,j);break;case 1:As(_,T,Q,j)}}function $r(y,_){var T,Q,j=_.M,z=_.Nb,Y=y.oc,et=y.pc+40,nt=y.oc,lt=y.pc+584,Ct=y.oc,Mt=y.pc+600;for(T=0;16>T;++T)Y[et+32*T-1]=129;for(T=0;8>T;++T)nt[lt+32*T-1]=129,Ct[Mt+32*T-1]=129;for(0<j?Y[et-1-32]=nt[lt-1-32]=Ct[Mt-1-32]=129:(s(Y,et-32-1,127,21),s(nt,lt-32-1,127,9),s(Ct,Mt-32-1,127,9)),Q=0;Q<y.za;++Q){var kt=_.ya[_.aa+Q];if(0<Q){for(T=-1;16>T;++T)i(Y,et+32*T-4,Y,et+32*T+12,4);for(T=-1;8>T;++T)i(nt,lt+32*T-4,nt,lt+32*T+4,4),i(Ct,Mt+32*T-4,Ct,Mt+32*T+4,4)}var xt=y.Gd,Yt=y.Hd+Q,Ht=kt.ad,Bt=kt.Hc;if(0<j&&(i(Y,et-32,xt[Yt].y,0,16),i(nt,lt-32,xt[Yt].f,0,8),i(Ct,Mt-32,xt[Yt].ea,0,8)),kt.Za){var Et=Y,qt=et-32+16;for(0<j&&(Q>=y.za-1?s(Et,qt,xt[Yt].y[15],4):i(Et,qt,xt[Yt+1].y,0,4)),T=0;4>T;T++)Et[qt+128+T]=Et[qt+256+T]=Et[qt+384+T]=Et[qt+0+T];for(T=0;16>T;++T,Bt<<=2)Et=Y,qt=et+ld[T],Bs[kt.Ob[T]](Et,qt),ns(Bt,Ht,16*+T,Et,qt)}else if(Et=bc(Q,j,kt.Ob[0]),Da[Et](Y,et),Bt!=0)for(T=0;16>T;++T,Bt<<=2)ns(Bt,Ht,16*+T,Y,et+ld[T]);for(T=kt.Gc,Et=bc(Q,j,kt.Dd),ls[Et](nt,lt),ls[Et](Ct,Mt),Bt=Ht,Et=nt,qt=lt,255&(kt=T>>0)&&(170&kt?Cs(Bt,256,Et,qt):la(Bt,256,Et,qt)),kt=Ct,Bt=Mt,255&(T>>=8)&&(170&T?Cs(Ht,320,kt,Bt):la(Ht,320,kt,Bt)),j<y.Ub-1&&(i(xt[Yt].y,0,Y,et+480,16),i(xt[Yt].f,0,nt,lt+224,8),i(xt[Yt].ea,0,Ct,Mt+224,8)),T=8*z*y.B,xt=y.sa,Yt=y.ta+16*Q+16*z*y.R,Ht=y.qa,kt=y.ra+8*Q+T,Bt=y.Ha,Et=y.Ia+8*Q+T,T=0;16>T;++T)i(xt,Yt+T*y.R,Y,et+32*T,16);for(T=0;8>T;++T)i(Ht,kt+T*y.B,nt,lt+32*T,8),i(Bt,Et+T*y.B,Ct,Mt+32*T,8)}}function _A(y,_,T,Q,j,z,Y,et,nt){var lt=[0],Ct=[0],Mt=0,kt=nt!=null?nt.kd:0,xt=nt??new dl;if(y==null||12>T)return 7;xt.data=y,xt.w=_,xt.ha=T,_=[_],T=[T],xt.gb=[xt.gb];t:{var Yt=_,Ht=T,Bt=xt.gb;if(t(y!=null),t(Ht!=null),t(Bt!=null),Bt[0]=0,12<=Ht[0]&&!e(y,Yt[0],"RIFF")){if(e(y,Yt[0]+8,"WEBP")){Bt=3;break t}var Et=vt(y,Yt[0]+4);if(12>Et||4294967286<Et){Bt=3;break t}if(kt&&Et>Ht[0]-8){Bt=7;break t}Bt[0]=Et,Yt[0]+=12,Ht[0]-=12}Bt=0}if(Bt!=0)return Bt;for(Et=0<xt.gb[0],T=T[0];;){t:{var qt=y;Ht=_,Bt=T;var Jt=lt,$t=Ct,ye=Yt=[0];if((ge=Mt=[Mt])[0]=0,8>Bt[0])Bt=7;else{if(!e(qt,Ht[0],"VP8X")){if(vt(qt,Ht[0]+4)!=10){Bt=3;break t}if(18>Bt[0]){Bt=7;break t}var ue=vt(qt,Ht[0]+8),Oe=1+Nt(qt,Ht[0]+12);if(2147483648<=Oe*(qt=1+Nt(qt,Ht[0]+15))){Bt=3;break t}ye!=null&&(ye[0]=ue),Jt!=null&&(Jt[0]=Oe),$t!=null&&($t[0]=qt),Ht[0]+=18,Bt[0]-=18,ge[0]=1}Bt=0}}if(Mt=Mt[0],Yt=Yt[0],Bt!=0)return Bt;if(Ht=!!(2&Yt),!Et&&Mt)return 3;if(z!=null&&(z[0]=!!(16&Yt)),Y!=null&&(Y[0]=Ht),et!=null&&(et[0]=0),Y=lt[0],Yt=Ct[0],Mt&&Ht&&nt==null){Bt=0;break}if(4>T){Bt=7;break}if(Et&&Mt||!Et&&!Mt&&!e(y,_[0],"ALPH")){T=[T],xt.na=[xt.na],xt.P=[xt.P],xt.Sa=[xt.Sa];t:{ue=y,Bt=_,Et=T;var ge=xt.gb;Jt=xt.na,$t=xt.P,ye=xt.Sa,Oe=22,t(ue!=null),t(Et!=null),qt=Bt[0];var fr=Et[0];for(t(Jt!=null),t(ye!=null),Jt[0]=null,$t[0]=null,ye[0]=0;;){if(Bt[0]=qt,Et[0]=fr,8>fr){Bt=7;break t}var gr=vt(ue,qt+4);if(4294967286<gr){Bt=3;break t}var ie=8+gr+1&-2;if(Oe+=ie,0<ge&&Oe>ge){Bt=3;break t}if(!e(ue,qt,"VP8 ")||!e(ue,qt,"VP8L")){Bt=0;break t}if(fr[0]<ie){Bt=7;break t}e(ue,qt,"ALPH")||(Jt[0]=ue,$t[0]=qt+8,ye[0]=gr),qt+=ie,fr-=ie}}if(T=T[0],xt.na=xt.na[0],xt.P=xt.P[0],xt.Sa=xt.Sa[0],Bt!=0)break}T=[T],xt.Ja=[xt.Ja],xt.xa=[xt.xa];t:if(ge=y,Bt=_,Et=T,Jt=xt.gb[0],$t=xt.Ja,ye=xt.xa,ue=Bt[0],qt=!e(ge,ue,"VP8 "),Oe=!e(ge,ue,"VP8L"),t(ge!=null),t(Et!=null),t($t!=null),t(ye!=null),8>Et[0])Bt=7;else{if(qt||Oe){if(ge=vt(ge,ue+4),12<=Jt&&ge>Jt-12){Bt=3;break t}if(kt&&ge>Et[0]-8){Bt=7;break t}$t[0]=ge,Bt[0]+=8,Et[0]-=8,ye[0]=Oe}else ye[0]=5<=Et[0]&&ge[ue+0]==47&&!(ge[ue+4]>>5),$t[0]=Et[0];Bt=0}if(T=T[0],xt.Ja=xt.Ja[0],xt.xa=xt.xa[0],_=_[0],Bt!=0)break;if(4294967286<xt.Ja)return 3;if(et==null||Ht||(et[0]=xt.xa?2:1),Y=[Y],Yt=[Yt],xt.xa){if(5>T){Bt=7;break}et=Y,kt=Yt,Ht=z,y==null||5>T?y=0:5<=T&&y[_+0]==47&&!(y[_+4]>>5)?(Et=[0],ge=[0],Jt=[0],ft($t=new P,y,_,T),Le($t,Et,ge,Jt)?(et!=null&&(et[0]=Et[0]),kt!=null&&(kt[0]=ge[0]),Ht!=null&&(Ht[0]=Jt[0]),y=1):y=0):y=0}else{if(10>T){Bt=7;break}et=Yt,y==null||10>T||!hA(y,_+3,T-3)?y=0:(kt=y[_+0]|y[_+1]<<8|y[_+2]<<16,Ht=16383&(y[_+7]<<8|y[_+6]),y=16383&(y[_+9]<<8|y[_+8]),1&kt||3<(kt>>1&7)||!(kt>>4&1)||kt>>5>=xt.Ja||!Ht||!y?y=0:(Y&&(Y[0]=Ht),et&&(et[0]=y),y=1))}if(!y||(Y=Y[0],Yt=Yt[0],Mt&&(lt[0]!=Y||Ct[0]!=Yt)))return 3;nt!=null&&(nt[0]=xt,nt.offset=_-nt.w,t(4294967286>_-nt.w),t(nt.offset==nt.ha-T));break}return Bt==0||Bt==7&&Mt&&nt==null?(z!=null&&(z[0]|=xt.na!=null&&0<xt.na.length),Q!=null&&(Q[0]=Y),j!=null&&(j[0]=Yt),0):Bt}function ci(y,_,T){var Q=_.width,j=_.height,z=0,Y=0,et=Q,nt=j;if(_.Da=y!=null&&0<y.Da,_.Da&&(et=y.cd,nt=y.bd,z=y.v,Y=y.j,11>T||(z&=-2,Y&=-2),0>z||0>Y||0>=et||0>=nt||z+et>Q||Y+nt>j))return 0;if(_.v=z,_.j=Y,_.va=z+et,_.o=Y+nt,_.U=et,_.T=nt,_.da=y!=null&&0<y.da,_.da){if(!It(et,nt,T=[y.ib],z=[y.hb]))return 0;_.ib=T[0],_.hb=z[0]}return _.ob=y!=null&&y.ob,_.Kb=y==null||!y.Sd,_.da&&(_.ob=_.ib<3*Q/4&&_.hb<3*j/4,_.Kb=0),1}function EA(y){if(y==null)return 2;if(11>y.S){var _=y.f.RGBA;_.fb+=(y.height-1)*_.A,_.A=-_.A}else _=y.f.kb,y=y.height,_.O+=(y-1)*_.fa,_.fa=-_.fa,_.N+=(y-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(y-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(y-1)*_.lb,_.lb=-_.lb);return 0}function Vn(y,_,T,Q){if(Q==null||0>=y||0>=_)return 2;if(T!=null){if(T.Da){var j=T.cd,z=T.bd,Y=-2&T.v,et=-2&T.j;if(0>Y||0>et||0>=j||0>=z||Y+j>y||et+z>_)return 2;y=j,_=z}if(T.da){if(!It(y,_,j=[T.ib],z=[T.hb]))return 2;y=j[0],_=z[0]}}Q.width=y,Q.height=_;t:{var nt=Q.width,lt=Q.height;if(y=Q.S,0>=nt||0>=lt||!(y>=xc&&13>y))y=2;else{if(0>=Q.Rd&&Q.sd==null){Y=z=j=_=0;var Ct=(et=nt*hd[y])*lt;if(11>y||(z=(lt+1)/2*(_=(nt+1)/2),y==12&&(Y=(j=nt)*lt)),(lt=c(Ct+2*z+Y))==null){y=1;break t}Q.sd=lt,11>y?((nt=Q.f.RGBA).eb=lt,nt.fb=0,nt.A=et,nt.size=Ct):((nt=Q.f.kb).y=lt,nt.O=0,nt.fa=et,nt.Fd=Ct,nt.f=lt,nt.N=0+Ct,nt.Ab=_,nt.Cd=z,nt.ea=lt,nt.W=0+Ct+z,nt.Db=_,nt.Ed=z,y==12&&(nt.F=lt,nt.J=0+Ct+2*z),nt.Tc=Y,nt.lb=j)}if(_=1,j=Q.S,z=Q.width,Y=Q.height,j>=xc&&13>j)if(11>j)y=Q.f.RGBA,_&=(et=Math.abs(y.A))*(Y-1)+z<=y.size,_&=et>=z*hd[j],_&=y.eb!=null;else{y=Q.f.kb,et=(z+1)/2,Ct=(Y+1)/2,nt=Math.abs(y.fa),lt=Math.abs(y.Ab);var Mt=Math.abs(y.Db),kt=Math.abs(y.lb),xt=kt*(Y-1)+z;_&=nt*(Y-1)+z<=y.Fd,_&=lt*(Ct-1)+et<=y.Cd,_=(_&=Mt*(Ct-1)+et<=y.Ed)&nt>=z&lt>=et&Mt>=et,_&=y.y!=null,_&=y.f!=null,_&=y.ea!=null,j==12&&(_&=kt>=z,_&=xt<=y.Tc,_&=y.F!=null)}else _=0;y=_?0:2}}return y!=0||T!=null&&T.fd&&(y=EA(Q)),y}var Hi=64,ur=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],FA=24,TA=32,go=8,gn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Gt("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(y){return y},O.Predictor2=function(y,_,T){return _[T+0]},O.Predictor3=function(y,_,T){return _[T+1]},O.Predictor4=function(y,_,T){return _[T-1]},O.Predictor5=function(y,_,T){return bt(bt(y,_[T+1]),_[T+0])},O.Predictor6=function(y,_,T){return bt(y,_[T-1])},O.Predictor7=function(y,_,T){return bt(y,_[T+0])},O.Predictor8=function(y,_,T){return bt(_[T-1],_[T+0])},O.Predictor9=function(y,_,T){return bt(_[T+0],_[T+1])},O.Predictor10=function(y,_,T){return bt(bt(y,_[T-1]),bt(_[T+0],_[T+1]))},O.Predictor11=function(y,_,T){var Q=_[T+0];return 0>=le(Q>>24&255,y>>24&255,(_=_[T-1])>>24&255)+le(Q>>16&255,y>>16&255,_>>16&255)+le(Q>>8&255,y>>8&255,_>>8&255)+le(255&Q,255&y,255&_)?Q:y},O.Predictor12=function(y,_,T){var Q=_[T+0];return(Kt((y>>24&255)+(Q>>24&255)-((_=_[T-1])>>24&255))<<24|Kt((y>>16&255)+(Q>>16&255)-(_>>16&255))<<16|Kt((y>>8&255)+(Q>>8&255)-(_>>8&255))<<8|Kt((255&y)+(255&Q)-(255&_)))>>>0},O.Predictor13=function(y,_,T){var Q=_[T-1];return(Zt((y=bt(y,_[T+0]))>>24&255,Q>>24&255)<<24|Zt(y>>16&255,Q>>16&255)<<16|Zt(y>>8&255,Q>>8&255)<<8|Zt(y>>0&255,Q>>0&255))>>>0};var po=O.PredictorAdd0;O.PredictorAdd1=pe,Gt("Predictor2","PredictorAdd2"),Gt("Predictor3","PredictorAdd3"),Gt("Predictor4","PredictorAdd4"),Gt("Predictor5","PredictorAdd5"),Gt("Predictor6","PredictorAdd6"),Gt("Predictor7","PredictorAdd7"),Gt("Predictor8","PredictorAdd8"),Gt("Predictor9","PredictorAdd9"),Gt("Predictor10","PredictorAdd10"),Gt("Predictor11","PredictorAdd11"),Gt("Predictor12","PredictorAdd12"),Gt("Predictor13","PredictorAdd13");var mo=O.PredictorAdd2;ae("ColorIndexInverseTransform","MapARGB","32b",function(y){return y>>8&255},function(y){return y}),ae("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(y){return y},function(y){return y>>8&255});var vl,ii=O.ColorIndexInverseTransform,ss=O.MapARGB,Ms=O.VP8LColorIndexInverseTransformAlpha,pi=O.MapAlpha,pn=O.VP8LPredictorsAdd=[];pn.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var jn,as,ks,bs,oa,Ds,Si,vo,yl,Cs,As,la,LA,ln,Ma,ka,wl,mn,ca,Ur,Or,ni,mi,Rs,ha,IA,bl,$f,Cl=c(511),Yf=c(2041),Jf=c(225),Cc=c(767),Zf=0,Bc=Yf,Sc=Jf,Kn=Cc,os=Cl,xc=0,_c=1,PA=2,Ec=3,Fc=4,yo=5,td=6,Zh=7,tu=8,Tc=9,wo=10,Lm=[2,3,7],Im=[3,3,11],ed=[280,256,256,256,40],Pm=[0,1,1,1,0],Lc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Um=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Om=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Qm=8,eu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bo=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Bl=null,Nm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Mm=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],rd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],km=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Dm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Rm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Hm=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Da=[],Bs=[],ls=[],Gm=1,id=2,ua=[],cs=[];Vt("UpsampleRgbLinePair",ar,3),Vt("UpsampleBgrLinePair",Ir,3),Vt("UpsampleRgbaLinePair",is,4),Vt("UpsampleBgraLinePair",gi,4),Vt("UpsampleArgbLinePair",on,4),Vt("UpsampleRgba4444LinePair",Re,2),Vt("UpsampleRgb565LinePair",Pr,2);var Vm=O.UpsampleRgbLinePair,ru=O.UpsampleBgrLinePair,Sl=O.UpsampleRgbaLinePair,nd=O.UpsampleBgraLinePair,sd=O.UpsampleArgbLinePair,ad=O.UpsampleRgba4444LinePair,jm=O.UpsampleRgb565LinePair,Ic=16,Pc=1<<Ic-1,Ra=-227,iu=482,Ad=6,Km=(256<<Ad)-1,od=0,Wm=c(256),Xm=c(256),zm=c(256),qm=c(256),$m=c(iu-Ra),Ym=c(iu-Ra);Ri("YuvToRgbRow",ar,3),Ri("YuvToBgrRow",Ir,3),Ri("YuvToRgbaRow",is,4),Ri("YuvToBgraRow",gi,4),Ri("YuvToArgbRow",on,4),Ri("YuvToRgba4444Row",Re,2),Ri("YuvToRgb565Row",Pr,2);var ld=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Uc=[0,2,8],cd=[8,7,6,4,4,2,2,2,1,1,1,1],Jm=1;this.WebPDecodeRGBA=function(y,_,T,Q,j){var z=_c,Y=new uo,et=new ei;Y.ba=et,et.S=z,et.width=[et.width],et.height=[et.height];var nt=et.width,lt=et.height,Ct=new _r;if(Ct==null||y==null)var Mt=2;else t(Ct!=null),Mt=_A(y,_,T,Ct.width,Ct.height,Ct.Pd,Ct.Qd,Ct.format,null);if(Mt!=0?nt=0:(nt!=null&&(nt[0]=Ct.width[0]),lt!=null&&(lt[0]=Ct.height[0]),nt=1),nt){et.width=et.width[0],et.height=et.height[0],Q!=null&&(Q[0]=et.width),j!=null&&(j[0]=et.height);t:{if(Q=new an,(j=new dl).data=y,j.w=_,j.ha=T,j.kd=1,_=[0],t(j!=null),((y=_A(j.data,j.w,j.ha,null,null,null,_,null,j))==0||y==7)&&_[0]&&(y=4),(_=y)==0){if(t(Y!=null),Q.data=j.data,Q.w=j.w+j.offset,Q.ha=j.ha-j.offset,Q.put=ji,Q.ac=or,Q.bc=Ki,Q.ma=Y,j.xa){if((y=un())==null){Y=1;break t}if(function(kt,xt){var Yt=[0],Ht=[0],Bt=[0];e:for(;;){if(kt==null)return 0;if(xt==null)return kt.a=2,0;if(kt.l=xt,kt.a=0,ft(kt.m,xt.data,xt.w,xt.ha),!Le(kt.m,Yt,Ht,Bt)){kt.a=3;break e}if(kt.xb=id,xt.width=Yt[0],xt.height=Ht[0],!Fn(Yt[0],Ht[0],1,kt,null))break e;return 1}return t(kt.a!=0),0}(y,Q)){if(Q=(_=Vn(Q.width,Q.height,Y.Oa,Y.ba))==0){e:{Q=y;r:for(;;){if(Q==null){Q=0;break e}if(t(Q.s.yc!=null),t(Q.s.Ya!=null),t(0<Q.s.Wb),t((T=Q.l)!=null),t((j=T.ma)!=null),Q.xb!=0){if(Q.ca=j.ba,Q.tb=j.tb,t(Q.ca!=null),!ci(j.Oa,T,Ec)){Q.a=2;break r}if(!Er(Q,T.width)||T.da)break r;if((T.da||Xe(Q.ca.S))&&Ot(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&Ot()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!mt(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break r}Q.xb=0}if(!Nn(Q,Q.V,Q.Ba,Q.c,Q.i,T.o,Qi))break r;j.Dc=Q.Ma,Q=1;break e}t(Q.a!=0),Q=0}Q=!Q}Q&&(_=y.a)}else _=y.a}else{if((y=new ts)==null){Y=1;break t}if(y.Fa=j.na,y.P=j.P,y.qc=j.Sa,uA(y,Q)){if((_=Vn(Q.width,Q.height,Y.Oa,Y.ba))==0){if(y.Aa=0,T=Y.Oa,t((j=y)!=null),T!=null){if(0<(nt=0>(nt=T.Md)?0:100<nt?255:255*nt/100)){for(lt=Ct=0;4>lt;++lt)12>(Mt=j.pb[lt]).lc&&(Mt.ia=nt*cd[0>Mt.lc?0:Mt.lc]>>3),Ct|=Mt.ia;Ct&&(alert("todo:VP8InitRandom"),j.ia=1)}j.Ga=T.Id,100<j.Ga?j.Ga=100:0>j.Ga&&(j.Ga=0)}Dn(y,Q)||(_=y.a)}}else _=y.a}_==0&&Y.Oa!=null&&Y.Oa.fd&&(_=EA(Y.ba))}Y=_}z=Y!=0?null:11>z?et.f.RGBA.eb:et.f.kb.y}else z=null;return z};var hd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(O,X){for(var rt="",M=0;M<4;M++)rt+=String.fromCharCode(O[X++]);return rt}function h(O,X){return(O[X+0]<<0|O[X+1]<<8|O[X+2]<<16)>>>0}function o(O,X){return(O[X+0]<<0|O[X+1]<<8|O[X+2]<<16|O[X+3]<<24)>>>0}new n;var u=[0],A=[0],g=[],p=new n,d=r,m=function(O,X){var rt={},M=0,H=!1,J=0,$=0;if(rt.frames=[],!function(V,k,N,Z){for(var st=0;st<Z;st++)if(V[k+st]!=N.charCodeAt(st))return!0;return!1}(O,X,"RIFF",4)){var ht,ut;for(o(O,X+=4),X+=8;X<O.length;){var pt=l(O,X),ft=o(O,X+=4);X+=4;var R=ft+(1&ft);switch(pt){case"VP8 ":case"VP8L":rt.frames[M]===void 0&&(rt.frames[M]={}),(P=rt.frames[M]).src_off=H?$:X-8,P.src_size=J+ft+8,M++,H&&(H=!1,J=0,$=0);break;case"VP8X":(P=rt.header={}).feature_flags=O[X];var G=X+4;P.canvas_width=1+h(O,G),G+=3,P.canvas_height=1+h(O,G),G+=3;break;case"ALPH":H=!0,J=R+8,$=X-8;break;case"ANIM":(P=rt.header).bgcolor=o(O,X),G=X+4,P.loop_count=(ht=O)[(ut=G)+0]<<0|ht[ut+1]<<8,G+=2;break;case"ANMF":var it,P;(P=rt.frames[M]={}).offset_x=2*h(O,X),X+=3,P.offset_y=2*h(O,X),X+=3,P.width=1+h(O,X),X+=3,P.height=1+h(O,X),X+=3,P.duration=h(O,X),X+=3,it=O[X++],P.dispose=1&it,P.blend=it>>1&1}pt!="ANMF"&&(X+=R)}return rt}}(d,0);m.response=d,m.rgbaoutput=!0,m.dataurl=!1;var v=m.header?m.header:null,C=m.frames?m.frames:null;if(v){v.loop_counter=v.loop_count,u=[v.canvas_height],A=[v.canvas_width];for(var x=0;x<C.length&&C[x].blend!=0;x++);}var E=C[0],L=p.WebPDecodeRGBA(d,E.src_off,E.src_size,A,u);E.rgba=L,E.imgwidth=A[0],E.imgheight=u[0];for(var U=0;U<A[0]*u[0]*4;U++)g[U]=L[U];return this.width=A,this.height=u,this.data=g,this}(function(r){var t=function(){return typeof Ig=="function"},e=function(u,A,g,p){var d=4,m=f;switch(p){case r.image_compression.FAST:d=1,m=c;break;case r.image_compression.MEDIUM:d=6,m=a;break;case r.image_compression.SLOW:d=9,m=n}u=i(u,A,g,m);var v=Ig(u,{level:d});return r.__addimage__.arrayBufferToBinaryString(v)},i=function(u,A,g,p){for(var d,m,v,C=u.length/A,x=new Uint8Array(u.length+C),E=h(),L=0;L<C;L+=1){if(v=L*A,d=u.subarray(v,v+A),p)x.set(p(d,g,m),v+L);else{for(var U,O=E.length,X=[];U<O;U+=1)X[U]=E[U](d,g,m);var rt=o(X.concat());x.set(X[rt],v+L)}m=d}return x},s=function(u){var A=Array.apply([],u);return A.unshift(0),A},c=function(u,A){var g,p=[],d=u.length;p[0]=1;for(var m=0;m<d;m+=1)g=u[m-A]||0,p[m+1]=u[m]-g+256&255;return p},f=function(u,A,g){var p,d=[],m=u.length;d[0]=2;for(var v=0;v<m;v+=1)p=g&&g[v]||0,d[v+1]=u[v]-p+256&255;return d},a=function(u,A,g){var p,d,m=[],v=u.length;m[0]=3;for(var C=0;C<v;C+=1)p=u[C-A]||0,d=g&&g[C]||0,m[C+1]=u[C]+256-(p+d>>>1)&255;return m},n=function(u,A,g){var p,d,m,v,C=[],x=u.length;C[0]=4;for(var E=0;E<x;E+=1)p=u[E-A]||0,d=g&&g[E]||0,m=g&&g[E-A]||0,v=l(p,d,m),C[E+1]=u[E]-v+256&255;return C},l=function(u,A,g){if(u===A&&A===g)return u;var p=Math.abs(A-g),d=Math.abs(u-g),m=Math.abs(u+A-g-g);return p<=d&&p<=m?u:d<=m?A:g},h=function(){return[s,c,f,a,n]},o=function(u){var A=u.map(function(g){return g.reduce(function(p,d){return p+Math.abs(d)},0)});return A.indexOf(Math.min.apply(null,A))};r.processPNG=function(u,A,g,p){var d,m,v,C,x,E,L,U,O,X,rt,M,H,J,$,ht=this.decode.FLATE_DECODE,ut="";if(this.__addimage__.isArrayBuffer(u)&&(u=new Uint8Array(u)),this.__addimage__.isArrayBufferView(u)){if(u=(v=new oE(u)).imgData,m=v.bits,d=v.colorSpace,x=v.colors,[4,6].indexOf(v.colorType)!==-1){if(v.bits===8){O=(U=v.pixelBitlength==32?new Uint32Array(v.decodePixels().buffer):v.pixelBitlength==16?new Uint16Array(v.decodePixels().buffer):new Uint8Array(v.decodePixels().buffer)).length,rt=new Uint8Array(O*v.colors),X=new Uint8Array(O);var pt,ft=v.pixelBitlength-v.bits;for(J=0,$=0;J<O;J++){for(H=U[J],pt=0;pt<ft;)rt[$++]=H>>>pt&255,pt+=v.bits;X[J]=H>>>pt&255}}if(v.bits===16){O=(U=new Uint32Array(v.decodePixels().buffer)).length,rt=new Uint8Array(O*(32/v.pixelBitlength)*v.colors),X=new Uint8Array(O*(32/v.pixelBitlength)),M=v.colors>1,J=0,$=0;for(var R=0;J<O;)H=U[J++],rt[$++]=H>>>0&255,M&&(rt[$++]=H>>>16&255,H=U[J++],rt[$++]=H>>>0&255),X[R++]=H>>>16&255;m=8}p!==r.image_compression.NONE&&t()?(u=e(rt,v.width*v.colors,v.colors,p),L=e(X,v.width,1,p)):(u=rt,L=X,ht=void 0)}if(v.colorType===3&&(d=this.color_spaces.INDEXED,E=v.palette,v.transparency.indexed)){var G=v.transparency.indexed,it=0;for(J=0,O=G.length;J<O;++J)it+=G[J];if((it/=255)===O-1&&G.indexOf(0)!==-1)C=[G.indexOf(0)];else if(it!==O){for(U=v.decodePixels(),X=new Uint8Array(U.length),J=0,O=U.length;J<O;J++)X[J]=G[U[J]];L=e(X,v.width,1)}}var P=function(V){var k;switch(V){case r.image_compression.FAST:k=11;break;case r.image_compression.MEDIUM:k=13;break;case r.image_compression.SLOW:k=14;break;default:k=12}return k}(p);return ht===this.decode.FLATE_DECODE&&(ut="/Predictor "+P+" "),ut+="/Colors "+x+" /BitsPerComponent "+m+" /Columns "+v.width,(this.__addimage__.isArrayBuffer(u)||this.__addimage__.isArrayBufferView(u))&&(u=this.__addimage__.arrayBufferToBinaryString(u)),(L&&this.__addimage__.isArrayBuffer(L)||this.__addimage__.isArrayBufferView(L))&&(L=this.__addimage__.arrayBufferToBinaryString(L)),{alias:g,data:u,index:A,filter:ht,decodeParameters:ut,transparency:C,palette:E,sMask:L,predictor:P,width:v.width,height:v.height,bitsPerComponent:m,colorSpace:d}}}})(Me.API),function(r){r.processGIF89A=function(t,e,i,s){var c=new lE(t),f=c.width,a=c.height,n=[];c.decodeAndBlitFrameRGBA(0,n);var l={data:n,width:f,height:a},h=new jg(100).encode(l,100);return r.processJPEG.call(this,h,e,i,s)},r.processGIF87A=r.processGIF89A}(Me.API),Xs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var t=0;t<r;t++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:i,blue:e,quad:c}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Xs.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[r]()}catch(e){Vr.log("bit decode error:"+e)}},Xs.prototype.bit1=function(){var r,t=Math.ceil(this.width/8),e=t%4;for(r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<t;s++)for(var c=this.datav.getUint8(this.pos++,!0),f=i*this.width*4+8*s*4,a=0;a<8&&8*s+a<this.width;a++){var n=this.palette[c>>7-a&1];this.data[f+4*a]=n.blue,this.data[f+4*a+1]=n.green,this.data[f+4*a+2]=n.red,this.data[f+4*a+3]=255}e!==0&&(this.pos+=4-e)}},Xs.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),t=r%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,s=0;s<r;s++){var c=this.datav.getUint8(this.pos++,!0),f=i*this.width*4+2*s*4,a=c>>4,n=15&c,l=this.palette[a];if(this.data[f]=l.blue,this.data[f+1]=l.green,this.data[f+2]=l.red,this.data[f+3]=255,2*s+1>=this.width)break;l=this.palette[n],this.data[f+4]=l.blue,this.data[f+4+1]=l.green,this.data[f+4+2]=l.red,this.data[f+4+3]=255}t!==0&&(this.pos+=4-t)}},Xs.prototype.bit8=function(){for(var r=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*i;if(s<this.palette.length){var f=this.palette[s];this.data[c]=f.red,this.data[c+1]=f.green,this.data[c+2]=f.blue,this.data[c+3]=255}else this.data[c]=255,this.data[c+1]=255,this.data[c+2]=255,this.data[c+3]=255}r!==0&&(this.pos+=4-r)}},Xs.prototype.bit15=function(){for(var r=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(c&t)/t*255|0,a=(c>>5&t)/t*255|0,n=(c>>10&t)/t*255|0,l=c>>15?255:0,h=i*this.width*4+4*s;this.data[h]=n,this.data[h+1]=a,this.data[h+2]=f,this.data[h+3]=l}this.pos+=r}},Xs.prototype.bit16=function(){for(var r=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,c=0;c<this.width;c++){var f=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(f&t)/t*255|0,n=(f>>5&e)/e*255|0,l=(f>>11)/t*255|0,h=s*this.width*4+4*c;this.data[h]=l,this.data[h+1]=n,this.data[h+2]=a,this.data[h+3]=255}this.pos+=r}},Xs.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),f=t*this.width*4+4*e;this.data[f]=c,this.data[f+1]=s,this.data[f+2]=i,this.data[f+3]=255}this.pos+=this.width%4}},Xs.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=c,this.data[a+1]=s,this.data[a+2]=i,this.data[a+3]=f}},Xs.prototype.getData=function(){return this.data},function(r){r.processBMP=function(t,e,i,s){var c=new Xs(t,!1),f=c.width,a=c.height,n={data:c.getData(),width:f,height:a},l=new jg(100).encode(n,100);return r.processJPEG.call(this,l,e,i,s)}}(Me.API),ey.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(t,e,i,s){var c=new ey(t),f=c.width,a=c.height,n={data:c.getData(),width:f,height:a},l=new jg(100).encode(n,100);return r.processJPEG.call(this,l,e,i,s)}}(Me.API),Me.API.processRGBA=function(r,t,e){for(var i=r.data,s=i.length,c=new Uint8Array(s/4*3),f=new Uint8Array(s/4),a=0,n=0,l=0;l<s;l+=4){var h=i[l],o=i[l+1],u=i[l+2],A=i[l+3];c[a++]=h,c[a++]=o,c[a++]=u,f[n++]=A}var g=this.__addimage__.arrayBufferToBinaryString(c);return{alpha:this.__addimage__.arrayBufferToBinaryString(f),data:g,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Me.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ql=Me.API,Hu=ql.getCharWidthsArray=function(r,t){var e,i,s=(t=t||{}).font||this.internal.getFont(),c=t.fontSize||this.internal.getFontSize(),f=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:s.metadata.Unicode.widths,n=a.fof?a.fof:1,l=t.kerning?t.kerning:s.metadata.Unicode.kerning,h=l.fof?l.fof:1,o=t.doKerning!==!1,u=0,A=r.length,g=0,p=a[0]||n,d=[];for(e=0;e<A;e++)i=r.charCodeAt(e),typeof s.metadata.widthOfString=="function"?d.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(i))+f*(1e3/c)||0)/1e3):(u=o&&dr(l[i])==="object"&&!isNaN(parseInt(l[i][g],10))?l[i][g]/h:0,d.push((a[i]||p)/n+u)),g=i;return d},Y1=ql.getStringUnitWidth=function(r,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return ql.processArabic&&(r=ql.processArabic(r)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(r,e,s)/e:Hu.apply(this,arguments).reduce(function(c,f){return c+f},0)},J1=function(r,t,e,i){for(var s=[],c=0,f=r.length,a=0;c!==f&&a+t[c]<e;)a+=t[c],c++;s.push(r.slice(0,c));var n=c;for(a=0;c!==f;)a+t[c]>i&&(s.push(r.slice(n,c)),a=0,n=c),a+=t[c],c++;return n!==c&&s.push(r.slice(n,c)),s},Z1=function(r,t,e){e||(e={});var i,s,c,f,a,n,l,h=[],o=[h],u=e.textIndent||0,A=0,g=0,p=r.split(" "),d=Hu.apply(this,[" ",e])[0];if(n=e.lineIndent===-1?p[0].length+2:e.lineIndent||0){var m=Array(n).join(" "),v=[];p.map(function(x){(x=x.split(/\s*\n/)).length>1?v=v.concat(x.map(function(E,L){return(L&&E.length?`
`:"")+E})):v.push(x[0])}),p=v,n=Y1.apply(this,[m,e])}for(c=0,f=p.length;c<f;c++){var C=0;if(i=p[c],n&&i[0]==`
`&&(i=i.substr(1),C=1),u+A+(g=(s=Hu.apply(this,[i,e])).reduce(function(x,E){return x+E},0))>t||C){if(g>t){for(a=J1.apply(this,[i,s,t-(u+A),t]),h.push(a.shift()),h=[a.pop()];a.length;)o.push([a.shift()]);g=s.slice(i.length-(h[0]?h[0].length:0)).reduce(function(x,E){return x+E},0)}else h=[i];o.push(h),u=g+n,A=d}else h.push(i),u+=A+g,A=d}return l=n?function(x,E){return(E?m:"")+x.join(" ")}:function(x){return x.join(" ")},o.map(l)},ql.splitTextToSize=function(r,t,e){var i,s=(e=e||{}).fontSize||this.internal.getFontSize(),c=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var o=this.internal.getFont(h.fontName,h.fontStyle);return o.metadata.Unicode?{widths:o.metadata.Unicode.widths||{0:1},kerning:o.metadata.Unicode.kerning||{}}:{font:o.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);i=Array.isArray(r)?r:String(r).split(/\r?\n/);var f=1*this.internal.scaleFactor*t/s;c.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/s:0,c.lineIndent=e.lineIndent;var a,n,l=[];for(a=0,n=i.length;a<n;a++)l=l.concat(Z1.apply(this,[i[a],f,c]));return l},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},i={},s=0;s<t.length;s++)e[t[s]]="0123456789abcdef"[s],i["0123456789abcdef"[s]]=t[s];var c=function(o){return"0x"+parseInt(o,10).toString(16)},f=r.__fontmetrics__.compress=function(o){var u,A,g,p,d=["{"];for(var m in o){if(u=o[m],isNaN(parseInt(m,10))?A="'"+m+"'":(m=parseInt(m,10),A=(A=c(m).slice(2)).slice(0,-1)+i[A.slice(-1)]),typeof u=="number")u<0?(g=c(u).slice(3),p="-"):(g=c(u).slice(2),p=""),g=p+g.slice(0,-1)+i[g.slice(-1)];else{if(dr(u)!=="object")throw new Error("Don't know what to do with value type "+dr(u)+".");g=f(u)}d.push(A+g)}return d.push("}"),d.join("")},a=r.__fontmetrics__.uncompress=function(o){if(typeof o!="string")throw new Error("Invalid argument passed to uncompress.");for(var u,A,g,p,d={},m=1,v=d,C=[],x="",E="",L=o.length-1,U=1;U<L;U+=1)(p=o[U])=="'"?u?(g=u.join(""),u=void 0):u=[]:u?u.push(p):p=="{"?(C.push([v,g]),v={},g=void 0):p=="}"?((A=C.pop())[0][A[1]]=v,g=void 0,v=A[0]):p=="-"?m=-1:g===void 0?e.hasOwnProperty(p)?(x+=e[p],g=parseInt(x,16)*m,m=1,x=""):x+=p:e.hasOwnProperty(p)?(E+=e[p],v[g]=parseInt(E,16)*m,m=1,g=void 0,E=""):E+=p;return d},n={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},l={Unicode:{Courier:n,"Courier-Bold":n,"Courier-BoldOblique":n,"Courier-Oblique":n,Helvetica:n,"Helvetica-Bold":n,"Helvetica-BoldOblique":n,"Helvetica-Oblique":n,"Times-Roman":n,"Times-Bold":n,"Times-BoldItalic":n,"Times-Italic":n}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(o){var u=o.font,A=h.Unicode[u.postScriptName];A&&(u.metadata.Unicode={},u.metadata.Unicode.widths=A.widths,u.metadata.Unicode.kerning=A.kerning);var g=l.Unicode[u.postScriptName];g&&(u.metadata.Unicode.encoding=g,u.encoding=g.codePages[0])}])}(Me.API),function(r){var t=function(e){for(var i=e.length,s=new Uint8Array(i),c=0;c<i;c++)s[c]=e.charCodeAt(c);return s};r.API.events.push(["addFont",function(e){var i=void 0,s=e.font,c=e.instance;if(!s.isStandardFont){if(c===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(i=c.existsFileInVFS(s.postScriptName)===!1?c.loadFile(s.postScriptName):c.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(f,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(mh(a)),f.metadata=r.API.TTFFont.open(a),f.metadata.Unicode=f.metadata.Unicode||{encoding:{},kerning:{},widths:[]},f.metadata.glyIdsUsed=[0]})(s,i)}}])}(Me),function(r){function t(){return(De.canvg?Promise.resolve(De.canvg):Promise.resolve().then(function(){return c6})).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}Me.API.addSvgAsImage=function(e,i,s,c,f,a,n,l){if(isNaN(i)||isNaN(s))throw Vr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(c)||isNaN(f))throw Vr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=c,h.height=f;var o=h.getContext("2d");o.fillStyle="#fff",o.fillRect(0,0,h.width,h.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return t().then(function(g){return g.fromString(o,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(u)}).then(function(){A.addImage(h.toDataURL("image/jpeg",1),i,s,c,f,n,l)})}}(),Me.API.putTotalPages=function(r){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(r,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var s=0;s<this.internal.pages[i].length;s++)this.internal.pages[i][s]=this.internal.pages[i][s].replace(t,e);return this},Me.API.viewerPreferences=function(r,t){var e;r=r||{},t=t||!1;var i,s,c,f={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(f),n=[],l=0,h=0,o=0;function u(g,p){var d,m=!1;for(d=0;d<g.length;d+=1)g[d]===p&&(m=!0);return m}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(f)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,r==="reset"||t===!0){var A=a.length;for(o=0;o<A;o+=1)e[a[o]].value=e[a[o]].defaultValue,e[a[o]].explicitSet=!1}if(dr(r)==="object"){for(s in r)if(c=r[s],u(a,s)&&c!==void 0){if(e[s].type==="boolean"&&typeof c=="boolean")e[s].value=c;else if(e[s].type==="name"&&u(e[s].valueSet,c))e[s].value=c;else if(e[s].type==="integer"&&Number.isInteger(c))e[s].value=c;else if(e[s].type==="array"){for(l=0;l<c.length;l+=1)if(i=!0,c[l].length===1&&typeof c[l][0]=="number")n.push(String(c[l]-1));else if(c[l].length>1){for(h=0;h<c[l].length;h+=1)typeof c[l][h]!="number"&&(i=!1);i===!0&&n.push([c[l][0]-1,c[l][1]-1].join(" "))}e[s].value="["+n.join(" ")+"]"}else e[s].value=e[s].defaultValue;e[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,p=[];for(g in e)e[g].explicitSet===!0&&(e[g].type==="name"?p.push("/"+g+" /"+e[g].value):p.push("/"+g+" "+e[g].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(r){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),c=unescape(encodeURIComponent(i)),f=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),n=unescape(encodeURIComponent("</x:xmpmeta>")),l=c.length+f.length+a.length+s.length+n.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(s+c+f+a+n),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(i,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(Me.API),function(r){var t=r.API,e=t.pdfEscape16=function(c,f){for(var a,n=f.metadata.Unicode.widths,l=["","0","00","000","0000"],h=[""],o=0,u=c.length;o<u;++o){if(a=f.metadata.characterToGlyph(c.charCodeAt(o)),f.metadata.glyIdsUsed.push(a),f.metadata.toUnicode[a]=c.charCodeAt(o),n.indexOf(a)==-1&&(n.push(a),n.push([parseInt(f.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(l[4-a.length],a)}return h.join("")},i=function(c){var f,a,n,l,h,o,u;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,n=[],o=0,u=(a=Object.keys(c).sort(function(A,g){return A-g})).length;o<u;o++)f=a[o],n.length>=100&&(h+=`
`+n.length+` beginbfchar
`+n.join(`
`)+`
endbfchar`,n=[]),c[f]!==void 0&&c[f]!==null&&typeof c[f].toString=="function"&&(l=("0000"+c[f].toString(16)).slice(-4),f=("0000"+(+f).toString(16)).slice(-4),n.push("<"+f+"><"+l+">"));return n.length&&(h+=`
`+n.length+` beginbfchar
`+n.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(c){(function(f){var a=f.font,n=f.out,l=f.newObject,h=f.putStream;if(a.metadata instanceof r.API.TTFFont&&a.encoding==="Identity-H"){for(var o=a.metadata.Unicode.widths,u=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),A="",g=0;g<u.length;g++)A+=String.fromCharCode(u[g]);var p=l();h({data:A,addLength1:!0,objectId:p}),n("endobj");var d=l();h({data:i(a.metadata.toUnicode),addLength1:!0,objectId:d}),n("endobj");var m=l();n("<<"),n("/Type /FontDescriptor"),n("/FontName /"+Vl(a.fontName)),n("/FontFile2 "+p+" 0 R"),n("/FontBBox "+r.API.PDFObject.convert(a.metadata.bbox)),n("/Flags "+a.metadata.flags),n("/StemV "+a.metadata.stemV),n("/ItalicAngle "+a.metadata.italicAngle),n("/Ascent "+a.metadata.ascender),n("/Descent "+a.metadata.decender),n("/CapHeight "+a.metadata.capHeight),n(">>"),n("endobj");var v=l();n("<<"),n("/Type /Font"),n("/BaseFont /"+Vl(a.fontName)),n("/FontDescriptor "+m+" 0 R"),n("/W "+r.API.PDFObject.convert(o)),n("/CIDToGIDMap /Identity"),n("/DW 1000"),n("/Subtype /CIDFontType2"),n("/CIDSystemInfo"),n("<<"),n("/Supplement 0"),n("/Registry (Adobe)"),n("/Ordering ("+a.encoding+")"),n(">>"),n(">>"),n("endobj"),a.objectNumber=l(),n("<<"),n("/Type /Font"),n("/Subtype /Type0"),n("/ToUnicode "+d+" 0 R"),n("/BaseFont /"+Vl(a.fontName)),n("/Encoding /"+a.encoding),n("/DescendantFonts ["+v+" 0 R]"),n(">>"),n("endobj"),a.isAlreadyPutted=!0}})(c)}]),t.events.push(["putFont",function(c){(function(f){var a=f.font,n=f.out,l=f.newObject,h=f.putStream;if(a.metadata instanceof r.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var o=a.metadata.rawData,u="",A=0;A<o.length;A++)u+=String.fromCharCode(o[A]);var g=l();h({data:u,addLength1:!0,objectId:g}),n("endobj");var p=l();h({data:i(a.metadata.toUnicode),addLength1:!0,objectId:p}),n("endobj");var d=l();n("<<"),n("/Descent "+a.metadata.decender),n("/CapHeight "+a.metadata.capHeight),n("/StemV "+a.metadata.stemV),n("/Type /FontDescriptor"),n("/FontFile2 "+g+" 0 R"),n("/Flags 96"),n("/FontBBox "+r.API.PDFObject.convert(a.metadata.bbox)),n("/FontName /"+Vl(a.fontName)),n("/ItalicAngle "+a.metadata.italicAngle),n("/Ascent "+a.metadata.ascender),n(">>"),n("endobj"),a.objectNumber=l();for(var m=0;m<a.metadata.hmtx.widths.length;m++)a.metadata.hmtx.widths[m]=parseInt(a.metadata.hmtx.widths[m]*(1e3/a.metadata.head.unitsPerEm));n("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+Vl(a.fontName)+"/FontDescriptor "+d+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),n("endobj"),a.isAlreadyPutted=!0}})(c)}]);var s=function(c){var f,a=c.text||"",n=c.x,l=c.y,h=c.options||{},o=c.mutex||{},u=o.pdfEscape,A=o.activeFontKey,g=o.fonts,p=A,d="",m=0,v="",C=g[p].encoding;if(g[p].encoding!=="Identity-H")return{text:a,x:n,y:l,options:h,mutex:o};for(v=a,p=A,Array.isArray(a)&&(v=a[0]),m=0;m<v.length;m+=1)g[p].metadata.hasOwnProperty("cmap")&&(f=g[p].metadata.cmap.unicode.codeMap[v[m].charCodeAt(0)]),f||v[m].charCodeAt(0)<256&&g[p].metadata.hasOwnProperty("Unicode")?d+=v[m]:d+="";var x="";return parseInt(p.slice(1))<14||C==="WinAnsiEncoding"?x=u(d,p).split("").map(function(E){return E.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(x=e(d,g[p])),o.isHex=!0,{text:x,x:n,y:l,options:h,mutex:o}};t.events.push(["postProcessText",function(c){var f=c.text||"",a=[],n={text:f,x:c.x,y:c.y,options:c.options,mutex:c.mutex};if(Array.isArray(f)){var l=0;for(l=0;l<f.length;l+=1)Array.isArray(f[l])&&f[l].length===3?a.push([s(Object.assign({},n,{text:f[l][0]})).text,f[l][1],f[l][2]]):a.push(s(Object.assign({},n,{text:f[l]})).text);c.text=a}else c.text=s(Object.assign({},n,{text:f})).text}])}(Me),function(r){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},r.addFileToVFS=function(e,i){return t.call(this),this.internal.vFS[e]=i,this},r.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(Me.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(i){var s,c,f,a,n,l,h,o=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},d=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,C=0;this.__bidiEngine__={};var x=function(M){var H=M.charCodeAt(),J=H>>8,$=p[J];return $!==void 0?o[256*$+(255&H)]:J===252||J===253?"AL":m.test(J)?"L":J===8?"R":"N"},E=function(M){for(var H,J=0;J<M.length;J++){if((H=x(M.charAt(J)))==="L")return!1;if(H==="R")return!0}return!1},L=function(M,H,J,$){var ht,ut,pt,ft,R=H[$];switch(R){case"L":case"R":v=!1;break;case"N":case"AN":break;case"EN":v&&(R="AN");break;case"AL":v=!0,R="R";break;case"WS":R="N";break;case"CS":$<1||$+1>=H.length||(ht=J[$-1])!=="EN"&&ht!=="AN"||(ut=H[$+1])!=="EN"&&ut!=="AN"?R="N":v&&(ut="AN"),R=ut===ht?ut:"N";break;case"ES":R=(ht=$>0?J[$-1]:"B")==="EN"&&$+1<H.length&&H[$+1]==="EN"?"EN":"N";break;case"ET":if($>0&&J[$-1]==="EN"){R="EN";break}if(v){R="N";break}for(pt=$+1,ft=H.length;pt<ft&&H[pt]==="ET";)pt++;R=pt<ft&&H[pt]==="EN"?"EN":"N";break;case"NSM":if(f&&!a){for(ft=H.length,pt=$+1;pt<ft&&H[pt]==="NSM";)pt++;if(pt<ft){var G=M[$],it=G>=1425&&G<=2303||G===64286;if(ht=H[pt],it&&(ht==="R"||ht==="AL")){R="R";break}}}R=$<1||(ht=H[$-1])==="B"?"N":J[$-1];break;case"B":v=!1,s=!0,R=C;break;case"S":c=!0,R="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"BN":R="N"}return R},U=function(M,H,J){var $=M.split("");return J&&O($,J,{hiLevel:C}),$.reverse(),H&&H.reverse(),$.join("")},O=function(M,H,J){var $,ht,ut,pt,ft,R=-1,G=M.length,it=0,P=[],V=C?A:u,k=[];for(v=!1,s=!1,c=!1,ht=0;ht<G;ht++)k[ht]=x(M[ht]);for(ut=0;ut<G;ut++){if(ft=it,P[ut]=L(M,k,P,ut),$=240&(it=V[ft][g[P[ut]]]),it&=15,H[ut]=pt=V[it][5],$>0)if($===16){for(ht=R;ht<ut;ht++)H[ht]=1;R=-1}else R=-1;if(V[it][6])R===-1&&(R=ut);else if(R>-1){for(ht=R;ht<ut;ht++)H[ht]=pt;R=-1}k[ut]==="B"&&(H[ut]=0),J.hiLevel|=pt}c&&function(N,Z,st){for(var ct=0;ct<st;ct++)if(N[ct]==="S"){Z[ct]=C;for(var ot=ct-1;ot>=0&&N[ot]==="WS";ot--)Z[ot]=C}}(k,H,G)},X=function(M,H,J,$,ht){if(!(ht.hiLevel<M)){if(M===1&&C===1&&!s)return H.reverse(),void(J&&J.reverse());for(var ut,pt,ft,R,G=H.length,it=0;it<G;){if($[it]>=M){for(ft=it+1;ft<G&&$[ft]>=M;)ft++;for(R=it,pt=ft-1;R<pt;R++,pt--)ut=H[R],H[R]=H[pt],H[pt]=ut,J&&(ut=J[R],J[R]=J[pt],J[pt]=ut);it=ft}it++}}},rt=function(M,H,J){var $=M.split(""),ht={hiLevel:C};return J||(J=[]),O($,J,ht),function(ut,pt,ft){if(ft.hiLevel!==0&&h)for(var R,G=0;G<ut.length;G++)pt[G]===1&&(R=d.indexOf(ut[G]))>=0&&(ut[G]=d[R+1])}($,J,ht),X(2,$,H,J,ht),X(1,$,H,J,ht),$.join("")};return this.__bidiEngine__.doBidiReorder=function(M,H,J){if(function(ht,ut){if(ut)for(var pt=0;pt<ht.length;pt++)ut[pt]=pt;a===void 0&&(a=E(ht)),l===void 0&&(l=E(ht))}(M,H),f||!n||l)if(f&&n&&a^l)C=a?1:0,M=U(M,H,J);else if(!f&&n&&l)C=a?1:0,M=rt(M,H,J),M=U(M,H);else if(!f||a||n||l){if(f&&!n&&a^l)M=U(M,H),a?(C=0,M=rt(M,H,J)):(C=1,M=rt(M,H,J),M=U(M,H));else if(f&&a&&!n&&l)C=1,M=rt(M,H,J),M=U(M,H);else if(!f&&!n&&a^l){var $=h;a?(C=1,M=rt(M,H,J),C=0,h=!1,M=rt(M,H,J),h=$):(C=0,M=rt(M,H,J),M=U(M,H),C=1,h=!1,M=rt(M,H,J),h=$,M=U(M,H))}}else C=0,M=rt(M,H,J);else C=a?1:0,M=rt(M,H,J);return M},this.__bidiEngine__.setOptions=function(M){M&&(f=M.isInputVisual,n=M.isOutputVisual,a=M.isInputRtl,l=M.isOutputRtl,h=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(i){var s=i.text,c=(i.x,i.y,i.options||{}),f=(i.mutex,c.lang,[]);if(c.isInputVisual=typeof c.isInputVisual!="boolean"||c.isInputVisual,e.setOptions(c),Object.prototype.toString.call(s)==="[object Array]"){var a=0;for(f=[],a=0;a<s.length;a+=1)Object.prototype.toString.call(s[a])==="[object Array]"?f.push([e.doBidiReorder(s[a][0]),s[a][1],s[a][2]]):f.push([e.doBidiReorder(s[a])]);i.text=f}else i.text=e.doBidiReorder(s);e.setOptions({isInputVisual:!0})}])}(Me),Me.API.TTFFont=function(){function r(t){var e;if(this.rawData=t,e=this.contents=new $A(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new SE(this),this.registerTTF()}return r.open=function(t){return new r(t)},r.prototype.parse=function(){return this.directory=new cE(this.contents),this.head=new uE(this),this.name=new mE(this),this.cmap=new iy(this),this.toUnicode={},this.hhea=new fE(this),this.maxp=new vE(this),this.hmtx=new yE(this),this.post=new gE(this),this.os2=new dE(this),this.loca=new BE(this),this.glyf=new wE(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var t,e,i,s,c;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var f,a,n,l;for(l=[],f=0,a=(n=this.bbox).length;f<a;f++)t=n[f],l.push(Math.round(t*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(i=255&(s=this.post.italic_angle),32768&(e=s>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(c=this.familyClass)===1||c===2||c===3||c===4||c===5||c===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},r.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},r.prototype.widthOfString=function(t,e,i){var s,c,f,a;for(f=0,c=0,a=(t=""+t).length;0<=a?c<a:c>a;c=0<=a?++c:--c)s=t.charCodeAt(c),f+=this.widthOfGlyph(this.characterToGlyph(s))+i*(1e3/e)||0;return f*(e/1e3)},r.prototype.lineHeight=function(t,e){var i;return e==null&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},r}();var zs,$A=function(){function r(t){this.data=t??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(t){return this.data[this.pos++]=t},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},r.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},r.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},r.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},r.prototype.writeString=function(t){var e,i,s;for(s=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)s.push(this.writeByte(t.charCodeAt(e)));return s},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(t){return this.writeInt16(t)},r.prototype.readLongLong=function(){var t,e,i,s,c,f,a,n;return t=this.readByte(),e=this.readByte(),i=this.readByte(),s=this.readByte(),c=this.readByte(),f=this.readByte(),a=this.readByte(),n=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^s)+16777216*(255^c)+65536*(255^f)+256*(255^a)+(255^n)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*s+16777216*c+65536*f+256*a+n},r.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(t){return this.writeInt32(t)},r.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},r.prototype.write=function(t){var e,i,s,c;for(c=[],i=0,s=t.length;i<s;i++)e=t[i],c.push(this.writeByte(e));return c},r}(),cE=function(){var r;function t(e){var i,s,c;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},s=0,c=this.tableCount;0<=c?s<c:s>c;s=0<=c?++s:--s)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(e){var i,s,c,f,a,n,l,h,o,u,A,g,p;for(p in A=Object.keys(e).length,n=Math.log(2),o=16*Math.floor(Math.log(A)/n),f=Math.floor(o/n),h=16*A-o,(s=new $A).writeInt(this.scalarType),s.writeShort(A),s.writeShort(o),s.writeShort(f),s.writeShort(h),c=16*A,l=s.pos+c,a=null,g=[],e)for(u=e[p],s.writeString(p),s.writeInt(r(u)),s.writeInt(l),s.writeInt(u.length),g=g.concat(u),p==="head"&&(a=l),l+=u.length;l%4;)g.push(0),l++;return s.write(g),i=2981146554-r(s.data),s.pos=a+8,s.writeUInt32(i),s.data},r=function(e){var i,s,c,f;for(e=ny.call(e);e.length%4;)e.push(0);for(c=new $A(e),s=0,i=0,f=e.length;i<f;i=i+=4)s+=c.readUInt32();return 4294967295&s},t}(),hE={}.hasOwnProperty,wa=function(r,t){for(var e in t)hE.call(t,e)&&(r[e]=t[e]);function i(){this.constructor=r}return i.prototype=t.prototype,r.prototype=new i,r.__super__=t.prototype,r};zs=function(){function r(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var uE=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,zs),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var i;return(i=new $A).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(e),i.writeShort(this.glyphDataFormat),i.data},t}(),ry=function(){function r(t,e){var i,s,c,f,a,n,l,h,o,u,A,g,p,d,m,v,C;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),o=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(n=0;n<256;++n)this.codeMap[n]=t.readByte();break;case 4:for(A=t.readUInt16(),u=A/2,t.pos+=6,c=function(){var x,E;for(E=[],n=x=0;0<=u?x<u:x>u;n=0<=u?++x:--x)E.push(t.readUInt16());return E}(),t.pos+=2,p=function(){var x,E;for(E=[],n=x=0;0<=u?x<u:x>u;n=0<=u?++x:--x)E.push(t.readUInt16());return E}(),l=function(){var x,E;for(E=[],n=x=0;0<=u?x<u:x>u;n=0<=u?++x:--x)E.push(t.readUInt16());return E}(),h=function(){var x,E;for(E=[],n=x=0;0<=u?x<u:x>u;n=0<=u?++x:--x)E.push(t.readUInt16());return E}(),s=(this.length-t.pos+this.offset)/2,a=function(){var x,E;for(E=[],n=x=0;0<=s?x<s:x>s;n=0<=s?++x:--x)E.push(t.readUInt16());return E}(),n=m=0,C=c.length;m<C;n=++m)for(d=c[n],i=v=g=p[n];g<=d?v<=d:v>=d;i=g<=d?++v:--v)h[n]===0?f=i+l[n]:(f=a[h[n]/2+(i-g)-(u-n)]||0)!==0&&(f+=l[n]),this.codeMap[i]=65535&f}t.pos=o}return r.encode=function(t,e){var i,s,c,f,a,n,l,h,o,u,A,g,p,d,m,v,C,x,E,L,U,O,X,rt,M,H,J,$,ht,ut,pt,ft,R,G,it,P,V,k,N,Z,st,ct,ot,wt,_t,Nt;switch($=new $A,f=Object.keys(t).sort(function(vt,mt){return vt-mt}),e){case"macroman":for(p=0,d=function(){var vt=[];for(g=0;g<256;++g)vt.push(0);return vt}(),v={0:0},c={},ht=0,R=f.length;ht<R;ht++)v[ot=t[s=f[ht]]]==null&&(v[ot]=++p),c[s]={old:t[s],new:v[t[s]]},d[s]=v[t[s]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(d),{charMap:c,subtable:$.data,maxGlyphID:p+1};case"unicode":for(H=[],o=[],C=0,v={},i={},m=l=null,ut=0,G=f.length;ut<G;ut++)v[E=t[s=f[ut]]]==null&&(v[E]=++C),i[s]={old:E,new:v[E]},a=v[E]-s,m!=null&&a===l||(m&&o.push(m),H.push(s),l=a),m=s;for(m&&o.push(m),o.push(65535),H.push(65535),rt=2*(X=H.length),O=2*Math.pow(Math.log(X)/Math.LN2,2),u=Math.log(O/2)/Math.LN2,U=2*X-O,n=[],L=[],A=[],g=pt=0,it=H.length;pt<it;g=++pt){if(M=H[g],h=o[g],M===65535){n.push(0),L.push(0);break}if(M-(J=i[M].new)>=32768)for(n.push(0),L.push(2*(A.length+X-g)),s=ft=M;M<=h?ft<=h:ft>=h;s=M<=h?++ft:--ft)A.push(i[s].new);else n.push(J-M),L.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*X+2*A.length),$.writeUInt16(0),$.writeUInt16(rt),$.writeUInt16(O),$.writeUInt16(u),$.writeUInt16(U),st=0,P=o.length;st<P;st++)s=o[st],$.writeUInt16(s);for($.writeUInt16(0),ct=0,V=H.length;ct<V;ct++)s=H[ct],$.writeUInt16(s);for(wt=0,k=n.length;wt<k;wt++)a=n[wt],$.writeUInt16(a);for(_t=0,N=L.length;_t<N;_t++)x=L[_t],$.writeUInt16(x);for(Nt=0,Z=A.length;Nt<Z;Nt++)p=A[Nt],$.writeUInt16(p);return{charMap:i,subtable:$.data,maxGlyphID:C+1}}},r}(),iy=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,zs),t.prototype.tag="cmap",t.prototype.parse=function(e){var i,s,c;for(e.pos=this.offset,this.version=e.readUInt16(),c=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=c?s<c:s>c;s=0<=c?++s:--s)i=new ry(e,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(e,i){var s,c;return i==null&&(i="macroman"),s=ry.encode(e,i),(c=new $A).writeUInt16(0),c.writeUInt16(1),s.table=c.data.concat(s.subtable),s},t}(),fE=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,zs),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),dE=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,zs),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var i,s;for(s=[],i=0;i<10;++i)s.push(e.readByte());return s}(),this.charRange=function(){var i,s;for(s=[],i=0;i<4;++i)s.push(e.readInt());return s}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var i,s;for(s=[],i=0;i<2;i=++i)s.push(e.readInt());return s}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),gE=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,zs),t.prototype.tag="post",t.prototype.parse=function(e){var i,s,c;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var f;for(s=e.readUInt16(),this.glyphNameIndex=[],f=0;0<=s?f<s:f>s;f=0<=s?++f:--f)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],c=[];e.pos<this.offset+this.length;)i=e.readByte(),c.push(this.names.push(e.readString(i)));return c;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 196608:break;case 262144:return this.map=(function(){var a,n,l;for(l=[],f=a=0,n=this.file.maxp.numGlyphs;0<=n?a<n:a>n;f=0<=n?++a:--a)l.push(e.readUInt32());return l}).call(this)}},t}(),pE=function(r,t){this.raw=r,this.length=r.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},mE=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,zs),t.prototype.tag="name",t.prototype.parse=function(e){var i,s,c,f,a,n,l,h,o,u,A;for(e.pos=this.offset,e.readShort(),i=e.readShort(),n=e.readShort(),s=[],f=0;0<=i?f<i:f>i;f=0<=i?++f:--f)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+n+e.readShort()});for(l={},f=o=0,u=s.length;o<u;f=++o)c=s[f],e.pos=c.offset,h=e.readString(c.length),a=new pE(h,c),l[A=c.nameID]==null&&(l[A]=[]),l[c.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),vE=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,zs),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),yE=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,zs),t.prototype.tag="hmtx",t.prototype.parse=function(e){var i,s,c,f,a,n,l;for(e.pos=this.offset,this.metrics=[],i=0,n=this.file.hhea.numberOfMetrics;0<=n?i<n:i>n;i=0<=n?++i:--i)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(c=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,o;for(o=[],i=h=0;0<=c?h<c:h>c;i=0<=c?++h:--h)o.push(e.readInt16());return o}(),this.widths=(function(){var h,o,u,A;for(A=[],h=0,o=(u=this.metrics).length;h<o;h++)f=u[h],A.push(f.advance);return A}).call(this),s=this.widths[this.widths.length-1],l=[],i=a=0;0<=c?a<c:a>c;i=0<=c?++a:--a)l.push(this.widths.push(s));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),ny=[].slice,wE=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,zs),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var i,s,c,f,a,n,l,h,o,u;return e in this.cache?this.cache[e]:(f=this.file.loca,i=this.file.contents,s=f.indexOf(e),(c=f.lengthOf(e))===0?this.cache[e]=null:(i.pos=this.offset+s,a=(n=new $A(i.read(c))).readShort(),h=n.readShort(),u=n.readShort(),l=n.readShort(),o=n.readShort(),this.cache[e]=a===-1?new CE(n,h,u,l,o):new bE(n,a,h,u,l,o),this.cache[e]))},t.prototype.encode=function(e,i,s){var c,f,a,n,l;for(a=[],f=[],n=0,l=i.length;n<l;n++)c=e[i[n]],f.push(a.length),c&&(a=a.concat(c.encode(s)));return f.push(a.length),{table:a,offsets:f}},t}(),bE=function(){function r(t,e,i,s,c,f){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=s,this.xMax=c,this.yMax=f,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),CE=function(){function r(t,e,i,s,c){var f,a;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=s,this.yMax=c,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],f=this.raw;a=f.readShort(),this.glyphOffsets.push(f.pos),this.glyphIDs.push(f.readUInt16()),32&a;)f.pos+=1&a?4:2,128&a?f.pos+=8:64&a?f.pos+=4:8&a&&(f.pos+=2)}return r.prototype.encode=function(){var t,e,i;for(e=new $A(ny.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},r}(),BE=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,zs),t.prototype.tag="loca",t.prototype.parse=function(e){var i,s;return e.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var c,f;for(f=[],s=0,c=this.length;s<c;s+=2)f.push(2*e.readUInt16());return f}).call(this):(function(){var c,f;for(f=[],s=0,c=this.length;s<c;s+=4)f.push(e.readUInt32());return f}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,i){for(var s=new Uint32Array(this.offsets.length),c=0,f=0,a=0;a<s.length;++a)if(s[a]=c,f<i.length&&i[f]==a){++f,s[a]=c;var n=this.offsets[a],l=this.offsets[a+1]-n;l>0&&(c+=l)}for(var h=new Array(4*s.length),o=0;o<s.length;++o)h[4*o+3]=255&s[o],h[4*o+2]=(65280&s[o])>>8,h[4*o+1]=(16711680&s[o])>>16,h[4*o]=(4278190080&s[o])>>24;return h},t}(),SE=function(){function r(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var t,e,i,s,c;for(e in s=this.font.cmap.tables[0].codeMap,t={},c=this.subset)i=c[e],t[e]=s[i];return t},r.prototype.glyphsFor=function(t){var e,i,s,c,f,a,n;for(s={},f=0,a=t.length;f<a;f++)s[c=t[f]]=this.font.glyf.glyphFor(c);for(c in e=[],s)(i=s[c])!=null&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(c in n=this.glyphsFor(e))i=n[c],s[c]=i;return s},r.prototype.encode=function(t,e){var i,s,c,f,a,n,l,h,o,u,A,g,p,d,m;for(s in i=iy.encode(this.generateCmap(),"unicode"),f=this.glyphsFor(t),A={0:0},m=i.charMap)A[(n=m[s]).old]=n.new;for(g in u=i.maxGlyphID,f)g in A||(A[g]=u++);return h=function(v){var C,x;for(C in x={},v)x[v[C]]=C;return x}(A),o=Object.keys(h).sort(function(v,C){return v-C}),p=function(){var v,C,x;for(x=[],v=0,C=o.length;v<C;v++)a=o[v],x.push(h[a]);return x}(),c=this.font.glyf.encode(f,p,A),l=this.font.loca.encode(c.offsets,p),d={cmap:this.font.cmap.raw(),glyf:c.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(d["OS/2"]=this.font.os2.raw()),this.font.directory.encode(d)},r}();Me.API.PDFObject=function(){var r;function t(){}return r=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},t.convert=function(e){var i,s,c,f;if(Array.isArray(e))return"["+function(){var a,n,l;for(l=[],a=0,n=e.length;a<n;a++)i=e[a],l.push(t.convert(i));return l}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+r(e.getUTCFullYear(),4)+r(e.getUTCMonth(),2)+r(e.getUTCDate(),2)+r(e.getUTCHours(),2)+r(e.getUTCMinutes(),2)+r(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(s in c=["<<"],e)f=e[s],c.push("/"+s+" "+t.convert(f));return c.push(">>"),c.join(`
`)}return""+e},t}();var YA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qo(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}/*! https://mths.be/cssesc v3.0.0 by @mathias */var xE={},_E=xE.hasOwnProperty,EE=function(t,e){if(!t)return e;var i={};for(var s in e)i[s]=_E.call(t,s)?t[s]:e[s];return i},FE=/[ -,\.\/:-@\[-\^`\{-~]/,TE=/[ -,\.\/:-@\[\]\^`\{-~]/,LE=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,Kg=function r(t,e){e=EE(e,r.options),e.quotes!="single"&&e.quotes!="double"&&(e.quotes="single");for(var i=e.quotes=="double"?'"':"'",s=e.isIdentifier,c=t.charAt(0),f="",a=0,n=t.length;a<n;){var l=t.charAt(a++),h=l.charCodeAt(),o=void 0;if(h<32||h>126){if(h>=55296&&h<=56319&&a<n){var u=t.charCodeAt(a++);(u&64512)==56320?h=((h&1023)<<10)+(u&1023)+65536:a--}o="\\"+h.toString(16).toUpperCase()+" "}else e.escapeEverything?FE.test(l)?o="\\"+l:o="\\"+h.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(l)?o="\\"+h.toString(16).toUpperCase()+" ":l=="\\"||!s&&(l=='"'&&i==l||l=="'"&&i==l)||s&&TE.test(l)?o="\\"+l:o=l;f+=o}return s&&(/^-[-\d]/.test(f)?f="\\-"+f.slice(1):/\d/.test(c)&&(f="\\3"+c+" "+f.slice(1))),f=f.replace(LE,function(A,g,p){return g&&g.length%2?A:(g||"")+p}),!s&&e.wrap?i+f+i:f};Kg.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},Kg.version="3.0.0";var IE=Kg,sy=qo(IE),vh=0,Wg=1,ay=2,Gu=3,Ay=4,oy=5,ly=6,Xg=/[a-z0-9_-]/i,Vu=/[\s\t]/,PE=function(r){for(var t=!0,e=vh,i="",s=0,c,f,a=[];;){if(f=r[s],e===vh){if(!f&&t)break;if(!f&&!t)throw new Error("Parse error");if(f==='"'||f==="'")c=f,e=Wg,t=!1;else if(!Vu.test(f))if(Xg.test(f))e=Gu,t=!1,s--;else throw new Error("Parse error")}else if(e===Wg)if(f)f==="\\"?e=ay:f===c?(a.push(i),i="",e=Ay):i+=f;else throw new Error("Parse Error");else if(e===ay)if(f===c||f==="\\")i+=f,e=Wg;else throw new Error("Parse error");else if(e===Gu)if(f)Xg.test(f)?i+=f:f===","?(a.push(i),i="",e=vh):Vu.test(f)?e=oy:f==="\\"&&(e=ly);else{a.push(i);break}else if(e===ly){if(/[0-9a-f]/i.test(f))throw new Error("Parse error");i+=f,e=Gu}else if(e===oy)if(f){if(Xg.test(f))i+=" "+f,e=Gu;else if(f===",")a.push(i),i="",e=vh;else if(!Vu.test(f))throw new Error("Parse error")}else{a.push(i);break}else if(e===Ay)if(f){if(f===",")e=vh;else if(!Vu.test(f))throw new Error("Parse error")}else break;s++}return a},UE=/[^a-z0-9_-]/i,OE=function(r,t){var e=t&&t.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Quote must be `'` or `\"`");for(var i=new RegExp(e,"g"),s=[],c=0;c<r.length;++c){var f=r[c];UE.test(f)&&(f=f.replace(/\\/g,"\\\\").replace(i,"\\"+e),f=e+f+e),s.push(f)}return s.join(", ")},QE={parse:PE,stringify:OE},NE=qo(QE),ju={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},ME=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function kE(r){return r===10||r===13||r===8232||r===8233||r===32||r===9||r===11||r===12||r===160||r>=5760&&ME.indexOf(r)>=0}function DE(r){switch(r|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function RE(r){return(r|32)===97}function $l(r){return r>=48&&r<=57}function HE(r){return r>=48&&r<=57||r===43||r===45||r===46}function GE(r){this.index=0,this.path=r,this.max=r.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function Ku(r){for(;r.index<r.max&&kE(r.path.charCodeAt(r.index));)r.index++}function VE(r){var t=r.path.charCodeAt(r.index);if(t===48){r.param=0,r.index++;return}if(t===49){r.param=1,r.index++;return}r.err="SvgPath: arc flag can be 0 or 1 only (at pos "+r.index+")"}function jE(r){var t=r.index,e=t,i=r.max,s=!1,c=!1,f=!1,a=!1,n;if(e>=i){r.err="SvgPath: missed param (at pos "+e+")";return}if(n=r.path.charCodeAt(e),(n===43||n===45)&&(e++,n=e<i?r.path.charCodeAt(e):0),!$l(n)&&n!==46){r.err="SvgPath: param should start with 0..9 or `.` (at pos "+e+")";return}if(n!==46){if(s=n===48,e++,n=e<i?r.path.charCodeAt(e):0,s&&e<i&&n&&$l(n)){r.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+t+")";return}for(;e<i&&$l(r.path.charCodeAt(e));)e++,c=!0;n=e<i?r.path.charCodeAt(e):0}if(n===46){for(a=!0,e++;$l(r.path.charCodeAt(e));)e++,f=!0;n=e<i?r.path.charCodeAt(e):0}if(n===101||n===69){if(a&&!c&&!f){r.err="SvgPath: invalid float exponent (at pos "+e+")";return}if(e++,n=e<i?r.path.charCodeAt(e):0,(n===43||n===45)&&e++,e<i&&$l(r.path.charCodeAt(e)))for(;e<i&&$l(r.path.charCodeAt(e));)e++;else{r.err="SvgPath: invalid float exponent (at pos "+e+")";return}}r.index=e,r.param=parseFloat(r.path.slice(t,e))+0}function zg(r){var t,e;t=r.path[r.segmentStart],e=t.toLowerCase();var i=r.data;if(e==="m"&&i.length>2&&(r.result.push([t,i[0],i[1]]),i=i.slice(2),e="l",t=t==="m"?"l":"L"),e==="r")r.result.push([t].concat(i));else for(;i.length>=ju[e]&&(r.result.push([t].concat(i.splice(0,ju[e]))),!!ju[e]););}function KE(r){var t=r.max,e,i,s,c,f;if(r.segmentStart=r.index,e=r.path.charCodeAt(r.index),i=RE(e),!DE(e)){r.err="SvgPath: bad command "+r.path[r.index]+" (at pos "+r.index+")";return}if(c=ju[r.path[r.index].toLowerCase()],r.index++,Ku(r),r.data=[],!c){zg(r);return}for(s=!1;;){for(f=c;f>0;f--){if(i&&(f===3||f===4)?VE(r):jE(r),r.err.length){zg(r);return}r.data.push(r.param),Ku(r),s=!1,r.index<t&&r.path.charCodeAt(r.index)===44&&(r.index++,Ku(r),s=!0)}if(!s&&(r.index>=r.max||!HE(r.path.charCodeAt(r.index))))break}zg(r)}var WE=function(t){var e=new GE(t),i=e.max;for(Ku(e);e.index<i&&!e.err.length;)KE(e);return e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}};function XE(r,t){return[r[0]*t[0]+r[2]*t[1],r[1]*t[0]+r[3]*t[1],r[0]*t[2]+r[2]*t[3],r[1]*t[2]+r[3]*t[3],r[0]*t[4]+r[2]*t[5]+r[4],r[1]*t[4]+r[3]*t[5]+r[5]]}function qs(){if(!(this instanceof qs))return new qs;this.queue=[],this.cache=null}qs.prototype.matrix=function(r){return r[0]===1&&r[1]===0&&r[2]===0&&r[3]===1&&r[4]===0&&r[5]===0?this:(this.cache=null,this.queue.push(r),this)},qs.prototype.translate=function(r,t){return(r!==0||t!==0)&&(this.cache=null,this.queue.push([1,0,0,1,r,t])),this},qs.prototype.scale=function(r,t){return(r!==1||t!==1)&&(this.cache=null,this.queue.push([r,0,0,t,0,0])),this},qs.prototype.rotate=function(r,t,e){var i,s,c;return r!==0&&(this.translate(t,e),i=r*Math.PI/180,s=Math.cos(i),c=Math.sin(i),this.queue.push([s,c,-c,s,0,0]),this.cache=null,this.translate(-t,-e)),this},qs.prototype.skewX=function(r){return r!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(r*Math.PI/180),1,0,0])),this},qs.prototype.skewY=function(r){return r!==0&&(this.cache=null,this.queue.push([1,Math.tan(r*Math.PI/180),0,1,0,0])),this},qs.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var r=1;r<this.queue.length;r++)this.cache=XE(this.cache,this.queue[r]);return this.cache},qs.prototype.calc=function(r,t,e){var i;return this.queue.length?(this.cache||(this.cache=this.toArray()),i=this.cache,[r*i[0]+t*i[2]+(e?0:i[4]),r*i[1]+t*i[3]+(e?0:i[5])]):[r,t]};var cy=qs,zE=cy,qE={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},$E=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,YE=/[\s,]+/,JE=function(t){var e=new zE,i,s;return t.split($E).forEach(function(c){if(c.length){if(typeof qE[c]<"u"){i=c;return}switch(s=c.split(YE).map(function(f){return+f||0}),i){case"matrix":s.length===6&&e.matrix(s);return;case"scale":s.length===1?e.scale(s[0],s[0]):s.length===2&&e.scale(s[0],s[1]);return;case"rotate":s.length===1?e.rotate(s[0],0,0):s.length===3&&e.rotate(s[0],s[1],s[2]);return;case"translate":s.length===1?e.translate(s[0],0):s.length===2&&e.translate(s[0],s[1]);return;case"skewX":s.length===1&&e.skewX(s[0]);return;case"skewY":s.length===1&&e.skewY(s[0]);return}}}),e},yh=Math.PI*2;function hy(r,t,e,i){var s=r*i-t*e<0?-1:1,c=r*e+t*i;return c>1&&(c=1),c<-1&&(c=-1),s*Math.acos(c)}function ZE(r,t,e,i,s,c,f,a,n,l){var h=l*(r-e)/2+n*(t-i)/2,o=-n*(r-e)/2+l*(t-i)/2,u=f*f,A=a*a,g=h*h,p=o*o,d=u*A-u*p-A*g;d<0&&(d=0),d/=u*p+A*g,d=Math.sqrt(d)*(s===c?-1:1);var m=d*f/a*o,v=d*-a/f*h,C=l*m-n*v+(r+e)/2,x=n*m+l*v+(t+i)/2,E=(h-m)/f,L=(o-v)/a,U=(-h-m)/f,O=(-o-v)/a,X=hy(1,0,E,L),rt=hy(E,L,U,O);return c===0&&rt>0&&(rt-=yh),c===1&&rt<0&&(rt+=yh),[C,x,X,rt]}function t4(r,t){var e=1.3333333333333333*Math.tan(t/4),i=Math.cos(r),s=Math.sin(r),c=Math.cos(r+t),f=Math.sin(r+t);return[i,s,i-s*e,s+i*e,c+f*e,f-c*e,c,f]}var e4=function(t,e,i,s,c,f,a,n,l){var h=Math.sin(l*yh/360),o=Math.cos(l*yh/360),u=o*(t-i)/2+h*(e-s)/2,A=-h*(t-i)/2+o*(e-s)/2;if(u===0&&A===0)return[];if(a===0||n===0)return[];a=Math.abs(a),n=Math.abs(n);var g=u*u/(a*a)+A*A/(n*n);g>1&&(a*=Math.sqrt(g),n*=Math.sqrt(g));var p=ZE(t,e,i,s,c,f,a,n,h,o),d=[],m=p[2],v=p[3],C=Math.max(Math.ceil(Math.abs(v)/(yh/4)),1);v/=C;for(var x=0;x<C;x++)d.push(t4(m,v)),m+=v;return d.map(function(E){for(var L=0;L<E.length;L+=2){var U=E[L+0],O=E[L+1];U*=a,O*=n;var X=o*U-h*O,rt=h*U+o*O;E[L+0]=X+p[0],E[L+1]=rt+p[1]}return E})},wh=1e-10,uy=Math.PI/180;function bh(r,t,e){if(!(this instanceof bh))return new bh(r,t,e);this.rx=r,this.ry=t,this.ax=e}bh.prototype.transform=function(r){var t=Math.cos(this.ax*uy),e=Math.sin(this.ax*uy),i=[this.rx*(r[0]*t+r[2]*e),this.rx*(r[1]*t+r[3]*e),this.ry*(-r[0]*e+r[2]*t),this.ry*(-r[1]*e+r[3]*t)],s=i[0]*i[0]+i[2]*i[2],c=i[1]*i[1]+i[3]*i[3],f=((i[0]-i[3])*(i[0]-i[3])+(i[2]+i[1])*(i[2]+i[1]))*((i[0]+i[3])*(i[0]+i[3])+(i[2]-i[1])*(i[2]-i[1])),a=(s+c)/2;if(f<wh*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;var n=i[0]*i[1]+i[2]*i[3];f=Math.sqrt(f);var l=a+f/2,h=a-f/2;return this.ax=Math.abs(n)<wh&&Math.abs(l-c)<wh?90:Math.atan(Math.abs(n)>Math.abs(l-c)?(l-s)/n:n/(l-c))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(l),this.ry=Math.sqrt(h)):(this.ax+=90,this.rx=Math.sqrt(h),this.ry=Math.sqrt(l)),this},bh.prototype.isDegenerate=function(){return this.rx<wh*this.ry||this.ry<wh*this.rx};var r4=bh,i4=WE,n4=JE,JA=cy,s4=e4,a4=r4;function oi(r){if(!(this instanceof oi))return new oi(r);var t=i4(r);this.segments=t.segments,this.err=t.err,this.__stack=[]}oi.from=function(r){if(typeof r=="string")return new oi(r);if(r instanceof oi){var t=new oi("");return t.err=r.err,t.segments=r.segments.map(function(e){return e.slice()}),t.__stack=r.__stack.map(function(e){return JA().matrix(e.toArray())}),t}throw new Error("SvgPath.from: invalid param type "+r)},oi.prototype.__matrix=function(r){var t=this,e;r.queue.length&&this.iterate(function(i,s,c,f){var a,n,l,h;switch(i[0]){case"v":a=r.calc(0,i[1],!0),n=a[0]===0?["v",a[1]]:["l",a[0],a[1]];break;case"V":a=r.calc(c,i[1],!1),n=a[0]===r.calc(c,f,!1)[0]?["V",a[1]]:["L",a[0],a[1]];break;case"h":a=r.calc(i[1],0,!0),n=a[1]===0?["h",a[0]]:["l",a[0],a[1]];break;case"H":a=r.calc(i[1],f,!1),n=a[1]===r.calc(c,f,!1)[1]?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var o=r.toArray(),u=a4(i[1],i[2],i[3]).transform(o);if(o[0]*o[3]-o[1]*o[2]<0&&(i[5]=i[5]?"0":"1"),a=r.calc(i[6],i[7],i[0]==="a"),i[0]==="A"&&i[6]===c&&i[7]===f||i[0]==="a"&&i[6]===0&&i[7]===0){n=[i[0]==="a"?"l":"L",a[0],a[1]];break}u.isDegenerate()?n=[i[0]==="a"?"l":"L",a[0],a[1]]:n=[i[0],u.rx,u.ry,u.ax,i[4],i[5],a[0],a[1]];break;case"m":h=s>0,a=r.calc(i[1],i[2],h),n=["m",a[0],a[1]];break;default:for(l=i[0],n=[l],h=l.toLowerCase()===l,e=1;e<i.length;e+=2)a=r.calc(i[e],i[e+1],h),n.push(a[0],a[1])}t.segments[s]=n},!0)},oi.prototype.__evaluateStack=function(){var r,t;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(r=JA(),t=this.__stack.length;--t>=0;)r.matrix(this.__stack[t].toArray());this.__matrix(r),this.__stack=[]}},oi.prototype.toString=function(){var r="",t="",e=!1;this.__evaluateStack();for(var i=0,s=this.segments.length;i<s;i++){var c=this.segments[i],f=c[0];f!==t||f==="m"||f==="M"?(f==="m"&&t==="z"&&(r+=" "),r+=f,e=!1):e=!0;for(var a=1;a<c.length;a++){var n=c[a];a===1?e&&n>=0&&(r+=" "):n>=0&&(r+=" "),r+=n}t=f}return r},oi.prototype.translate=function(r,t){return this.__stack.push(JA().translate(r,t||0)),this},oi.prototype.scale=function(r,t){return this.__stack.push(JA().scale(r,!t&&t!==0?r:t)),this},oi.prototype.rotate=function(r,t,e){return this.__stack.push(JA().rotate(r,t||0,e||0)),this},oi.prototype.skewX=function(r){return this.__stack.push(JA().skewX(r)),this},oi.prototype.skewY=function(r){return this.__stack.push(JA().skewY(r)),this},oi.prototype.matrix=function(r){return this.__stack.push(JA().matrix(r)),this},oi.prototype.transform=function(r){return r.trim()?(this.__stack.push(n4(r)),this):this},oi.prototype.round=function(r){var t=0,e=0,i=0,s=0,c;return r=r||0,this.__evaluateStack(),this.segments.forEach(function(f){var a=f[0].toLowerCase()===f[0];switch(f[0]){case"H":case"h":a&&(f[1]+=i),i=f[1]-f[1].toFixed(r),f[1]=+f[1].toFixed(r);return;case"V":case"v":a&&(f[1]+=s),s=f[1]-f[1].toFixed(r),f[1]=+f[1].toFixed(r);return;case"Z":case"z":i=t,s=e;return;case"M":case"m":a&&(f[1]+=i,f[2]+=s),i=f[1]-f[1].toFixed(r),s=f[2]-f[2].toFixed(r),t=i,e=s,f[1]=+f[1].toFixed(r),f[2]=+f[2].toFixed(r);return;case"A":case"a":a&&(f[6]+=i,f[7]+=s),i=f[6]-f[6].toFixed(r),s=f[7]-f[7].toFixed(r),f[1]=+f[1].toFixed(r),f[2]=+f[2].toFixed(r),f[3]=+f[3].toFixed(r+2),f[6]=+f[6].toFixed(r),f[7]=+f[7].toFixed(r);return;default:c=f.length,a&&(f[c-2]+=i,f[c-1]+=s),i=f[c-2]-f[c-2].toFixed(r),s=f[c-1]-f[c-1].toFixed(r),f.forEach(function(n,l){l&&(f[l]=+f[l].toFixed(r))});return}}),this},oi.prototype.iterate=function(r,t){var e=this.segments,i={},s=!1,c=0,f=0,a=0,n=0,l,h,o;if(t||this.__evaluateStack(),e.forEach(function(u,A){var g=r(u,A,c,f);Array.isArray(g)&&(i[A]=g,s=!0);var p=u[0]===u[0].toLowerCase();switch(u[0]){case"m":case"M":c=u[1]+(p?c:0),f=u[2]+(p?f:0),a=c,n=f;return;case"h":case"H":c=u[1]+(p?c:0);return;case"v":case"V":f=u[1]+(p?f:0);return;case"z":case"Z":c=a,f=n;return;default:c=u[u.length-2]+(p?c:0),f=u[u.length-1]+(p?f:0)}}),!s)return this;for(o=[],l=0;l<e.length;l++)if(typeof i[l]<"u")for(h=0;h<i[l].length;h++)o.push(i[l][h]);else o.push(e[l]);return this.segments=o,this},oi.prototype.abs=function(){return this.iterate(function(r,t,e,i){var s=r[0],c=s.toUpperCase(),f;if(s!==c)switch(r[0]=c,s){case"v":r[1]+=i;return;case"a":r[6]+=e,r[7]+=i;return;default:for(f=1;f<r.length;f++)r[f]+=f%2?e:i}},!0),this},oi.prototype.rel=function(){return this.iterate(function(r,t,e,i){var s=r[0],c=s.toLowerCase(),f;if(s!==c&&!(t===0&&s==="M"))switch(r[0]=c,s){case"V":r[1]-=i;return;case"A":r[6]-=e,r[7]-=i;return;default:for(f=1;f<r.length;f++)r[f]-=f%2?e:i}},!0),this},oi.prototype.unarc=function(){return this.iterate(function(r,t,e,i){var s,c,f,a=[],n=r[0];return n!=="A"&&n!=="a"?null:(n==="a"?(c=e+r[6],f=i+r[7]):(c=r[6],f=r[7]),s=s4(e,i,c,f,r[4],r[5],r[1],r[2],r[3]),s.length===0?[[r[0]==="a"?"l":"L",r[6],r[7]]]:(s.forEach(function(l){a.push(["C",l[2],l[3],l[4],l[5],l[6],l[7]])}),a))}),this},oi.prototype.unshort=function(){var r=this.segments,t,e,i,s,c;return this.iterate(function(f,a,n,l){var h=f[0],o=h.toUpperCase(),u;a&&(o==="T"?(u=h==="t",i=r[a-1],i[0]==="Q"?(t=i[1]-n,e=i[2]-l):i[0]==="q"?(t=i[1]-i[3],e=i[2]-i[4]):(t=0,e=0),s=-t,c=-e,u||(s+=n,c+=l),r[a]=[u?"q":"Q",s,c,f[1],f[2]]):o==="S"&&(u=h==="s",i=r[a-1],i[0]==="C"?(t=i[3]-n,e=i[4]-l):i[0]==="c"?(t=i[3]-i[5],e=i[4]-i[6]):(t=0,e=0),s=-t,c=-e,u||(s+=n,c+=l),r[a]=[u?"c":"C",s,c,f[1],f[2],f[3],f[4]]))}),this};var A4=oi,o4=A4,l4=qo(o4),fy=function(r){var t=r,e,i={a:0,b:0,c:0},s=[],c=/(\[[^\]]+\])/g,f=/(#[^\#\s\+>~\.\[:\)]+)/g,a=/(\.[^\s\+>~\.\[:\)]+)/g,n=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,l=/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,h=/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,o=/([^\s\+>~\.\[:]+)/g;return e=function(u,A){var g,p,d,m,v,C;if(u.test(t))for(g=t.match(u),p=0,d=g.length;p<d;p+=1)i[A]+=1,m=g[p],v=t.indexOf(m),C=m.length,s.push({selector:r.substr(v,C),type:A,index:v,length:C}),t=t.replace(m,Array(C+1).join(" "))},function(){var u=function(d){var m,v,C,x;if(d.test(t))for(m=t.match(d),v=0,C=m.length;v<C;v+=1)x=m[v],t=t.replace(x,Array(x.length+1).join("A"))},A=/\\[0-9A-Fa-f]{6}\s?/g,g=/\\[0-9A-Fa-f]{1,5}\s/g,p=/\\./g;u(A),u(g),u(p)}(),function(){var u=/{[^]*/gm,A,g,p,d;if(u.test(t))for(A=t.match(u),g=0,p=A.length;g<p;g+=1)d=A[g],t=t.replace(d,Array(d.length+1).join(" "))}(),e(c,"b"),e(f,"a"),e(a,"b"),e(n,"c"),e(l,"b"),e(h,"b"),t=t.replace(/[\*\s\+>~]/g," "),t=t.replace(/[#\.]/g," "),t=t.replace(/:not/g,"    "),t=t.replace(/:local/g,"      "),t=t.replace(/:global/g,"       "),t=t.replace(/[\(\)]/g," "),e(o,"c"),s.sort(function(u,A){return u.index-A.index}),{selector:r,specificity:"0,"+i.a.toString()+","+i.b.toString()+","+i.c.toString(),specificityArray:[0,i.a,i.b,i.c],parts:s}},c4=function(r,t){var e,i,s;if(typeof r=="string"){if(r.indexOf(",")!==-1)throw"Invalid CSS selector";e=fy(r).specificityArray}else if(Array.isArray(r)){if(r.filter(function(c){return typeof c=="number"}).length!==4)throw"Invalid specificity array";e=r}else throw"Invalid CSS selector or specificity array";if(typeof t=="string"){if(t.indexOf(",")!==-1)throw"Invalid CSS selector";i=fy(t).specificityArray}else if(Array.isArray(t)){if(t.filter(function(c){return typeof c=="number"}).length!==4)throw"Invalid specificity array";i=t}else throw"Invalid CSS selector or specificity array";for(s=0;s<4;s+=1){if(e[s]<i[s])return-1;if(e[s]>i[s])return 1}return 0};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var dy=function(r,t){return(dy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])})(r,t)};function jr(r,t){function e(){this.constructor=r}dy(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var qg=function(){return(qg=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var s in t=arguments[e])Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s]);return r}).apply(this,arguments)};function Xr(r,t,e,i){return new(e||(e=Promise))(function(s,c){function f(l){try{n(i.next(l))}catch(h){c(h)}}function a(l){try{n(i.throw(l))}catch(h){c(h)}}function n(l){var h;l.done?s(l.value):(h=l.value,h instanceof e?h:new e(function(o){o(h)})).then(f,a)}n((i=i.apply(r,[])).next())})}function zr(r,t){var e,i,s,c,f={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(n){return function(l){return function(h){if(e)throw new TypeError("Generator is already executing.");for(;f;)try{if(e=1,i&&(s=2&h[0]?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[2&h[0],s.value]),h[0]){case 0:case 1:s=h;break;case 4:return f.label++,{value:h[1],done:!1};case 5:f.label++,i=h[1],h=[0];continue;case 7:h=f.ops.pop(),f.trys.pop();continue;default:if(s=f.trys,!((s=s.length>0&&s[s.length-1])||h[0]!==6&&h[0]!==2)){f=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){f.label=h[1];break}if(h[0]===6&&f.label<s[1]){f.label=s[1],s=h;break}if(s&&f.label<s[2]){f.label=s[2],f.ops.push(h);break}s[2]&&f.ops.pop(),f.trys.pop();continue}h=t.call(r,f)}catch(o){h=[6,o],i=0}finally{e=s=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([n,l])}}}var ba=function(){function r(t){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,t){for(var e in t.charAt(0)=="#"&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)t==e&&(t=this.simpleColors[e]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(n){return[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}}];for(var i=0;i<this.colorDefs.length;i++){var s=this.colorDefs[i].re,c=this.colorDefs[i].process,f=s.exec(t);if(f){var a=c(f);this.r=a[0],this.g=a[1],this.b=a[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return r.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},r.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},r.prototype.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return t.length==1&&(t="0"+t),e.length==1&&(e="0"+e),i.length==1&&(i="0"+i),"#"+t+e+i},r.prototype.getHelpXML=function(){for(var t=[],e=0;e<this.colorDefs.length;e++)for(var i=this.colorDefs[e].example,s=0;s<i.length;s++)t[t.length]=i[s];for(var c in this.simpleColors)t[t.length]=c;var f=document.createElement("ul");for(f.setAttribute("id","rgbcolor-examples"),e=0;e<t.length;e++)try{var a=document.createElement("li"),n=new r(t[e]),l=document.createElement("div");l.style.cssText="margin: 3px; border: 1px solid black; background:"+n.toHex()+"; color:"+n.toHex(),l.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+t[e]+" -> "+n.toRGB()+" -> "+n.toHex());a.appendChild(l),a.appendChild(h),f.appendChild(a)}catch{}return f},r}(),Pn=function(){function r(t){this.color=t}return r.prototype.getFillData=function(t,e){return Xr(this,void 0,void 0,function(){return zr(this,function(i){return[2,void 0]})})},r}(),h4=function(){function r(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null}return r.prototype.clone=function(){var t=new r;return t.xmlSpace=this.xmlSpace,t.fill=this.fill,t.fillOpacity=this.fillOpacity,t.fontFamily=this.fontFamily,t.fontSize=this.fontSize,t.fontStyle=this.fontStyle,t.fontWeight=this.fontWeight,t.opacity=this.opacity,t.stroke=this.stroke,t.strokeDasharray=this.strokeDasharray,t.strokeDashoffset=this.strokeDashoffset,t.strokeLinecap=this.strokeLinecap,t.strokeLinejoin=this.strokeLinejoin,t.strokeMiterlimit=this.strokeMiterlimit,t.strokeOpacity=this.strokeOpacity,t.strokeWidth=this.strokeWidth,t.textAnchor=this.textAnchor,t.alignmentBaseline=this.alignmentBaseline,t.visibility=this.visibility,t.color=this.color,t},r.default=function(){var t=new r;return t.xmlSpace="default",t.fill=new Pn(new ba("rgb(0, 0, 0)")),t.fillOpacity=1,t.fontFamily="times",t.fontSize=16,t.fontStyle="normal",t.fontWeight="normal",t.opacity=1,t.stroke=null,t.strokeDasharray=null,t.strokeDashoffset=0,t.strokeLinecap="butt",t.strokeLinejoin="miter",t.strokeMiterlimit=4,t.strokeOpacity=1,t.strokeWidth=1,t.alignmentBaseline="baseline",t.textAnchor="start",t.visibility="visible",t.color=new ba("rgb(0, 0, 0)"),t},r}(),ZA=function(){function r(t,e){var i,s,c;this.pdf=t,this.svg2pdfParameters=e.svg2pdfParameters,this.attributeState=e.attributeState?e.attributeState.clone():h4.default(),this.viewport=e.viewport,this.refsHandler=e.refsHandler,this.styleSheets=e.styleSheets,this.textMeasure=e.textMeasure,this.transform=(i=e.transform)!==null&&i!==void 0?i:this.pdf.unitMatrix,this.withinClipPath=(s=e.withinClipPath)!==null&&s!==void 0&&s,this.withinUse=(c=e.withinUse)!==null&&c!==void 0&&c}return r.prototype.clone=function(t){var e,i,s,c;return t===void 0&&(t={}),new r(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:t.attributeState?t.attributeState.clone():this.attributeState.clone(),viewport:(e=t.viewport)!==null&&e!==void 0?e:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:(i=t.transform)!==null&&i!==void 0?i:this.transform,withinClipPath:(s=t.withinClipPath)!==null&&s!==void 0?s:this.withinClipPath,withinUse:(c=t.withinUse)!==null&&c!==void 0?c:this.withinUse})},r}(),gy=function(){function r(t){this.renderedElements={},this.idMap=t,this.idPrefix=String(r.instanceCounter++)}return r.prototype.getRendered=function(t,e,i){return Xr(this,void 0,void 0,function(){var s,c;return zr(this,function(f){switch(f.label){case 0:return s=this.generateKey(t,e),this.renderedElements.hasOwnProperty(s)?[2,this.renderedElements[t]]:(c=this.get(t),this.renderedElements[s]=c,[4,i(c)]);case 1:return f.sent(),[2,c]}})})},r.prototype.get=function(t){return this.idMap[sy(t,{isIdentifier:!0})]},r.prototype.generateKey=function(t,e){return this.idPrefix+"|"+t+"|"+(e||new ba("rgb(0,0,0)")).toRGBA()},r.instanceCounter=0,r}();function py(r,t){return Math.atan2(t[1]-r[1],t[0]-r[0])}function my(r,t){return[2/3*(t[0]-r[0])+r[0],2/3*(t[1]-r[1])+r[1]]}function Ch(r){var t=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return[r[0]/t,r[1]/t]}function Yl(r,t){return Ch([t[0]-r[0],t[1]-r[1]])}function Wu(r,t){return[r[0]+t[0],r[1]+t[1]]}function $g(r,t){var e=r[0],i=r[1];return[t.a*e+t.c*i+t.e,t.b*e+t.d*i+t.f]}var Jl=function(){function r(){this.segments=[]}return r.prototype.moveTo=function(t,e){return this.segments.push(new en(t,e)),this},r.prototype.lineTo=function(t,e){return this.segments.push(new to(t,e)),this},r.prototype.curveTo=function(t,e,i,s,c,f){return this.segments.push(new Ca(t,e,i,s,c,f)),this},r.prototype.close=function(){return this.segments.push(new Yg),this},r.prototype.transform=function(t){this.segments.forEach(function(e){if(e instanceof en||e instanceof to||e instanceof Ca){var i=$g([e.x,e.y],t);e.x=i[0],e.y=i[1]}if(e instanceof Ca){var s=$g([e.x1,e.y1],t),c=$g([e.x2,e.y2],t);e.x1=s[0],e.y1=s[1],e.x2=c[0],e.y2=c[1]}})},r.prototype.draw=function(t){var e=t.pdf;this.segments.forEach(function(i){i instanceof en?e.moveTo(i.x,i.y):i instanceof to?e.lineTo(i.x,i.y):i instanceof Ca?e.curveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):e.close()})},r}(),en=function(r,t){this.x=r,this.y=t},to=function(r,t){this.x=r,this.y=t},Ca=function(r,t,e,i,s,c){this.x1=r,this.y1=t,this.x2=e,this.y2=i,this.x=s,this.y=c},Yg=function(){};function eo(r,t){return t.split(",").indexOf((r.nodeName||r.tagName).toLowerCase())>=0}function Ae(r,t,e,i){var s;i===void 0&&(i=e);var c=(s=r.style)===null||s===void 0?void 0:s.getPropertyValue(i);if(c)return c;var f=t.getPropertyValue(r,i);return f||r.hasAttribute(e)&&r.getAttribute(e)||void 0}function Ja(r,t,e){if(Ae(r.element,e.styleSheets,"display")==="none")return!1;var i=t,s=Ae(r.element,e.styleSheets,"visibility");return s&&(i=s!=="hidden"),i}function ro(r,t,e){var i=Ja(r,t,e);return r.element.childNodes.length!==0&&(r.children.forEach(function(s){s.isVisible(i,e)&&(i=!0)}),i)}var u4=function(){function r(){this.markers=[]}return r.prototype.addMarker=function(t){this.markers.push(t)},r.prototype.draw=function(t){return Xr(this,void 0,void 0,function(){var e,i,s,c,f,a,n;return zr(this,function(l){switch(l.label){case 0:e=0,l.label=1;case 1:return e<this.markers.length?(i=this.markers[e],s=void 0,c=i.angle,f=i.anchor,a=Math.cos(c),n=Math.sin(c),s=t.pdf.Matrix(a,n,-n,a,f[0],f[1]),s=t.pdf.matrixMult(t.pdf.Matrix(t.attributeState.strokeWidth,0,0,t.attributeState.strokeWidth,0,0),s),s=t.pdf.matrixMult(s,t.transform),t.pdf.saveGraphicsState(),[4,t.refsHandler.getRendered(i.id,null,function(h){return h.apply(t)})]):[3,4];case 2:l.sent(),t.pdf.doFormObject(i.id,s),t.pdf.restoreGraphicsState(),l.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},r}(),io=function(r,t,e){this.id=r,this.anchor=t,this.angle=e},Jg=/url\(["']?#([^"']+)["']?\)/,f4={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"};function Za(r,t){var e;return(e=r&&r.toString().match(/^([\-0-9.]+)em$/))?parseFloat(e[1])*t:(e=r&&r.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(e[1]):0}function vy(r){return f4[r]||"alphabetic"}function Ps(r){for(var t,e=[],i=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;t=i.exec(r);)e.push(parseFloat(t[0]));return e}function Zl(r,t){if(r==="transparent"){var e=new ba("rgb(0,0,0)");return e.a=0,e}if(r.toLowerCase()==="currentcolor")return t||new ba("rgb(0,0,0)");var i=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(r);if(i){var s=Ps(i[1]),c=new ba("rgb("+s.slice(0,3).join(",")+")");return c.a=s[3],c}return new ba(r)}var tA={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},Zg,d4=(Zg=Me.version.split("."),parseFloat(Zg[0])===2&&parseFloat(Zg[1])===3);function yy(r,t){return d4?t==400?r=="italic"?"italic":"normal":t==700&&r!=="italic"?"bold":r+""+t:t==400||t==="normal"?r==="italic"?"italic":"normal":t!=700&&t!=="bold"||r!=="normal"?(t==700?"bold":t)+""+r:"bold"}function tp(r,t){if(Ae(t.element,r.styleSheets,"display")==="none")return[0,0,0,0];var e=[0,0,0,0];return t.children.forEach(function(i){var s=i.getBoundingBox(r);e=[Math.min(e[0],s[0]),Math.min(e[1],s[1]),Math.max(e[0]+e[2],s[0]+s[2])-Math.min(e[0],s[0]),Math.max(e[1]+e[3],s[1]+s[3])-Math.min(e[1],s[1])]}),e}function Bh(r,t){var e=parseFloat,i=e(r.getAttribute("x1"))||e(Ae(r,t.styleSheets,"x"))||e(Ae(r,t.styleSheets,"cx"))-e(Ae(r,t.styleSheets,"r"))||0,s=e(r.getAttribute("x2"))||i+e(Ae(r,t.styleSheets,"width"))||e(Ae(r,t.styleSheets,"cx"))+e(Ae(r,t.styleSheets,"r"))||0,c=e(r.getAttribute("y1"))||e(Ae(r,t.styleSheets,"y"))||e(Ae(r,t.styleSheets,"cy"))-e(Ae(r,t.styleSheets,"r"))||0,f=e(r.getAttribute("y2"))||c+e(Ae(r,t.styleSheets,"height"))||e(Ae(r,t.styleSheets,"cy"))+e(Ae(r,t.styleSheets,"r"))||0;return[Math.min(i,s),Math.min(c,f),Math.max(i,s)-Math.min(i,s),Math.max(c,f)-Math.min(c,f)]}function Xu(r,t,e,i,s,c,f,a){a===void 0&&(a=!1);var n,l,h=t[0],o=t[1],u=t[2],A=t[3],g=s/u,p=c/A,d=r.getAttribute("preserveAspectRatio");if(d){var m=d.split(" ");m[0]==="defer"&&(m=m.slice(1)),n=m[0],l=m[1]||"meet"}else n="xMidYMid",l="meet";if(n!=="none"&&(l==="meet"?g=p=Math.min(g,p):l==="slice"&&(g=p=Math.max(g,p))),a)return f.pdf.Matrix(g,0,0,p,0,0);var v=e-h*g,C=i-o*p;n.indexOf("xMid")>=0?v+=(s-u*g)/2:n.indexOf("xMax")>=0&&(v+=s-u*g),n.indexOf("YMid")>=0?C+=(c-A*p)/2:n.indexOf("YMax")>=0&&(C+=c-A*p);var x=f.pdf.Matrix(1,0,0,1,v,C),E=f.pdf.Matrix(g,0,0,p,0,0);return f.pdf.matrixMult(E,x)}function zu(r,t){if(!r||r==="none")return t.pdf.unitMatrix;for(var e,i,s=/^[\s,]*matrix\(([^)]+)\)\s*/,c=/^[\s,]*translate\(([^)]+)\)\s*/,f=/^[\s,]*rotate\(([^)]+)\)\s*/,a=/^[\s,]*scale\(([^)]+)\)\s*/,n=/^[\s,]*skewX\(([^)]+)\)\s*/,l=/^[\s,]*skewY\(([^)]+)\)\s*/,h=t.pdf.unitMatrix;r.length>0&&r.length!==i;){i=r.length;var o=s.exec(r);if(o&&(e=Ps(o[1]),h=t.pdf.matrixMult(t.pdf.Matrix(e[0],e[1],e[2],e[3],e[4],e[5]),h),r=r.substr(o[0].length)),o=f.exec(r)){e=Ps(o[1]);var u=Math.PI*e[0]/180;if(h=t.pdf.matrixMult(t.pdf.Matrix(Math.cos(u),Math.sin(u),-Math.sin(u),Math.cos(u),0,0),h),e[1]||e[2]){var A=t.pdf.Matrix(1,0,0,1,e[1],e[2]),g=t.pdf.Matrix(1,0,0,1,-e[1],-e[2]);h=t.pdf.matrixMult(g,t.pdf.matrixMult(h,A))}r=r.substr(o[0].length)}(o=c.exec(r))&&(e=Ps(o[1]),h=t.pdf.matrixMult(t.pdf.Matrix(1,0,0,1,e[0],e[1]||0),h),r=r.substr(o[0].length)),(o=a.exec(r))&&((e=Ps(o[1]))[1]||(e[1]=e[0]),h=t.pdf.matrixMult(t.pdf.Matrix(e[0],0,0,e[1],0,0),h),r=r.substr(o[0].length)),(o=n.exec(r))&&(e=parseFloat(o[1]),e*=Math.PI/180,h=t.pdf.matrixMult(t.pdf.Matrix(1,0,Math.tan(e),1,0,0),h),r=r.substr(o[0].length)),(o=l.exec(r))&&(e=parseFloat(o[1]),e*=Math.PI/180,h=t.pdf.matrixMult(t.pdf.Matrix(1,Math.tan(e),0,1,0,0),h),r=r.substr(o[0].length))}return h}var ep=function(){function r(t,e){this.element=t,this.children=e,this.parent=null}return r.prototype.setParent=function(t){this.parent=t},r.prototype.getParent=function(){return this.parent},r.prototype.getBoundingBox=function(t){return Ae(this.element,t.styleSheets,"display")==="none"?[0,0,0,0]:this.getBoundingBoxCore(t)},r.prototype.computeNodeTransform=function(t){var e=this.computeNodeTransformCore(t),i=Ae(this.element,t.styleSheets,"transform");return i?t.pdf.matrixMult(e,zu(i,t)):e},r}(),Sh=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t.prototype.render=function(e){return Promise.resolve()},t.prototype.getBoundingBoxCore=function(e){return[]},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t}(ep),wy=function(r){function t(e,i,s){var c=r.call(this,i,s)||this;return c.pdfGradientType=e,c.contextColor=void 0,c}return jr(t,r),t.prototype.apply=function(e){return Xr(this,void 0,void 0,function(){var i,s,c,f,a,n;return zr(this,function(l){return(i=this.element.getAttribute("id"))?(s=this.getStops(e.styleSheets),c=0,f=!1,s.forEach(function(h){var o=h.opacity;o&&o!==1&&(c+=o,f=!0)}),f&&(a=new Ko({opacity:c/s.length})),n=new zA(this.pdfGradientType,this.getCoordinates(),s,a),e.pdf.addShadingPattern(i,n),[2]):[2]})})},t.prototype.getStops=function(e){var i=this;if(this.stops)return this.stops;if(this.contextColor===void 0){this.contextColor=null;for(var s=this;s;){var c=Ae(s.element,e,"color");if(c){this.contextColor=Zl(c,null);break}s=s.getParent()}}var f=[];return this.children.forEach(function(a){if(a.element.tagName.toLowerCase()==="stop"){var n=Ae(a.element,e,"color"),l=Zl(Ae(a.element,e,"stop-color")||"",n?Zl(n,null):i.contextColor),h=parseFloat(Ae(a.element,e,"stop-opacity")||"1");f.push({offset:t.parseGradientOffset(a.element.getAttribute("offset")||"0"),color:[l.r,l.g,l.b],opacity:h})}}),this.stops=f},t.prototype.getBoundingBoxCore=function(e){return Bh(this.element,e)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return ro(this,e,i)},t.parseGradientOffset=function(e){var i=parseFloat(e);return!isNaN(i)&&e.indexOf("%")>=0?i/100:i},t}(Sh),by=function(r){function t(e,i){return r.call(this,"axial",e,i)||this}return jr(t,r),t.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},t}(wy),Cy=function(r){function t(e,i){return r.call(this,"radial",e,i)||this}return jr(t,r),t.prototype.getCoordinates=function(){var e=this.element.getAttribute("cx"),i=this.element.getAttribute("cy"),s=this.element.getAttribute("fx"),c=this.element.getAttribute("fy");return[parseFloat(s||e||"0.5"),parseFloat(c||i||"0.5"),0,parseFloat(e||"0.5"),parseFloat(i||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},t}(wy),g4=function(){function r(t,e){this.key=t,this.gradient=e}return r.prototype.getFillData=function(t,e){return Xr(this,void 0,void 0,function(){var i,s,c;return zr(this,function(f){switch(f.label){case 0:return[4,e.refsHandler.getRendered(this.key,null,function(a){return a.apply(new ZA(e.pdf,{refsHandler:e.refsHandler,textMeasure:e.textMeasure,styleSheets:e.styleSheets,viewport:e.viewport,svg2pdfParameters:e.svg2pdfParameters}))})];case 1:return f.sent(),this.gradient.element.hasAttribute("gradientUnits")&&this.gradient.element.getAttribute("gradientUnits").toLowerCase()!=="objectboundingbox"?i=e.pdf.unitMatrix:(s=t.getBoundingBox(e),i=e.pdf.Matrix(s[2],0,0,s[3],s[0],s[1])),c=zu(Ae(this.gradient.element,e.styleSheets,"gradientTransform","transform"),e),[2,{key:this.key,matrix:e.pdf.matrixMult(c,i)}]}})})},r}(),By=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t.prototype.apply=function(e){return Xr(this,void 0,void 0,function(){var i,s,c,f,a;return zr(this,function(n){switch(n.label){case 0:if(!(i=this.element.getAttribute("id")))return[2];s=this.getBoundingBox(e),c=new Wo([s[0],s[1],s[0]+s[2],s[1]+s[3]],s[2],s[3]),e.pdf.beginTilingPattern(c),f=0,a=this.children,n.label=1;case 1:return f<a.length?[4,a[f].render(new ZA(e.pdf,{attributeState:e.attributeState,refsHandler:e.refsHandler,styleSheets:e.styleSheets,viewport:e.viewport,svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure}))]:[3,4];case 2:n.sent(),n.label=3;case 3:return f++,[3,1];case 4:return e.pdf.endTilingPattern(i,c),[2]}})})},t.prototype.getBoundingBoxCore=function(e){return Bh(this.element,e)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return ro(this,e,i)},t}(Sh),p4=function(){function r(t,e){this.key=t,this.pattern=e}return r.prototype.getFillData=function(t,e){return Xr(this,void 0,void 0,function(){var i,s,c,f,a,n,l,h,o,u,A,g;return zr(this,function(p){switch(p.label){case 0:return[4,e.refsHandler.getRendered(this.key,null,function(d){return d.apply(new ZA(e.pdf,{refsHandler:e.refsHandler,textMeasure:e.textMeasure,styleSheets:e.styleSheets,viewport:e.viewport,svg2pdfParameters:e.svg2pdfParameters}))})];case 1:return p.sent(),i={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},c=e.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&this.pattern.element.getAttribute("patternUnits").toLowerCase()!=="objectboundingbox"||(s=t.getBoundingBox(e),c=e.pdf.Matrix(1,0,0,1,s[0],s[1]),a=this.pattern.getBoundingBox(e),n=a[0]*s[0]||0,l=a[1]*s[1]||0,h=a[2]*s[2]||0,o=a[3]*s[3]||0,i.boundingBox=[n,l,n+h,l+o],i.xStep=h,i.yStep=o),f=e.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&this.pattern.element.getAttribute("patternContentUnits").toLowerCase()==="objectboundingbox"&&(s||(s=t.getBoundingBox(e)),f=e.pdf.Matrix(s[2],0,0,s[3],0,0),a=i.boundingBox||this.pattern.getBoundingBox(e),n=a[0]/s[0]||0,l=a[1]/s[1]||0,h=a[2]/s[2]||0,o=a[3]/s[3]||0,i.boundingBox=[n,l,n+h,l+o],i.xStep=h,i.yStep=o),u=e.pdf.unitMatrix,(A=Ae(this.pattern.element,e.styleSheets,"patternTransform","transform"))&&(u=zu(A,e)),g=f,g=e.pdf.matrixMult(g,c),g=e.pdf.matrixMult(g,u),g=e.pdf.matrixMult(g,e.transform),i.matrix=g,[2,i]}})})},r}();function m4(r,t){var e=Jg.exec(r);if(e){var i=e[1],s=t.refsHandler.get(i);return s&&(s instanceof by||s instanceof Cy)?function(f,a,n){var l=a.getStops(n.styleSheets);if(l.length===0)return null;if(l.length===1){var h=l[0].color,o=new ba;return o.ok=!0,o.r=h[0],o.g=h[1],o.b=h[2],o.a=l[0].opacity,new Pn(o)}return new g4(f,a)}(i,s,t):s&&s instanceof By?new p4(i,s):new Pn(new ba("rgb(0, 0, 0)"))}var c=Zl(r,t.attributeState.color);return c.ok?new Pn(c):null}function rp(r,t,e){var i=e||t.element,s=Ae(i,r.styleSheets,"color");if(s){var c=Zl(s,r.attributeState.color);c.ok?r.attributeState.color=c:r.attributeState.color=new ba("rgb(0,0,0)")}var f=Ae(i,r.styleSheets,"visibility");f&&(r.attributeState.visibility=f);var a=Ae(i,r.styleSheets,"fill");a&&(r.attributeState.fill=m4(a,r));var n=Ae(i,r.styleSheets,"fill-opacity");n&&(r.attributeState.fillOpacity=parseFloat(n));var l=Ae(i,r.styleSheets,"stroke-opacity");l&&(r.attributeState.strokeOpacity=parseFloat(l));var h=Ae(i,r.styleSheets,"opacity");h&&(r.attributeState.opacity=parseFloat(h));var o=Ae(i,r.styleSheets,"stroke-width");o!==void 0&&o!==""&&(r.attributeState.strokeWidth=Math.abs(parseFloat(o)));var u=Ae(i,r.styleSheets,"stroke");if(u)if(u==="none")r.attributeState.stroke=null;else{var A=Zl(u,r.attributeState.color);A.ok&&(r.attributeState.stroke=new Pn(A))}var g=Ae(i,r.styleSheets,"stroke-linecap");g&&(r.attributeState.strokeLinecap=g);var p=Ae(i,r.styleSheets,"stroke-linejoin");p&&(r.attributeState.strokeLinejoin=p);var d=Ae(i,r.styleSheets,"stroke-dasharray");if(d){var m=parseInt(Ae(i,r.styleSheets,"stroke-dashoffset")||"0");r.attributeState.strokeDasharray=Ps(d),r.attributeState.strokeDashoffset=m}var v=Ae(i,r.styleSheets,"stroke-miterlimit");v!==void 0&&v!==""&&(r.attributeState.strokeMiterlimit=parseFloat(v));var C=i.getAttribute("xml:space");C&&(r.attributeState.xmlSpace=C);var x=Ae(i,r.styleSheets,"font-weight");x&&(r.attributeState.fontWeight=x);var E=Ae(i,r.styleSheets,"font-style");E&&(r.attributeState.fontStyle=E);var L=Ae(i,r.styleSheets,"font-family");if(L){var U=NE.parse(L);r.attributeState.fontFamily=function(J,$,ht){var ut=yy(J.fontStyle,J.fontWeight),pt=ht.pdf.getFontList(),ft="";return $.some(function(R){var G=pt[R];return G&&G.indexOf(ut)>=0?(ft=R,!0):(R=R.toLowerCase(),!!tA.hasOwnProperty(R)&&(ft=R,!0))})||(ft="times"),ft}(r.attributeState,U,r)}var O=Ae(i,r.styleSheets,"font-size");if(O){var X=r.pdf.getFontSize();r.attributeState.fontSize=Za(O,X)}var rt=Ae(i,r.styleSheets,"vertical-align")||Ae(i,r.styleSheets,"alignment-baseline");if(rt){var M=rt.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);M&&(r.attributeState.alignmentBaseline=M[0])}var H=Ae(i,r.styleSheets,"text-anchor");H&&(r.attributeState.textAnchor=H)}function ip(r,t,e){var i=1,s=1;i*=r.attributeState.fillOpacity,i*=r.attributeState.opacity,r.attributeState.fill instanceof Pn&&r.attributeState.fill.color.a!==void 0&&(i*=r.attributeState.fill.color.a),s*=r.attributeState.strokeOpacity,s*=r.attributeState.opacity,r.attributeState.stroke instanceof Pn&&r.attributeState.stroke.color.a!==void 0&&(s*=r.attributeState.stroke.color.a);var c,f,a=i<1,n=s<1;if(eo(e,"use")?(a=!0,n=!0,i*=r.attributeState.fill?1:0,s*=r.attributeState.stroke?1:0):r.withinUse&&(r.attributeState.fill!==t.attributeState.fill?(a=!0,i*=r.attributeState.fill?1:0):a&&!r.attributeState.fill&&(i=0),r.attributeState.stroke!==t.attributeState.stroke?(n=!0,s*=r.attributeState.stroke?1:0):n&&!r.attributeState.stroke&&(s=0)),a||n){var l={};a&&(l.opacity=i),n&&(l["stroke-opacity"]=s),r.pdf.setGState(new Ko(l))}if(r.attributeState.fill&&r.attributeState.fill!==t.attributeState.fill&&r.attributeState.fill instanceof Pn&&r.attributeState.fill.color.ok&&!eo(e,"text")&&r.pdf.setFillColor(r.attributeState.fill.color.r,r.attributeState.fill.color.g,r.attributeState.fill.color.b),r.attributeState.strokeWidth!==t.attributeState.strokeWidth&&r.pdf.setLineWidth(r.attributeState.strokeWidth),r.attributeState.stroke!==t.attributeState.stroke&&r.attributeState.stroke instanceof Pn&&r.pdf.setDrawColor(r.attributeState.stroke.color.r,r.attributeState.stroke.color.g,r.attributeState.stroke.color.b),r.attributeState.strokeLinecap!==t.attributeState.strokeLinecap&&r.pdf.setLineCap(r.attributeState.strokeLinecap),r.attributeState.strokeLinejoin!==t.attributeState.strokeLinejoin&&r.pdf.setLineJoin(r.attributeState.strokeLinejoin),r.attributeState.strokeDasharray===t.attributeState.strokeDasharray&&r.attributeState.strokeDashoffset===t.attributeState.strokeDashoffset||!r.attributeState.strokeDasharray||r.pdf.setLineDashPattern(r.attributeState.strokeDasharray,r.attributeState.strokeDashoffset),r.attributeState.strokeMiterlimit!==t.attributeState.strokeMiterlimit&&r.pdf.setLineMiterLimit(r.attributeState.strokeMiterlimit),r.attributeState.fontFamily!==t.attributeState.fontFamily&&(c=tA.hasOwnProperty(r.attributeState.fontFamily)?tA[r.attributeState.fontFamily]:r.attributeState.fontFamily),r.attributeState.fill&&r.attributeState.fill!==t.attributeState.fill&&r.attributeState.fill instanceof Pn&&r.attributeState.fill.color.ok){var h=r.attributeState.fill.color;r.pdf.setTextColor(h.r,h.g,h.b)}r.attributeState.fontWeight===t.attributeState.fontWeight&&r.attributeState.fontStyle===t.attributeState.fontStyle||(f=yy(r.attributeState.fontStyle,r.attributeState.fontWeight)),c===void 0&&f===void 0||(c===void 0&&(c=tA.hasOwnProperty(r.attributeState.fontFamily)?tA[r.attributeState.fontFamily]:r.attributeState.fontFamily),r.pdf.setFont(c,f)),r.attributeState.fontSize!==t.attributeState.fontSize&&r.pdf.setFontSize(r.attributeState.fontSize*r.pdf.internal.scaleFactor)}function Sy(r,t,e){var i=Jg.exec(r);if(i){var s=i[1];return e.refsHandler.get(s)||void 0}}function xy(r,t,e){return Xr(this,void 0,void 0,function(){var i,s;return zr(this,function(c){switch(c.label){case 0:return i=e.clone(),t.element.hasAttribute("clipPathUnits")&&t.element.getAttribute("clipPathUnits").toLowerCase()==="objectboundingbox"&&(s=r.getBoundingBox(e),i.transform=e.pdf.matrixMult(e.pdf.Matrix(s[2],0,0,s[3],s[0],s[1]),e.transform)),[4,t.apply(i)];case 1:return c.sent(),[2]}})})}var _y=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t.prototype.render=function(e){return Xr(this,void 0,void 0,function(){var i,s,c,f;return zr(this,function(a){switch(a.label){case 0:return this.isVisible(e.attributeState.visibility!=="hidden",e)?((i=e.clone()).transform=i.pdf.matrixMult(this.computeNodeTransform(i),e.transform),rp(i,this),s=Ae(this.element,i.styleSheets,"clip-path"),(c=s&&s!=="none")?(f=Sy(s,0,i))?f.isVisible(!0,i)?(i.pdf.saveGraphicsState(),[4,xy(this,f,i)]):[3,2]:[3,4]:[3,5]):[2];case 1:return a.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:c=!1,a.label=5;case 5:return i.withinClipPath||i.pdf.saveGraphicsState(),ip(i,e,this.element),[4,this.renderCore(i)];case 6:return a.sent(),i.withinClipPath||i.pdf.restoreGraphicsState(),c&&i.pdf.restoreGraphicsState(),[2]}})})},t}(ep),qu=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t}(_y),xh=function(r){function t(e,i,s){var c=r.call(this,i,s)||this;return c.cachedPath=null,c.hasMarkers=e,c}return jr(t,r),t.prototype.renderCore=function(e){return Xr(this,void 0,void 0,function(){var i;return zr(this,function(s){switch(s.label){case 0:return(i=this.getCachedPath(e))===null||i.segments.length===0?[2]:(e.withinClipPath?i.transform(e.transform):e.pdf.setCurrentTransformationMatrix(e.transform),i.draw(e),[4,this.fillOrStroke(e)]);case 1:return s.sent(),this.hasMarkers?[4,this.drawMarkers(e,i)]:[3,3];case 2:s.sent(),s.label=3;case 3:return[2]}})})},t.prototype.getCachedPath=function(e){return this.cachedPath||(this.cachedPath=this.getPath(e))},t.prototype.drawMarkers=function(e,i){return Xr(this,void 0,void 0,function(){return zr(this,function(s){switch(s.label){case 0:return[4,this.getMarkers(i,e).draw(e.clone({transform:e.pdf.unitMatrix}))];case 1:return s.sent(),[2]}})})},t.prototype.fillOrStroke=function(e){return Xr(this,void 0,void 0,function(){var i,s,c,f,a;return zr(this,function(n){switch(n.label){case 0:return e.withinClipPath?[2]:(i=e.attributeState.fill,s=e.attributeState.stroke&&e.attributeState.strokeWidth!==0,i?[4,i.getFillData(this,e)]:[3,2]);case 1:return f=n.sent(),[3,3];case 2:f=void 0,n.label=3;case 3:return c=f,a=Ae(this.element,e.styleSheets,"fill-rule")==="evenodd",i&&s||e.withinUse?a?e.pdf.fillStrokeEvenOdd(c):e.pdf.fillStroke(c):i?a?e.pdf.fillEvenOdd(c):e.pdf.fill(c):s?e.pdf.stroke():e.pdf.discardPath(),[2]}})})},t.prototype.getBoundingBoxCore=function(e){var i=this.getCachedPath(e);if(!i)return[0,0,0,0];for(var s=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,n=0,l=0,h=0;h<i.segments.length;h++){var o=i.segments[h];(o instanceof en||o instanceof to||o instanceof Ca)&&(n=o.x,l=o.y),o instanceof Ca?(s=Math.min(s,n,o.x1,o.x2,o.x),f=Math.max(f,n,o.x1,o.x2,o.x),c=Math.min(c,l,o.y1,o.y2,o.y),a=Math.max(a,l,o.y1,o.y2,o.y)):(s=Math.min(s,n),f=Math.max(f,n),c=Math.min(c,l),a=Math.max(a,l))}return[s,c,f-s,a-c]},t.prototype.getMarkers=function(e,i){var s=Ae(this.element,i.styleSheets,"marker-start"),c=Ae(this.element,i.styleSheets,"marker-mid"),f=Ae(this.element,i.styleSheets,"marker-end"),a=new u4;if(s||c||f){f&&(f=np(f)),s&&(s=np(s)),c&&(c=np(c));for(var n=e.segments,l=[1,0],h=void 0,o=!1,u=[1,0],A=!1,g=function(d){var m=n[d],v=s&&(d===1||!(n[d]instanceof en)&&n[d-1]instanceof en);v&&n.forEach(function(O,X){if(!A&&O instanceof Yg&&X>d){var rt=n[X-1];A=(rt instanceof en||rt instanceof to||rt instanceof Ca)&&rt}});var C=f&&(d===n.length-1||!(n[d]instanceof en)&&n[d+1]instanceof en),x=c&&d>0&&!(d===1&&n[d-1]instanceof en),E=n[d-1]||null;if(E instanceof en||E instanceof to||E instanceof Ca)if(m instanceof Ca)v&&a.addMarker(new io(s,[E.x,E.y],py(A?[A.x,A.y]:[E.x,E.y],[m.x1,m.y1]))),C&&a.addMarker(new io(f,[m.x,m.y],py([m.x2,m.y2],[m.x,m.y]))),x&&(h=Yl([E.x,E.y],[m.x1,m.y1]),h=E instanceof en?h:Ch(Wu(l,h)),a.addMarker(new io(c,[E.x,E.y],Math.atan2(h[1],h[0])))),l=Yl([m.x2,m.y2],[m.x,m.y]);else if(m instanceof en||m instanceof to){if(h=Yl([E.x,E.y],[m.x,m.y]),v){var L=A?Yl([A.x,A.y],[m.x,m.y]):h;a.addMarker(new io(s,[E.x,E.y],Math.atan2(L[1],L[0])))}C&&a.addMarker(new io(f,[m.x,m.y],Math.atan2(h[1],h[0]))),x&&(L=m instanceof en?l:E instanceof en?h:Ch(Wu(l,h)),a.addMarker(new io(c,[E.x,E.y],Math.atan2(L[1],L[0])))),l=h}else m instanceof Yg&&(h=Yl([E.x,E.y],[o.x,o.y]),x&&(L=E instanceof en?h:Ch(Wu(l,h)),a.addMarker(new io(c,[E.x,E.y],Math.atan2(L[1],L[0])))),C&&(L=Ch(Wu(h,u)),a.addMarker(new io(f,[o.x,o.y],Math.atan2(L[1],L[0])))),l=h);else{o=m instanceof en&&m;var U=n[d+1];(U instanceof en||U instanceof to||U instanceof Ca)&&(u=Yl([o.x,o.y],[U.x,U.y]))}},p=0;p<n.length;p++)g(p)}return a},t}(qu);function np(r){var t=Jg.exec(r);return t&&t[1]||void 0}var v4=function(r){function t(e,i){return r.call(this,!0,e,i)||this}return jr(t,r),t.prototype.getPath=function(e){if(e.withinClipPath||e.attributeState.stroke===null)return null;var i=parseFloat(this.element.getAttribute("x1")||"0"),s=parseFloat(this.element.getAttribute("y1")||"0"),c=parseFloat(this.element.getAttribute("x2")||"0"),f=parseFloat(this.element.getAttribute("y2")||"0");return i||c||s||f?new Jl().moveTo(i,s).lineTo(c,f):null},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Ja(this,e,i)},t.prototype.fillOrStroke=function(e){return Xr(this,void 0,void 0,function(){return zr(this,function(i){switch(i.label){case 0:return e.attributeState.fill=null,[4,r.prototype.fillOrStroke.call(this,e)];case 1:return i.sent(),[2]}})})},t}(xh),Ey=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t.prototype.apply=function(e){return Xr(this,void 0,void 0,function(){var i,s,c,f,a;return zr(this,function(n){switch(n.label){case 0:return this.isVisible(e.attributeState.visibility!=="hidden",e)?((i=e.clone()).transform=i.pdf.unitMatrix,rp(i,this),s=Ae(this.element,i.styleSheets,"clip-path"),s&&s!=="none"&&(c=Sy(s,0,i))?c.isVisible(!0,i)?[4,xy(this,c,i)]:[3,2]:[3,3]):[2];case 1:return n.sent(),[3,3];case 2:return[2];case 3:ip(i,e,this.element),f=0,a=this.children,n.label=4;case 4:return f<a.length?[4,a[f].render(i)]:[3,7];case 5:n.sent(),n.label=6;case 6:return f++,[3,4];case 7:return[2]}})})},t.prototype.getBoundingBoxCore=function(e){return tp(e,this)},t.prototype.isVisible=function(e,i){return ro(this,e,i)},t.prototype.computeNodeTransformCore=function(e){var i=parseFloat(Ae(this.element,e.styleSheets,"x")||"0"),s=parseFloat(Ae(this.element,e.styleSheets,"y")||"0"),c=this.element.getAttribute("viewBox");if(c){var f=Ps(c),a=parseFloat(Ae(this.element,e.styleSheets,"width")||Ae(this.element.ownerSVGElement,e.styleSheets,"width")||c[2]),n=parseFloat(Ae(this.element,e.styleSheets,"height")||Ae(this.element.ownerSVGElement,e.styleSheets,"height")||c[3]);return Xu(this.element,f,i,s,a,n,e)}return e.pdf.Matrix(1,0,0,1,i,s)},t}(Sh),$u=function(r,t){this.width=r,this.height=t},y4=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t.prototype.renderCore=function(e){return Xr(this,void 0,void 0,function(){var i,s,c,f,a,n,l,h,o,u,A,g,p;return zr(this,function(d){switch(d.label){case 0:return i=parseFloat,(s=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(c=s.substring(1),f=e.refsHandler.get(c),a=eo(f.element,"symbol,svg")&&f.element.hasAttribute("viewBox"),n=i(Ae(this.element,e.styleSheets,"x")||"0"),l=i(Ae(this.element,e.styleSheets,"y")||"0"),h=void 0,o=void 0,a?(h=i(Ae(this.element,e.styleSheets,"width")||Ae(f.element,e.styleSheets,"width")||"0"),o=i(Ae(this.element,e.styleSheets,"height")||Ae(f.element,e.styleSheets,"height")||"0"),n+=i(Ae(f.element,e.styleSheets,"x")||"0"),l+=i(Ae(f.element,e.styleSheets,"y")||"0"),A=Ps(f.element.getAttribute("viewBox")),u=Xu(f.element,A,n,l,h,o,e)):u=e.pdf.Matrix(1,0,0,1,n,l),g=new ZA(e.pdf,{refsHandler:e.refsHandler,styleSheets:e.styleSheets,withinUse:!0,viewport:a?new $u(h,o):e.viewport,svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure}),p=e.attributeState.color,[4,e.refsHandler.getRendered(c,p,function(m){return t.renderReferencedNode(m,c,p,g)})]):[2];case 1:return d.sent(),e.pdf.saveGraphicsState(),e.pdf.setCurrentTransformationMatrix(e.transform),a&&Ae(f.element,e.styleSheets,"overflow")!=="visible"&&(e.pdf.rect(n,l,h,o),e.pdf.clip().discardPath()),e.pdf.doFormObject(e.refsHandler.generateKey(c,p),u),e.pdf.restoreGraphicsState(),[2]}})})},t.renderReferencedNode=function(e,i,s,c){return Xr(this,void 0,void 0,function(){var f;return zr(this,function(a){switch(a.label){case 0:return f=[(f=e.getBoundingBox(c))[0]-.5*f[2],f[1]-.5*f[3],2*f[2],2*f[3]],c.attributeState.color=s,c.pdf.beginFormObject(f[0],f[1],f[2],f[3],c.pdf.unitMatrix),e instanceof Ey?[4,e.apply(c)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,e.render(c)];case 3:a.sent(),a.label=4;case 4:return c.pdf.endFormObject(c.refsHandler.generateKey(i,s)),[2]}})})},t.prototype.getBoundingBoxCore=function(e){return Bh(this.element,e)},t.prototype.isVisible=function(e,i){return Ja(this,e,i)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t}(qu),w4=function(r){function t(e,i){return r.call(this,!1,e,i)||this}return jr(t,r),t.prototype.getPath=function(e){var i=parseFloat(Ae(this.element,e.styleSheets,"width")||"0"),s=parseFloat(Ae(this.element,e.styleSheets,"height")||"0");if(!isFinite(i)||i<=0||!isFinite(s)||s<=0)return null;var c=Ae(this.element,e.styleSheets,"rx"),f=Ae(this.element,e.styleSheets,"ry"),a=Math.min(parseFloat(c||f||"0"),.5*i),n=Math.min(parseFloat(f||c||"0"),.5*s),l=parseFloat(Ae(this.element,e.styleSheets,"x")||"0"),h=parseFloat(Ae(this.element,e.styleSheets,"y")||"0"),o=4/3*(Math.SQRT2-1);return a===0&&n===0?new Jl().moveTo(l,h).lineTo(l+i,h).lineTo(l+i,h+s).lineTo(l,h+s).close():new Jl().moveTo(l+=a,h).lineTo(l+=i-2*a,h).curveTo(l+a*o,h,l+a,h+(n-n*o),l+=a,h+=n).lineTo(l,h+=s-2*n).curveTo(l,h+n*o,l-a*o,h+n,l-=a,h+=n).lineTo(l+=2*a-i,h).curveTo(l-a*o,h,l-a,h-n*o,l-=a,h-=n).lineTo(l,h+=2*n-s).curveTo(l,h-n*o,l+a*o,h-n,l+=a,h-=n).close()},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Ja(this,e,i)},t}(xh),Fy=function(r){function t(e,i){return r.call(this,!1,e,i)||this}return jr(t,r),t.prototype.getPath=function(e){var i=this.getRx(e),s=this.getRy(e);if(!isFinite(i)||s<=0||!isFinite(s)||s<=0)return null;var c=parseFloat(Ae(this.element,e.styleSheets,"cx")||"0"),f=parseFloat(Ae(this.element,e.styleSheets,"cy")||"0"),a=4/3*(Math.SQRT2-1)*i,n=4/3*(Math.SQRT2-1)*s;return new Jl().moveTo(c+i,f).curveTo(c+i,f-n,c+a,f-s,c,f-s).curveTo(c-a,f-s,c-i,f-n,c-i,f).curveTo(c-i,f+n,c-a,f+s,c,f+s).curveTo(c+a,f+s,c+i,f+n,c+i,f)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Ja(this,e,i)},t}(xh),b4=function(r){function t(e,i){return r.call(this,e,i)||this}return jr(t,r),t.prototype.getRx=function(e){return parseFloat(Ae(this.element,e.styleSheets,"rx")||"0")},t.prototype.getRy=function(e){return parseFloat(Ae(this.element,e.styleSheets,"ry")||"0")},t}(Fy);function Ty(r){var t="invisible",e=r.stroke&&r.strokeWidth!==0,i=r.fill;return i&&e?t="fillThenStroke":i?t="fill":e&&(t="stroke"),t}function Ly(r){return r.replace(/[\n\r]/g,"")}function Iy(r){return r.replace(/[\t]/g," ")}function Py(r){return r.replace(/ +/g," ")}function Uy(r,t,e){switch(Ae(r,e.styleSheets,"text-transform")){case"uppercase":return t.toUpperCase();case"lowercase":return t.toLowerCase();default:return t}}var sp=function(){function r(t,e,i,s){this.textNode=t,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=e,this.originX=i,this.originY=s,this.textMeasures=[]}return r.prototype.setX=function(t){this.originX=t},r.prototype.setY=function(t){this.originY=t},r.prototype.add=function(t,e,i){this.texts.push(e),this.textNodes.push(t),this.contexts.push(i)},r.prototype.rightTrimText=function(){for(var t=this.texts.length-1;t>=0;t--)if(this.contexts[t].attributeState.xmlSpace==="default"&&(this.texts[t]=this.texts[t].replace(/\s+$/,"")),this.texts[t].match(/[^\s]/))return!1;return!0},r.prototype.measureText=function(t){for(var e=0;e<this.texts.length;e++)this.textMeasures.push({width:t.textMeasure.measureTextWidth(this.texts[e],this.contexts[e].attributeState),length:this.texts[e].length})},r.prototype.put=function(t,e){var i,s,c,f,a=[],n=[],l=[],h=this.originX,o=this.originY,u=h,A=h;for(i=0;i<this.textNodes.length;i++){s=this.textNodes[i],c=this.contexts[i],f=this.textMeasures[i]||{width:t.textMeasure.measureTextWidth(this.texts[i],this.contexts[i].attributeState),length:this.texts[i].length};var g=h,p=o;if(s.nodeName!=="#text"&&!a.includes(s)){a.push(s);var d=r.resolveRelativePositionAttribute(s,"dx");d!==null&&(g+=Za(d,c.attributeState.fontSize));var m=r.resolveRelativePositionAttribute(s,"dy");m!==null&&(p+=Za(m,c.attributeState.fontSize))}n[i]=g,l[i]=p,h=g+f.width+f.length*e,o=p,u=Math.min(u,g),A=Math.max(A,h)}var v=0;switch(this.textAnchor){case"start":v=0;break;case"middle":v=(A-u)/2;break;case"end":v=A-u}for(i=0;i<this.textNodes.length;i++)if(s=this.textNodes[i],c=this.contexts[i],s.nodeName==="#text"||c.attributeState.visibility!=="hidden"){t.pdf.saveGraphicsState(),ip(c,t,s);var C=c.attributeState.alignmentBaseline,x=Ty(c.attributeState);t.pdf.text(this.texts[i],n[i]-v,l[i],{baseline:vy(C),angle:t.transform,renderingMode:x==="fill"?void 0:x,charSpace:e===0?void 0:e}),t.pdf.restoreGraphicsState()}return[h,o]},r.resolveRelativePositionAttribute=function(t,e){for(var i,s=t;s&&eo(s,"tspan");){if(s.hasAttribute(e))return s.getAttribute(e);if(((i=t.parentElement)===null||i===void 0?void 0:i.firstChild)!==t)break;s=s.parentElement}return null},r}(),C4=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t.prototype.processTSpans=function(e,i,s,c,f,a){for(var n=s.pdf.getFontSize(),l=s.attributeState.xmlSpace,h=!0,o=!1,u=0;u<i.childNodes.length;u++){var A=i.childNodes[u];if(A.textContent){var g=A.textContent;if(A.nodeName==="#text"){var p=Ly(g);p=Iy(p),l==="default"&&(p=Py(p),h&&p.match(/^\s/)&&(o=!0),p.match(/[^\s]/)&&(h=!1),a.prevText.match(/\s$/)&&(p=p.replace(/^\s+/,"")));var d=Uy(i,p,s);f.add(i,d,s),a.prevText=g,a.prevContext=s}else if(!eo(A,"title")){if(eo(A,"tspan")){var m=A,v=m.getAttribute("x");if(v!==null){var C=Za(v,n);f=new sp(this,Ae(m,s.styleSheets,"text-anchor")||s.attributeState.textAnchor,C,0),c.push({type:"y",chunk:f})}var x=m.getAttribute("y");if(x!==null){var E=Za(x,n);f=new sp(this,Ae(m,s.styleSheets,"text-anchor")||s.attributeState.textAnchor,0,E),c.push({type:"x",chunk:f})}var L=s.clone();rp(L,e,m),this.processTSpans(e,m,L,c,f,a)}}}}return o},t.prototype.renderCore=function(e){return Xr(this,void 0,void 0,function(){var i,s,c,f,a,n,l,h,o,u,A,g,p,d,m,v,C,x,E,L,U,O,X;return zr(this,function(rt){if(e.pdf.saveGraphicsState(),i=0,s=0,c=1,f=e.pdf.getFontSize(),a=Za(this.element.getAttribute("x"),f),n=Za(this.element.getAttribute("y"),f),l=Za(this.element.getAttribute("dx"),f),h=Za(this.element.getAttribute("dy"),f),o=parseFloat(this.element.getAttribute("textLength")||"0"),u=e.attributeState.visibility,this.element.childElementCount===0)A=this.element.textContent||"",g=function(M,H){return M=Iy(M=Ly(M)),H.xmlSpace==="default"&&(M=Py(M=M.trim())),M}(A,e.attributeState),p=Uy(this.element,g,e),i=e.textMeasure.getTextOffset(p,e.attributeState),o>0&&(d=e.textMeasure.measureTextWidth(p,e.attributeState),e.attributeState.xmlSpace==="default"&&A.match(/^\s/)&&(c=0),s=(o-d)/(p.length-c)||0),u==="visible"&&(m=e.attributeState.alignmentBaseline,v=Ty(e.attributeState),e.pdf.text(p,a+l-i,n+h,{baseline:vy(m),angle:e.transform,renderingMode:v==="fill"?void 0:v,charSpace:s===0?void 0:s}));else{for(C=[],x=new sp(this,e.attributeState.textAnchor,a+l,n+h),C.push({type:"",chunk:x}),E=this.processTSpans(this,this.element,e,C,x,{prevText:" ",prevContext:e}),c=E?0:1,L=!0,U=C.length-1;U>=0;U--)L&&(L=C[U].chunk.rightTrimText());o>0&&(O=0,X=0,C.forEach(function(M){var H=M.chunk;H.measureText(e),H.textMeasures.forEach(function(J){var $=J.width,ht=J.length;O+=$,X+=ht})}),s=(o-O)/(X-c)),C.reduce(function(M,H){var J=H.type,$=H.chunk;return J==="x"?$.setX(M[0]):J==="y"&&$.setY(M[1]),$.put(e,s)},[0,0])}return e.pdf.restoreGraphicsState(),[2]})})},t.prototype.isVisible=function(e,i){return ro(this,e,i)},t.prototype.getBoundingBoxCore=function(e){return Bh(this.element,e)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t}(qu),B4=function(r){function t(e,i){return r.call(this,!0,e,i)||this}return jr(t,r),t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Ja(this,e,i)},t.prototype.getPath=function(e){var i,s,c=new l4(Ae(this.element,e.styleSheets,"d")||"").unshort().unarc().abs(),f=new Jl;return c.iterate(function(a){switch(a[0]){case"M":f.moveTo(a[1],a[2]);break;case"L":f.lineTo(a[1],a[2]);break;case"H":f.lineTo(a[1],s);break;case"V":f.lineTo(i,a[1]);break;case"C":f.curveTo(a[1],a[2],a[3],a[4],a[5],a[6]);break;case"Q":var n=my([i,s],[a[1],a[2]]),l=my([a[3],a[4]],[a[1],a[2]]);f.curveTo(n[0],n[1],l[0],l[1],a[3],a[4]);break;case"Z":f.close()}switch(a[0]){case"M":case"L":i=a[1],s=a[2];break;case"H":i=a[1];break;case"V":s=a[1];break;case"C":i=a[5],s=a[6];break;case"Q":i=a[3],s=a[4]}}),f},t}(xh),S4=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,x4=function(r){function t(e,i){var s=r.call(this,e,i)||this;return s.imageLoadingPromise=null,s.imageUrl=s.element.getAttribute("xlink:href")||s.element.getAttribute("href"),s.imageUrl&&(s.imageLoadingPromise=t.fetchImageData(s.imageUrl)),s}return jr(t,r),t.prototype.renderCore=function(e){return Xr(this,void 0,void 0,function(){var i,s,c,f,a,n,l,h,o,u,A,g;return zr(this,function(p){switch(p.label){case 0:return this.imageLoadingPromise?(e.pdf.setCurrentTransformationMatrix(e.transform),i=parseFloat(Ae(this.element,e.styleSheets,"width")||"0"),s=parseFloat(Ae(this.element,e.styleSheets,"height")||"0"),c=parseFloat(Ae(this.element,e.styleSheets,"x")||"0"),f=parseFloat(Ae(this.element,e.styleSheets,"y")||"0"),!isFinite(i)||i<=0||!isFinite(s)||s<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return a=p.sent(),n=a.data,(l=a.format).indexOf("svg")!==0?[3,3]:(h=new DOMParser,o=h.parseFromString(n,"image/svg+xml").firstElementChild,(!(u=this.element.getAttribute("preserveAspectRatio"))||u.indexOf("defer")<0||!o.getAttribute("preserveAspectRatio"))&&o.setAttribute("preserveAspectRatio",u||""),o.setAttribute("x",String(c)),o.setAttribute("y",String(f)),o.setAttribute("width",String(i)),o.setAttribute("height",String(s)),[4,ap(o,A={}).render(new ZA(e.pdf,{refsHandler:new gy(A),styleSheets:e.styleSheets,viewport:new $u(i,s),svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure}))]);case 2:return p.sent(),[2];case 3:g="data:image/"+l+";base64,"+btoa(n);try{e.pdf.addImage(g,"",c,f,i,s)}catch(d){typeof console=="object"&&console.warn&&console.warn("Could not load image "+this.imageUrl+`. 
`+d)}p.label=4;case 4:return[2]}})})},t.prototype.getBoundingBoxCore=function(e){return Bh(this.element,e)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Ja(this,e,i)},t.fetchImageData=function(e){return Xr(this,void 0,void 0,function(){var i,s,c,f,a;return zr(this,function(n){switch(n.label){case 0:if(!(c=e.match(S4)))return[3,1];if(f=c[2],(a=f.split("/"))[0]!=="image")throw new Error("Unsupported image URL: "+e);return s=a[1],i=c[5],c[4]==="base64"?(i=i.replace(/\s/g,""),i=atob(i)):i=decodeURIComponent(i),[3,3];case 1:return[4,t.fetchImage(e)];case 2:i=n.sent(),s=e.substring(e.lastIndexOf(".")+1),n.label=3;case 3:return[2,{data:i,format:s}]}})})},t.fetchImage=function(e){return new Promise(function(i,s){var c=new XMLHttpRequest;c.open("GET",e,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status!==200)throw new Error("Error "+c.status+": Failed to load image '"+e+"'");for(var f=new Uint8Array(c.response),a="",n=0;n<f.length;n++)a+=String.fromCharCode(f[n]);i(a)},c.onerror=s,c.onabort=s,c.send(null)})},t.getMimeType=function(e){switch(e=e.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/"+e}},t}(qu),Oy=function(r){function t(e,i,s){var c=r.call(this,!0,i,s)||this;return c.closed=e,c}return jr(t,r),t.prototype.getPath=function(e){if(!this.element.hasAttribute("points")||this.element.getAttribute("points")==="")return null;var i=t.parsePointsString(this.element.getAttribute("points")),s=new Jl;if(i.length<1)return s;s.moveTo(i[0][0],i[0][1]);for(var c=1;c<i.length;c++)s.lineTo(i[c][0],i[c][1]);return this.closed&&s.close(),s},t.prototype.isVisible=function(e,i){return Ja(this,e,i)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.parsePointsString=function(e){for(var i=Ps(e),s=[],c=0;c<i.length-1;c+=2){var f=i[c],a=i[c+1];s.push([f,a])}return s},t}(xh),_4=function(r){function t(e,i){return r.call(this,!0,e,i)||this}return jr(t,r),t}(Oy),E4=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t.prototype.render=function(e){return Promise.resolve()},t.prototype.getBoundingBoxCore=function(e){return[0,0,0,0]},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t.prototype.isVisible=function(e,i){return Ja(this,e,i)},t}(ep),F4=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t.prototype.apply=function(e){return Xr(this,void 0,void 0,function(){var i,s,c,f,a;return zr(this,function(n){switch(n.label){case 0:i=this.computeNodeTransform(e),s=this.getBoundingBox(e),e.pdf.beginFormObject(s[0],s[1],s[2],s[3],i),function(l){var h=l.attributeState,o=l.pdf,u=1,A=1;u*=h.fillOpacity,u*=h.opacity,h.fill instanceof Pn&&h.fill.color.a!==void 0&&(u*=h.fill.color.a),A*=h.strokeOpacity,A*=h.opacity,h.stroke instanceof Pn&&h.stroke.color.a!==void 0&&(A*=h.stroke.color.a);var g,p={};if(p.opacity=u,p["stroke-opacity"]=A,o.setGState(new Ko(p)),h.fill&&h.fill instanceof Pn&&h.fill.color.ok?o.setFillColor(h.fill.color.r,h.fill.color.g,h.fill.color.b):o.setFillColor(0,0,0),o.setLineWidth(h.strokeWidth),h.stroke instanceof Pn?o.setDrawColor(h.stroke.color.r,h.stroke.color.g,h.stroke.color.b):o.setDrawColor(0,0,0),o.setLineCap(h.strokeLinecap),o.setLineJoin(h.strokeLinejoin),h.strokeDasharray?o.setLineDashPattern(h.strokeDasharray,h.strokeDashoffset):o.setLineDashPattern([],0),o.setLineMiterLimit(h.strokeMiterlimit),g=tA.hasOwnProperty(h.fontFamily)?tA[h.fontFamily]:h.fontFamily,h.fill&&h.fill instanceof Pn&&h.fill.color.ok){var d=h.fill.color;o.setTextColor(d.r,d.g,d.b)}else o.setTextColor(0,0,0);var m="";h.fontWeight==="bold"&&(m="bold"),h.fontStyle==="italic"&&(m+="italic"),m===""&&(m="normal"),g!==void 0||m!==void 0?(g===void 0&&(g=tA.hasOwnProperty(h.fontFamily)?tA[h.fontFamily]:h.fontFamily),o.setFont(g,m)):o.setFont("helvetica",m),o.setFontSize(h.fontSize*o.internal.scaleFactor)}(c=new ZA(e.pdf,{refsHandler:e.refsHandler,styleSheets:e.styleSheets,viewport:e.viewport,svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure})),f=0,a=this.children,n.label=1;case 1:return f<a.length?[4,a[f].render(c)]:[3,4];case 2:n.sent(),n.label=3;case 3:return f++,[3,1];case 4:return e.pdf.endFormObject(this.element.getAttribute("id")),[2]}})})},t.prototype.getBoundingBoxCore=function(e){var i,s=this.element.getAttribute("viewBox");return s&&(i=Ps(s)),[i&&i[0]||0,i&&i[1]||0,i&&i[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),i&&i[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},t.prototype.computeNodeTransformCore=function(e){var i,s=parseFloat(this.element.getAttribute("refX")||"0"),c=parseFloat(this.element.getAttribute("refY")||"0"),f=this.element.getAttribute("viewBox");if(f){var a=Ps(f);i=Xu(this.element,a,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),e,!0),i=e.pdf.matrixMult(e.pdf.Matrix(1,0,0,1,-s,-c),i)}else i=e.pdf.Matrix(1,0,0,1,-s,-c);return i},t.prototype.isVisible=function(e,i){return ro(this,e,i)},t}(Sh),T4=function(r){function t(e,i){return r.call(this,e,i)||this}return jr(t,r),t.prototype.getR=function(e){var i;return(i=this.r)!==null&&i!==void 0?i:this.r=parseFloat(Ae(this.element,e.styleSheets,"r")||"0")},t.prototype.getRx=function(e){return this.getR(e)},t.prototype.getRy=function(e){return this.getR(e)},t}(Fy),L4=function(r){function t(e,i){return r.call(this,!1,e,i)||this}return jr(t,r),t}(Oy),Qy=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t.prototype.renderCore=function(e){return Xr(this,void 0,void 0,function(){var i,s;return zr(this,function(c){switch(c.label){case 0:i=0,s=this.children,c.label=1;case 1:return i<s.length?[4,s[i].render(e)]:[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.getBoundingBoxCore=function(e){return tp(e,this)},t}(_y),I4=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t.prototype.isVisible=function(e,i){return ro(this,e,i)},t.prototype.render=function(e){return Xr(this,void 0,void 0,function(){var i,s,c,f,a;return zr(this,function(n){switch(n.label){case 0:return this.isVisible(e.attributeState.visibility!=="hidden",e)?(i=this.getX(e),s=this.getY(e),c=this.getWidth(e),f=this.getHeight(e),e.pdf.saveGraphicsState(),a=e.transform,this.element.hasAttribute("transform")&&(a=e.pdf.matrixMult(zu(this.element.getAttribute("transform"),e),a)),e.pdf.setCurrentTransformationMatrix(a),e.withinUse||Ae(this.element,e.styleSheets,"overflow")==="visible"||e.pdf.rect(i,s,c,f).clip().discardPath(),[4,r.prototype.render.call(this,e.clone({transform:e.pdf.unitMatrix,viewport:e.withinUse?e.viewport:new $u(c,f)}))]):[2];case 1:return n.sent(),e.pdf.restoreGraphicsState(),[2]}})})},t.prototype.computeNodeTransform=function(e){return this.computeNodeTransformCore(e)},t.prototype.computeNodeTransformCore=function(e){if(e.withinUse)return e.pdf.unitMatrix;var i,s=this.getX(e),c=this.getY(e),f=this.getViewBox();if(f){var a=this.getWidth(e),n=this.getHeight(e);i=Xu(this.element,f,s,c,a,n,e)}else i=e.pdf.Matrix(1,0,0,1,s,c);return i},t.prototype.getWidth=function(e){if(this.width!==void 0)return this.width;var i,s,c=e.svg2pdfParameters;if(this.isOutermostSvg(e))if(c.width!=null)i=c.width;else if(s=Ae(this.element,e.styleSheets,"width"))i=parseFloat(s);else{var f=this.getViewBox();if(f&&(c.height!=null||Ae(this.element,e.styleSheets,"height"))){var a=f[2]/f[3];i=this.getHeight(e)*a}else i=Math.min(300,e.viewport.width,2*e.viewport.height)}else i=(s=Ae(this.element,e.styleSheets,"width"))?parseFloat(s):e.viewport.width;return this.width=i},t.prototype.getHeight=function(e){if(this.height!==void 0)return this.height;var i,s,c=e.svg2pdfParameters;if(this.isOutermostSvg(e))if(c.height!=null)i=c.height;else if(s=Ae(this.element,e.styleSheets,"height"))i=parseFloat(s);else{var f=this.getViewBox();if(f){var a=f[2]/f[3];i=this.getWidth(e)/a}else i=Math.min(150,e.viewport.width/2,e.viewport.height)}else i=(s=Ae(this.element,e.styleSheets,"height"))?parseFloat(s):e.viewport.height;return this.height=i},t.prototype.getX=function(e){if(this.x!==void 0)return this.x;if(this.isOutermostSvg(e))return this.x=0;var i=Ae(this.element,e.styleSheets,"x");return this.x=i?parseFloat(i):0},t.prototype.getY=function(e){if(this.y!==void 0)return this.y;if(this.isOutermostSvg(e))return this.y=0;var i=Ae(this.element,e.styleSheets,"y");return this.y=i?parseFloat(i):0},t.prototype.getViewBox=function(){if(this.viewBox!==void 0)return this.viewBox;var e=this.element.getAttribute("viewBox");return this.viewBox=e?Ps(e):void 0},t.prototype.isOutermostSvg=function(e){return e.svg2pdfParameters.element===this.element},t}(Qy),P4=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t.prototype.isVisible=function(e,i){return ro(this,e,i)},t.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},t}(Qy),U4=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return jr(t,r),t.prototype.apply=function(e){return Xr(this,void 0,void 0,function(){var i,s,c;return zr(this,function(f){switch(f.label){case 0:if(!this.isVisible(!0,e))return[2];i=e.pdf.matrixMult(this.computeNodeTransform(e),e.transform),e.pdf.setCurrentTransformationMatrix(i),s=0,c=this.children,f.label=1;case 1:return s<c.length?[4,c[s].render(new ZA(e.pdf,{refsHandler:e.refsHandler,styleSheets:e.styleSheets,viewport:e.viewport,withinClipPath:!0,svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure}))]:[3,4];case 2:f.sent(),f.label=3;case 3:return s++,[3,1];case 4:return e.pdf.clip().discardPath(),e.pdf.setCurrentTransformationMatrix(i.inversed()),[2]}})})},t.prototype.getBoundingBoxCore=function(e){return tp(e,this)},t.prototype.isVisible=function(e,i){return ro(this,e,i)},t}(Sh);function ap(r,t){var e,i=[];switch(function(c,f){for(var a=[],n=0;n<c.childNodes.length;n++){var l=c.childNodes[n];l.nodeName.charAt(0)!=="#"&&a.push(l)}for(n=0;n<a.length;n++)f(n,a[n])}(r,function(c,f){return i.push(ap(f,t))}),r.tagName.toLowerCase()){case"a":case"g":e=new P4(r,i);break;case"circle":e=new T4(r,i);break;case"clippath":e=new U4(r,i);break;case"ellipse":e=new b4(r,i);break;case"lineargradient":e=new by(r,i);break;case"image":e=new x4(r,i);break;case"line":e=new v4(r,i);break;case"marker":e=new F4(r,i);break;case"path":e=new B4(r,i);break;case"pattern":e=new By(r,i);break;case"polygon":e=new _4(r,i);break;case"polyline":e=new L4(r,i);break;case"radialgradient":e=new Cy(r,i);break;case"rect":e=new w4(r,i);break;case"svg":e=new I4(r,i);break;case"symbol":e=new Ey(r,i);break;case"text":e=new C4(r,i);break;case"use":e=new y4(r,i);break;default:e=new E4(r,i)}if(t!=null&&e.element.hasAttribute("id")){var s=sy(e.element.id,{isIdentifier:!0});t[s]=t[s]||e}return e.children.forEach(function(c){return c.setParent(e)}),e}var O4=function(){function r(t,e){this.rootSvg=t,this.loadExternalSheets=e,this.styleSheets=[]}return r.prototype.load=function(){return Xr(this,void 0,void 0,function(){var t;return zr(this,function(e){switch(e.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return t=e.sent(),this.parseCssSheets(t),[2]}})})},r.prototype.collectStyleSheetTexts=function(){return Xr(this,void 0,void 0,function(){var t,e,i,s,c;return zr(this,function(f){switch(f.label){case 0:if(t=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(s=0;s<this.rootSvg.ownerDocument.childNodes.length;s++)(e=this.rootSvg.ownerDocument.childNodes[s]).nodeName==="xml-stylesheet"&&typeof e.data=="string"&&t.push(r.loadSheet(e.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(i=this.rootSvg.querySelectorAll("style,link"),s=0;s<i.length;s++)eo(c=i[s],"style")?t.push(c.textContent):this.loadExternalSheets&&eo(c,"link")&&c.getAttribute("rel")==="stylesheet"&&c.hasAttribute("href")&&t.push(r.loadSheet(c.getAttribute("href")));return[4,Promise.all(t)];case 1:return[2,f.sent().filter(function(a){return a!==null})]}})})},r.prototype.parseCssSheets=function(t){for(var e=document.implementation.createHTMLDocument(""),i=0,s=t;i<s.length;i++){var c=s[i],f=e.createElement("style");f.textContent=c,e.body.appendChild(f);var a=f.sheet;if(a instanceof CSSStyleSheet){for(var n=a.cssRules.length-1;n>=0;n--){var l=a.cssRules[n];if(l instanceof CSSStyleRule){var h=l;if(h.selectorText.indexOf(",")>=0){a.deleteRule(n);for(var o=h.cssText.substring(h.selectorText.length),u=r.splitSelectorAtCommas(h.selectorText),A=0;A<u.length;A++)a.insertRule(u[A]+o,n+A)}}else a.deleteRule(n)}this.styleSheets.push(a)}}},r.splitSelectorAtCommas=function(t){for(var e,i=/,|["']/g,s=/[^\\]["]/g,c=/[^\\][']/g,f=[],a="initial",n=-1,l=s,h=0;h<t.length;)switch(a){case"initial":i.lastIndex=h,(e=i.exec(t))?(e[0]===","?(f.push(t.substring(n+1,i.lastIndex-1).trim()),n=i.lastIndex-1):(a="withinQuotes",l=e[0]==='"'?s:c),h=i.lastIndex):(f.push(t.substring(n+1).trim()),h=t.length);break;case"withinQuotes":l.lastIndex=h,(e=l.exec(t))&&(h=l.lastIndex,a="initial")}return f},r.loadSheet=function(t){return new Promise(function(e,i){var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="text",s.onload=function(){s.status!==200&&i(new Error("Error "+s.status+": Failed to load '"+t+"'")),e(s.responseText)},s.onerror=i,s.onabort=i,s.send(null)}).catch(function(){return null})},r.prototype.getPropertyValue=function(t,e){for(var i=[],s=0,c=this.styleSheets;s<c.length;s++)for(var f=c[s],a=0;a<f.cssRules.length;a++){var n=f.cssRules[a];n.style.getPropertyValue(e)&&t.matches(n.selectorText)&&i.push(n)}if(i.length!==0)return i.reduce(function(l,h){return u=h,((A=(o=l).style.getPropertyPriority(e))!==u.style.getPropertyPriority(e)?A==="important"?1:-1:c4(o.selectorText,u.selectorText))===1?l:h;var o,u,A}).style.getPropertyValue(e)||void 0},r}(),Q4=function(){function r(){this.measureMethods={}}return r.prototype.getTextOffset=function(t,e){var i=e.textAnchor;if(i==="start")return 0;var s=this.measureTextWidth(t,e),c=0;switch(i){case"end":c=s;break;case"middle":c=s/2}return c},r.prototype.measureTextWidth=function(t,e){if(t.length===0)return 0;var i=e.fontFamily;return this.getMeasureFunction(i).call(this,t,e.fontFamily,e.fontSize+"px",e.fontStyle,e.fontWeight)},r.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS("http://www.w3.org/2000/svg","text");var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.appendChild(this.textMeasuringTextElement),t.style.setProperty("position","absolute"),t.style.setProperty("visibility","hidden"),document.body.appendChild(t)}return this.textMeasuringTextElement},r.prototype.canvasTextMeasure=function(t,e,i,s,c){var f=document.createElement("canvas").getContext("2d");return f!=null?(f.font=[s,c,i,e].join(" "),f.measureText(t).width):0},r.prototype.svgTextMeasure=function(t,e,i,s,c,f){f===void 0&&(f=this.getMeasurementTextNode());var a=f;return a.setAttribute("font-family",e),a.setAttribute("font-size",i),a.setAttribute("font-style",s),a.setAttribute("font-weight",c),a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),a.textContent=t,a.getBBox().width},r.prototype.getMeasureFunction=function(t){var e=this.measureMethods[t];if(!e){var i=this.canvasTextMeasure(r.testString,t,"16px","normal","normal"),s=this.svgTextMeasure(r.testString,t,"16px","normal","normal");e=Math.abs(i-s)<r.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[t]=e}return e},r.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var t=this.textMeasuringTextElement.parentNode;t&&document.body.removeChild(t),this.textMeasuringTextElement=void 0}},r.testString=`abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!"$%&/()=?'\\+*-_.:,;^}][{#~|<>`,r.epsilon=.1,r}();function N4(r,t,e){var i,s,c;return e===void 0&&(e={}),Xr(this,void 0,void 0,function(){var f,a,n,l,h,o,u,A,g,p,d;return zr(this,function(m){switch(m.label){case 0:return f=(i=e.x)!==null&&i!==void 0?i:0,a=(s=e.y)!==null&&s!==void 0?s:0,n=(c=e.loadExternalStyleSheets)!==null&&c!==void 0&&c,h=new gy(l={}),[4,(o=new O4(r,n)).load()];case 1:return m.sent(),u=new $u(t.internal.pageSize.getWidth(),t.internal.pageSize.getHeight()),A=qg(qg({},e),{element:r}),g=new Q4,p=new ZA(t,{refsHandler:h,styleSheets:o,viewport:u,svg2pdfParameters:A,textMeasure:g}),t.advancedAPI(),t.saveGraphicsState(),t.setCurrentTransformationMatrix(t.Matrix(1,0,0,1,f,a)),t.setLineWidth(p.attributeState.strokeWidth),d=p.attributeState.fill.color,t.setFillColor(d.r,d.g,d.b),t.setFont(p.attributeState.fontFamily),t.setFontSize(p.attributeState.fontSize*t.internal.scaleFactor),[4,ap(r,l).render(p)];case 2:return m.sent(),t.restoreGraphicsState(),t.compatAPI(),p.textMeasure.cleanupTextMeasuring(),[2,t]}})})}Me.API.svg=function(r,t){return t===void 0&&(t={}),N4(r,this,t)};var Ny={exports:{}};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */(function(r,t){(function(e,i){r.exports=i()})(YA,function(){/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
  Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var e=function(b,w){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,B){S.__proto__=B}||function(S,B){for(var I in B)Object.prototype.hasOwnProperty.call(B,I)&&(S[I]=B[I])},e(b,w)};function i(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");e(b,w);function S(){this.constructor=b}b.prototype=w===null?Object.create(w):(S.prototype=w.prototype,new S)}var s=function(){return s=Object.assign||function(w){for(var S,B=1,I=arguments.length;B<I;B++){S=arguments[B];for(var D in S)Object.prototype.hasOwnProperty.call(S,D)&&(w[D]=S[D])}return w},s.apply(this,arguments)};function c(b,w,S,B){function I(D){return D instanceof S?D:new S(function(q){q(D)})}return new(S||(S=Promise))(function(D,q){function At(Tt){try{St(B.next(Tt))}catch(Qt){q(Qt)}}function at(Tt){try{St(B.throw(Tt))}catch(Qt){q(Qt)}}function St(Tt){Tt.done?D(Tt.value):I(Tt.value).then(At,at)}St((B=B.apply(b,[])).next())})}function f(b,w){var S={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},B,I,D,q;return q={next:At(0),throw:At(1),return:At(2)},typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function At(St){return function(Tt){return at([St,Tt])}}function at(St){if(B)throw new TypeError("Generator is already executing.");for(;S;)try{if(B=1,I&&(D=St[0]&2?I.return:St[0]?I.throw||((D=I.return)&&D.call(I),0):I.next)&&!(D=D.call(I,St[1])).done)return D;switch(I=0,D&&(St=[St[0]&2,D.value]),St[0]){case 0:case 1:D=St;break;case 4:return S.label++,{value:St[1],done:!1};case 5:S.label++,I=St[1],St=[0];continue;case 7:St=S.ops.pop(),S.trys.pop();continue;default:if(D=S.trys,!(D=D.length>0&&D[D.length-1])&&(St[0]===6||St[0]===2)){S=0;continue}if(St[0]===3&&(!D||St[1]>D[0]&&St[1]<D[3])){S.label=St[1];break}if(St[0]===6&&S.label<D[1]){S.label=D[1],D=St;break}if(D&&S.label<D[2]){S.label=D[2],S.ops.push(St);break}D[2]&&S.ops.pop(),S.trys.pop();continue}St=w.call(b,S)}catch(Tt){St=[6,Tt],I=0}finally{B=D=0}if(St[0]&5)throw St[1];return{value:St[0]?St[1]:void 0,done:!0}}}function a(b,w,S){if(arguments.length===2)for(var B=0,I=w.length,D;B<I;B++)(D||!(B in w))&&(D||(D=Array.prototype.slice.call(w,0,B)),D[B]=w[B]);return b.concat(D||w)}for(var n=function(){function b(w,S,B,I){this.left=w,this.top=S,this.width=B,this.height=I}return b.prototype.add=function(w,S,B,I){return new b(this.left+w,this.top+S,this.width+B,this.height+I)},b.fromClientRect=function(w,S){return new b(S.left+w.windowBounds.left,S.top+w.windowBounds.top,S.width,S.height)},b.fromDOMRectList=function(w,S){var B=Array.from(S).find(function(I){return I.width!==0});return B?new b(B.left+w.windowBounds.left,B.top+w.windowBounds.top,B.width,B.height):b.EMPTY},b.EMPTY=new b(0,0,0,0),b}(),l=function(b,w){return n.fromClientRect(b,w.getBoundingClientRect())},h=function(b){var w=b.body,S=b.documentElement;if(!w||!S)throw new Error("Unable to get document size");var B=Math.max(Math.max(w.scrollWidth,S.scrollWidth),Math.max(w.offsetWidth,S.offsetWidth),Math.max(w.clientWidth,S.clientWidth)),I=Math.max(Math.max(w.scrollHeight,S.scrollHeight),Math.max(w.offsetHeight,S.offsetHeight),Math.max(w.clientHeight,S.clientHeight));return new n(0,0,B,I)},o=function(b){for(var w=[],S=0,B=b.length;S<B;){var I=b.charCodeAt(S++);if(I>=55296&&I<=56319&&S<B){var D=b.charCodeAt(S++);(D&64512)===56320?w.push(((I&1023)<<10)+(D&1023)+65536):(w.push(I),S--)}else w.push(I)}return w},u=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];if(String.fromCodePoint)return String.fromCodePoint.apply(String,b);var S=b.length;if(!S)return"";for(var B=[],I=-1,D="";++I<S;){var q=b[I];q<=65535?B.push(q):(q-=65536,B.push((q>>10)+55296,q%1024+56320)),(I+1===S||B.length>16384)&&(D+=String.fromCharCode.apply(String,B),B.length=0)}return D},A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=typeof Uint8Array>"u"?[]:new Uint8Array(256),p=0;p<A.length;p++)g[A.charCodeAt(p)]=p;for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=typeof Uint8Array>"u"?[]:new Uint8Array(256),v=0;v<d.length;v++)m[d.charCodeAt(v)]=v;for(var C=function(b){var w=b.length*.75,S=b.length,B,I=0,D,q,At,at;b[b.length-1]==="="&&(w--,b[b.length-2]==="="&&w--);var St=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(w):new Array(w),Tt=Array.isArray(St)?St:new Uint8Array(St);for(B=0;B<S;B+=4)D=m[b.charCodeAt(B)],q=m[b.charCodeAt(B+1)],At=m[b.charCodeAt(B+2)],at=m[b.charCodeAt(B+3)],Tt[I++]=D<<2|q>>4,Tt[I++]=(q&15)<<4|At>>2,Tt[I++]=(At&3)<<6|at&63;return St},x=function(b){for(var w=b.length,S=[],B=0;B<w;B+=2)S.push(b[B+1]<<8|b[B]);return S},E=function(b){for(var w=b.length,S=[],B=0;B<w;B+=4)S.push(b[B+3]<<24|b[B+2]<<16|b[B+1]<<8|b[B]);return S},L=5,U=11,O=2,X=U-L,rt=65536>>L,M=1<<L,H=M-1,J=1024>>L,$=rt+J,ht=$,ut=32,pt=ht+ut,ft=65536>>U,R=1<<X,G=R-1,it=function(b,w,S){return b.slice?b.slice(w,S):new Uint16Array(Array.prototype.slice.call(b,w,S))},P=function(b,w,S){return b.slice?b.slice(w,S):new Uint32Array(Array.prototype.slice.call(b,w,S))},V=function(b,w){var S=C(b),B=Array.isArray(S)?E(S):new Uint32Array(S),I=Array.isArray(S)?x(S):new Uint16Array(S),D=24,q=it(I,D/2,B[4]/2),At=B[5]===2?it(I,(D+B[4])/2):P(B,Math.ceil((D+B[4])/4));return new k(B[0],B[1],B[2],B[3],q,At)},k=function(){function b(w,S,B,I,D,q){this.initialValue=w,this.errorValue=S,this.highStart=B,this.highValueIndex=I,this.index=D,this.data=q}return b.prototype.get=function(w){var S;if(w>=0){if(w<55296||w>56319&&w<=65535)return S=this.index[w>>L],S=(S<<O)+(w&H),this.data[S];if(w<=65535)return S=this.index[rt+(w-55296>>L)],S=(S<<O)+(w&H),this.data[S];if(w<this.highStart)return S=pt-ft+(w>>U),S=this.index[S],S+=w>>L&G,S=this.index[S],S=(S<<O)+(w&H),this.data[S];if(w<=1114111)return this.data[this.highValueIndex]}return this.errorValue},b}(),N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z=typeof Uint8Array>"u"?[]:new Uint8Array(256),st=0;st<N.length;st++)Z[N.charCodeAt(st)]=st;var ct="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",ot=50,wt=1,_t=2,Nt=3,vt=4,mt=5,gt=7,tt=8,It=9,Pt=10,Ut=11,Gt=12,Dt=13,bt=14,Kt=15,Zt=16,le=17,pe=18,Rt=19,zt=20,Xt=21,ae=22,te=23,Ne=24,Be=25,Ar=26,Ke=27,qe=28,nn=29,Xe=30,_n=31,sr=32,ei=33,_r=34,Mr=35,ke=36,Ze=37,On=38,or=39,ji=40,Ki=41,Le=42,Qn=43,Zn=[9001,65288],Wi="!",Te="×",kr="÷",Dr=V(ct),Qi=[Xe,ke],hn=[wt,_t,Nt,mt],sn=[Pt,tt],En=[Ke,Ar],Nn=hn.concat(sn),Mn=[On,or,ji,_r,Mr],un=[Kt,Dt],Fn=function(b,w){w===void 0&&(w="strict");var S=[],B=[],I=[];return b.forEach(function(D,q){var At=Dr.get(D);if(At>ot?(I.push(!0),At-=ot):I.push(!1),["normal","auto","loose"].indexOf(w)!==-1&&[8208,8211,12316,12448].indexOf(D)!==-1)return B.push(q),S.push(Zt);if(At===vt||At===Ut){if(q===0)return B.push(q),S.push(Xe);var at=S[q-1];return Nn.indexOf(at)===-1?(B.push(B[q-1]),S.push(at)):(B.push(q),S.push(Xe))}if(B.push(q),At===_n)return S.push(w==="strict"?Xt:Ze);if(At===Le||At===nn)return S.push(Xe);if(At===Qn)return D>=131072&&D<=196605||D>=196608&&D<=262141?S.push(Ze):S.push(Xe);S.push(At)}),[B,S,I]},Er=function(b,w,S,B){var I=B[S];if(Array.isArray(b)?b.indexOf(I)!==-1:b===I)for(var D=S;D<=B.length;){D++;var q=B[D];if(q===w)return!0;if(q!==Pt)break}if(I===Pt)for(var D=S;D>0;){D--;var At=B[D];if(Array.isArray(b)?b.indexOf(At)!==-1:b===At)for(var at=S;at<=B.length;){at++;var q=B[at];if(q===w)return!0;if(q!==Pt)break}if(At!==Pt)break}return!1},Os=function(b,w){for(var S=b;S>=0;){var B=w[S];if(B===Pt)S--;else return B}return 0},Kr=function(b,w,S,B,I){if(S[B]===0)return Te;var D=B-1;if(Array.isArray(I)&&I[D]===!0)return Te;var q=D-1,At=D+1,at=w[D],St=q>=0?w[q]:0,Tt=w[At];if(at===_t&&Tt===Nt)return Te;if(hn.indexOf(at)!==-1)return Wi;if(hn.indexOf(Tt)!==-1||sn.indexOf(Tt)!==-1)return Te;if(Os(D,w)===tt)return kr;if(Dr.get(b[D])===Ut||(at===sr||at===ei)&&Dr.get(b[At])===Ut||at===gt||Tt===gt||at===It||[Pt,Dt,Kt].indexOf(at)===-1&&Tt===It||[le,pe,Rt,Ne,qe].indexOf(Tt)!==-1||Os(D,w)===ae||Er(te,ae,D,w)||Er([le,pe],Xt,D,w)||Er(Gt,Gt,D,w))return Te;if(at===Pt)return kr;if(at===te||Tt===te)return Te;if(Tt===Zt||at===Zt)return kr;if([Dt,Kt,Xt].indexOf(Tt)!==-1||at===bt||St===ke&&un.indexOf(at)!==-1||at===qe&&Tt===ke||Tt===zt||Qi.indexOf(Tt)!==-1&&at===Be||Qi.indexOf(at)!==-1&&Tt===Be||at===Ke&&[Ze,sr,ei].indexOf(Tt)!==-1||[Ze,sr,ei].indexOf(at)!==-1&&Tt===Ar||Qi.indexOf(at)!==-1&&En.indexOf(Tt)!==-1||En.indexOf(at)!==-1&&Qi.indexOf(Tt)!==-1||[Ke,Ar].indexOf(at)!==-1&&(Tt===Be||[ae,Kt].indexOf(Tt)!==-1&&w[At+1]===Be)||[ae,Kt].indexOf(at)!==-1&&Tt===Be||at===Be&&[Be,qe,Ne].indexOf(Tt)!==-1)return Te;if([Be,qe,Ne,le,pe].indexOf(Tt)!==-1)for(var Qt=D;Qt>=0;){var jt=w[Qt];if(jt===Be)return Te;if([qe,Ne].indexOf(jt)!==-1)Qt--;else break}if([Ke,Ar].indexOf(Tt)!==-1)for(var Qt=[le,pe].indexOf(at)!==-1?q:D;Qt>=0;){var jt=w[Qt];if(jt===Be)return Te;if([qe,Ne].indexOf(jt)!==-1)Qt--;else break}if(On===at&&[On,or,_r,Mr].indexOf(Tt)!==-1||[or,_r].indexOf(at)!==-1&&[or,ji].indexOf(Tt)!==-1||[ji,Mr].indexOf(at)!==-1&&Tt===ji||Mn.indexOf(at)!==-1&&[zt,Ar].indexOf(Tt)!==-1||Mn.indexOf(Tt)!==-1&&at===Ke||Qi.indexOf(at)!==-1&&Qi.indexOf(Tt)!==-1||at===Ne&&Qi.indexOf(Tt)!==-1||Qi.concat(Be).indexOf(at)!==-1&&Tt===ae&&Zn.indexOf(b[At])===-1||Qi.concat(Be).indexOf(Tt)!==-1&&at===pe)return Te;if(at===Ki&&Tt===Ki){for(var Ce=S[D],ce=1;Ce>0&&(Ce--,w[Ce]===Ki);)ce++;if(ce%2!==0)return Te}return at===sr&&Tt===ei?Te:kr},ta=function(b,w){w||(w={lineBreak:"normal",wordBreak:"normal"});var S=Fn(b,w.lineBreak),B=S[0],I=S[1],D=S[2];(w.wordBreak==="break-all"||w.wordBreak==="break-word")&&(I=I.map(function(At){return[Be,Xe,Le].indexOf(At)!==-1?Ze:At}));var q=w.wordBreak==="keep-all"?D.map(function(At,at){return At&&b[at]>=19968&&b[at]<=40959}):void 0;return[B,I,q]},Fr=function(){function b(w,S,B,I){this.codePoints=w,this.required=S===Wi,this.start=B,this.end=I}return b.prototype.slice=function(){return u.apply(void 0,this.codePoints.slice(this.start,this.end))},b}(),Qs=function(b,w){var S=o(b),B=ta(S,w),I=B[0],D=B[1],q=B[2],At=S.length,at=0,St=0;return{next:function(){if(St>=At)return{done:!0,value:null};for(var Tt=Te;St<At&&(Tt=Kr(S,D,I,++St,q))===Te;);if(Tt!==Te||St===At){var Qt=new Fr(S,Tt,at,St);return at=St,{value:Qt,done:!1}}return{done:!0,value:null}}}},lA=1,oo=2,Tn=4,Fa=8,ea=10,kn=47,fn=92,Ta=9,cA=32,an=34,ts=61,Rr=35,hA=36,uA=37,ra=39,es=40,Dn=41,Ni=95,Hr=45,Xi=33,La=60,fA=62,dA=64,gA=91,Ia=93,ia=61,Rn=123,dn=63,pA=125,Pa=124,hl=126,zi=128,na=65533,Ns=42,Cr=43,ri=44,ul=58,mA=59,Ue=46,lo=0,co=8,rs=11,sa=14,Ua=31,Oa=127,qr=-1,Qa=48,vA=97,yA=101,wA=102,Hn=117,Mi=122,bA=65,ws=69,aa=70,Aa=85,ho=90,de=function(b){return b>=Qa&&b<=57},Ft=function(b){return b>=55296&&b<=57343},re=function(b){return de(b)||b>=bA&&b<=aa||b>=vA&&b<=wA},he=function(b){return b>=vA&&b<=Mi},Ye=function(b){return b>=bA&&b<=ho},ki=function(b){return he(b)||Ye(b)},Wr=function(b){return b>=zi},lr=function(b){return b===ea||b===Ta||b===cA},Gn=function(b){return ki(b)||Wr(b)||b===Ni},Lr=function(b){return Gn(b)||de(b)||b===Hr},CA=function(b){return b>=lo&&b<=co||b===rs||b>=sa&&b<=Ua||b===Oa},An=function(b,w){return b!==fn?!1:w!==ea},BA=function(b,w,S){return b===Hr?Gn(w)||An(w,S):Gn(b)?!0:!!(b===fn&&An(b,w))},SA=function(b,w,S){return b===Cr||b===Hr?de(w)?!0:w===Ue&&de(S):de(b===Ue?w:b)},fl=function(b){var w=0,S=1;(b[w]===Cr||b[w]===Hr)&&(b[w]===Hr&&(S=-1),w++);for(var B=[];de(b[w]);)B.push(b[w++]);var I=B.length?parseInt(u.apply(void 0,B),10):0;b[w]===Ue&&w++;for(var D=[];de(b[w]);)D.push(b[w++]);var q=D.length,At=q?parseInt(u.apply(void 0,D),10):0;(b[w]===ws||b[w]===yA)&&w++;var at=1;(b[w]===Cr||b[w]===Hr)&&(b[w]===Hr&&(at=-1),w++);for(var St=[];de(b[w]);)St.push(b[w++]);var Tt=St.length?parseInt(u.apply(void 0,St),10):0;return S*(I+At*Math.pow(10,-q))*Math.pow(10,at*Tt)},yc={type:2},uo={type:3},dl={type:4},gl={type:13},wc={type:8},Jh={type:21},fo={type:9},xA={type:10},pl={type:11},Na={type:12},ml={type:14},F={type:23},K={type:1},dt={type:25},yt={type:24},Ot={type:26},Vt={type:27},se={type:28},ve={type:29},Pe={type:31},Ge={type:32},$e=function(){function b(){this._value=[]}return b.prototype.write=function(w){this._value=this._value.concat(o(w))},b.prototype.read=function(){for(var w=[],S=this.consumeToken();S!==Ge;)w.push(S),S=this.consumeToken();return w},b.prototype.consumeToken=function(){var w=this.consumeCodePoint();switch(w){case an:return this.consumeStringToken(an);case Rr:var S=this.peekCodePoint(0),B=this.peekCodePoint(1),I=this.peekCodePoint(2);if(Lr(S)||An(B,I)){var D=BA(S,B,I)?oo:lA,q=this.consumeName();return{type:5,value:q,flags:D}}break;case hA:if(this.peekCodePoint(0)===ts)return this.consumeCodePoint(),gl;break;case ra:return this.consumeStringToken(ra);case es:return yc;case Dn:return uo;case Ns:if(this.peekCodePoint(0)===ts)return this.consumeCodePoint(),ml;break;case Cr:if(SA(w,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(w),this.consumeNumericToken();break;case ri:return dl;case Hr:var At=w,at=this.peekCodePoint(0),St=this.peekCodePoint(1);if(SA(At,at,St))return this.reconsumeCodePoint(w),this.consumeNumericToken();if(BA(At,at,St))return this.reconsumeCodePoint(w),this.consumeIdentLikeToken();if(at===Hr&&St===fA)return this.consumeCodePoint(),this.consumeCodePoint(),yt;break;case Ue:if(SA(w,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(w),this.consumeNumericToken();break;case kn:if(this.peekCodePoint(0)===Ns)for(this.consumeCodePoint();;){var Tt=this.consumeCodePoint();if(Tt===Ns&&(Tt=this.consumeCodePoint(),Tt===kn))return this.consumeToken();if(Tt===qr)return this.consumeToken()}break;case ul:return Ot;case mA:return Vt;case La:if(this.peekCodePoint(0)===Xi&&this.peekCodePoint(1)===Hr&&this.peekCodePoint(2)===Hr)return this.consumeCodePoint(),this.consumeCodePoint(),dt;break;case dA:var Qt=this.peekCodePoint(0),jt=this.peekCodePoint(1),Ce=this.peekCodePoint(2);if(BA(Qt,jt,Ce)){var q=this.consumeName();return{type:7,value:q}}break;case gA:return se;case fn:if(An(w,this.peekCodePoint(0)))return this.reconsumeCodePoint(w),this.consumeIdentLikeToken();break;case Ia:return ve;case ia:if(this.peekCodePoint(0)===ts)return this.consumeCodePoint(),wc;break;case Rn:return pl;case pA:return Na;case Hn:case Aa:var ce=this.peekCodePoint(0),me=this.peekCodePoint(1);return ce===Cr&&(re(me)||me===dn)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(w),this.consumeIdentLikeToken();case Pa:if(this.peekCodePoint(0)===ts)return this.consumeCodePoint(),fo;if(this.peekCodePoint(0)===Pa)return this.consumeCodePoint(),Jh;break;case hl:if(this.peekCodePoint(0)===ts)return this.consumeCodePoint(),xA;break;case qr:return Ge}return lr(w)?(this.consumeWhiteSpace(),Pe):de(w)?(this.reconsumeCodePoint(w),this.consumeNumericToken()):Gn(w)?(this.reconsumeCodePoint(w),this.consumeIdentLikeToken()):{type:6,value:u(w)}},b.prototype.consumeCodePoint=function(){var w=this._value.shift();return typeof w>"u"?-1:w},b.prototype.reconsumeCodePoint=function(w){this._value.unshift(w)},b.prototype.peekCodePoint=function(w){return w>=this._value.length?-1:this._value[w]},b.prototype.consumeUnicodeRangeToken=function(){for(var w=[],S=this.consumeCodePoint();re(S)&&w.length<6;)w.push(S),S=this.consumeCodePoint();for(var B=!1;S===dn&&w.length<6;)w.push(S),S=this.consumeCodePoint(),B=!0;if(B){var I=parseInt(u.apply(void 0,w.map(function(at){return at===dn?Qa:at})),16),D=parseInt(u.apply(void 0,w.map(function(at){return at===dn?aa:at})),16);return{type:30,start:I,end:D}}var q=parseInt(u.apply(void 0,w),16);if(this.peekCodePoint(0)===Hr&&re(this.peekCodePoint(1))){this.consumeCodePoint(),S=this.consumeCodePoint();for(var At=[];re(S)&&At.length<6;)At.push(S),S=this.consumeCodePoint();var D=parseInt(u.apply(void 0,At),16);return{type:30,start:q,end:D}}else return{type:30,start:q,end:q}},b.prototype.consumeIdentLikeToken=function(){var w=this.consumeName();return w.toLowerCase()==="url"&&this.peekCodePoint(0)===es?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===es?(this.consumeCodePoint(),{type:19,value:w}):{type:20,value:w}},b.prototype.consumeUrlToken=function(){var w=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===qr)return{type:22,value:""};var S=this.peekCodePoint(0);if(S===ra||S===an){var B=this.consumeStringToken(this.consumeCodePoint());return B.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===qr||this.peekCodePoint(0)===Dn)?(this.consumeCodePoint(),{type:22,value:B.value}):(this.consumeBadUrlRemnants(),F)}for(;;){var I=this.consumeCodePoint();if(I===qr||I===Dn)return{type:22,value:u.apply(void 0,w)};if(lr(I))return this.consumeWhiteSpace(),this.peekCodePoint(0)===qr||this.peekCodePoint(0)===Dn?(this.consumeCodePoint(),{type:22,value:u.apply(void 0,w)}):(this.consumeBadUrlRemnants(),F);if(I===an||I===ra||I===es||CA(I))return this.consumeBadUrlRemnants(),F;if(I===fn)if(An(I,this.peekCodePoint(0)))w.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),F;else w.push(I)}},b.prototype.consumeWhiteSpace=function(){for(;lr(this.peekCodePoint(0));)this.consumeCodePoint()},b.prototype.consumeBadUrlRemnants=function(){for(;;){var w=this.consumeCodePoint();if(w===Dn||w===qr)return;An(w,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},b.prototype.consumeStringSlice=function(w){for(var S=5e4,B="";w>0;){var I=Math.min(S,w);B+=u.apply(void 0,this._value.splice(0,I)),w-=I}return this._value.shift(),B},b.prototype.consumeStringToken=function(w){var S="",B=0;do{var I=this._value[B];if(I===qr||I===void 0||I===w)return S+=this.consumeStringSlice(B),{type:0,value:S};if(I===ea)return this._value.splice(0,B),K;if(I===fn){var D=this._value[B+1];D!==qr&&D!==void 0&&(D===ea?(S+=this.consumeStringSlice(B),B=-1,this._value.shift()):An(I,D)&&(S+=this.consumeStringSlice(B),S+=u(this.consumeEscapedCodePoint()),B=-1))}B++}while(!0)},b.prototype.consumeNumber=function(){var w=[],S=Tn,B=this.peekCodePoint(0);for((B===Cr||B===Hr)&&w.push(this.consumeCodePoint());de(this.peekCodePoint(0));)w.push(this.consumeCodePoint());B=this.peekCodePoint(0);var I=this.peekCodePoint(1);if(B===Ue&&de(I))for(w.push(this.consumeCodePoint(),this.consumeCodePoint()),S=Fa;de(this.peekCodePoint(0));)w.push(this.consumeCodePoint());B=this.peekCodePoint(0),I=this.peekCodePoint(1);var D=this.peekCodePoint(2);if((B===ws||B===yA)&&((I===Cr||I===Hr)&&de(D)||de(I)))for(w.push(this.consumeCodePoint(),this.consumeCodePoint()),S=Fa;de(this.peekCodePoint(0));)w.push(this.consumeCodePoint());return[fl(w),S]},b.prototype.consumeNumericToken=function(){var w=this.consumeNumber(),S=w[0],B=w[1],I=this.peekCodePoint(0),D=this.peekCodePoint(1),q=this.peekCodePoint(2);if(BA(I,D,q)){var At=this.consumeName();return{type:15,number:S,flags:B,unit:At}}return I===uA?(this.consumeCodePoint(),{type:16,number:S,flags:B}):{type:17,number:S,flags:B}},b.prototype.consumeEscapedCodePoint=function(){var w=this.consumeCodePoint();if(re(w)){for(var S=u(w);re(this.peekCodePoint(0))&&S.length<6;)S+=u(this.consumeCodePoint());lr(this.peekCodePoint(0))&&this.consumeCodePoint();var B=parseInt(S,16);return B===0||Ft(B)||B>1114111?na:B}return w===qr?na:w},b.prototype.consumeName=function(){for(var w="";;){var S=this.consumeCodePoint();if(Lr(S))w+=u(S);else if(An(S,this.peekCodePoint(0)))w+=u(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(S),w}},b}(),ar=function(){function b(w){this._tokens=w}return b.create=function(w){var S=new $e;return S.write(w),new b(S.read())},b.parseValue=function(w){return b.create(w).parseComponentValue()},b.parseValues=function(w){return b.create(w).parseComponentValues()},b.prototype.parseComponentValue=function(){for(var w=this.consumeToken();w.type===31;)w=this.consumeToken();if(w.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(w);var S=this.consumeComponentValue();do w=this.consumeToken();while(w.type===31);if(w.type===32)return S;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},b.prototype.parseComponentValues=function(){for(var w=[];;){var S=this.consumeComponentValue();if(S.type===32)return w;w.push(S),w.push()}},b.prototype.consumeComponentValue=function(){var w=this.consumeToken();switch(w.type){case 11:case 28:case 2:return this.consumeSimpleBlock(w.type);case 19:return this.consumeFunction(w)}return w},b.prototype.consumeSimpleBlock=function(w){for(var S={type:w,values:[]},B=this.consumeToken();;){if(B.type===32||bc(B,w))return S;this.reconsumeToken(B),S.values.push(this.consumeComponentValue()),B=this.consumeToken()}},b.prototype.consumeFunction=function(w){for(var S={name:w.value,values:[],type:18};;){var B=this.consumeToken();if(B.type===32||B.type===3)return S;this.reconsumeToken(B),S.values.push(this.consumeComponentValue())}},b.prototype.consumeToken=function(){var w=this._tokens.shift();return typeof w>"u"?Ge:w},b.prototype.reconsumeToken=function(w){this._tokens.unshift(w)},b}(),Ir=function(b){return b.type===15},Pr=function(b){return b.type===17},Re=function(b){return b.type===20},on=function(b){return b.type===0},gi=function(b,w){return Re(b)&&b.value===w},is=function(b){return b.type!==31},Di=function(b){return b.type!==31&&b.type!==4},Ri=function(b){var w=[],S=[];return b.forEach(function(B){if(B.type===4){if(S.length===0)throw new Error("Error parsing function args, zero tokens for arg");w.push(S),S=[];return}B.type!==31&&S.push(B)}),S.length&&w.push(S),w},bc=function(b,w){return w===11&&b.type===12||w===28&&b.type===29?!0:w===2&&b.type===3},ns=function(b){return b.type===17||b.type===15},$r=function(b){return b.type===16||ns(b)},_A=function(b){return b.length>1?[b[0],b[1]]:[b[0]]},ci={type:17,number:0,flags:Tn},EA={type:16,number:50,flags:Tn},Vn={type:16,number:100,flags:Tn},Hi=function(b,w,S){var B=b[0],I=b[1];return[ur(B,w),ur(typeof I<"u"?I:B,S)]},ur=function(b,w){if(b.type===16)return b.number/100*w;if(Ir(b))switch(b.unit){case"rem":case"em":return 16*b.number;case"px":default:return b.number}return b.number},FA="deg",TA="grad",go="rad",gn="turn",po={name:"angle",parse:function(b,w){if(w.type===15)switch(w.unit){case FA:return Math.PI*w.number/180;case TA:return Math.PI/200*w.number;case go:return w.number;case gn:return Math.PI*2*w.number}throw new Error("Unsupported angle type")}},mo=function(b){return b.type===15&&(b.unit===FA||b.unit===TA||b.unit===go||b.unit===gn)},vl=function(b){var w=b.filter(Re).map(function(S){return S.value}).join(" ");switch(w){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ci,ci];case"to top":case"bottom":return ii(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ci,Vn];case"to right":case"left":return ii(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Vn,Vn];case"to bottom":case"top":return ii(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Vn,ci];case"to left":case"right":return ii(270)}return 0},ii=function(b){return Math.PI*b/180},ss={name:"color",parse:function(b,w){if(w.type===18){var S=oa[w.name];if(typeof S>"u")throw new Error('Attempting to parse an unsupported color function "'+w.name+'"');return S(b,w.values)}if(w.type===5){if(w.value.length===3){var B=w.value.substring(0,1),I=w.value.substring(1,2),D=w.value.substring(2,3);return pn(parseInt(B+B,16),parseInt(I+I,16),parseInt(D+D,16),1)}if(w.value.length===4){var B=w.value.substring(0,1),I=w.value.substring(1,2),D=w.value.substring(2,3),q=w.value.substring(3,4);return pn(parseInt(B+B,16),parseInt(I+I,16),parseInt(D+D,16),parseInt(q+q,16)/255)}if(w.value.length===6){var B=w.value.substring(0,2),I=w.value.substring(2,4),D=w.value.substring(4,6);return pn(parseInt(B,16),parseInt(I,16),parseInt(D,16),1)}if(w.value.length===8){var B=w.value.substring(0,2),I=w.value.substring(2,4),D=w.value.substring(4,6),q=w.value.substring(6,8);return pn(parseInt(B,16),parseInt(I,16),parseInt(D,16),parseInt(q,16)/255)}}if(w.type===20){var At=Si[w.value.toUpperCase()];if(typeof At<"u")return At}return Si.TRANSPARENT}},Ms=function(b){return(255&b)===0},pi=function(b){var w=255&b,S=255&b>>8,B=255&b>>16,I=255&b>>24;return w<255?"rgba("+I+","+B+","+S+","+w/255+")":"rgb("+I+","+B+","+S+")"},pn=function(b,w,S,B){return(b<<24|w<<16|S<<8|Math.round(B*255)<<0)>>>0},jn=function(b,w){if(b.type===17)return b.number;if(b.type===16){var S=w===3?1:255;return w===3?b.number/100*S:Math.round(b.number/100*S)}return 0},as=function(b,w){var S=w.filter(Di);if(S.length===3){var B=S.map(jn),I=B[0],D=B[1],q=B[2];return pn(I,D,q,1)}if(S.length===4){var At=S.map(jn),I=At[0],D=At[1],q=At[2],at=At[3];return pn(I,D,q,at)}return 0};function ks(b,w,S){return S<0&&(S+=1),S>=1&&(S-=1),S<1/6?(w-b)*S*6+b:S<1/2?w:S<2/3?(w-b)*6*(2/3-S)+b:b}var bs=function(b,w){var S=w.filter(Di),B=S[0],I=S[1],D=S[2],q=S[3],At=(B.type===17?ii(B.number):po.parse(b,B))/(Math.PI*2),at=$r(I)?I.number/100:0,St=$r(D)?D.number/100:0,Tt=typeof q<"u"&&$r(q)?ur(q,1):1;if(at===0)return pn(St*255,St*255,St*255,1);var Qt=St<=.5?St*(at+1):St+at-St*at,jt=St*2-Qt,Ce=ks(jt,Qt,At+1/3),ce=ks(jt,Qt,At),me=ks(jt,Qt,At-1/3);return pn(Ce*255,ce*255,me*255,Tt)},oa={hsl:bs,hsla:bs,rgb:as,rgba:as},Ds=function(b,w){return ss.parse(b,ar.create(w).parseComponentValue())},Si={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},vo={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(b,w){return w.map(function(S){if(Re(S))switch(S.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},yl={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Cs=function(b,w){var S=ss.parse(b,w[0]),B=w[1];return B&&$r(B)?{color:S,stop:B}:{color:S,stop:null}},As=function(b,w){var S=b[0],B=b[b.length-1];S.stop===null&&(S.stop=ci),B.stop===null&&(B.stop=Vn);for(var I=[],D=0,q=0;q<b.length;q++){var At=b[q].stop;if(At!==null){var at=ur(At,w);at>D?I.push(at):I.push(D),D=at}else I.push(null)}for(var St=null,q=0;q<I.length;q++){var Tt=I[q];if(Tt===null)St===null&&(St=q);else if(St!==null){for(var Qt=q-St,jt=I[St-1],Ce=(Tt-jt)/(Qt+1),ce=1;ce<=Qt;ce++)I[St+ce-1]=Ce*ce;St=null}}return b.map(function(me,Je){var Ee=me.color;return{color:Ee,stop:Math.max(Math.min(1,I[Je]/w),0)}})},la=function(b,w,S){var B=w/2,I=S/2,D=ur(b[0],w)-B,q=I-ur(b[1],S);return(Math.atan2(q,D)+Math.PI*2)%(Math.PI*2)},LA=function(b,w,S){var B=typeof b=="number"?b:la(b,w,S),I=Math.abs(w*Math.sin(B))+Math.abs(S*Math.cos(B)),D=w/2,q=S/2,At=I/2,at=Math.sin(B-Math.PI/2)*At,St=Math.cos(B-Math.PI/2)*At;return[I,D-St,D+St,q-at,q+at]},ln=function(b,w){return Math.sqrt(b*b+w*w)},Ma=function(b,w,S,B,I){var D=[[0,0],[0,w],[b,0],[b,w]];return D.reduce(function(q,At){var at=At[0],St=At[1],Tt=ln(S-at,B-St);return(I?Tt<q.optimumDistance:Tt>q.optimumDistance)?{optimumCorner:At,optimumDistance:Tt}:q},{optimumDistance:I?1/0:-1/0,optimumCorner:null}).optimumCorner},ka=function(b,w,S,B,I){var D=0,q=0;switch(b.size){case 0:b.shape===0?D=q=Math.min(Math.abs(w),Math.abs(w-B),Math.abs(S),Math.abs(S-I)):b.shape===1&&(D=Math.min(Math.abs(w),Math.abs(w-B)),q=Math.min(Math.abs(S),Math.abs(S-I)));break;case 2:if(b.shape===0)D=q=Math.min(ln(w,S),ln(w,S-I),ln(w-B,S),ln(w-B,S-I));else if(b.shape===1){var At=Math.min(Math.abs(S),Math.abs(S-I))/Math.min(Math.abs(w),Math.abs(w-B)),at=Ma(B,I,w,S,!0),St=at[0],Tt=at[1];D=ln(St-w,(Tt-S)/At),q=At*D}break;case 1:b.shape===0?D=q=Math.max(Math.abs(w),Math.abs(w-B),Math.abs(S),Math.abs(S-I)):b.shape===1&&(D=Math.max(Math.abs(w),Math.abs(w-B)),q=Math.max(Math.abs(S),Math.abs(S-I)));break;case 3:if(b.shape===0)D=q=Math.max(ln(w,S),ln(w,S-I),ln(w-B,S),ln(w-B,S-I));else if(b.shape===1){var At=Math.max(Math.abs(S),Math.abs(S-I))/Math.max(Math.abs(w),Math.abs(w-B)),Qt=Ma(B,I,w,S,!1),St=Qt[0],Tt=Qt[1];D=ln(St-w,(Tt-S)/At),q=At*D}break}return Array.isArray(b.size)&&(D=ur(b.size[0],B),q=b.size.length===2?ur(b.size[1],I):D),[D,q]},wl=function(b,w){var S=ii(180),B=[];return Ri(w).forEach(function(I,D){if(D===0){var q=I[0];if(q.type===20&&q.value==="to"){S=vl(I);return}else if(mo(q)){S=po.parse(b,q);return}}var At=Cs(b,I);B.push(At)}),{angle:S,stops:B,type:1}},mn=function(b,w){var S=ii(180),B=[];return Ri(w).forEach(function(I,D){if(D===0){var q=I[0];if(q.type===20&&["top","left","right","bottom"].indexOf(q.value)!==-1){S=vl(I);return}else if(mo(q)){S=(po.parse(b,q)+ii(270))%ii(360);return}}var At=Cs(b,I);B.push(At)}),{angle:S,stops:B,type:1}},ca=function(b,w){var S=ii(180),B=[],I=1,D=0,q=3,At=[];return Ri(w).forEach(function(at,St){var Tt=at[0];if(St===0){if(Re(Tt)&&Tt.value==="linear"){I=1;return}else if(Re(Tt)&&Tt.value==="radial"){I=2;return}}if(Tt.type===18){if(Tt.name==="from"){var Qt=ss.parse(b,Tt.values[0]);B.push({stop:ci,color:Qt})}else if(Tt.name==="to"){var Qt=ss.parse(b,Tt.values[0]);B.push({stop:Vn,color:Qt})}else if(Tt.name==="color-stop"){var jt=Tt.values.filter(Di);if(jt.length===2){var Qt=ss.parse(b,jt[1]),Ce=jt[0];Pr(Ce)&&B.push({stop:{type:16,number:Ce.number*100,flags:Ce.flags},color:Qt})}}}}),I===1?{angle:(S+ii(180))%ii(360),stops:B,type:I}:{size:q,shape:D,stops:B,position:At,type:I}},Ur="closest-side",Or="farthest-side",ni="closest-corner",mi="farthest-corner",Rs="circle",ha="ellipse",IA="cover",bl="contain",$f=function(b,w){var S=0,B=3,I=[],D=[];return Ri(w).forEach(function(q,At){var at=!0;if(At===0){var St=!1;at=q.reduce(function(Qt,jt){if(St)if(Re(jt))switch(jt.value){case"center":return D.push(EA),Qt;case"top":case"left":return D.push(ci),Qt;case"right":case"bottom":return D.push(Vn),Qt}else($r(jt)||ns(jt))&&D.push(jt);else if(Re(jt))switch(jt.value){case Rs:return S=0,!1;case ha:return S=1,!1;case"at":return St=!0,!1;case Ur:return B=0,!1;case IA:case Or:return B=1,!1;case bl:case ni:return B=2,!1;case mi:return B=3,!1}else if(ns(jt)||$r(jt))return Array.isArray(B)||(B=[]),B.push(jt),!1;return Qt},at)}if(at){var Tt=Cs(b,q);I.push(Tt)}}),{size:B,shape:S,stops:I,position:D,type:2}},Cl=function(b,w){var S=0,B=3,I=[],D=[];return Ri(w).forEach(function(q,At){var at=!0;if(At===0?at=q.reduce(function(Tt,Qt){if(Re(Qt))switch(Qt.value){case"center":return D.push(EA),!1;case"top":case"left":return D.push(ci),!1;case"right":case"bottom":return D.push(Vn),!1}else if($r(Qt)||ns(Qt))return D.push(Qt),!1;return Tt},at):At===1&&(at=q.reduce(function(Tt,Qt){if(Re(Qt))switch(Qt.value){case Rs:return S=0,!1;case ha:return S=1,!1;case bl:case Ur:return B=0,!1;case Or:return B=1,!1;case ni:return B=2,!1;case IA:case mi:return B=3,!1}else if(ns(Qt)||$r(Qt))return Array.isArray(B)||(B=[]),B.push(Qt),!1;return Tt},at)),at){var St=Cs(b,q);I.push(St)}}),{size:B,shape:S,stops:I,position:D,type:2}},Yf=function(b){return b.type===1},Jf=function(b){return b.type===2},Cc={name:"image",parse:function(b,w){if(w.type===22){var S={url:w.value,type:0};return b.cache.addImage(w.value),S}if(w.type===18){var B=Bc[w.name];if(typeof B>"u")throw new Error('Attempting to parse an unsupported image function "'+w.name+'"');return B(b,w.values)}throw new Error("Unsupported image type "+w.type)}};function Zf(b){return!(b.type===20&&b.value==="none")&&(b.type!==18||!!Bc[b.name])}var Bc={"linear-gradient":wl,"-moz-linear-gradient":mn,"-ms-linear-gradient":mn,"-o-linear-gradient":mn,"-webkit-linear-gradient":mn,"radial-gradient":$f,"-moz-radial-gradient":Cl,"-ms-radial-gradient":Cl,"-o-radial-gradient":Cl,"-webkit-radial-gradient":Cl,"-webkit-gradient":ca},Sc={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(b,w){if(w.length===0)return[];var S=w[0];return S.type===20&&S.value==="none"?[]:w.filter(function(B){return Di(B)&&Zf(B)}).map(function(B){return Cc.parse(b,B)})}},Kn={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(b,w){return w.map(function(S){if(Re(S))switch(S.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},os={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(b,w){return Ri(w).map(function(S){return S.filter($r)}).map(_A)}},xc={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(b,w){return Ri(w).map(function(S){return S.filter(Re).map(function(B){return B.value}).join(" ")}).map(_c)}},_c=function(b){switch(b){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},PA;(function(b){b.AUTO="auto",b.CONTAIN="contain",b.COVER="cover"})(PA||(PA={}));var Ec={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(b,w){return Ri(w).map(function(S){return S.filter(Fc)})}},Fc=function(b){return Re(b)||$r(b)},yo=function(b){return{name:"border-"+b+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},td=yo("top"),Zh=yo("right"),tu=yo("bottom"),Tc=yo("left"),wo=function(b){return{name:"border-radius-"+b,initialValue:"0 0",prefix:!1,type:1,parse:function(w,S){return _A(S.filter($r))}}},Lm=wo("top-left"),Im=wo("top-right"),ed=wo("bottom-right"),Pm=wo("bottom-left"),Lc=function(b){return{name:"border-"+b+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(w,S){switch(S){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Um=Lc("top"),Om=Lc("right"),Qm=Lc("bottom"),eu=Lc("left"),bo=function(b){return{name:"border-"+b+"-width",initialValue:"0",type:0,prefix:!1,parse:function(w,S){return Ir(S)?S.number:0}}},Bl=bo("top"),Nm=bo("right"),Mm=bo("bottom"),rd=bo("left"),km={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Dm={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(b,w){switch(w){case"rtl":return 1;case"ltr":default:return 0}}},Rm={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(b,w){return w.filter(Re).reduce(function(S,B){return S|Hm(B.value)},0)}},Hm=function(b){switch(b){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Da={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(b,w){switch(w){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Bs={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(b,w){return w.type===20&&w.value==="normal"?0:w.type===17||w.type===15?w.number:0}},ls;(function(b){b.NORMAL="normal",b.STRICT="strict"})(ls||(ls={}));var Gm={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(b,w){switch(w){case"strict":return ls.STRICT;case"normal":default:return ls.NORMAL}}},id={name:"line-height",initialValue:"normal",prefix:!1,type:4},ua=function(b,w){return Re(b)&&b.value==="normal"?1.2*w:b.type===17?w*b.number:$r(b)?ur(b,w):w},cs={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(b,w){return w.type===20&&w.value==="none"?null:Cc.parse(b,w)}},Vm={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(b,w){switch(w){case"inside":return 0;case"outside":default:return 1}}},ru={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(b,w){switch(w){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Sl=function(b){return{name:"margin-"+b,initialValue:"0",prefix:!1,type:4}},nd=Sl("top"),sd=Sl("right"),ad=Sl("bottom"),jm=Sl("left"),Ic={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(b,w){return w.filter(Re).map(function(S){switch(S.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Pc={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(b,w){switch(w){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ra=function(b){return{name:"padding-"+b,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},iu=Ra("top"),Ad=Ra("right"),Km=Ra("bottom"),od=Ra("left"),Wm={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(b,w){switch(w){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Xm={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(b,w){switch(w){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},zm={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(b,w){return w.length===1&&gi(w[0],"none")?[]:Ri(w).map(function(S){for(var B={color:Si.TRANSPARENT,offsetX:ci,offsetY:ci,blur:ci},I=0,D=0;D<S.length;D++){var q=S[D];ns(q)?(I===0?B.offsetX=q:I===1?B.offsetY=q:B.blur=q,I++):B.color=ss.parse(b,q)}return B})}},qm={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(b,w){switch(w){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},$m={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(b,w){if(w.type===20&&w.value==="none")return null;if(w.type===18){var S=Uc[w.name];if(typeof S>"u")throw new Error('Attempting to parse an unsupported transform function "'+w.name+'"');return S(w.values)}return null}},Ym=function(b){var w=b.filter(function(S){return S.type===17}).map(function(S){return S.number});return w.length===6?w:null},ld=function(b){var w=b.filter(function(at){return at.type===17}).map(function(at){return at.number}),S=w[0],B=w[1];w[2],w[3];var I=w[4],D=w[5];w[6],w[7],w[8],w[9],w[10],w[11];var q=w[12],At=w[13];return w[14],w[15],w.length===16?[S,B,I,D,q,At]:null},Uc={matrix:Ym,matrix3d:ld},cd={type:16,number:50,flags:Tn},Jm=[cd,cd],hd={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(b,w){var S=w.filter($r);return S.length!==2?Jm:[S[0],S[1]]}},y={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(b,w){switch(w){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},_;(function(b){b.NORMAL="normal",b.BREAK_ALL="break-all",b.KEEP_ALL="keep-all"})(_||(_={}));for(var T={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(b,w){switch(w){case"break-all":return _.BREAK_ALL;case"keep-all":return _.KEEP_ALL;case"normal":default:return _.NORMAL}}},Q={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(b,w){if(w.type===20)return{auto:!0,order:0};if(Pr(w))return{auto:!1,order:w.number};throw new Error("Invalid z-index number parsed")}},j={name:"time",parse:function(b,w){if(w.type===15)switch(w.unit.toLowerCase()){case"s":return 1e3*w.number;case"ms":return w.number}throw new Error("Unsupported time type")}},z={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(b,w){return Pr(w)?w.number:1}},Y={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},et={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(b,w){return w.filter(Re).map(function(S){switch(S.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(S){return S!==0})}},nt={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(b,w){var S=[],B=[];return w.forEach(function(I){switch(I.type){case 20:case 0:S.push(I.value);break;case 17:S.push(I.number.toString());break;case 4:B.push(S.join(" ")),S.length=0;break}}),S.length&&B.push(S.join(" ")),B.map(function(I){return I.indexOf(" ")===-1?I:"'"+I+"'"})}},lt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Ct={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(b,w){if(Pr(w))return w.number;if(Re(w))switch(w.value){case"bold":return 700;case"normal":default:return 400}return 400}},Mt={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(b,w){return w.filter(Re).map(function(S){return S.value})}},kt={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(b,w){switch(w){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},xt=function(b,w){return(b&w)!==0},Yt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(b,w){if(w.length===0)return[];var S=w[0];return S.type===20&&S.value==="none"?[]:w}},Ht={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(b,w){if(w.length===0)return null;var S=w[0];if(S.type===20&&S.value==="none")return null;for(var B=[],I=w.filter(is),D=0;D<I.length;D++){var q=I[D],At=I[D+1];if(q.type===20){var at=At&&Pr(At)?At.number:1;B.push({counter:q.value,increment:at})}}return B}},Bt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(b,w){if(w.length===0)return[];for(var S=[],B=w.filter(is),I=0;I<B.length;I++){var D=B[I],q=B[I+1];if(Re(D)&&D.value!=="none"){var At=q&&Pr(q)?q.number:0;S.push({counter:D.value,reset:At})}}return S}},Et={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(b,w){return w.filter(Ir).map(function(S){return j.parse(b,S)})}},qt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(b,w){if(w.length===0)return null;var S=w[0];if(S.type===20&&S.value==="none")return null;var B=[],I=w.filter(on);if(I.length%2!==0)return null;for(var D=0;D<I.length;D+=2){var q=I[D].value,At=I[D+1].value;B.push({open:q,close:At})}return B}},Jt=function(b,w,S){if(!b)return"";var B=b[Math.min(w,b.length-1)];return B?S?B.open:B.close:""},$t={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(b,w){return w.length===1&&gi(w[0],"none")?[]:Ri(w).map(function(S){for(var B={color:255,offsetX:ci,offsetY:ci,blur:ci,spread:ci,inset:!1},I=0,D=0;D<S.length;D++){var q=S[D];gi(q,"inset")?B.inset=!0:ns(q)?(I===0?B.offsetX=q:I===1?B.offsetY=q:I===2?B.blur=q:B.spread=q,I++):B.color=ss.parse(b,q)}return B})}},ye={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(b,w){var S=[0,1,2],B=[];return w.filter(Re).forEach(function(I){switch(I.value){case"stroke":B.push(1);break;case"fill":B.push(0);break;case"markers":B.push(2);break}}),S.forEach(function(I){B.indexOf(I)===-1&&B.push(I)}),B}},ue={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Oe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(b,w){return Ir(w)?w.number:0}},ge=function(){function b(w,S){var B,I;this.animationDuration=ie(w,Et,S.animationDuration),this.backgroundClip=ie(w,vo,S.backgroundClip),this.backgroundColor=ie(w,yl,S.backgroundColor),this.backgroundImage=ie(w,Sc,S.backgroundImage),this.backgroundOrigin=ie(w,Kn,S.backgroundOrigin),this.backgroundPosition=ie(w,os,S.backgroundPosition),this.backgroundRepeat=ie(w,xc,S.backgroundRepeat),this.backgroundSize=ie(w,Ec,S.backgroundSize),this.borderTopColor=ie(w,td,S.borderTopColor),this.borderRightColor=ie(w,Zh,S.borderRightColor),this.borderBottomColor=ie(w,tu,S.borderBottomColor),this.borderLeftColor=ie(w,Tc,S.borderLeftColor),this.borderTopLeftRadius=ie(w,Lm,S.borderTopLeftRadius),this.borderTopRightRadius=ie(w,Im,S.borderTopRightRadius),this.borderBottomRightRadius=ie(w,ed,S.borderBottomRightRadius),this.borderBottomLeftRadius=ie(w,Pm,S.borderBottomLeftRadius),this.borderTopStyle=ie(w,Um,S.borderTopStyle),this.borderRightStyle=ie(w,Om,S.borderRightStyle),this.borderBottomStyle=ie(w,Qm,S.borderBottomStyle),this.borderLeftStyle=ie(w,eu,S.borderLeftStyle),this.borderTopWidth=ie(w,Bl,S.borderTopWidth),this.borderRightWidth=ie(w,Nm,S.borderRightWidth),this.borderBottomWidth=ie(w,Mm,S.borderBottomWidth),this.borderLeftWidth=ie(w,rd,S.borderLeftWidth),this.boxShadow=ie(w,$t,S.boxShadow),this.color=ie(w,km,S.color),this.direction=ie(w,Dm,S.direction),this.display=ie(w,Rm,S.display),this.float=ie(w,Da,S.cssFloat),this.fontFamily=ie(w,nt,S.fontFamily),this.fontSize=ie(w,lt,S.fontSize),this.fontStyle=ie(w,kt,S.fontStyle),this.fontVariant=ie(w,Mt,S.fontVariant),this.fontWeight=ie(w,Ct,S.fontWeight),this.letterSpacing=ie(w,Bs,S.letterSpacing),this.lineBreak=ie(w,Gm,S.lineBreak),this.lineHeight=ie(w,id,S.lineHeight),this.listStyleImage=ie(w,cs,S.listStyleImage),this.listStylePosition=ie(w,Vm,S.listStylePosition),this.listStyleType=ie(w,ru,S.listStyleType),this.marginTop=ie(w,nd,S.marginTop),this.marginRight=ie(w,sd,S.marginRight),this.marginBottom=ie(w,ad,S.marginBottom),this.marginLeft=ie(w,jm,S.marginLeft),this.opacity=ie(w,z,S.opacity);var D=ie(w,Ic,S.overflow);this.overflowX=D[0],this.overflowY=D[D.length>1?1:0],this.overflowWrap=ie(w,Pc,S.overflowWrap),this.paddingTop=ie(w,iu,S.paddingTop),this.paddingRight=ie(w,Ad,S.paddingRight),this.paddingBottom=ie(w,Km,S.paddingBottom),this.paddingLeft=ie(w,od,S.paddingLeft),this.paintOrder=ie(w,ye,S.paintOrder),this.position=ie(w,Xm,S.position),this.textAlign=ie(w,Wm,S.textAlign),this.textDecorationColor=ie(w,Y,(B=S.textDecorationColor)!==null&&B!==void 0?B:S.color),this.textDecorationLine=ie(w,et,(I=S.textDecorationLine)!==null&&I!==void 0?I:S.textDecoration),this.textShadow=ie(w,zm,S.textShadow),this.textTransform=ie(w,qm,S.textTransform),this.transform=ie(w,$m,S.transform),this.transformOrigin=ie(w,hd,S.transformOrigin),this.visibility=ie(w,y,S.visibility),this.webkitTextStrokeColor=ie(w,ue,S.webkitTextStrokeColor),this.webkitTextStrokeWidth=ie(w,Oe,S.webkitTextStrokeWidth),this.wordBreak=ie(w,T,S.wordBreak),this.zIndex=ie(w,Q,S.zIndex)}return b.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},b.prototype.isTransparent=function(){return Ms(this.backgroundColor)},b.prototype.isTransformed=function(){return this.transform!==null},b.prototype.isPositioned=function(){return this.position!==0},b.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},b.prototype.isFloating=function(){return this.float!==0},b.prototype.isInlineLevel=function(){return xt(this.display,4)||xt(this.display,33554432)||xt(this.display,268435456)||xt(this.display,536870912)||xt(this.display,67108864)||xt(this.display,134217728)},b}(),fr=function(){function b(w,S){this.content=ie(w,Yt,S.content),this.quotes=ie(w,qt,S.quotes)}return b}(),gr=function(){function b(w,S){this.counterIncrement=ie(w,Ht,S.counterIncrement),this.counterReset=ie(w,Bt,S.counterReset)}return b}(),ie=function(b,w,S){var B=new $e,I=S!==null&&typeof S<"u"?S.toString():w.initialValue;B.write(I);var D=new ar(B.read());switch(w.type){case 2:var q=D.parseComponentValue();return w.parse(b,Re(q)?q.value:w.initialValue);case 0:return w.parse(b,D.parseComponentValue());case 1:return w.parse(b,D.parseComponentValues());case 4:return D.parseComponentValue();case 3:switch(w.format){case"angle":return po.parse(b,D.parseComponentValue());case"color":return ss.parse(b,D.parseComponentValue());case"image":return Cc.parse(b,D.parseComponentValue());case"length":var At=D.parseComponentValue();return ns(At)?At:ci;case"length-percentage":var at=D.parseComponentValue();return $r(at)?at:ci;case"time":return j.parse(b,D.parseComponentValue())}break}},ir="data-html2canvas-debug",Qr=function(b){var w=b.getAttribute(ir);switch(w){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},pr=function(b,w){var S=Qr(b);return S===1||w===S},Qe=function(){function b(w,S){if(this.context=w,this.textNodes=[],this.elements=[],this.flags=0,pr(S,3))debugger;this.styles=new ge(w,window.getComputedStyle(S,null)),av(S)&&(this.styles.animationDuration.some(function(B){return B>0})&&(S.style.animationDuration="0s"),this.styles.transform!==null&&(S.style.transform="none")),this.bounds=l(this.context,S),pr(S,4)&&(this.flags|=16)}return b}(),vi="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",vn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yr=typeof Uint8Array>"u"?[]:new Uint8Array(256),qi=0;qi<vn.length;qi++)Yr[vn.charCodeAt(qi)]=qi;for(var Br=function(b){var w=b.length*.75,S=b.length,B,I=0,D,q,At,at;b[b.length-1]==="="&&(w--,b[b.length-2]==="="&&w--);var St=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(w):new Array(w),Tt=Array.isArray(St)?St:new Uint8Array(St);for(B=0;B<S;B+=4)D=Yr[b.charCodeAt(B)],q=Yr[b.charCodeAt(B+1)],At=Yr[b.charCodeAt(B+2)],at=Yr[b.charCodeAt(B+3)],Tt[I++]=D<<2|q>>4,Tt[I++]=(q&15)<<4|At>>2,Tt[I++]=(At&3)<<6|at&63;return St},Wn=function(b){for(var w=b.length,S=[],B=0;B<w;B+=2)S.push(b[B+1]<<8|b[B]);return S},Xn=function(b){for(var w=b.length,S=[],B=0;B<w;B+=4)S.push(b[B+3]<<24|b[B+2]<<16|b[B+1]<<8|b[B]);return S},Jr=5,xi=11,$i=2,hs=xi-Jr,Ss=65536>>Jr,Gi=1<<Jr,xs=Gi-1,UA=1024>>Jr,Co=Ss+UA,Ha=Co,si=32,nu=Ha+si,ud=65536>>xi,fd=1<<hs,Oc=fd-1,Bo=function(b,w,S){return b.slice?b.slice(w,S):new Uint16Array(Array.prototype.slice.call(b,w,S))},Qc=function(b,w,S){return b.slice?b.slice(w,S):new Uint32Array(Array.prototype.slice.call(b,w,S))},_s=function(b,w){var S=Br(b),B=Array.isArray(S)?Xn(S):new Uint32Array(S),I=Array.isArray(S)?Wn(S):new Uint16Array(S),D=24,q=Bo(I,D/2,B[4]/2),At=B[5]===2?Bo(I,(D+B[4])/2):Qc(B,Math.ceil((D+B[4])/4));return new So(B[0],B[1],B[2],B[3],q,At)},So=function(){function b(w,S,B,I,D,q){this.initialValue=w,this.errorValue=S,this.highStart=B,this.highValueIndex=I,this.index=D,this.data=q}return b.prototype.get=function(w){var S;if(w>=0){if(w<55296||w>56319&&w<=65535)return S=this.index[w>>Jr],S=(S<<$i)+(w&xs),this.data[S];if(w<=65535)return S=this.index[Ss+(w-55296>>Jr)],S=(S<<$i)+(w&xs),this.data[S];if(w<this.highStart)return S=nu-ud+(w>>xi),S=this.index[S],S+=w>>Jr&Oc,S=this.index[S],S=(S<<$i)+(w&xs),this.data[S];if(w<=1114111)return this.data[this.highValueIndex]}return this.errorValue},b}(),OA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dd=typeof Uint8Array>"u"?[]:new Uint8Array(256),QA=0;QA<OA.length;QA++)dd[OA.charCodeAt(QA)]=QA;var gd=1,xo=2,xl=3,_l=4,_o=5,Zm=7,pd=8,El=9,Hs=10,md=11,vd=12,yd=13,su=14,Eo=15,wd=function(b){for(var w=[],S=0,B=b.length;S<B;){var I=b.charCodeAt(S++);if(I>=55296&&I<=56319&&S<B){var D=b.charCodeAt(S++);(D&64512)===56320?w.push(((I&1023)<<10)+(D&1023)+65536):(w.push(I),S--)}else w.push(I)}return w},bd=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];if(String.fromCodePoint)return String.fromCodePoint.apply(String,b);var S=b.length;if(!S)return"";for(var B=[],I=-1,D="";++I<S;){var q=b[I];q<=65535?B.push(q):(q-=65536,B.push((q>>10)+55296,q%1024+56320)),(I+1===S||B.length>16384)&&(D+=String.fromCharCode.apply(String,B),B.length=0)}return D},Nc=_s(vi),Ln="×",NA="÷",Cd=function(b){return Nc.get(b)},tv=function(b,w,S){var B=S-2,I=w[B],D=w[S-1],q=w[S];if(D===xo&&q===xl)return Ln;if(D===xo||D===xl||D===_l||q===xo||q===xl||q===_l)return NA;if(D===pd&&[pd,El,md,vd].indexOf(q)!==-1||(D===md||D===El)&&(q===El||q===Hs)||(D===vd||D===Hs)&&q===Hs||q===yd||q===_o||q===Zm||D===gd)return Ln;if(D===yd&&q===su){for(;I===_o;)I=w[--B];if(I===su)return Ln}if(D===Eo&&q===Eo){for(var At=0;I===Eo;)At++,I=w[--B];if(At%2===0)return Ln}return NA},Mc=function(b){var w=wd(b),S=w.length,B=0,I=0,D=w.map(Cd);return{next:function(){if(B>=S)return{done:!0,value:null};for(var q=Ln;B<S&&(q=tv(w,D,++B))===Ln;);if(q!==Ln||B===S){var At=bd.apply(null,w.slice(I,B));return I=B,{value:At,done:!1}}return{done:!0,value:null}}}},Bd=function(b){for(var w=Mc(b),S=[],B;!(B=w.next()).done;)B.value&&S.push(B.value.slice());return S},au=function(b){var w=123;if(b.createRange){var S=b.createRange();if(S.getBoundingClientRect){var B=b.createElement("boundtest");B.style.height=w+"px",B.style.display="block",b.body.appendChild(B),S.selectNode(B);var I=S.getBoundingClientRect(),D=Math.round(I.height);if(b.body.removeChild(B),D===w)return!0}}return!1},Ga=function(b){var w=b.createElement("boundtest");w.style.width="50px",w.style.display="block",w.style.fontSize="12px",w.style.letterSpacing="0px",w.style.wordSpacing="0px",b.body.appendChild(w);var S=b.createRange();w.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var B=w.firstChild,I=o(B.data).map(function(at){return u(at)}),D=0,q={},At=I.every(function(at,St){S.setStart(B,D),S.setEnd(B,D+at.length);var Tt=S.getBoundingClientRect();D+=at.length;var Qt=Tt.x>q.x||Tt.y>q.y;return q=Tt,St===0?!0:Qt});return b.body.removeChild(w),At},Sd=function(){return typeof new Image().crossOrigin<"u"},xd=function(){return typeof new XMLHttpRequest().responseType=="string"},ev=function(b){var w=new Image,S=b.createElement("canvas"),B=S.getContext("2d");if(!B)return!1;w.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{B.drawImage(w,0,0),S.toDataURL()}catch{return!1}return!0},Au=function(b){return b[0]===0&&b[1]===255&&b[2]===0&&b[3]===255},Fo=function(b){var w=b.createElement("canvas"),S=100;w.width=S,w.height=S;var B=w.getContext("2d");if(!B)return Promise.reject(!1);B.fillStyle="rgb(0, 255, 0)",B.fillRect(0,0,S,S);var I=new Image,D=w.toDataURL();I.src=D;var q=ou(S,S,0,0,I);return B.fillStyle="red",B.fillRect(0,0,S,S),lu(q).then(function(At){B.drawImage(At,0,0);var at=B.getImageData(0,0,S,S).data;B.fillStyle="red",B.fillRect(0,0,S,S);var St=b.createElement("div");return St.style.backgroundImage="url("+D+")",St.style.height=S+"px",Au(at)?lu(ou(S,S,0,0,St)):Promise.reject(!1)}).then(function(At){return B.drawImage(At,0,0),Au(B.getImageData(0,0,S,S).data)}).catch(function(){return!1})},ou=function(b,w,S,B,I){var D="http://www.w3.org/2000/svg",q=document.createElementNS(D,"svg"),At=document.createElementNS(D,"foreignObject");return q.setAttributeNS(null,"width",b.toString()),q.setAttributeNS(null,"height",w.toString()),At.setAttributeNS(null,"width","100%"),At.setAttributeNS(null,"height","100%"),At.setAttributeNS(null,"x",S.toString()),At.setAttributeNS(null,"y",B.toString()),At.setAttributeNS(null,"externalResourcesRequired","true"),q.appendChild(At),At.appendChild(I),q},lu=function(b){return new Promise(function(w,S){var B=new Image;B.onload=function(){return w(B)},B.onerror=S,B.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(b))})},Yi={get SUPPORT_RANGE_BOUNDS(){var b=au(document);return Object.defineProperty(Yi,"SUPPORT_RANGE_BOUNDS",{value:b}),b},get SUPPORT_WORD_BREAKING(){var b=Yi.SUPPORT_RANGE_BOUNDS&&Ga(document);return Object.defineProperty(Yi,"SUPPORT_WORD_BREAKING",{value:b}),b},get SUPPORT_SVG_DRAWING(){var b=ev(document);return Object.defineProperty(Yi,"SUPPORT_SVG_DRAWING",{value:b}),b},get SUPPORT_FOREIGNOBJECT_DRAWING(){var b=typeof Array.from=="function"&&typeof window.fetch=="function"?Fo(document):Promise.resolve(!1);return Object.defineProperty(Yi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:b}),b},get SUPPORT_CORS_IMAGES(){var b=Sd();return Object.defineProperty(Yi,"SUPPORT_CORS_IMAGES",{value:b}),b},get SUPPORT_RESPONSE_TYPE(){var b=xd();return Object.defineProperty(Yi,"SUPPORT_RESPONSE_TYPE",{value:b}),b},get SUPPORT_CORS_XHR(){var b="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Yi,"SUPPORT_CORS_XHR",{value:b}),b},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var b=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Yi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:b}),b}},To=function(){function b(w,S){this.text=w,this.bounds=S}return b}(),rv=function(b,w,S,B){var I=Va(w,S),D=[],q=0;return I.forEach(function(At){if(S.textDecorationLine.length||At.trim().length>0)if(Yi.SUPPORT_RANGE_BOUNDS){var at=kc(B,q,At.length).getClientRects();if(at.length>1){var St=Lo(At),Tt=0;St.forEach(function(jt){D.push(new To(jt,n.fromDOMRectList(b,kc(B,Tt+q,jt.length).getClientRects()))),Tt+=jt.length})}else D.push(new To(At,n.fromDOMRectList(b,at)))}else{var Qt=B.splitText(At.length);D.push(new To(At,Fl(b,B))),B=Qt}else Yi.SUPPORT_RANGE_BOUNDS||(B=B.splitText(At.length));q+=At.length}),D},Fl=function(b,w){var S=w.ownerDocument;if(S){var B=S.createElement("html2canvaswrapper");B.appendChild(w.cloneNode(!0));var I=w.parentNode;if(I){I.replaceChild(B,w);var D=l(b,B);return B.firstChild&&I.replaceChild(B.firstChild,B),D}}return n.EMPTY},kc=function(b,w,S){var B=b.ownerDocument;if(!B)throw new Error("Node has no owner document");var I=B.createRange();return I.setStart(b,w),I.setEnd(b,w+S),I},Lo=function(b){if(Yi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var w=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(w.segment(b)).map(function(S){return S.segment})}return Bd(b)},fa=function(b,w){if(Yi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var S=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(S.segment(b)).map(function(B){return B.segment})}return Dc(b,w)},Va=function(b,w){return w.letterSpacing!==0?Lo(b):fa(b,w)},ja=[32,160,4961,65792,65793,4153,4241],Dc=function(b,w){for(var S=Qs(b,{lineBreak:w.lineBreak,wordBreak:w.overflowWrap==="break-word"?"break-word":w.wordBreak}),B=[],I,D=function(){if(I.value){var q=I.value.slice(),At=o(q),at="";At.forEach(function(St){ja.indexOf(St)===-1?at+=u(St):(at.length&&B.push(at),B.push(u(St)),at="")}),at.length&&B.push(at)}};!(I=S.next()).done;)D();return B},cu=function(){function b(w,S,B){this.text=_d(S.data,B.textTransform),this.textBounds=rv(w,this.text,B,S)}return b}(),_d=function(b,w){switch(w){case 1:return b.toLowerCase();case 3:return b.replace(iv,hu);case 2:return b.toUpperCase();default:return b}},iv=/(^|\s|:|-|\(|\))([a-z])/g,hu=function(b,w,S){return b.length>0?w+S.toUpperCase():b},Rc=function(b){i(w,b);function w(S,B){var I=b.call(this,S,B)||this;return I.src=B.currentSrc||B.src,I.intrinsicWidth=B.naturalWidth,I.intrinsicHeight=B.naturalHeight,I.context.cache.addImage(I.src),I}return w}(Qe),SB=function(b){i(w,b);function w(S,B){var I=b.call(this,S,B)||this;return I.canvas=B,I.intrinsicWidth=B.width,I.intrinsicHeight=B.height,I}return w}(Qe),xB=function(b){i(w,b);function w(S,B){var I=b.call(this,S,B)||this,D=new XMLSerializer,q=l(S,B);return B.setAttribute("width",q.width+"px"),B.setAttribute("height",q.height+"px"),I.svg="data:image/svg+xml,"+encodeURIComponent(D.serializeToString(B)),I.intrinsicWidth=B.width.baseVal.value,I.intrinsicHeight=B.height.baseVal.value,I.context.cache.addImage(I.svg),I}return w}(Qe),_B=function(b){i(w,b);function w(S,B){var I=b.call(this,S,B)||this;return I.value=B.value,I}return w}(Qe),nv=function(b){i(w,b);function w(S,B){var I=b.call(this,S,B)||this;return I.start=B.start,I.reversed=typeof B.reversed=="boolean"&&B.reversed===!0,I}return w}(Qe),u6=[{type:15,flags:0,unit:"px",number:3}],f6=[{type:16,flags:0,number:50}],d6=function(b){return b.width>b.height?new n(b.left+(b.width-b.height)/2,b.top,b.height,b.height):b.width<b.height?new n(b.left,b.top+(b.height-b.width)/2,b.width,b.width):b},g6=function(b){var w=b.type===p6?new Array(b.value.length+1).join("•"):b.value;return w.length===0?b.placeholder||"":w},Ed="checkbox",Fd="radio",p6="password",EB=707406591,sv=function(b){i(w,b);function w(S,B){var I=b.call(this,S,B)||this;switch(I.type=B.type.toLowerCase(),I.checked=B.checked,I.value=g6(B),(I.type===Ed||I.type===Fd)&&(I.styles.backgroundColor=3739148031,I.styles.borderTopColor=I.styles.borderRightColor=I.styles.borderBottomColor=I.styles.borderLeftColor=2779096575,I.styles.borderTopWidth=I.styles.borderRightWidth=I.styles.borderBottomWidth=I.styles.borderLeftWidth=1,I.styles.borderTopStyle=I.styles.borderRightStyle=I.styles.borderBottomStyle=I.styles.borderLeftStyle=1,I.styles.backgroundClip=[0],I.styles.backgroundOrigin=[0],I.bounds=d6(I.bounds)),I.type){case Ed:I.styles.borderTopRightRadius=I.styles.borderTopLeftRadius=I.styles.borderBottomRightRadius=I.styles.borderBottomLeftRadius=u6;break;case Fd:I.styles.borderTopRightRadius=I.styles.borderTopLeftRadius=I.styles.borderBottomRightRadius=I.styles.borderBottomLeftRadius=f6;break}return I}return w}(Qe),FB=function(b){i(w,b);function w(S,B){var I=b.call(this,S,B)||this,D=B.options[B.selectedIndex||0];return I.value=D&&D.text||"",I}return w}(Qe),TB=function(b){i(w,b);function w(S,B){var I=b.call(this,S,B)||this;return I.value=B.value,I}return w}(Qe),LB=function(b){i(w,b);function w(S,B){var I=b.call(this,S,B)||this;I.src=B.src,I.width=parseInt(B.width,10)||0,I.height=parseInt(B.height,10)||0,I.backgroundColor=I.styles.backgroundColor;try{if(B.contentWindow&&B.contentWindow.document&&B.contentWindow.document.documentElement){I.tree=PB(S,B.contentWindow.document.documentElement);var D=B.contentWindow.document.documentElement?Ds(S,getComputedStyle(B.contentWindow.document.documentElement).backgroundColor):Si.TRANSPARENT,q=B.contentWindow.document.body?Ds(S,getComputedStyle(B.contentWindow.document.body).backgroundColor):Si.TRANSPARENT;I.backgroundColor=Ms(D)?Ms(q)?I.styles.backgroundColor:q:D}}catch{}return I}return w}(Qe),m6=["OL","UL","MENU"],Td=function(b,w,S,B){for(var I=w.firstChild,D=void 0;I;I=D)if(D=I.nextSibling,UB(I)&&I.data.trim().length>0)S.textNodes.push(new cu(b,I,S.styles));else if(Hc(I))if(DB(I)&&I.assignedNodes)I.assignedNodes().forEach(function(At){return Td(b,At,S,B)});else{var q=IB(b,I);q.styles.isVisible()&&(v6(I,q,B)?q.flags|=4:y6(q.styles)&&(q.flags|=2),m6.indexOf(I.tagName)!==-1&&(q.flags|=8),S.elements.push(q),I.slot,I.shadowRoot?Td(b,I.shadowRoot,q,B):!Id(I)&&!OB(I)&&!Pd(I)&&Td(b,I,q,B))}},IB=function(b,w){return ov(w)?new Rc(b,w):QB(w)?new SB(b,w):OB(w)?new xB(b,w):w6(w)?new _B(b,w):b6(w)?new nv(b,w):C6(w)?new sv(b,w):Pd(w)?new FB(b,w):Id(w)?new TB(b,w):MB(w)?new LB(b,w):new Qe(b,w)},PB=function(b,w){var S=IB(b,w);return S.flags|=4,Td(b,w,S,S),S},v6=function(b,w,S){return w.styles.isPositionedWithZIndex()||w.styles.opacity<1||w.styles.isTransformed()||Av(b)&&S.styles.isTransparent()},y6=function(b){return b.isPositioned()||b.isFloating()},UB=function(b){return b.nodeType===Node.TEXT_NODE},Hc=function(b){return b.nodeType===Node.ELEMENT_NODE},av=function(b){return Hc(b)&&typeof b.style<"u"&&!Ld(b)},Ld=function(b){return typeof b.className=="object"},w6=function(b){return b.tagName==="LI"},b6=function(b){return b.tagName==="OL"},C6=function(b){return b.tagName==="INPUT"},B6=function(b){return b.tagName==="HTML"},OB=function(b){return b.tagName==="svg"},Av=function(b){return b.tagName==="BODY"},QB=function(b){return b.tagName==="CANVAS"},NB=function(b){return b.tagName==="VIDEO"},ov=function(b){return b.tagName==="IMG"},MB=function(b){return b.tagName==="IFRAME"},kB=function(b){return b.tagName==="STYLE"},S6=function(b){return b.tagName==="SCRIPT"},Id=function(b){return b.tagName==="TEXTAREA"},Pd=function(b){return b.tagName==="SELECT"},DB=function(b){return b.tagName==="SLOT"},RB=function(b){return b.tagName.indexOf("-")>0},x6=function(){function b(){this.counters={}}return b.prototype.getCounterValue=function(w){var S=this.counters[w];return S&&S.length?S[S.length-1]:1},b.prototype.getCounterValues=function(w){var S=this.counters[w];return S||[]},b.prototype.pop=function(w){var S=this;w.forEach(function(B){return S.counters[B].pop()})},b.prototype.parse=function(w){var S=this,B=w.counterIncrement,I=w.counterReset,D=!0;B!==null&&B.forEach(function(At){var at=S.counters[At.counter];at&&At.increment!==0&&(D=!1,at.length||at.push(1),at[Math.max(0,at.length-1)]+=At.increment)});var q=[];return D&&I.forEach(function(At){var at=S.counters[At.counter];q.push(At.counter),at||(at=S.counters[At.counter]=[]),at.push(At.reset)}),q},b}(),HB={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},GB={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},_6={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},E6={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Gc=function(b,w,S,B,I,D){return b<w||b>S?fu(b,I,D.length>0):B.integers.reduce(function(q,At,at){for(;b>=At;)b-=At,q+=B.values[at];return q},"")+D},VB=function(b,w,S,B){var I="";do S||b--,I=B(b)+I,b/=w;while(b*w>=w);return I},_i=function(b,w,S,B,I){var D=S-w+1;return(b<0?"-":"")+(VB(Math.abs(b),D,B,function(q){return u(Math.floor(q%D)+w)})+I)},Tl=function(b,w,S){S===void 0&&(S=". ");var B=w.length;return VB(Math.abs(b),B,!1,function(I){return w[Math.floor(I%B)]})+S},Vc=1,Io=2,Po=4,uu=8,MA=function(b,w,S,B,I,D){if(b<-9999||b>9999)return fu(b,4,I.length>0);var q=Math.abs(b),At=I;if(q===0)return w[0]+At;for(var at=0;q>0&&at<=4;at++){var St=q%10;St===0&&xt(D,Vc)&&At!==""?At=w[St]+At:St>1||St===1&&at===0||St===1&&at===1&&xt(D,Io)||St===1&&at===1&&xt(D,Po)&&b>100||St===1&&at>1&&xt(D,uu)?At=w[St]+(at>0?S[at-1]:"")+At:St===1&&at>0&&(At=S[at-1]+At),q=Math.floor(q/10)}return(b<0?B:"")+At},jB="十百千萬",KB="拾佰仟萬",WB="マイナス",lv="마이너스",fu=function(b,w,S){var B=S?". ":"",I=S?"、":"",D=S?", ":"",q=S?" ":"";switch(w){case 0:return"•"+q;case 1:return"◦"+q;case 2:return"◾"+q;case 5:var At=_i(b,48,57,!0,B);return At.length<4?"0"+At:At;case 4:return Tl(b,"〇一二三四五六七八九",I);case 6:return Gc(b,1,3999,HB,3,B).toLowerCase();case 7:return Gc(b,1,3999,HB,3,B);case 8:return _i(b,945,969,!1,B);case 9:return _i(b,97,122,!1,B);case 10:return _i(b,65,90,!1,B);case 11:return _i(b,1632,1641,!0,B);case 12:case 49:return Gc(b,1,9999,GB,3,B);case 35:return Gc(b,1,9999,GB,3,B).toLowerCase();case 13:return _i(b,2534,2543,!0,B);case 14:case 30:return _i(b,6112,6121,!0,B);case 15:return Tl(b,"子丑寅卯辰巳午未申酉戌亥",I);case 16:return Tl(b,"甲乙丙丁戊己庚辛壬癸",I);case 17:case 48:return MA(b,"零一二三四五六七八九",jB,"負",I,Io|Po|uu);case 47:return MA(b,"零壹貳參肆伍陸柒捌玖",KB,"負",I,Vc|Io|Po|uu);case 42:return MA(b,"零一二三四五六七八九",jB,"负",I,Io|Po|uu);case 41:return MA(b,"零壹贰叁肆伍陆柒捌玖",KB,"负",I,Vc|Io|Po|uu);case 26:return MA(b,"〇一二三四五六七八九","十百千万",WB,I,0);case 25:return MA(b,"零壱弐参四伍六七八九","拾百千万",WB,I,Vc|Io|Po);case 31:return MA(b,"영일이삼사오육칠팔구","십백천만",lv,D,Vc|Io|Po);case 33:return MA(b,"零一二三四五六七八九","十百千萬",lv,D,0);case 32:return MA(b,"零壹貳參四五六七八九","拾百千",lv,D,Vc|Io|Po);case 18:return _i(b,2406,2415,!0,B);case 20:return Gc(b,1,19999,E6,3,B);case 21:return _i(b,2790,2799,!0,B);case 22:return _i(b,2662,2671,!0,B);case 22:return Gc(b,1,10999,_6,3,B);case 23:return Tl(b,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Tl(b,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return _i(b,3302,3311,!0,B);case 28:return Tl(b,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",I);case 29:return Tl(b,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",I);case 34:return _i(b,3792,3801,!0,B);case 37:return _i(b,6160,6169,!0,B);case 38:return _i(b,4160,4169,!0,B);case 39:return _i(b,2918,2927,!0,B);case 40:return _i(b,1776,1785,!0,B);case 43:return _i(b,3046,3055,!0,B);case 44:return _i(b,3174,3183,!0,B);case 45:return _i(b,3664,3673,!0,B);case 46:return _i(b,3872,3881,!0,B);case 3:default:return _i(b,48,57,!0,B)}},XB="data-html2canvas-ignore",zB=function(){function b(w,S,B){if(this.context=w,this.options=B,this.scrolledElements=[],this.referenceElement=S,this.counters=new x6,this.quoteDepth=0,!S.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(S.ownerDocument.documentElement,!1)}return b.prototype.toIFrame=function(w,S){var B=this,I=F6(w,S);if(!I.contentWindow)return Promise.reject("Unable to find iframe window");var D=w.defaultView.pageXOffset,q=w.defaultView.pageYOffset,At=I.contentWindow,at=At.document,St=I6(I).then(function(){return c(B,void 0,void 0,function(){var Tt,Qt;return f(this,function(jt){switch(jt.label){case 0:return this.scrolledElements.forEach(Q6),At&&(At.scrollTo(S.left,S.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(At.scrollY!==S.top||At.scrollX!==S.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(At.scrollX-S.left,At.scrollY-S.top,0,0))),Tt=this.options.onclone,Qt=this.clonedReferenceElement,typeof Qt>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:at.fonts&&at.fonts.ready?[4,at.fonts.ready]:[3,2];case 1:jt.sent(),jt.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,L6(at)]:[3,4];case 3:jt.sent(),jt.label=4;case 4:return typeof Tt=="function"?[2,Promise.resolve().then(function(){return Tt(at,Qt)}).then(function(){return I})]:[2,I]}})})});return at.open(),at.write(U6(document.doctype)+"<html></html>"),O6(this.referenceElement.ownerDocument,D,q),at.replaceChild(at.adoptNode(this.documentElement),at.documentElement),at.close(),St},b.prototype.createElementClone=function(w){if(pr(w,2))debugger;if(QB(w))return this.createCanvasClone(w);if(NB(w))return this.createVideoClone(w);if(kB(w))return this.createStyleClone(w);var S=w.cloneNode(!1);return ov(S)&&(ov(w)&&w.currentSrc&&w.currentSrc!==w.src&&(S.src=w.currentSrc,S.srcset=""),S.loading==="lazy"&&(S.loading="eager")),RB(S)?this.createCustomElementClone(S):S},b.prototype.createCustomElementClone=function(w){var S=document.createElement("html2canvascustomelement");return cv(w.style,S),S},b.prototype.createStyleClone=function(w){try{var S=w.sheet;if(S&&S.cssRules){var B=[].slice.call(S.cssRules,0).reduce(function(D,q){return q&&typeof q.cssText=="string"?D+q.cssText:D},""),I=w.cloneNode(!1);return I.textContent=B,I}}catch(D){if(this.context.logger.error("Unable to access cssRules property",D),D.name!=="SecurityError")throw D}return w.cloneNode(!1)},b.prototype.createCanvasClone=function(w){var S;if(this.options.inlineImages&&w.ownerDocument){var B=w.ownerDocument.createElement("img");try{return B.src=w.toDataURL(),B}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",w)}}var I=w.cloneNode(!1);try{I.width=w.width,I.height=w.height;var D=w.getContext("2d"),q=I.getContext("2d");if(q)if(!this.options.allowTaint&&D)q.putImageData(D.getImageData(0,0,w.width,w.height),0,0);else{var At=(S=w.getContext("webgl2"))!==null&&S!==void 0?S:w.getContext("webgl");if(At){var at=At.getContextAttributes();(at==null?void 0:at.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",w)}q.drawImage(w,0,0)}return I}catch{this.context.logger.info("Unable to clone canvas as it is tainted",w)}return I},b.prototype.createVideoClone=function(w){var S=w.ownerDocument.createElement("canvas");S.width=w.offsetWidth,S.height=w.offsetHeight;var B=S.getContext("2d");try{return B&&(B.drawImage(w,0,0,S.width,S.height),this.options.allowTaint||B.getImageData(0,0,S.width,S.height)),S}catch{this.context.logger.info("Unable to clone video as it is tainted",w)}var I=w.ownerDocument.createElement("canvas");return I.width=w.offsetWidth,I.height=w.offsetHeight,I},b.prototype.appendChildNode=function(w,S,B){(!Hc(S)||!S6(S)&&!S.hasAttribute(XB)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(S)))&&(!this.options.copyStyles||!Hc(S)||!kB(S))&&w.appendChild(this.cloneNode(S,B))},b.prototype.cloneChildNodes=function(w,S,B){for(var I=this,D=w.shadowRoot?w.shadowRoot.firstChild:w.firstChild;D;D=D.nextSibling)if(Hc(D)&&DB(D)&&typeof D.assignedNodes=="function"){var q=D.assignedNodes();q.length&&q.forEach(function(At){return I.appendChildNode(S,At,B)})}else this.appendChildNode(S,D,B)},b.prototype.cloneNode=function(w,S){if(UB(w))return document.createTextNode(w.data);if(!w.ownerDocument)return w.cloneNode(!1);var B=w.ownerDocument.defaultView;if(B&&Hc(w)&&(av(w)||Ld(w))){var I=this.createElementClone(w);I.style.transitionProperty="none";var D=B.getComputedStyle(w),q=B.getComputedStyle(w,":before"),At=B.getComputedStyle(w,":after");this.referenceElement===w&&av(I)&&(this.clonedReferenceElement=I),Av(I)&&k6(I);var at=this.counters.parse(new gr(this.context,D)),St=this.resolvePseudoContent(w,I,q,du.BEFORE);RB(w)&&(S=!0),NB(w)||this.cloneChildNodes(w,I,S),St&&I.insertBefore(St,I.firstChild);var Tt=this.resolvePseudoContent(w,I,At,du.AFTER);return Tt&&I.appendChild(Tt),this.counters.pop(at),(D&&(this.options.copyStyles||Ld(w))&&!MB(w)||S)&&cv(D,I),(w.scrollTop!==0||w.scrollLeft!==0)&&this.scrolledElements.push([I,w.scrollLeft,w.scrollTop]),(Id(w)||Pd(w))&&(Id(I)||Pd(I))&&(I.value=w.value),I}return w.cloneNode(!1)},b.prototype.resolvePseudoContent=function(w,S,B,I){var D=this;if(B){var q=B.content,At=S.ownerDocument;if(!(!At||!q||q==="none"||q==="-moz-alt-content"||B.display==="none")){this.counters.parse(new gr(this.context,B));var at=new fr(this.context,B),St=At.createElement("html2canvaspseudoelement");cv(B,St),at.content.forEach(function(Qt){if(Qt.type===0)St.appendChild(At.createTextNode(Qt.value));else if(Qt.type===22){var jt=At.createElement("img");jt.src=Qt.value,jt.style.opacity="1",St.appendChild(jt)}else if(Qt.type===18){if(Qt.name==="attr"){var Ce=Qt.values.filter(Re);Ce.length&&St.appendChild(At.createTextNode(w.getAttribute(Ce[0].value)||""))}else if(Qt.name==="counter"){var ce=Qt.values.filter(Di),me=ce[0],Je=ce[1];if(me&&Re(me)){var Ee=D.counters.getCounterValue(me.value),xe=Je&&Re(Je)?ru.parse(D.context,Je.value):3;St.appendChild(At.createTextNode(fu(Ee,xe,!1)))}}else if(Qt.name==="counters"){var mr=Qt.values.filter(Di),me=mr[0],tr=mr[1],Je=mr[2];if(me&&Re(me)){var Ve=D.counters.getCounterValues(me.value),be=Je&&Re(Je)?ru.parse(D.context,Je.value):3,cr=tr&&tr.type===0?tr.value:"",hr=Ve.map(function(us){return fu(us,be,!1)}).join(cr);St.appendChild(At.createTextNode(hr))}}}else if(Qt.type===20)switch(Qt.value){case"open-quote":St.appendChild(At.createTextNode(Jt(at.quotes,D.quoteDepth++,!0)));break;case"close-quote":St.appendChild(At.createTextNode(Jt(at.quotes,--D.quoteDepth,!1)));break;default:St.appendChild(At.createTextNode(Qt.value))}}),St.className=hv+" "+uv;var Tt=I===du.BEFORE?" "+hv:" "+uv;return Ld(S)?S.className.baseValue+=Tt:S.className+=Tt,St}}},b.destroy=function(w){return w.parentNode?(w.parentNode.removeChild(w),!0):!1},b}(),du;(function(b){b[b.BEFORE=0]="BEFORE",b[b.AFTER=1]="AFTER"})(du||(du={}));var F6=function(b,w){var S=b.createElement("iframe");return S.className="html2canvas-container",S.style.visibility="hidden",S.style.position="fixed",S.style.left="-10000px",S.style.top="0px",S.style.border="0",S.width=w.width.toString(),S.height=w.height.toString(),S.scrolling="no",S.setAttribute(XB,"true"),b.body.appendChild(S),S},T6=function(b){return new Promise(function(w){if(b.complete){w();return}if(!b.src){w();return}b.onload=w,b.onerror=w})},L6=function(b){return Promise.all([].slice.call(b.images,0).map(T6))},I6=function(b){return new Promise(function(w,S){var B=b.contentWindow;if(!B)return S("No window assigned for iframe");var I=B.document;B.onload=b.onload=function(){B.onload=b.onload=null;var D=setInterval(function(){I.body.childNodes.length>0&&I.readyState==="complete"&&(clearInterval(D),w(b))},50)}})},P6=["all","d","content"],cv=function(b,w){for(var S=b.length-1;S>=0;S--){var B=b.item(S);P6.indexOf(B)===-1&&w.style.setProperty(B,b.getPropertyValue(B))}return w},U6=function(b){var w="";return b&&(w+="<!DOCTYPE ",b.name&&(w+=b.name),b.internalSubset&&(w+=b.internalSubset),b.publicId&&(w+='"'+b.publicId+'"'),b.systemId&&(w+='"'+b.systemId+'"'),w+=">"),w},O6=function(b,w,S){b&&b.defaultView&&(w!==b.defaultView.pageXOffset||S!==b.defaultView.pageYOffset)&&b.defaultView.scrollTo(w,S)},Q6=function(b){var w=b[0],S=b[1],B=b[2];w.scrollLeft=S,w.scrollTop=B},N6=":before",M6=":after",hv="___html2canvas___pseudoelement_before",uv="___html2canvas___pseudoelement_after",qB=`{
    content: "" !important;
    display: none !important;
}`,k6=function(b){D6(b,"."+hv+N6+qB+`
         .`+uv+M6+qB)},D6=function(b,w){var S=b.ownerDocument;if(S){var B=S.createElement("style");B.textContent=w,b.appendChild(B)}},$B=function(){function b(){}return b.getOrigin=function(w){var S=b._link;return S?(S.href=w,S.href=S.href,S.protocol+S.hostname+S.port):"about:blank"},b.isSameOrigin=function(w){return b.getOrigin(w)===b._origin},b.setContext=function(w){b._link=w.document.createElement("a"),b._origin=b.getOrigin(w.location.href)},b._origin="about:blank",b}(),R6=function(){function b(w,S){this.context=w,this._options=S,this._cache={}}return b.prototype.addImage=function(w){var S=Promise.resolve();return this.has(w)||(dv(w)||j6(w))&&(this._cache[w]=this.loadImage(w)).catch(function(){}),S},b.prototype.match=function(w){return this._cache[w]},b.prototype.loadImage=function(w){return c(this,void 0,void 0,function(){var S,B,I,D,q=this;return f(this,function(At){switch(At.label){case 0:return S=$B.isSameOrigin(w),B=!fv(w)&&this._options.useCORS===!0&&Yi.SUPPORT_CORS_IMAGES&&!S,I=!fv(w)&&!S&&!dv(w)&&typeof this._options.proxy=="string"&&Yi.SUPPORT_CORS_XHR&&!B,!S&&this._options.allowTaint===!1&&!fv(w)&&!dv(w)&&!I&&!B?[2]:(D=w,I?[4,this.proxy(D)]:[3,2]);case 1:D=At.sent(),At.label=2;case 2:return this.context.logger.debug("Added image "+w.substring(0,256)),[4,new Promise(function(at,St){var Tt=new Image;Tt.onload=function(){return at(Tt)},Tt.onerror=St,(K6(D)||B)&&(Tt.crossOrigin="anonymous"),Tt.src=D,Tt.complete===!0&&setTimeout(function(){return at(Tt)},500),q._options.imageTimeout>0&&setTimeout(function(){return St("Timed out ("+q._options.imageTimeout+"ms) loading image")},q._options.imageTimeout)})];case 3:return[2,At.sent()]}})})},b.prototype.has=function(w){return typeof this._cache[w]<"u"},b.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},b.prototype.proxy=function(w){var S=this,B=this._options.proxy;if(!B)throw new Error("No proxy defined");var I=w.substring(0,256);return new Promise(function(D,q){var At=Yi.SUPPORT_RESPONSE_TYPE?"blob":"text",at=new XMLHttpRequest;at.onload=function(){if(at.status===200)if(At==="text")D(at.response);else{var Qt=new FileReader;Qt.addEventListener("load",function(){return D(Qt.result)},!1),Qt.addEventListener("error",function(jt){return q(jt)},!1),Qt.readAsDataURL(at.response)}else q("Failed to proxy resource "+I+" with status code "+at.status)},at.onerror=q;var St=B.indexOf("?")>-1?"&":"?";if(at.open("GET",""+B+St+"url="+encodeURIComponent(w)+"&responseType="+At),At!=="text"&&at instanceof XMLHttpRequest&&(at.responseType=At),S._options.imageTimeout){var Tt=S._options.imageTimeout;at.timeout=Tt,at.ontimeout=function(){return q("Timed out ("+Tt+"ms) proxying "+I)}}at.send()})},b}(),H6=/^data:image\/svg\+xml/i,G6=/^data:image\/.*;base64,/i,V6=/^data:image\/.*/i,j6=function(b){return Yi.SUPPORT_SVG_DRAWING||!W6(b)},fv=function(b){return V6.test(b)},K6=function(b){return G6.test(b)},dv=function(b){return b.substr(0,4)==="blob"},W6=function(b){return b.substr(-3).toLowerCase()==="svg"||H6.test(b)},we=function(){function b(w,S){this.type=0,this.x=w,this.y=S}return b.prototype.add=function(w,S){return new b(this.x+w,this.y+S)},b}(),jc=function(b,w,S){return new we(b.x+(w.x-b.x)*S,b.y+(w.y-b.y)*S)},Ud=function(){function b(w,S,B,I){this.type=1,this.start=w,this.startControl=S,this.endControl=B,this.end=I}return b.prototype.subdivide=function(w,S){var B=jc(this.start,this.startControl,w),I=jc(this.startControl,this.endControl,w),D=jc(this.endControl,this.end,w),q=jc(B,I,w),At=jc(I,D,w),at=jc(q,At,w);return S?new b(this.start,B,q,at):new b(at,At,D,this.end)},b.prototype.add=function(w,S){return new b(this.start.add(w,S),this.startControl.add(w,S),this.endControl.add(w,S),this.end.add(w,S))},b.prototype.reverse=function(){return new b(this.end,this.endControl,this.startControl,this.start)},b}(),Gs=function(b){return b.type===1},X6=function(){function b(w){var S=w.styles,B=w.bounds,I=Hi(S.borderTopLeftRadius,B.width,B.height),D=I[0],q=I[1],At=Hi(S.borderTopRightRadius,B.width,B.height),at=At[0],St=At[1],Tt=Hi(S.borderBottomRightRadius,B.width,B.height),Qt=Tt[0],jt=Tt[1],Ce=Hi(S.borderBottomLeftRadius,B.width,B.height),ce=Ce[0],me=Ce[1],Je=[];Je.push((D+at)/B.width),Je.push((ce+Qt)/B.width),Je.push((q+me)/B.height),Je.push((St+jt)/B.height);var Ee=Math.max.apply(Math,Je);Ee>1&&(D/=Ee,q/=Ee,at/=Ee,St/=Ee,Qt/=Ee,jt/=Ee,ce/=Ee,me/=Ee);var xe=B.width-at,mr=B.height-jt,tr=B.width-Qt,Ve=B.height-me,be=S.borderTopWidth,cr=S.borderRightWidth,hr=S.borderBottomWidth,je=S.borderLeftWidth,Vi=ur(S.paddingTop,w.bounds.width),us=ur(S.paddingRight,w.bounds.width),Es=ur(S.paddingBottom,w.bounds.width),Gr=ur(S.paddingLeft,w.bounds.width);this.topLeftBorderDoubleOuterBox=D>0||q>0?ai(B.left+je/3,B.top+be/3,D-je/3,q-be/3,Tr.TOP_LEFT):new we(B.left+je/3,B.top+be/3),this.topRightBorderDoubleOuterBox=D>0||q>0?ai(B.left+xe,B.top+be/3,at-cr/3,St-be/3,Tr.TOP_RIGHT):new we(B.left+B.width-cr/3,B.top+be/3),this.bottomRightBorderDoubleOuterBox=Qt>0||jt>0?ai(B.left+tr,B.top+mr,Qt-cr/3,jt-hr/3,Tr.BOTTOM_RIGHT):new we(B.left+B.width-cr/3,B.top+B.height-hr/3),this.bottomLeftBorderDoubleOuterBox=ce>0||me>0?ai(B.left+je/3,B.top+Ve,ce-je/3,me-hr/3,Tr.BOTTOM_LEFT):new we(B.left+je/3,B.top+B.height-hr/3),this.topLeftBorderDoubleInnerBox=D>0||q>0?ai(B.left+je*2/3,B.top+be*2/3,D-je*2/3,q-be*2/3,Tr.TOP_LEFT):new we(B.left+je*2/3,B.top+be*2/3),this.topRightBorderDoubleInnerBox=D>0||q>0?ai(B.left+xe,B.top+be*2/3,at-cr*2/3,St-be*2/3,Tr.TOP_RIGHT):new we(B.left+B.width-cr*2/3,B.top+be*2/3),this.bottomRightBorderDoubleInnerBox=Qt>0||jt>0?ai(B.left+tr,B.top+mr,Qt-cr*2/3,jt-hr*2/3,Tr.BOTTOM_RIGHT):new we(B.left+B.width-cr*2/3,B.top+B.height-hr*2/3),this.bottomLeftBorderDoubleInnerBox=ce>0||me>0?ai(B.left+je*2/3,B.top+Ve,ce-je*2/3,me-hr*2/3,Tr.BOTTOM_LEFT):new we(B.left+je*2/3,B.top+B.height-hr*2/3),this.topLeftBorderStroke=D>0||q>0?ai(B.left+je/2,B.top+be/2,D-je/2,q-be/2,Tr.TOP_LEFT):new we(B.left+je/2,B.top+be/2),this.topRightBorderStroke=D>0||q>0?ai(B.left+xe,B.top+be/2,at-cr/2,St-be/2,Tr.TOP_RIGHT):new we(B.left+B.width-cr/2,B.top+be/2),this.bottomRightBorderStroke=Qt>0||jt>0?ai(B.left+tr,B.top+mr,Qt-cr/2,jt-hr/2,Tr.BOTTOM_RIGHT):new we(B.left+B.width-cr/2,B.top+B.height-hr/2),this.bottomLeftBorderStroke=ce>0||me>0?ai(B.left+je/2,B.top+Ve,ce-je/2,me-hr/2,Tr.BOTTOM_LEFT):new we(B.left+je/2,B.top+B.height-hr/2),this.topLeftBorderBox=D>0||q>0?ai(B.left,B.top,D,q,Tr.TOP_LEFT):new we(B.left,B.top),this.topRightBorderBox=at>0||St>0?ai(B.left+xe,B.top,at,St,Tr.TOP_RIGHT):new we(B.left+B.width,B.top),this.bottomRightBorderBox=Qt>0||jt>0?ai(B.left+tr,B.top+mr,Qt,jt,Tr.BOTTOM_RIGHT):new we(B.left+B.width,B.top+B.height),this.bottomLeftBorderBox=ce>0||me>0?ai(B.left,B.top+Ve,ce,me,Tr.BOTTOM_LEFT):new we(B.left,B.top+B.height),this.topLeftPaddingBox=D>0||q>0?ai(B.left+je,B.top+be,Math.max(0,D-je),Math.max(0,q-be),Tr.TOP_LEFT):new we(B.left+je,B.top+be),this.topRightPaddingBox=at>0||St>0?ai(B.left+Math.min(xe,B.width-cr),B.top+be,xe>B.width+cr?0:Math.max(0,at-cr),Math.max(0,St-be),Tr.TOP_RIGHT):new we(B.left+B.width-cr,B.top+be),this.bottomRightPaddingBox=Qt>0||jt>0?ai(B.left+Math.min(tr,B.width-je),B.top+Math.min(mr,B.height-hr),Math.max(0,Qt-cr),Math.max(0,jt-hr),Tr.BOTTOM_RIGHT):new we(B.left+B.width-cr,B.top+B.height-hr),this.bottomLeftPaddingBox=ce>0||me>0?ai(B.left+je,B.top+Math.min(Ve,B.height-hr),Math.max(0,ce-je),Math.max(0,me-hr),Tr.BOTTOM_LEFT):new we(B.left+je,B.top+B.height-hr),this.topLeftContentBox=D>0||q>0?ai(B.left+je+Gr,B.top+be+Vi,Math.max(0,D-(je+Gr)),Math.max(0,q-(be+Vi)),Tr.TOP_LEFT):new we(B.left+je+Gr,B.top+be+Vi),this.topRightContentBox=at>0||St>0?ai(B.left+Math.min(xe,B.width+je+Gr),B.top+be+Vi,xe>B.width+je+Gr?0:at-je+Gr,St-(be+Vi),Tr.TOP_RIGHT):new we(B.left+B.width-(cr+us),B.top+be+Vi),this.bottomRightContentBox=Qt>0||jt>0?ai(B.left+Math.min(tr,B.width-(je+Gr)),B.top+Math.min(mr,B.height+be+Vi),Math.max(0,Qt-(cr+us)),jt-(hr+Es),Tr.BOTTOM_RIGHT):new we(B.left+B.width-(cr+us),B.top+B.height-(hr+Es)),this.bottomLeftContentBox=ce>0||me>0?ai(B.left+je+Gr,B.top+Ve,Math.max(0,ce-(je+Gr)),me-(hr+Es),Tr.BOTTOM_LEFT):new we(B.left+je+Gr,B.top+B.height-(hr+Es))}return b}(),Tr;(function(b){b[b.TOP_LEFT=0]="TOP_LEFT",b[b.TOP_RIGHT=1]="TOP_RIGHT",b[b.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",b[b.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Tr||(Tr={}));var ai=function(b,w,S,B,I){var D=4*((Math.sqrt(2)-1)/3),q=S*D,At=B*D,at=b+S,St=w+B;switch(I){case Tr.TOP_LEFT:return new Ud(new we(b,St),new we(b,St-At),new we(at-q,w),new we(at,w));case Tr.TOP_RIGHT:return new Ud(new we(b,w),new we(b+q,w),new we(at,St-At),new we(at,St));case Tr.BOTTOM_RIGHT:return new Ud(new we(at,w),new we(at,w+At),new we(b+q,St),new we(b,St));case Tr.BOTTOM_LEFT:default:return new Ud(new we(at,St),new we(at-q,St),new we(b,w+At),new we(b,w))}},Od=function(b){return[b.topLeftBorderBox,b.topRightBorderBox,b.bottomRightBorderBox,b.bottomLeftBorderBox]},z6=function(b){return[b.topLeftContentBox,b.topRightContentBox,b.bottomRightContentBox,b.bottomLeftContentBox]},Qd=function(b){return[b.topLeftPaddingBox,b.topRightPaddingBox,b.bottomRightPaddingBox,b.bottomLeftPaddingBox]},q6=function(){function b(w,S,B){this.offsetX=w,this.offsetY=S,this.matrix=B,this.type=0,this.target=6}return b}(),Nd=function(){function b(w,S){this.path=w,this.target=S,this.type=1}return b}(),$6=function(){function b(w){this.opacity=w,this.type=2,this.target=6}return b}(),Y6=function(b){return b.type===0},YB=function(b){return b.type===1},J6=function(b){return b.type===2},JB=function(b,w){return b.length===w.length?b.some(function(S,B){return S===w[B]}):!1},Z6=function(b,w,S,B,I){return b.map(function(D,q){switch(q){case 0:return D.add(w,S);case 1:return D.add(w+B,S);case 2:return D.add(w+B,S+I);case 3:return D.add(w,S+I)}return D})},ZB=function(){function b(w){this.element=w,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return b}(),tS=function(){function b(w,S){if(this.container=w,this.parent=S,this.effects=[],this.curves=new X6(this.container),this.container.styles.opacity<1&&this.effects.push(new $6(this.container.styles.opacity)),this.container.styles.transform!==null){var B=this.container.bounds.left+this.container.styles.transformOrigin[0].number,I=this.container.bounds.top+this.container.styles.transformOrigin[1].number,D=this.container.styles.transform;this.effects.push(new q6(B,I,D))}if(this.container.styles.overflowX!==0){var q=Od(this.curves),At=Qd(this.curves);JB(q,At)?this.effects.push(new Nd(q,6)):(this.effects.push(new Nd(q,2)),this.effects.push(new Nd(At,4)))}}return b.prototype.getEffects=function(w){for(var S=[2,3].indexOf(this.container.styles.position)===-1,B=this.parent,I=this.effects.slice(0);B;){var D=B.effects.filter(function(at){return!YB(at)});if(S||B.container.styles.position!==0||!B.parent){if(I.unshift.apply(I,D),S=[2,3].indexOf(B.container.styles.position)===-1,B.container.styles.overflowX!==0){var q=Od(B.curves),At=Qd(B.curves);JB(q,At)||I.unshift(new Nd(At,6))}}else I.unshift.apply(I,D);B=B.parent}return I.filter(function(at){return xt(at.target,w)})},b}(),gv=function(b,w,S,B){b.container.elements.forEach(function(I){var D=xt(I.flags,4),q=xt(I.flags,2),At=new tS(I,b);xt(I.styles.display,2048)&&B.push(At);var at=xt(I.flags,8)?[]:B;if(D||q){var St=D||I.styles.isPositioned()?S:w,Tt=new ZB(At);if(I.styles.isPositioned()||I.styles.opacity<1||I.styles.isTransformed()){var Qt=I.styles.zIndex.order;if(Qt<0){var jt=0;St.negativeZIndex.some(function(ce,me){return Qt>ce.element.container.styles.zIndex.order?(jt=me,!1):jt>0}),St.negativeZIndex.splice(jt,0,Tt)}else if(Qt>0){var Ce=0;St.positiveZIndex.some(function(ce,me){return Qt>=ce.element.container.styles.zIndex.order?(Ce=me+1,!1):Ce>0}),St.positiveZIndex.splice(Ce,0,Tt)}else St.zeroOrAutoZIndexOrTransformedOrOpacity.push(Tt)}else I.styles.isFloating()?St.nonPositionedFloats.push(Tt):St.nonPositionedInlineLevel.push(Tt);gv(At,Tt,D?Tt:S,at)}else I.styles.isInlineLevel()?w.inlineLevel.push(At):w.nonInlineLevel.push(At),gv(At,w,S,at);xt(I.flags,8)&&eS(I,at)})},eS=function(b,w){for(var S=b instanceof nv?b.start:1,B=b instanceof nv?b.reversed:!1,I=0;I<w.length;I++){var D=w[I];D.container instanceof _B&&typeof D.container.value=="number"&&D.container.value!==0&&(S=D.container.value),D.listValue=fu(S,D.container.styles.listStyleType,!0),S+=B?-1:1}},t8=function(b){var w=new tS(b,null),S=new ZB(w),B=[];return gv(w,S,S,B),eS(w.container,B),S},rS=function(b,w){switch(w){case 0:return Vs(b.topLeftBorderBox,b.topLeftPaddingBox,b.topRightBorderBox,b.topRightPaddingBox);case 1:return Vs(b.topRightBorderBox,b.topRightPaddingBox,b.bottomRightBorderBox,b.bottomRightPaddingBox);case 2:return Vs(b.bottomRightBorderBox,b.bottomRightPaddingBox,b.bottomLeftBorderBox,b.bottomLeftPaddingBox);case 3:default:return Vs(b.bottomLeftBorderBox,b.bottomLeftPaddingBox,b.topLeftBorderBox,b.topLeftPaddingBox)}},e8=function(b,w){switch(w){case 0:return Vs(b.topLeftBorderBox,b.topLeftBorderDoubleOuterBox,b.topRightBorderBox,b.topRightBorderDoubleOuterBox);case 1:return Vs(b.topRightBorderBox,b.topRightBorderDoubleOuterBox,b.bottomRightBorderBox,b.bottomRightBorderDoubleOuterBox);case 2:return Vs(b.bottomRightBorderBox,b.bottomRightBorderDoubleOuterBox,b.bottomLeftBorderBox,b.bottomLeftBorderDoubleOuterBox);case 3:default:return Vs(b.bottomLeftBorderBox,b.bottomLeftBorderDoubleOuterBox,b.topLeftBorderBox,b.topLeftBorderDoubleOuterBox)}},r8=function(b,w){switch(w){case 0:return Vs(b.topLeftBorderDoubleInnerBox,b.topLeftPaddingBox,b.topRightBorderDoubleInnerBox,b.topRightPaddingBox);case 1:return Vs(b.topRightBorderDoubleInnerBox,b.topRightPaddingBox,b.bottomRightBorderDoubleInnerBox,b.bottomRightPaddingBox);case 2:return Vs(b.bottomRightBorderDoubleInnerBox,b.bottomRightPaddingBox,b.bottomLeftBorderDoubleInnerBox,b.bottomLeftPaddingBox);case 3:default:return Vs(b.bottomLeftBorderDoubleInnerBox,b.bottomLeftPaddingBox,b.topLeftBorderDoubleInnerBox,b.topLeftPaddingBox)}},i8=function(b,w){switch(w){case 0:return Md(b.topLeftBorderStroke,b.topRightBorderStroke);case 1:return Md(b.topRightBorderStroke,b.bottomRightBorderStroke);case 2:return Md(b.bottomRightBorderStroke,b.bottomLeftBorderStroke);case 3:default:return Md(b.bottomLeftBorderStroke,b.topLeftBorderStroke)}},Md=function(b,w){var S=[];return Gs(b)?S.push(b.subdivide(.5,!1)):S.push(b),Gs(w)?S.push(w.subdivide(.5,!0)):S.push(w),S},Vs=function(b,w,S,B){var I=[];return Gs(b)?I.push(b.subdivide(.5,!1)):I.push(b),Gs(S)?I.push(S.subdivide(.5,!0)):I.push(S),Gs(B)?I.push(B.subdivide(.5,!0).reverse()):I.push(B),Gs(w)?I.push(w.subdivide(.5,!1).reverse()):I.push(w),I},iS=function(b){var w=b.bounds,S=b.styles;return w.add(S.borderLeftWidth,S.borderTopWidth,-(S.borderRightWidth+S.borderLeftWidth),-(S.borderTopWidth+S.borderBottomWidth))},kd=function(b){var w=b.styles,S=b.bounds,B=ur(w.paddingLeft,S.width),I=ur(w.paddingRight,S.width),D=ur(w.paddingTop,S.width),q=ur(w.paddingBottom,S.width);return S.add(B+w.borderLeftWidth,D+w.borderTopWidth,-(w.borderRightWidth+w.borderLeftWidth+B+I),-(w.borderTopWidth+w.borderBottomWidth+D+q))},n8=function(b,w){return b===0?w.bounds:b===2?kd(w):iS(w)},s8=function(b,w){return b===0?w.bounds:b===2?kd(w):iS(w)},pv=function(b,w,S){var B=n8(Wc(b.styles.backgroundOrigin,w),b),I=s8(Wc(b.styles.backgroundClip,w),b),D=a8(Wc(b.styles.backgroundSize,w),S,B),q=D[0],At=D[1],at=Hi(Wc(b.styles.backgroundPosition,w),B.width-q,B.height-At),St=A8(Wc(b.styles.backgroundRepeat,w),at,D,B,I),Tt=Math.round(B.left+at[0]),Qt=Math.round(B.top+at[1]);return[St,Tt,Qt,q,At]},Kc=function(b){return Re(b)&&b.value===PA.AUTO},Dd=function(b){return typeof b=="number"},a8=function(b,w,S){var B=w[0],I=w[1],D=w[2],q=b[0],At=b[1];if(!q)return[0,0];if($r(q)&&At&&$r(At))return[ur(q,S.width),ur(At,S.height)];var at=Dd(D);if(Re(q)&&(q.value===PA.CONTAIN||q.value===PA.COVER)){if(Dd(D)){var St=S.width/S.height;return St<D!=(q.value===PA.COVER)?[S.width,S.width/D]:[S.height*D,S.height]}return[S.width,S.height]}var Tt=Dd(B),Qt=Dd(I),jt=Tt||Qt;if(Kc(q)&&(!At||Kc(At))){if(Tt&&Qt)return[B,I];if(!at&&!jt)return[S.width,S.height];if(jt&&at){var Ce=Tt?B:I*D,ce=Qt?I:B/D;return[Ce,ce]}var me=Tt?B:S.width,Je=Qt?I:S.height;return[me,Je]}if(at){var Ee=0,xe=0;return $r(q)?Ee=ur(q,S.width):$r(At)&&(xe=ur(At,S.height)),Kc(q)?Ee=xe*D:(!At||Kc(At))&&(xe=Ee/D),[Ee,xe]}var mr=null,tr=null;if($r(q)?mr=ur(q,S.width):At&&$r(At)&&(tr=ur(At,S.height)),mr!==null&&(!At||Kc(At))&&(tr=Tt&&Qt?mr/B*I:S.height),tr!==null&&Kc(q)&&(mr=Tt&&Qt?tr/I*B:S.width),mr!==null&&tr!==null)return[mr,tr];throw new Error("Unable to calculate background-size for element")},Wc=function(b,w){var S=b[w];return typeof S>"u"?b[0]:S},A8=function(b,w,S,B,I){var D=w[0],q=w[1],At=S[0],at=S[1];switch(b){case 2:return[new we(Math.round(B.left),Math.round(B.top+q)),new we(Math.round(B.left+B.width),Math.round(B.top+q)),new we(Math.round(B.left+B.width),Math.round(at+B.top+q)),new we(Math.round(B.left),Math.round(at+B.top+q))];case 3:return[new we(Math.round(B.left+D),Math.round(B.top)),new we(Math.round(B.left+D+At),Math.round(B.top)),new we(Math.round(B.left+D+At),Math.round(B.height+B.top)),new we(Math.round(B.left+D),Math.round(B.height+B.top))];case 1:return[new we(Math.round(B.left+D),Math.round(B.top+q)),new we(Math.round(B.left+D+At),Math.round(B.top+q)),new we(Math.round(B.left+D+At),Math.round(B.top+q+at)),new we(Math.round(B.left+D),Math.round(B.top+q+at))];default:return[new we(Math.round(I.left),Math.round(I.top)),new we(Math.round(I.left+I.width),Math.round(I.top)),new we(Math.round(I.left+I.width),Math.round(I.height+I.top)),new we(Math.round(I.left),Math.round(I.height+I.top))]}},o8="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",nS="Hidden Text",l8=function(){function b(w){this._data={},this._document=w}return b.prototype.parseMetrics=function(w,S){var B=this._document.createElement("div"),I=this._document.createElement("img"),D=this._document.createElement("span"),q=this._document.body;B.style.visibility="hidden",B.style.fontFamily=w,B.style.fontSize=S,B.style.margin="0",B.style.padding="0",B.style.whiteSpace="nowrap",q.appendChild(B),I.src=o8,I.width=1,I.height=1,I.style.margin="0",I.style.padding="0",I.style.verticalAlign="baseline",D.style.fontFamily=w,D.style.fontSize=S,D.style.margin="0",D.style.padding="0",D.appendChild(this._document.createTextNode(nS)),B.appendChild(D),B.appendChild(I);var At=I.offsetTop-D.offsetTop+2;B.removeChild(D),B.appendChild(this._document.createTextNode(nS)),B.style.lineHeight="normal",I.style.verticalAlign="super";var at=I.offsetTop-B.offsetTop+2;return q.removeChild(B),{baseline:At,middle:at}},b.prototype.getMetrics=function(w,S){var B=w+" "+S;return typeof this._data[B]>"u"&&(this._data[B]=this.parseMetrics(w,S)),this._data[B]},b}(),sS=function(){function b(w,S){this.context=w,this.options=S}return b}(),c8=1e4,h8=function(b){i(w,b);function w(S,B){var I=b.call(this,S,B)||this;return I._activeEffects=[],I.canvas=B.canvas?B.canvas:document.createElement("canvas"),I.ctx=I.canvas.getContext("2d"),B.canvas||(I.canvas.width=Math.floor(B.width*B.scale),I.canvas.height=Math.floor(B.height*B.scale),I.canvas.style.width=B.width+"px",I.canvas.style.height=B.height+"px"),I.fontMetrics=new l8(document),I.ctx.scale(I.options.scale,I.options.scale),I.ctx.translate(-B.x,-B.y),I.ctx.textBaseline="bottom",I._activeEffects=[],I.context.logger.debug("Canvas renderer initialized ("+B.width+"x"+B.height+") with scale "+B.scale),I}return w.prototype.applyEffects=function(S){for(var B=this;this._activeEffects.length;)this.popEffect();S.forEach(function(I){return B.applyEffect(I)})},w.prototype.applyEffect=function(S){this.ctx.save(),J6(S)&&(this.ctx.globalAlpha=S.opacity),Y6(S)&&(this.ctx.translate(S.offsetX,S.offsetY),this.ctx.transform(S.matrix[0],S.matrix[1],S.matrix[2],S.matrix[3],S.matrix[4],S.matrix[5]),this.ctx.translate(-S.offsetX,-S.offsetY)),YB(S)&&(this.path(S.path),this.ctx.clip()),this._activeEffects.push(S)},w.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},w.prototype.renderStack=function(S){return c(this,void 0,void 0,function(){var B;return f(this,function(I){switch(I.label){case 0:return B=S.element.container.styles,B.isVisible()?[4,this.renderStackContent(S)]:[3,2];case 1:I.sent(),I.label=2;case 2:return[2]}})})},w.prototype.renderNode=function(S){return c(this,void 0,void 0,function(){return f(this,function(B){switch(B.label){case 0:if(xt(S.container.flags,16))debugger;return S.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(S)]:[3,3];case 1:return B.sent(),[4,this.renderNodeContent(S)];case 2:B.sent(),B.label=3;case 3:return[2]}})})},w.prototype.renderTextWithLetterSpacing=function(S,B,I){var D=this;if(B===0)this.ctx.fillText(S.text,S.bounds.left,S.bounds.top+I);else{var q=Lo(S.text);q.reduce(function(At,at){return D.ctx.fillText(at,At,S.bounds.top+I),At+D.ctx.measureText(at).width},S.bounds.left)}},w.prototype.createFontStyle=function(S){var B=S.fontVariant.filter(function(q){return q==="normal"||q==="small-caps"}).join(""),I=p8(S.fontFamily).join(", "),D=Ir(S.fontSize)?""+S.fontSize.number+S.fontSize.unit:S.fontSize.number+"px";return[[S.fontStyle,B,S.fontWeight,D,I].join(" "),I,D]},w.prototype.renderTextNode=function(S,B){return c(this,void 0,void 0,function(){var I,D,q,At,at,St,Tt,Qt,jt=this;return f(this,function(Ce){return I=this.createFontStyle(B),D=I[0],q=I[1],At=I[2],this.ctx.font=D,this.ctx.direction=B.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",at=this.fontMetrics.getMetrics(q,At),St=at.baseline,Tt=at.middle,Qt=B.paintOrder,S.textBounds.forEach(function(ce){Qt.forEach(function(me){switch(me){case 0:jt.ctx.fillStyle=pi(B.color),jt.renderTextWithLetterSpacing(ce,B.letterSpacing,St);var Je=B.textShadow;Je.length&&ce.text.trim().length&&(Je.slice(0).reverse().forEach(function(Ee){jt.ctx.shadowColor=pi(Ee.color),jt.ctx.shadowOffsetX=Ee.offsetX.number*jt.options.scale,jt.ctx.shadowOffsetY=Ee.offsetY.number*jt.options.scale,jt.ctx.shadowBlur=Ee.blur.number,jt.renderTextWithLetterSpacing(ce,B.letterSpacing,St)}),jt.ctx.shadowColor="",jt.ctx.shadowOffsetX=0,jt.ctx.shadowOffsetY=0,jt.ctx.shadowBlur=0),B.textDecorationLine.length&&(jt.ctx.fillStyle=pi(B.textDecorationColor||B.color),B.textDecorationLine.forEach(function(Ee){switch(Ee){case 1:jt.ctx.fillRect(ce.bounds.left,Math.round(ce.bounds.top+St),ce.bounds.width,1);break;case 2:jt.ctx.fillRect(ce.bounds.left,Math.round(ce.bounds.top),ce.bounds.width,1);break;case 3:jt.ctx.fillRect(ce.bounds.left,Math.ceil(ce.bounds.top+Tt),ce.bounds.width,1);break}}));break;case 1:B.webkitTextStrokeWidth&&ce.text.trim().length&&(jt.ctx.strokeStyle=pi(B.webkitTextStrokeColor),jt.ctx.lineWidth=B.webkitTextStrokeWidth,jt.ctx.lineJoin=window.chrome?"miter":"round",jt.ctx.strokeText(ce.text,ce.bounds.left,ce.bounds.top+St)),jt.ctx.strokeStyle="",jt.ctx.lineWidth=0,jt.ctx.lineJoin="miter";break}})}),[2]})})},w.prototype.renderReplacedElement=function(S,B,I){if(I&&S.intrinsicWidth>0&&S.intrinsicHeight>0){var D=kd(S),q=Qd(B);this.path(q),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(I,0,0,S.intrinsicWidth,S.intrinsicHeight,D.left,D.top,D.width,D.height),this.ctx.restore()}},w.prototype.renderNodeContent=function(S){return c(this,void 0,void 0,function(){var B,I,D,q,At,at,xe,xe,St,Tt,Qt,jt,tr,Ce,ce,Ve,me,Je,Ee,xe,mr,tr,Ve;return f(this,function(be){switch(be.label){case 0:this.applyEffects(S.getEffects(4)),B=S.container,I=S.curves,D=B.styles,q=0,At=B.textNodes,be.label=1;case 1:return q<At.length?(at=At[q],[4,this.renderTextNode(at,D)]):[3,4];case 2:be.sent(),be.label=3;case 3:return q++,[3,1];case 4:if(!(B instanceof Rc))return[3,8];be.label=5;case 5:return be.trys.push([5,7,,8]),[4,this.context.cache.match(B.src)];case 6:return xe=be.sent(),this.renderReplacedElement(B,I,xe),[3,8];case 7:return be.sent(),this.context.logger.error("Error loading image "+B.src),[3,8];case 8:if(B instanceof SB&&this.renderReplacedElement(B,I,B.canvas),!(B instanceof xB))return[3,12];be.label=9;case 9:return be.trys.push([9,11,,12]),[4,this.context.cache.match(B.svg)];case 10:return xe=be.sent(),this.renderReplacedElement(B,I,xe),[3,12];case 11:return be.sent(),this.context.logger.error("Error loading svg "+B.svg.substring(0,255)),[3,12];case 12:return B instanceof LB&&B.tree?(St=new w(this.context,{scale:this.options.scale,backgroundColor:B.backgroundColor,x:0,y:0,width:B.width,height:B.height}),[4,St.render(B.tree)]):[3,14];case 13:Tt=be.sent(),B.width&&B.height&&this.ctx.drawImage(Tt,0,0,B.width,B.height,B.bounds.left,B.bounds.top,B.bounds.width,B.bounds.height),be.label=14;case 14:if(B instanceof sv&&(Qt=Math.min(B.bounds.width,B.bounds.height),B.type===Ed?B.checked&&(this.ctx.save(),this.path([new we(B.bounds.left+Qt*.39363,B.bounds.top+Qt*.79),new we(B.bounds.left+Qt*.16,B.bounds.top+Qt*.5549),new we(B.bounds.left+Qt*.27347,B.bounds.top+Qt*.44071),new we(B.bounds.left+Qt*.39694,B.bounds.top+Qt*.5649),new we(B.bounds.left+Qt*.72983,B.bounds.top+Qt*.23),new we(B.bounds.left+Qt*.84,B.bounds.top+Qt*.34085),new we(B.bounds.left+Qt*.39363,B.bounds.top+Qt*.79)]),this.ctx.fillStyle=pi(EB),this.ctx.fill(),this.ctx.restore()):B.type===Fd&&B.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(B.bounds.left+Qt/2,B.bounds.top+Qt/2,Qt/4,0,Math.PI*2,!0),this.ctx.fillStyle=pi(EB),this.ctx.fill(),this.ctx.restore())),u8(B)&&B.value.length){switch(jt=this.createFontStyle(D),tr=jt[0],Ce=jt[1],ce=this.fontMetrics.getMetrics(tr,Ce).baseline,this.ctx.font=tr,this.ctx.fillStyle=pi(D.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=d8(B.styles.textAlign),Ve=kd(B),me=0,B.styles.textAlign){case 1:me+=Ve.width/2;break;case 2:me+=Ve.width;break}Je=Ve.add(me,0,0,-Ve.height/2+1),this.ctx.save(),this.path([new we(Ve.left,Ve.top),new we(Ve.left+Ve.width,Ve.top),new we(Ve.left+Ve.width,Ve.top+Ve.height),new we(Ve.left,Ve.top+Ve.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new To(B.value,Je),D.letterSpacing,ce),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!xt(B.styles.display,2048))return[3,20];if(B.styles.listStyleImage===null)return[3,19];if(Ee=B.styles.listStyleImage,Ee.type!==0)return[3,18];xe=void 0,mr=Ee.url,be.label=15;case 15:return be.trys.push([15,17,,18]),[4,this.context.cache.match(mr)];case 16:return xe=be.sent(),this.ctx.drawImage(xe,B.bounds.left-(xe.width+10),B.bounds.top),[3,18];case 17:return be.sent(),this.context.logger.error("Error loading list-style-image "+mr),[3,18];case 18:return[3,20];case 19:S.listValue&&B.styles.listStyleType!==-1&&(tr=this.createFontStyle(D)[0],this.ctx.font=tr,this.ctx.fillStyle=pi(D.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Ve=new n(B.bounds.left,B.bounds.top+ur(B.styles.paddingTop,B.bounds.width),B.bounds.width,ua(D.lineHeight,D.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new To(S.listValue,Ve),D.letterSpacing,ua(D.lineHeight,D.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),be.label=20;case 20:return[2]}})})},w.prototype.renderStackContent=function(S){return c(this,void 0,void 0,function(){var B,I,Ee,D,q,Ee,At,at,Ee,St,Tt,Ee,Qt,jt,Ee,Ce,ce,Ee,me,Je,Ee;return f(this,function(xe){switch(xe.label){case 0:if(xt(S.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(S.element)];case 1:xe.sent(),B=0,I=S.negativeZIndex,xe.label=2;case 2:return B<I.length?(Ee=I[B],[4,this.renderStack(Ee)]):[3,5];case 3:xe.sent(),xe.label=4;case 4:return B++,[3,2];case 5:return[4,this.renderNodeContent(S.element)];case 6:xe.sent(),D=0,q=S.nonInlineLevel,xe.label=7;case 7:return D<q.length?(Ee=q[D],[4,this.renderNode(Ee)]):[3,10];case 8:xe.sent(),xe.label=9;case 9:return D++,[3,7];case 10:At=0,at=S.nonPositionedFloats,xe.label=11;case 11:return At<at.length?(Ee=at[At],[4,this.renderStack(Ee)]):[3,14];case 12:xe.sent(),xe.label=13;case 13:return At++,[3,11];case 14:St=0,Tt=S.nonPositionedInlineLevel,xe.label=15;case 15:return St<Tt.length?(Ee=Tt[St],[4,this.renderStack(Ee)]):[3,18];case 16:xe.sent(),xe.label=17;case 17:return St++,[3,15];case 18:Qt=0,jt=S.inlineLevel,xe.label=19;case 19:return Qt<jt.length?(Ee=jt[Qt],[4,this.renderNode(Ee)]):[3,22];case 20:xe.sent(),xe.label=21;case 21:return Qt++,[3,19];case 22:Ce=0,ce=S.zeroOrAutoZIndexOrTransformedOrOpacity,xe.label=23;case 23:return Ce<ce.length?(Ee=ce[Ce],[4,this.renderStack(Ee)]):[3,26];case 24:xe.sent(),xe.label=25;case 25:return Ce++,[3,23];case 26:me=0,Je=S.positiveZIndex,xe.label=27;case 27:return me<Je.length?(Ee=Je[me],[4,this.renderStack(Ee)]):[3,30];case 28:xe.sent(),xe.label=29;case 29:return me++,[3,27];case 30:return[2]}})})},w.prototype.mask=function(S){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(S.slice(0).reverse()),this.ctx.closePath()},w.prototype.path=function(S){this.ctx.beginPath(),this.formatPath(S),this.ctx.closePath()},w.prototype.formatPath=function(S){var B=this;S.forEach(function(I,D){var q=Gs(I)?I.start:I;D===0?B.ctx.moveTo(q.x,q.y):B.ctx.lineTo(q.x,q.y),Gs(I)&&B.ctx.bezierCurveTo(I.startControl.x,I.startControl.y,I.endControl.x,I.endControl.y,I.end.x,I.end.y)})},w.prototype.renderRepeat=function(S,B,I,D){this.path(S),this.ctx.fillStyle=B,this.ctx.translate(I,D),this.ctx.fill(),this.ctx.translate(-I,-D)},w.prototype.resizeImage=function(S,B,I){var D;if(S.width===B&&S.height===I)return S;var q=(D=this.canvas.ownerDocument)!==null&&D!==void 0?D:document,At=q.createElement("canvas");At.width=Math.max(1,B),At.height=Math.max(1,I);var at=At.getContext("2d");return at.drawImage(S,0,0,S.width,S.height,0,0,B,I),At},w.prototype.renderBackgroundImage=function(S){return c(this,void 0,void 0,function(){var B,I,D,q,At,at;return f(this,function(St){switch(St.label){case 0:B=S.styles.backgroundImage.length-1,I=function(Tt){var Qt,jt,Ce,Vi,fs,ds,Gr,yn,hr,ce,Vi,fs,ds,Gr,yn,me,Je,Ee,xe,mr,tr,Ve,be,cr,hr,je,Vi,us,Es,Gr,yn,Uo,fs,ds,Ll,Ka,Oo,Il,Pl,kA,Ul,DA;return f(this,function(Xc){switch(Xc.label){case 0:if(Tt.type!==0)return[3,5];Qt=void 0,jt=Tt.url,Xc.label=1;case 1:return Xc.trys.push([1,3,,4]),[4,D.context.cache.match(jt)];case 2:return Qt=Xc.sent(),[3,4];case 3:return Xc.sent(),D.context.logger.error("Error loading background-image "+jt),[3,4];case 4:return Qt&&(Ce=pv(S,B,[Qt.width,Qt.height,Qt.width/Qt.height]),Vi=Ce[0],fs=Ce[1],ds=Ce[2],Gr=Ce[3],yn=Ce[4],hr=D.ctx.createPattern(D.resizeImage(Qt,Gr,yn),"repeat"),D.renderRepeat(Vi,hr,fs,ds)),[3,6];case 5:Yf(Tt)?(ce=pv(S,B,[null,null,null]),Vi=ce[0],fs=ce[1],ds=ce[2],Gr=ce[3],yn=ce[4],me=LA(Tt.angle,Gr,yn),Je=me[0],Ee=me[1],xe=me[2],mr=me[3],tr=me[4],Ve=document.createElement("canvas"),Ve.width=Gr,Ve.height=yn,be=Ve.getContext("2d"),cr=be.createLinearGradient(Ee,mr,xe,tr),As(Tt.stops,Je).forEach(function(gu){return cr.addColorStop(gu.stop,pi(gu.color))}),be.fillStyle=cr,be.fillRect(0,0,Gr,yn),Gr>0&&yn>0&&(hr=D.ctx.createPattern(Ve,"repeat"),D.renderRepeat(Vi,hr,fs,ds))):Jf(Tt)&&(je=pv(S,B,[null,null,null]),Vi=je[0],us=je[1],Es=je[2],Gr=je[3],yn=je[4],Uo=Tt.position.length===0?[EA]:Tt.position,fs=ur(Uo[0],Gr),ds=ur(Uo[Uo.length-1],yn),Ll=ka(Tt,fs,ds,Gr,yn),Ka=Ll[0],Oo=Ll[1],Ka>0&&Oo>0&&(Il=D.ctx.createRadialGradient(us+fs,Es+ds,0,us+fs,Es+ds,Ka),As(Tt.stops,Ka*2).forEach(function(gu){return Il.addColorStop(gu.stop,pi(gu.color))}),D.path(Vi),D.ctx.fillStyle=Il,Ka!==Oo?(Pl=S.bounds.left+.5*S.bounds.width,kA=S.bounds.top+.5*S.bounds.height,Ul=Oo/Ka,DA=1/Ul,D.ctx.save(),D.ctx.translate(Pl,kA),D.ctx.transform(1,0,0,Ul,0,0),D.ctx.translate(-Pl,-kA),D.ctx.fillRect(us,DA*(Es-kA)+kA,Gr,yn*DA),D.ctx.restore()):D.ctx.fill())),Xc.label=6;case 6:return B--,[2]}})},D=this,q=0,At=S.styles.backgroundImage.slice(0).reverse(),St.label=1;case 1:return q<At.length?(at=At[q],[5,I(at)]):[3,4];case 2:St.sent(),St.label=3;case 3:return q++,[3,1];case 4:return[2]}})})},w.prototype.renderSolidBorder=function(S,B,I){return c(this,void 0,void 0,function(){return f(this,function(D){return this.path(rS(I,B)),this.ctx.fillStyle=pi(S),this.ctx.fill(),[2]})})},w.prototype.renderDoubleBorder=function(S,B,I,D){return c(this,void 0,void 0,function(){var q,At;return f(this,function(at){switch(at.label){case 0:return B<3?[4,this.renderSolidBorder(S,I,D)]:[3,2];case 1:return at.sent(),[2];case 2:return q=e8(D,I),this.path(q),this.ctx.fillStyle=pi(S),this.ctx.fill(),At=r8(D,I),this.path(At),this.ctx.fill(),[2]}})})},w.prototype.renderNodeBackgroundAndBorders=function(S){return c(this,void 0,void 0,function(){var B,I,D,q,At,at,St,Tt,Qt=this;return f(this,function(jt){switch(jt.label){case 0:return this.applyEffects(S.getEffects(2)),B=S.container.styles,I=!Ms(B.backgroundColor)||B.backgroundImage.length,D=[{style:B.borderTopStyle,color:B.borderTopColor,width:B.borderTopWidth},{style:B.borderRightStyle,color:B.borderRightColor,width:B.borderRightWidth},{style:B.borderBottomStyle,color:B.borderBottomColor,width:B.borderBottomWidth},{style:B.borderLeftStyle,color:B.borderLeftColor,width:B.borderLeftWidth}],q=f8(Wc(B.backgroundClip,0),S.curves),I||B.boxShadow.length?(this.ctx.save(),this.path(q),this.ctx.clip(),Ms(B.backgroundColor)||(this.ctx.fillStyle=pi(B.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(S.container)]):[3,2];case 1:jt.sent(),this.ctx.restore(),B.boxShadow.slice(0).reverse().forEach(function(Ce){Qt.ctx.save();var ce=Od(S.curves),me=Ce.inset?0:c8,Je=Z6(ce,-me+(Ce.inset?1:-1)*Ce.spread.number,(Ce.inset?1:-1)*Ce.spread.number,Ce.spread.number*(Ce.inset?-2:2),Ce.spread.number*(Ce.inset?-2:2));Ce.inset?(Qt.path(ce),Qt.ctx.clip(),Qt.mask(Je)):(Qt.mask(ce),Qt.ctx.clip(),Qt.path(Je)),Qt.ctx.shadowOffsetX=Ce.offsetX.number+me,Qt.ctx.shadowOffsetY=Ce.offsetY.number,Qt.ctx.shadowColor=pi(Ce.color),Qt.ctx.shadowBlur=Ce.blur.number,Qt.ctx.fillStyle=Ce.inset?pi(Ce.color):"rgba(0,0,0,1)",Qt.ctx.fill(),Qt.ctx.restore()}),jt.label=2;case 2:At=0,at=0,St=D,jt.label=3;case 3:return at<St.length?(Tt=St[at],Tt.style!==0&&!Ms(Tt.color)&&Tt.width>0?Tt.style!==2?[3,5]:[4,this.renderDashedDottedBorder(Tt.color,Tt.width,At,S.curves,2)]:[3,11]):[3,13];case 4:return jt.sent(),[3,11];case 5:return Tt.style!==3?[3,7]:[4,this.renderDashedDottedBorder(Tt.color,Tt.width,At,S.curves,3)];case 6:return jt.sent(),[3,11];case 7:return Tt.style!==4?[3,9]:[4,this.renderDoubleBorder(Tt.color,Tt.width,At,S.curves)];case 8:return jt.sent(),[3,11];case 9:return[4,this.renderSolidBorder(Tt.color,At,S.curves)];case 10:jt.sent(),jt.label=11;case 11:At++,jt.label=12;case 12:return at++,[3,3];case 13:return[2]}})})},w.prototype.renderDashedDottedBorder=function(S,B,I,D,q){return c(this,void 0,void 0,function(){var At,at,St,Tt,Qt,jt,Ce,ce,me,Je,Ee,xe,mr,tr,Ve,be,Ve,be;return f(this,function(cr){return this.ctx.save(),At=i8(D,I),at=rS(D,I),q===2&&(this.path(at),this.ctx.clip()),Gs(at[0])?(St=at[0].start.x,Tt=at[0].start.y):(St=at[0].x,Tt=at[0].y),Gs(at[1])?(Qt=at[1].end.x,jt=at[1].end.y):(Qt=at[1].x,jt=at[1].y),I===0||I===2?Ce=Math.abs(St-Qt):Ce=Math.abs(Tt-jt),this.ctx.beginPath(),q===3?this.formatPath(At):this.formatPath(at.slice(0,2)),ce=B<3?B*3:B*2,me=B<3?B*2:B,q===3&&(ce=B,me=B),Je=!0,Ce<=ce*2?Je=!1:Ce<=ce*2+me?(Ee=Ce/(2*ce+me),ce*=Ee,me*=Ee):(xe=Math.floor((Ce+me)/(ce+me)),mr=(Ce-xe*ce)/(xe-1),tr=(Ce-(xe+1)*ce)/xe,me=tr<=0||Math.abs(me-mr)<Math.abs(me-tr)?mr:tr),Je&&(q===3?this.ctx.setLineDash([0,ce+me]):this.ctx.setLineDash([ce,me])),q===3?(this.ctx.lineCap="round",this.ctx.lineWidth=B):this.ctx.lineWidth=B*2+1.1,this.ctx.strokeStyle=pi(S),this.ctx.stroke(),this.ctx.setLineDash([]),q===2&&(Gs(at[0])&&(Ve=at[3],be=at[0],this.ctx.beginPath(),this.formatPath([new we(Ve.end.x,Ve.end.y),new we(be.start.x,be.start.y)]),this.ctx.stroke()),Gs(at[1])&&(Ve=at[1],be=at[2],this.ctx.beginPath(),this.formatPath([new we(Ve.end.x,Ve.end.y),new we(be.start.x,be.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},w.prototype.render=function(S){return c(this,void 0,void 0,function(){var B;return f(this,function(I){switch(I.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=pi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),B=t8(S),[4,this.renderStack(B)];case 1:return I.sent(),this.applyEffects([]),[2,this.canvas]}})})},w}(sS),u8=function(b){return b instanceof TB||b instanceof FB?!0:b instanceof sv&&b.type!==Fd&&b.type!==Ed},f8=function(b,w){switch(b){case 0:return Od(w);case 2:return z6(w);case 1:default:return Qd(w)}},d8=function(b){switch(b){case 1:return"center";case 2:return"right";case 0:default:return"left"}},g8=["-apple-system","system-ui"],p8=function(b){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?b.filter(function(w){return g8.indexOf(w)===-1}):b},m8=function(b){i(w,b);function w(S,B){var I=b.call(this,S,B)||this;return I.canvas=B.canvas?B.canvas:document.createElement("canvas"),I.ctx=I.canvas.getContext("2d"),I.options=B,I.canvas.width=Math.floor(B.width*B.scale),I.canvas.height=Math.floor(B.height*B.scale),I.canvas.style.width=B.width+"px",I.canvas.style.height=B.height+"px",I.ctx.scale(I.options.scale,I.options.scale),I.ctx.translate(-B.x,-B.y),I.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+B.width+"x"+B.height+" at "+B.x+","+B.y+") with scale "+B.scale),I}return w.prototype.render=function(S){return c(this,void 0,void 0,function(){var B,I;return f(this,function(D){switch(D.label){case 0:return B=ou(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,S),[4,v8(B)];case 1:return I=D.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=pi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(I,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},w}(sS),v8=function(b){return new Promise(function(w,S){var B=new Image;B.onload=function(){w(B)},B.onerror=S,B.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(b))})},y8=function(){function b(w){var S=w.id,B=w.enabled;this.id=S,this.enabled=B,this.start=Date.now()}return b.prototype.debug=function(){for(var w=[],S=0;S<arguments.length;S++)w[S]=arguments[S];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,a([this.id,this.getTime()+"ms"],w)):this.info.apply(this,w))},b.prototype.getTime=function(){return Date.now()-this.start},b.prototype.info=function(){for(var w=[],S=0;S<arguments.length;S++)w[S]=arguments[S];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,a([this.id,this.getTime()+"ms"],w))},b.prototype.warn=function(){for(var w=[],S=0;S<arguments.length;S++)w[S]=arguments[S];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,a([this.id,this.getTime()+"ms"],w)):this.info.apply(this,w))},b.prototype.error=function(){for(var w=[],S=0;S<arguments.length;S++)w[S]=arguments[S];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,a([this.id,this.getTime()+"ms"],w)):this.info.apply(this,w))},b.instances={},b}(),w8=function(){function b(w,S){var B;this.windowBounds=S,this.instanceName="#"+b.instanceCount++,this.logger=new y8({id:this.instanceName,enabled:w.logging}),this.cache=(B=w.cache)!==null&&B!==void 0?B:new R6(this,w)}return b.instanceCount=1,b}(),b8=function(b,w){return w===void 0&&(w={}),C8(b,w)};typeof window<"u"&&$B.setContext(window);var C8=function(b,w){return c(void 0,void 0,void 0,function(){var S,B,I,D,q,At,at,St,Tt,Qt,jt,Ce,ce,me,Je,Ee,xe,mr,tr,Ve,cr,be,cr,hr,je,Vi,us,Es,Gr,yn,Uo,fs,ds,Ll,Ka,Oo,Il,Pl,kA,Ul;return f(this,function(DA){switch(DA.label){case 0:if(!b||typeof b!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(S=b.ownerDocument,!S)throw new Error("Element is not attached to a Document");if(B=S.defaultView,!B)throw new Error("Document is not attached to a Window");return I={allowTaint:(hr=w.allowTaint)!==null&&hr!==void 0?hr:!1,imageTimeout:(je=w.imageTimeout)!==null&&je!==void 0?je:15e3,proxy:w.proxy,useCORS:(Vi=w.useCORS)!==null&&Vi!==void 0?Vi:!1},D=s({logging:(us=w.logging)!==null&&us!==void 0?us:!0,cache:w.cache},I),q={windowWidth:(Es=w.windowWidth)!==null&&Es!==void 0?Es:B.innerWidth,windowHeight:(Gr=w.windowHeight)!==null&&Gr!==void 0?Gr:B.innerHeight,scrollX:(yn=w.scrollX)!==null&&yn!==void 0?yn:B.pageXOffset,scrollY:(Uo=w.scrollY)!==null&&Uo!==void 0?Uo:B.pageYOffset},At=new n(q.scrollX,q.scrollY,q.windowWidth,q.windowHeight),at=new w8(D,At),St=(fs=w.foreignObjectRendering)!==null&&fs!==void 0?fs:!1,Tt={allowTaint:(ds=w.allowTaint)!==null&&ds!==void 0?ds:!1,onclone:w.onclone,ignoreElements:w.ignoreElements,inlineImages:St,copyStyles:St},at.logger.debug("Starting document clone with size "+At.width+"x"+At.height+" scrolled to "+-At.left+","+-At.top),Qt=new zB(at,b,Tt),jt=Qt.clonedReferenceElement,jt?[4,Qt.toIFrame(S,At)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Ce=DA.sent(),ce=Av(jt)||B6(jt)?h(jt.ownerDocument):l(at,jt),me=ce.width,Je=ce.height,Ee=ce.left,xe=ce.top,mr=B8(at,jt,w.backgroundColor),tr={canvas:w.canvas,backgroundColor:mr,scale:(Ka=(Ll=w.scale)!==null&&Ll!==void 0?Ll:B.devicePixelRatio)!==null&&Ka!==void 0?Ka:1,x:((Oo=w.x)!==null&&Oo!==void 0?Oo:0)+Ee,y:((Il=w.y)!==null&&Il!==void 0?Il:0)+xe,width:(Pl=w.width)!==null&&Pl!==void 0?Pl:Math.ceil(me),height:(kA=w.height)!==null&&kA!==void 0?kA:Math.ceil(Je)},St?(at.logger.debug("Document cloned, using foreign object rendering"),cr=new m8(at,tr),[4,cr.render(jt)]):[3,3];case 2:return Ve=DA.sent(),[3,5];case 3:return at.logger.debug("Document cloned, element located at "+Ee+","+xe+" with size "+me+"x"+Je+" using computed rendering"),at.logger.debug("Starting DOM parsing"),be=PB(at,jt),mr===be.styles.backgroundColor&&(be.styles.backgroundColor=Si.TRANSPARENT),at.logger.debug("Starting renderer for element at "+tr.x+","+tr.y+" with size "+tr.width+"x"+tr.height),cr=new h8(at,tr),[4,cr.render(be)];case 4:Ve=DA.sent(),DA.label=5;case 5:return(!((Ul=w.removeContainer)!==null&&Ul!==void 0)||Ul)&&(zB.destroy(Ce)||at.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),at.logger.debug("Finished rendering"),[2,Ve]}})})},B8=function(b,w,S){var B=w.ownerDocument,I=B.documentElement?Ds(b,getComputedStyle(B.documentElement).backgroundColor):Si.TRANSPARENT,D=B.body?Ds(b,getComputedStyle(B.body).backgroundColor):Si.TRANSPARENT,q=typeof S=="string"?Ds(b,S):S===null?Si.TRANSPARENT:4294967295;return w===B.documentElement?Ms(I)?Ms(D)?q:D:I:q};return b8})})(Ny);var My=Ny.exports,Ap=qo(My),M4=xv({__proto__:null,default:Ap},[My]);/**
 * Tools for svg.
 * @module svg
 * @license MIT
 * @copyright 2011 Jeff Schiller
 */const{InsertElementCommand:op,RemoveElementCommand:k4,ChangeElementCommand:D4,BatchCommand:ky}=No;let Wt=null;const R4=r=>{Wt=r,Wt.setSvgString=V4,Wt.importSvgString=j4,Wt.uniquifyElems=z4,Wt.setUseData=q4,Wt.convertGradients=Y4,Wt.removeUnusedDefElems=$4,Wt.svgCanvasToString=H4,Wt.svgToString=G4,Wt.embedImage=K4,Wt.rasterExport=W4,Wt.exportPDF=X4},H4=()=>{for(;Wt.removeUnusedDefElems()>0;);Wt.pathActions.clear(!0),Wt.getSvgContent().childNodes.forEach((s,c)=>{c&&s.nodeType===8&&s.data.includes("Created with")&&Wt.getSvgContent().firstChild.before(s)}),Wt.getCurrentGroup()&&(jA(),Wt.selectOnly([Wt.getCurrentGroup()]));const t=[],e=Wt.getSvgContent().querySelectorAll("g[data-gsvg]");Array.prototype.forEach.call(e,s=>{const c=s.attributes;let f=c.length;for(let a=0;a<f;a++)(c[a].nodeName==="id"||c[a].nodeName==="style")&&f--;if(f<=0){const a=s.firstChild;t.push(a),s.replaceWith(a)}});const i=Wt.svgToString(Wt.getSvgContent(),0);return t.length&&Array.prototype.forEach.call(t,s=>{Wt.groupSvgElem(s)}),i},G4=(r,t)=>{const e=Wt.getCurConfig(),i=Wt.getNsMap(),s=[],c=e.baseUnit,f=new RegExp("^-?[\\d\\.]+"+c+"$");if(r){wu(r);const a=[...r.attributes],n=r.childNodes;a.sort((l,h)=>l.name>h.name?-1:1);for(let l=0;l<t;l++)s.push(" ");if(s.push("<"),s.push(r.nodeName),r.id==="svgcontent"){const l=Wt.getResolution();let h="";e.dynamicOutput?(h=r.getAttribute("viewBox"),s.push(' viewBox="'+h+'" xmlns="'+_e.SVG+'"')):(c!=="px"&&(l.w=zd(l.w,c)+c,l.h=zd(l.h,c)+c),s.push(' width="'+l.w+'" height="'+l.h+'" xmlns="'+_e.SVG+'"'));const o={},u=r.querySelectorAll("*"),A=Array.prototype.slice.call(u);A.push(r),Array.prototype.forEach.call(A,d=>{const m=d.namespaceURI;if(m&&!o[m]&&i[m]&&i[m]!=="xmlns"&&i[m]!=="xml"&&(o[m]=!0,s.push(" xmlns:"+i[m]+'="'+m+'"')),d.attributes.length>0)for(const[,v]of Object.entries(d.attributes)){const C=v.namespaceURI;C&&!o[C]&&i[C]!=="xmlns"&&i[C]!=="xml"&&(o[C]=!0,s.push(" xmlns:"+i[C]+'="'+C+'"'))}});let g=a.length;const p=["width","height","xmlns","x","y","viewBox","id","overflow"];for(;g--;){const d=a[g],m=Zc(d.value);d.nodeName.startsWith("xmlns:")||m!==""&&!p.includes(d.localName)&&(!d.namespaceURI||i[d.namespaceURI])&&(s.push(" "),s.push(d.nodeName),s.push('="'),s.push(m),s.push('"'))}}else{if(r.nodeName==="defs"&&!r.firstChild)return"";const l=["-moz-math-font-style","_moz-math-font-style"];for(let h=a.length-1;h>=0;h--){const o=a[h];let u=Zc(o.value);if(!l.includes(o.localName)){if(u==="null"){const A=o.localName.replace(/-[a-z]/g,g=>g[1].toUpperCase());if(Object.prototype.hasOwnProperty.call(r.style,A))continue}if(u!==""){if(u.startsWith("pointer-events")||o.localName==="class"&&u.startsWith("se_"))continue;if(s.push(" "),o.localName==="d"&&(u=Wt.pathActions.convertPath(r,!0)),isNaN(u)?f.test(u)&&(u=ps(u)+c):u=ps(u),Wt.getSvgOptionApply()&&r.nodeName==="image"&&o.localName==="href"&&Wt.getSvgOptionImages()&&Wt.getSvgOptionImages()==="embed"){const A=Wt.getEncodableImages(u);A&&(u=A)}(!o.namespaceURI||o.namespaceURI===_e.SVG||i[o.namespaceURI])&&(s.push(o.nodeName),s.push('="'),s.push(u),s.push('"'))}}}}if(r.hasChildNodes()){s.push(">"),t++;let l=!1;for(let h=0;h<n.length;h++){const o=n.item(h);switch(o.nodeType){case 1:s.push(`
`),s.push(Wt.svgToString(o,t));break;case 3:{const u=o.nodeValue.replace(/^\s+|\s+$/g,"");u!==""&&(l=!0,s.push(String(Zc(u))));break}case 4:s.push(`
`),s.push(new Array(t+1).join(" ")),s.push("<![CDATA["),s.push(o.nodeValue),s.push("]]>");break;case 8:s.push(`
`),s.push(new Array(t+1).join(" ")),s.push("<!--"),s.push(o.data),s.push("-->");break}}if(t--,!l){s.push(`
`);for(let h=0;h<t;h++)s.push(" ")}s.push("</"),s.push(r.nodeName),s.push(">")}else s.push("/>")}return s.join("")},V4=(r,t)=>{const e=Wt.getCurConfig(),i=Wt.getDataStorage();try{const s=Zd(r);if(s.firstElementChild&&s.firstElementChild.namespaceURI!==_e.SVG)return!1;Wt.prepareSvg(s);const c=new ky("Change Source"),{nextSibling:f}=Wt.getSvgContent();Wt.getSvgContent().remove();const a=Wt.getSvgContent();c.addSubCommand(new k4(a,f,Wt.getSvgRoot())),Wt.getDOMDocument().adoptNode?Wt.setSvgContent(Wt.getDOMDocument().adoptNode(s.documentElement)):Wt.setSvgContent(Wt.getDOMDocument().importNode(s.documentElement,!0)),Wt.getSvgRoot().append(Wt.getSvgContent());const n=Wt.getSvgContent();Wt.current_drawing_=new gg(Wt.getSvgContent(),Wt.getIdPrefix());const l=Wt.getCurrentDrawing().getNonce();l?Wt.call("setnonce",l):Wt.call("unsetnonce");const h=n.querySelectorAll("image");Array.prototype.forEach.call(h,E=>{ng(E);const L=Wt.getHref(E);if(L){if(L.startsWith("data:")){const U=L.match(/svgedit_url=(.*?);/);if(U){const O=decodeURIComponent(U[1]),X=new Image;X.addEventListener("load",()=>{E.setAttributeNS(_e.XLINK,"xlink:href",O)}),X.src=O}}Wt.embedImage(L)}});const o=n.querySelectorAll("[id]"),u={},A=o.length;for(let E=0;E<A;E++){const L=o[E].id?o[E].id:"undefined";isNaN(u[L])&&(u[L]=0),u[L]++}Object.entries(u).forEach(([E,L])=>{if(L>1){const U=n.querySelectorAll('[id="'+E+'"]');for(let O=1;O<U.length;O++)U[O].setAttribute("id",Wt.getNextId())}});const g=n.querySelectorAll("svg");if(Array.prototype.forEach.call(g,E=>{if(Yc(E.parentNode,"defs"))return;Wt.uniquifyElems(E);const L=E.parentNode;L.childNodes.length===1&&L.nodeName==="g"?(i.put(L,"gsvg",E),L.id=L.id||Wt.getNextId()):Wt.groupSvgElem(E)}),Go()){const E=ms(),L=n.querySelectorAll("linearGradient, radialGradient, pattern");Array.prototype.forEach.call(L,U=>{E.appendChild(U)})}Wt.setUseData(n),Wt.convertGradients(n);const p={id:"svgcontent",overflow:e.show_outside_canvas?"visible":"hidden"};let d=!1;if(n.getAttribute("viewBox")){const L=n.getAttribute("viewBox").split(" ");p.width=L[2],p.height=L[3]}else["width","height"].forEach(E=>{const L=n.getAttribute(E)||"100%";String(L).substr(-1)==="%"?d=!0:p[E]=za(E,L)});lh();const m=n.children;if(Array.prototype.forEach.call(m,E=>{const L=E.querySelectorAll(Wt.getVisElems());Array.prototype.forEach.call(L,U=>{U.id||(U.id=Wt.getNextId())})}),d){const E=js();p.width=E.width+E.x,p.height=E.height+E.y}p.width<=0&&(p.width=100),p.height<=0&&(p.height=100);for(const[E,L]of Object.entries(p))n.setAttribute(E,L);Wt.contentW=p.width,Wt.contentH=p.height,c.addSubCommand(new op(Wt.getSvgContent()));const v=n.getAttribute("width"),C=n.getAttribute("height"),x={width:v,height:C};c.addSubCommand(new D4(Wt.getSvgRoot(),x)),Wt.setZoom(1),Wt.clearSelection(),A1(),Wt.getSvgRoot().append(Wt.selectorManager.selectorParentGroup),t||Wt.addCommandToHistory(c),Wt.call("sourcechanged",[Wt.getSvgContent()])}catch(s){return console.error(s),!1}return!0},j4=(r,t)=>{const e=Wt.getDataStorage();let i,s,c;try{const f=RS(r);let a=!1;if(Wt.getImportIds(f)&&Wt.getImportIds(f).symbol){const h=Jc(Wt.getImportIds(f).symbol,"#svgroot");h!=null&&h.length&&(a=!0)}const n=new ky("Import Image");let l;if(a)l=Wt.getImportIds(f).symbol,s=Wt.getImportIds(f).xform;else{const h=Zd(r);Wt.prepareSvg(h);const o=Wt.getDOMDocument().adoptNode?Wt.getDOMDocument().adoptNode(h.documentElement):Wt.getDOMDocument().importNode(h.documentElement,!0);Wt.uniquifyElems(o);const u=za("width",o.getAttribute("width")),A=za("height",o.getAttribute("height")),g=o.getAttribute("viewBox"),p=g?g.split(" "):[0,0,u,A];for(i=0;i<4;++i)p[i]=Number(p[i]);const d=Number(Wt.getSvgContent().getAttribute("height"));s=A>u?"scale("+d/3/p[3]+")":"scale("+d/3/p[2]+")",s="translate(0) "+s+" translate(0)",l=Wt.getDOMDocument().createElementNS(_e.SVG,"symbol");const m=ms();if(Go()){const C=o.querySelectorAll("linearGradient, radialGradient, pattern");Array.prototype.forEach.call(C,x=>{m.appendChild(x)})}for(;o.firstChild;){const C=o.firstChild;l.append(C)}const v=o.attributes;for(const C of v)l.setAttribute(C.nodeName,C.value);l.id=Wt.getNextId(),Wt.setImportIds(f,{symbol:l,xform:s}),ms().append(l),n.addSubCommand(new op(l))}c=Wt.getDOMDocument().createElementNS(_e.SVG,"use"),c.id=Wt.getNextId(),Wt.setHref(c,"#"+l.id),(Wt.getCurrentGroup()||Wt.getCurrentDrawing().getCurrentLayer()).append(c),n.addSubCommand(new op(c)),Wt.clearSelection(),t||(c.setAttribute("transform",s),Is(c)),e.put(c,"symbol",l),e.put(c,"ref",l),Wt.addToSelection([c]),Wt.addCommandToHistory(n),Wt.call("changed",[Wt.getSvgContent()])}catch(f){return console.error(f),null}return c},K4=r=>new Promise((t,e)=>{const i=new Image;i.addEventListener("load",s=>{const c=document.createElement("canvas");c.width=s.currentTarget.width,c.height=s.currentTarget.height,c.getContext("2d").drawImage(s.currentTarget,0,0);try{let f=";svgedit_url="+encodeURIComponent(r);f=c.toDataURL().replace(";base64",f+";base64"),Wt.setEncodableImages(r,f)}catch{Wt.setEncodableImages(r,!1)}Wt.setGoodImage(r),t(Wt.getEncodableImages(r))}),i.addEventListener("error",s=>{e(new Error(`error loading image: ${s.currentTarget.attributes.src.value}`))}),i.setAttribute("src",r)}),Dy=()=>{const r=Wt.getUIStrings();Wt.clearSelection();const t=[],e=[],i={feGaussianBlur:r.NoBlur,foreignObject:r.NoforeignObject,"[stroke-dasharray]":r.NoDashArray},s=Wt.getSvgContent();"font"in document.querySelector("CANVAS").getContext("2d")||(i.text=r.NoText);for(const[c,f]of Object.entries(i))s.querySelectorAll(c).length&&(e.push(c),t.push(f));return{issues:t,issueCodes:e}},W4=async(r,t,e,i={})=>{const s=r==="ICO"?"BMP":r||"PNG",c="image/"+s.toLowerCase(),{issues:f,issueCodes:a}=Dy(),n=Wt.svgCanvasToString(),l=document.createElement("iframe");l.onload=()=>{const h=l.contentDocument||l.contentWindow.document,u=Wt.getSvgContent().cloneNode(!0);h.body.appendChild(u),setTimeout(()=>{Ap(h.body,{useCORS:!0,allowTaint:!0}).then(A=>new Promise(g=>{const p=s.toLowerCase(),d=t?A.toDataURL("image/"+p,t):A.toDataURL("image/"+p);l.parentNode.removeChild(l);let m;const v=()=>{const C={datauri:d,bloburl:m,svg:n,issues:f,issueCodes:a,type:r,mimeType:c,quality:t,WindowName:e};i.avoidEvent||Wt.call("exported",C),g(C)};if(A.toBlob){A.toBlob(C=>{m=Nv(C),v()},c,t);return}m=VS(d),v()}))},1e3)},document.body.appendChild(l)},X4=async(r,t=kx()?"save":void 0)=>{const e=Wt.getResolution(),i=e.w>e.h?"landscape":"portrait",s="pt",c=document.createElement("iframe");c.onload=()=>{const f=c.contentDocument||c.contentWindow.document,n=Wt.getSvgContent().cloneNode(!0);f.body.appendChild(n),setTimeout(()=>{Ap(f.body,{useCORS:!0,allowTaint:!0}).then(l=>{const h=l.toDataURL("image/png"),o=new Me({orientation:i,unit:s,format:[e.w,e.h]}),u=Wt.getDocumentTitle();o.setProperties({title:u}),o.addImage(h,"PNG",0,0,e.w,e.h),c.parentNode.removeChild(c);const{issues:A,issueCodes:g}=Dy();t=t||"dataurlstring";const p={issues:A,issueCodes:g,WindowName:r,outputType:t};return p.output=o.output(t,t==="save"?r||"svg.pdf":void 0),Wt.call("edPDF",p),p})},1e3)},document.body.appendChild(c)},z4=r=>{const t={},e=["filter","linearGradient","pattern","radialGradient","symbol","textPath","use"];GA(r,i=>{if(i.nodeType===1){i.id&&(i.id in t||(t[i.id]={elem:null,attrs:[],hrefs:[]}),t[i.id].elem=i),Wt.getrefAttrs().forEach(c=>{const f=i.getAttributeNode(c);if(f){const a=Wt.getUrlFromAttr(f.value),n=a?a.substr(1):null;n&&(n in t||(t[n]={elem:null,attrs:[],hrefs:[]}),t[n].attrs.push(f))}});const s=Wt.getHref(i);if(s&&e.includes(i.nodeName)){const c=s.substr(1);c&&(c in t||(t[c]={elem:null,attrs:[],hrefs:[]}),t[c].hrefs.push(i))}}});for(const i in t){if(!i)continue;const{elem:s}=t[i];if(s){const c=Wt.getNextId();s.id=c;const{attrs:f}=t[i];let a=f.length;for(;a--;){const h=f[a];h.ownerElement.setAttribute(h.name,"url(#"+c+")")}const n=t[i].hrefs;let l=n.length;for(;l--;){const h=n[l];Wt.setHref(h,"#"+c)}}}},q4=r=>{let t=r;r.tagName!=="use"&&(t=t.querySelectorAll("use")),Array.prototype.forEach.call(t,(e,i)=>{const s=Wt.getDataStorage(),c=Wt.getHref(e).substr(1),f=Wt.getElement(c);f&&(s.put(e,"ref",f),(f.tagName==="symbol"||f.tagName==="svg")&&(s.put(e,"symbol",f),s.put(e,"ref",f)))})},$4=()=>{const r=Wt.getSvgContent().getElementsByTagNameNS(_e.SVG,"defs");if(!r||!r.length)return 0;const t=[];let e=0;const i=["fill","stroke","filter","marker-start","marker-mid","marker-end"],s=i.length,c=Wt.getSvgContent().getElementsByTagNameNS(_e.SVG,"*"),f=c.length;let a,n;for(a=0;a<f;a++){const l=c[a];for(n=0;n<s;n++){const o=Wt.getUrlFromAttr(l.getAttribute(i[n]));o&&t.push(o.substr(1))}const h=$a(l);h&&h.startsWith("#")&&t.push(h.substr(1))}return Array.prototype.forEach.call(r,(l,h)=>{const o=l.querySelectorAll("linearGradient, radialGradient, filter, marker, svg, symbol");for(h=o.length;h--;){const u=o[h],{id:A}=u;t.includes(A)||(Wt.setRemovedElements(A,u),u.remove(),e++)}}),e},Y4=r=>{let t=r.querySelectorAll("linearGradient, radialGradient");!t.length&&f1()&&(t=Array.prototype.filter.call(r.querySelectorAll("*"),e=>e.tagName.includes("Gradient"))),Array.prototype.forEach.call(t,e=>{if(e.getAttribute("gradientUnits")==="userSpaceOnUse"){const i=Wt.getSvgContent();let s=i.querySelectorAll('[fill="url(#'+e.id+')"],[stroke="url(#'+e.id+')"]');if(!s.length){const f=i.querySelectorAll('[*|href="#'+e.id+'"]');if(f.length)if((f[0].tagName==="linearGradient"||f[0].tagName==="radialGradient")&&f[0].getAttribute("gradientUnits")==="userSpaceOnUse")s=i.querySelectorAll('[fill="url(#'+f[0].id+')"],[stroke="url(#'+f[0].id+')"]');else return;else return}const c=hi(s[0]);if(!c)return;if(e.tagName==="linearGradient"){const f={x1:e.getAttribute("x1"),y1:e.getAttribute("y1"),x2:e.getAttribute("x2"),y2:e.getAttribute("y2")},a=Nr(e);if((a==null?void 0:a.numberOfItems)>0){const n=yr(a).matrix,l=vr(f.x1,f.y1,n),h=vr(f.x2,f.y2,n);f.x1=l.x,f.y1=l.y,f.x2=h.x,f.y2=h.y,e.removeAttribute("gradientTransform")}e.setAttribute("x1",(f.x1-c.x)/c.width),e.setAttribute("y1",(f.y1-c.y)/c.height),e.setAttribute("x2",(f.x2-c.x)/c.width),e.setAttribute("y2",(f.y2-c.y)/c.height),e.removeAttribute("gradientUnits")}}})};/**
 * DOM element selection box tools.
 * @module select
 * @license MIT
 *
 * @copyright 2010 Alexis Deveria, 2010 Jeff Schiller
 */let Li,$o;const Yu=window.ontouchstart?10:4;class Ju{constructor(t,e,i){this.id=t,this.selectedElement=e,this.locked=!0,this.selectorGroup=Li.createSVGElement({element:"g",attr:{id:"selectorGroup"+this.id}}),this.selectorRect=Li.createSVGElement({element:"path",attr:{id:"selectedBox"+this.id,fill:"none",stroke:"#22C","stroke-width":"1","stroke-dasharray":"5,5",style:"pointer-events:none"}}),this.selectorGroup.append(this.selectorRect),this.gripCoords={nw:null,n:null,ne:null,e:null,se:null,s:null,sw:null,w:null},this.reset(this.selectedElement,i)}reset(t,e){this.locked=!0,this.selectedElement=t,this.resize(e),this.selectorGroup.setAttribute("display","inline")}showGrips(t){const e=t?"inline":"none";$o.selectorGripsGroup.setAttribute("display",e);const i=this.selectedElement;this.hasGrips=t,i&&t&&(this.selectorGroup.append($o.selectorGripsGroup),Ju.updateGripCursors(Ji(i)))}resize(t){const e=Li.getDataStorage(),i=this.selectorRect,s=$o,c=s.selectorGrips,f=this.selectedElement,a=Li.getZoom();let n=1/a;const l=f.getAttribute("stroke-width");f.getAttribute("stroke")!=="none"&&!isNaN(l)&&(n+=l/2);const{tagName:h}=f;h==="text"&&(n+=2/a);let u=document.createElementNS(_e.SVG,"svg").createSVGMatrix(),A=f;for(;A.parentNode;)A.parentNode&&A.parentNode.tagName==="g"&&A.parentNode.transform&&A.parentNode.transform.baseVal.numberOfItems&&(u=Fi(yr(Nr(f.parentNode)).matrix,u)),A=A.parentNode;const g=Nr(f),p=u?Fi(u,yr(g).matrix):yr(g).matrix;if(p.e*=a,p.f*=a,t||(t=hi(f)),h==="g"&&!e.has(f,"gsvg")){const d=Hv([f.childNodes]);d&&(t=d)}if(t){const d=t.x,m=t.y,v=t.width,C=t.height;n*=a;const x=qd(d*a,m*a,v*a,C*a,p),{aabox:E}=x;let L=E.x-n,U=E.y-n,O=E.width+n*2,X=E.height+n*2;const rt=L+O/2,M=U+X/2,H=Ji(f);if(H){const ht=Li.getSvgRoot().createSVGTransform();ht.setRotate(-H,rt,M);const ut=ht.matrix;x.tl=vr(x.tl.x,x.tl.y,ut),x.tr=vr(x.tr.x,x.tr.y,ut),x.bl=vr(x.bl.x,x.bl.y,ut),x.br=vr(x.br.x,x.br.y,ut);const{tl:pt}=x;let ft=pt.x,R=pt.y,G=pt.x,it=pt.y;const{min:P,max:V}=Math;ft=P(ft,P(x.tr.x,P(x.bl.x,x.br.x)))-n,R=P(R,P(x.tr.y,P(x.bl.y,x.br.y)))-n,G=V(G,V(x.tr.x,V(x.bl.x,x.br.x)))+n,it=V(it,V(x.tr.y,V(x.bl.y,x.br.y)))+n,L=ft,U=R,O=G-ft,X=it-R}const J="M"+L+","+U+" L"+(L+O)+","+U+" "+(L+O)+","+(U+X)+" "+L+","+(U+X)+"z",$=H?"rotate("+[H,rt,M].join(",")+")":"";this.gripCoords={nw:[L,U],ne:[L+O,U],sw:[L,U+X],se:[L+O,U+X],n:[L+O/2,U],w:[L,U+X/2],e:[L+O,U+X/2],s:[L+O/2,U+X]},i.setAttribute("d",J),this.selectorGroup.setAttribute("transform",$),Object.entries(this.gripCoords).forEach(([ht,ut])=>{c[ht].setAttribute("cx",ut[0]),c[ht].setAttribute("cy",ut[1])}),s.rotateGripConnector.setAttribute("x1",L+O/2),s.rotateGripConnector.setAttribute("y1",U),s.rotateGripConnector.setAttribute("x2",L+O/2),s.rotateGripConnector.setAttribute("y2",U-Yu*5),s.rotateGrip.setAttribute("cx",L+O/2),s.rotateGrip.setAttribute("cy",U-Yu*5)}}static updateGripCursors(t){const e=Object.keys($o.selectorGrips);let i=Math.round(t/45);for(i<0&&(i+=8);i>0;)e.push(e.shift()),i--;Object.values($o.selectorGrips).forEach((s,c)=>{s.setAttribute("style","cursor:"+e[c]+"-resize")})}}class J4{constructor(){this.selectorParentGroup=null,this.rubberBandBox=null,this.selectors=[],this.selectorMap={},this.selectorGrips={nw:null,n:null,ne:null,e:null,se:null,s:null,sw:null,w:null},this.selectorGripsGroup=null,this.rotateGripConnector=null,this.rotateGrip=null,this.initGroup()}initGroup(){var f;const t=Li.getDataStorage();if((f=this.selectorParentGroup)!=null&&f.parentNode&&this.selectorParentGroup.remove(),this.selectorParentGroup=Li.createSVGElement({element:"g",attr:{id:"selectorParentGroup"}}),this.selectorGripsGroup=Li.createSVGElement({element:"g",attr:{display:"none"}}),this.selectorParentGroup.append(this.selectorGripsGroup),Li.getSvgRoot().append(this.selectorParentGroup),this.selectorMap={},this.selectors=[],this.rubberBandBox=null,Object.keys(this.selectorGrips).forEach(a=>{const n=Li.createSVGElement({element:"circle",attr:{id:"selectorGrip_resize_"+a,fill:"#22C",r:Yu,style:"cursor:"+a+"-resize","stroke-width":2,"pointer-events":"all"}});t.put(n,"dir",a),t.put(n,"type","resize"),this.selectorGrips[a]=n,this.selectorGripsGroup.append(n)}),this.rotateGripConnector=Li.createSVGElement({element:"line",attr:{id:"selectorGrip_rotateconnector",stroke:"#22C","stroke-width":"1"}}),this.selectorGripsGroup.append(this.rotateGripConnector),this.rotateGrip=Li.createSVGElement({element:"circle",attr:{id:"selectorGrip_rotate",fill:"lime",r:Yu,stroke:"#22C","stroke-width":2,style:`cursor:url(${Li.curConfig.imgPath}/rotate.svg) 12 12, auto;`}}),this.selectorGripsGroup.append(this.rotateGrip),t.put(this.rotateGrip,"type","rotate"),document.getElementById("canvasBackground"))return;const[e,i]=Li.curConfig.dimensions,s=Li.createSVGElement({element:"svg",attr:{id:"canvasBackground",width:e,height:i,x:0,y:0,overflow:f1()?"none":"visible",style:"pointer-events:none"}}),c=Li.createSVGElement({element:"rect",attr:{width:"100%",height:"100%",x:0,y:0,"stroke-width":1,stroke:"#000",fill:"#FFF",style:"pointer-events:none"}});s.append(c),Li.getSvgRoot().insertBefore(s,Li.getSvgContent())}requestSelector(t,e){var s;if(!t)return null;const i=this.selectors.length;if(typeof this.selectorMap[t.id]=="object")return this.selectorMap[t.id].locked=!0,this.selectorMap[t.id];for(let c=0;c<i;++c)if(!((s=this.selectors[c])!=null&&s.locked))return this.selectors[c].locked=!0,this.selectors[c].reset(t,e),this.selectorMap[t.id]=this.selectors[c],this.selectors[c];return this.selectors[i]=new Ju(i,t,e),this.selectorParentGroup.append(this.selectors[i].selectorGroup),this.selectorMap[t.id]=this.selectors[i],this.selectors[i]}releaseSelector(t){if(!t)return;const e=this.selectors.length,i=this.selectorMap[t.id];i!=null&&i.locked||console.warn("WARNING! selector was released but was already unlocked");for(let s=0;s<e;++s)if(this.selectors[s]&&this.selectors[s]===i){delete this.selectorMap[t.id],i.locked=!1,i.selectedElement=null,i.showGrips(!1);try{i.selectorGroup.setAttribute("display","none")}catch{}break}}getRubberBandBox(){return this.rubberBandBox||(this.rubberBandBox=Li.createSVGElement({element:"rect",attr:{id:"selectorRubberBand",fill:"#22C","fill-opacity":.15,stroke:"#22C","stroke-width":.5,display:"none",style:"pointer-events:none"}}),this.selectorParentGroup.append(this.rubberBandBox)),this.rubberBandBox}}const Z4=r=>{Li=r,$o=new J4},tF=()=>$o;/**
 * Tools for clear.
 * @module clear
 * @license MIT
 * @copyright 2011 Jeff Schiller
 */let tc=null;const eF=r=>{tc=r},rF=()=>{const r=tc.getCurConfig(),{dimensions:t}=r,e=tc.getSvgContent();for(;e.firstChild;)e.removeChild(e.firstChild);const i=tc.getSvgRoot();e.setAttribute("id","svgcontent"),e.setAttribute("width",t[0]),e.setAttribute("height",t[1]),e.setAttribute("x",t[0]),e.setAttribute("y",t[1]),e.setAttribute("overflow",r.show_outside_canvas?"visible":"hidden"),e.setAttribute("xmlns",_e.SVG),e.setAttribute("xmlns:se",_e.SE),e.setAttribute("xmlns:xlink",_e.XLINK),i.appendChild(e);const s=tc.getDOMDocument().createComment(" Created with SVG-edit - https://github.com/SVG-Edit/svgedit");tc.getSvgContent().append(s)},iF={_storage:new WeakMap,put:function(r,t,e){this._storage.has(r)||this._storage.set(r,new Map),this._storage.get(r).set(t,e)},get:function(r,t){var e;return(e=this._storage.get(r))==null?void 0:e.get(t)},has:function(r,t){return this._storage.has(r)&&this._storage.get(r).has(t)},remove:function(r,t){const e=this._storage.get(r).delete(t);return this._storage.get(r).size===0&&this._storage.delete(r),e}};/**
 * Numerous tools for working with the editor's "canvas".
 * @module svgcanvas
 *
 * @license MIT
 *
 * @copyright 2010 Alexis Deveria, 2010 Pavol Rusnak, 2010 Jeff Schiller, 2021 OptimistikSAS
 *
 */const nF="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use",Ry=["clip-path","fill","filter","marker-end","marker-mid","marker-start","mask","stroke"],sF=.8,aF=10,eA="svgedit_clipboard";class Ii{constructor(t,e){var n,l,h;this.initializeSvgCanvasMethods(),US(this);const{pathActions:i}=l1;this.saveOptions={round_digits:2},this.importIds={},this.extensions={},this.removedElements={},this.started=!1,this.startTransform=null,this.currentMode="select",this.currentResizeMode="none",this.justSelected=null,this.rubberBox=null,this.curBBoxes=[],this.lastClickPoint=null,this.events={},this.rootSctm=null,this.drawnPath=null,this.freehand={minx:null,miny:null,maxx:null,maxy:null},this.dAttr=null,this.startX=null,this.startY=null,this.rStartX=null,this.rStartY=null,this.initBbox={},this.sumDistance=0,this.controllPoint2={x:0,y:0},this.controllPoint1={x:0,y:0},this.start={x:0,y:0},this.end={x:0,y:0},this.bSpline={x:0,y:0},this.nextPos={x:0,y:0},this.idprefix="svg_",this.encodableImages={},this.curConfig={show_outside_canvas:!0,selectNew:!0,dimensions:[640,480]},e&&(this.curConfig=Ii.mergeDeep(this.curConfig,e)),this.lastGoodImgUrl=`${this.curConfig.imgPath}/logo.svg`;const{dimensions:s}=this.curConfig;this.svgdoc=window.document,this.container=t,this.svgroot=Ux(this.svgdoc,s),t.append(this.svgroot),this.svgContent=this.svgdoc.createElementNS(_e.SVG,"svg"),Px(this),eF(this),this.clearSvgContentElement(),this.current_drawing_=new gg(this.svgContent,this.idprefix),this.zoom=1,this.currentGroup=null;const c={shape:{fill:(this.curConfig.initFill.color==="none"?"":"#")+this.curConfig.initFill.color,fill_paint:null,fill_opacity:this.curConfig.initFill.opacity,stroke:"#"+this.curConfig.initStroke.color,stroke_paint:null,stroke_opacity:this.curConfig.initStroke.opacity,stroke_width:this.curConfig.initStroke.width,stroke_dasharray:"none",stroke_linejoin:"miter",stroke_linecap:"butt",opacity:this.curConfig.initOpacity}};c.text=Ii.mergeDeep({},c.shape),c.text=Ii.mergeDeep(c.text,{fill:"#000000",stroke_width:(n=this.curConfig.text)==null?void 0:n.stroke_width,font_size:(l=this.curConfig.text)==null?void 0:l.font_size,font_family:(h=this.curConfig.text)==null?void 0:h.font_family}),this.curText=c.text,this.curShape=c.shape,this.curProperties=this.curShape,this.selectedElements=[],d5(this),DS(this),n_(this),s_(this),Z4(this),Gx(this),Wx(this),this.nsMap=Lv(),this.selectorManager=tF(),this.pathActions=i,r1(this),this.uiStrings={},this.opacAni=document.createElementNS(_e.SVG,"animate"),this.opacAni.setAttribute("attributeName","opacity"),this.opacAni.setAttribute("begin","indefinite"),this.opacAni.setAttribute("dur",1),this.opacAni.setAttribute("fill","freeze"),this.svgroot.appendChild(this.opacAni),a5(this),i5(this),R4(this),px(this),g5(this);const f=o=>(o.preventDefault(),!1);t.addEventListener("mousedown",this.mouseDownEvent),t.addEventListener("mousemove",this.mouseMoveEvent),bu(t,f),t.addEventListener("dblclick",this.dblClickEvent),t.addEventListener("mouseup",this.mouseUpEvent),t.addEventListener("mouseleave",this.mouseOutEvent),t.addEventListener("mousewheel",this.DOMMouseScrollEvent),t.addEventListener("DOMMouseScroll",this.DOMMouseScrollEvent),this.linkControlPoints=i.linkControlPoints,this.curCommand=null,this.filter=null,this.filterHidden=!1,B_(this),o_(this);const a=o=>{o.newValue&&(o.key===eA+"_startup"?(localStorage.removeItem(eA+"_startup"),this.flashStorage()):o.key===eA&&sessionStorage.setItem(eA,o.newValue))};window.addEventListener("storage",a,!1),localStorage.setItem(eA+"_startup",Math.random()),Lx(this),this.contentW=this.getResolution().w,this.contentH=this.getResolution().h,this.clear()}getSvgOption(){return this.saveOptions}setSvgOption(t,e){this.saveOptions[t]=e}getSelectedElements(){return this.selectedElements}setSelectedElements(t,e){this.selectedElements[t]=e}setEmptySelectedElements(){this.selectedElements=[]}getSvgRoot(){return this.svgroot}getDOMDocument(){return this.svgdoc}getDOMContainer(){return this.container}getCurConfig(){return this.curConfig}setIdPrefix(t){this.idprefix=t}getCurrentDrawing(){return this.current_drawing_}getCurShape(){return this.curShape}getCurrentGroup(){return this.currentGroup}getBaseUnit(){return this.curConfig.baseUnit}getHeight(){return this.svgContent.getAttribute("height")/this.zoom}getWidth(){return this.svgContent.getAttribute("width")/this.zoom}getRoundDigits(){return this.saveOptions.round_digits}getSnappingStep(){return this.curConfig.snappingStep}getGridSnapping(){return this.curConfig.gridSnapping}getStartTransform(){return this.startTransform}setStartTransform(t){this.startTransform=t}getZoom(){return this.zoom}round(t){return Number.parseInt(t*this.zoom)/this.zoom}createSVGElement(t){return this.addSVGElementsFromJson(t)}getContainer(){return this.container}setStarted(t){this.started=t}getRubberBox(){return this.rubberBox}setRubberBox(t){return this.rubberBox=t,this.rubberBox}addPtsToSelection({closedSubpath:t,grips:e}){this.pathActions.canDeleteNodes=!0,this.pathActions.closed_subpath=t,this.call("pointsAdded",{closedSubpath:t,grips:e}),this.call("selected",e)}endChanges({cmd:t,elem:e}){this.addCommandToHistory(t),this.call("changed",[e])}getCurrentMode(){return this.currentMode}setCurrentMode(t){return this.currentMode=t,this.currentMode}getDrawnPath(){return this.drawnPath}setDrawnPath(t){return this.drawnPath=t,this.drawnPath}setCurrentGroup(t){this.currentGroup=t}changeSvgContent(){this.call("changed",[this.svgContent])}getStarted(){return this.started}getCanvas(){return this}getrootSctm(){return this.rootSctm}getStartX(){return this.startX}setStartX(t){this.startX=t}getStartY(){return this.startY}setStartY(t){this.startY=t}getRStartX(){return this.rStartX}getRStartY(){return this.rStartY}getInitBbox(){return this.initBbox}getCurrentResizeMode(){return this.currentResizeMode}getJustSelected(){return this.justSelected}getOpacAni(){return this.opacAni}getParameter(){return this.parameter}getNextParameter(){return this.nextParameter}getStepCount(){return aF}getThreSholdDist(){return sF}getSumDistance(){return this.sumDistance}getStart(t){return this.start[t]}getEnd(t){return this.end[t]}getbSpline(t){return this.bSpline[t]}getNextPos(t){return this.nextPos[t]}getControllPoint1(t){return this.controllPoint1[t]}getControllPoint2(t){return this.controllPoint2[t]}getFreehand(t){return this.freehand[t]}getDrawing(){return this.getCurrentDrawing()}getDAttr(){return this.dAttr}getLastGoodImgUrl(){return this.lastGoodImgUrl}getCurText(t){return this.curText[t]}setDAttr(t){this.dAttr=t}setEnd(t,e){this.end[t]=e}setControllPoint1(t,e){this.controllPoint1[t]=e}setControllPoint2(t,e){this.controllPoint2[t]=e}setJustSelected(t){this.justSelected=t}setParameter(t){this.parameter=t}setStart(t){this.start=t}setRStartX(t){this.rStartX=t}setRStartY(t){this.rStartY=t}setSumDistance(t){this.sumDistance=t}setbSpline(t){this.bSpline=t}setNextPos(t){this.nextPos=t}setNextParameter(t){this.nextParameter=t}setCurText(t,e){this.curText[t]=e}setFreehand(t,e){this.freehand[t]=e}setCurBBoxes(t){this.curBBoxes=t}getCurBBoxes(){return this.curBBoxes}setInitBbox(t){this.initBbox=t}setRootSctm(t){this.rootSctm=t}setCurrentResizeMode(t){this.currentResizeMode=t}getLastClickPoint(t){return this.lastClickPoint[t]}setLastClickPoint(t){this.lastClickPoint=t}getId(){return this.getCurrentDrawing().getId()}getUIStrings(){return this.uiStrings}getNsMap(){return this.nsMap}getSvgOptionApply(){return this.saveOptions.apply}getSvgOptionImages(){return this.saveOptions.images}getEncodableImages(t){return this.encodableImages[t]}setEncodableImages(t,e){this.encodableImages[t]=e}getVisElems(){return nF}getIdPrefix(){return this.idprefix}getDataStorage(){return iF}setZoom(t){this.zoom=t}getImportIds(t){return this.importIds[t]}setImportIds(t,e){this.importIds[t]=e}setRemovedElements(t,e){this.removedElements[t]=e}setSvgContent(t){this.svgContent=t}getrefAttrs(){return Ry}setCanvas(t,e){this[t]=e}setCurProperties(t,e){this.curProperties[t]=e}getCurProperties(t){return this.curProperties[t]}setCurShape(t,e){this.curShape[t]=e}gettingSelectorManager(){return this.selectorManager}getContentW(){return this.contentW}getContentH(){return this.contentH}getClipboardID(){return eA}getSvgContent(){return this.svgContent}getExtensions(){return this.extensions}getSelector(){return Ju}getMode(){return this.currentMode}getNextId(){return this.getCurrentDrawing().getNextId()}getCurCommand(){return this.curCommand}setCurCommand(t){this.curCommand=t}getFilter(){return this.filter}setFilter(t){this.filter=t}getFilterHidden(){return this.filterHidden}setFilterHidden(t){this.filterHidden=t}setMode(t){var e;this.pathActions.clear(!0),this.textActions.clear(),this.curProperties=((e=this.selectedElements[0])==null?void 0:e.nodeName)==="text"?this.curText:this.curShape,this.currentMode=t}clear(){this.call("beforeClear"),this.pathActions.clear(),this.clearSelection(),this.clearSvgContentElement(),this.current_drawing_=new gg(this.svgContent),this.createLayer("Layer 1"),this.undoMgr.resetUndoStack(),this.selectorManager.initGroup(),this.rubberBox=this.selectorManager.getRubberBandBox(),this.call("afterClear")}async addExtension(t,e,{importLocale:i}){if(typeof e!="function")throw new TypeError("Function argument expected for `svgcanvas.addExtension`");if(t in this.extensions)throw new Error('Cannot add extension "'+t+'", an extension by that name already exists.');const s={importLocale:i,svgroot:this.svgroot,svgContent:this.svgContent,nonce:this.getCurrentDrawing().getNonce(),selectorManager:this.selectorManager},c=await e(s);return c&&(c.name=t),this.extensions[t]=c,this.call("extension_added",c)}addCommandToHistory(t){this.undoMgr.addCommandToHistory(t)}restoreRefElements(t){const e={};Ry.forEach((s,c)=>{e[s]=t.getAttribute(s)}),Object.values(e).forEach(s=>{if(s!=null&&s.startsWith("url(")){const c=tg(s).substr(1);wr(c)||(ms().append(this.removedElements[c]),delete this.removedElements[c])}});const i=t.getElementsByTagName("*");if(i.length)for(let s=0,c=i.length;s<c;s++)this.restoreRefElements(i[s])}call(t,e){if(this.events[t])return this.events[t](window,e)}bind(t,e){const i=this.events[t];return this.events[t]=e,i}flashStorage(){const t=sessionStorage.getItem(eA);localStorage.setItem(eA,t),setTimeout(()=>{localStorage.removeItem(eA)},1)}selectOnly(t,e){this.clearSelection(!0),this.addToSelection(t,e)}removeFromSelection(t){if(!this.selectedElements[0]||!t.length)return;const e=[],i=this.selectedElements.length;for(let s=0;s<i;++s){const c=this.selectedElements[s];c&&(t.includes(c)?this.selectorManager.releaseSelector(c):e.push(c))}this.selectedElements=e}selectAllInCurrentLayer(){const t=this.getCurrentDrawing().getCurrentLayer();t&&(this.currentMode="select",this.currentGroup?this.selectOnly(this.currentGroup.children):this.selectOnly(t.children))}getOpacity(){return this.curShape.opacity}getSnapToGrid(){return this.curConfig.gridSnapping}getVersion(){return"svgcanvas.js ($Rev$)"}setUiStrings(t){Object.assign(this.uiStrings,t.notification),Zv(t)}setConfig(t){Object.assign(this.curConfig,t)}getDocumentTitle(){return this.getTitle(this.svgContent)}getOffset(){return{x:Number(this.svgContent.getAttribute("x")),y:Number(this.svgContent.getAttribute("y"))}}getColor(t){return this.curProperties[t]}setStrokePaint(t){this.setPaint("stroke",t)}setFillPaint(t){this.setPaint("fill",t)}getStrokeWidth(){return this.curProperties.stroke_width}getStyle(){return this.curShape}setOpacity(t){this.curShape.opacity=t,this.changeSelectedAttribute("opacity",t)}getFillOpacity(){return this.curShape.fill_opacity}getStrokeOpacity(){return this.curShape.stroke_opacity}setPaintOpacity(t,e,i){this.curShape[t+"_opacity"]=e,i?this.changeSelectedAttributeNoUndo(t+"-opacity",e):this.changeSelectedAttribute(t+"-opacity",e)}getPaintOpacity(t){return t==="fill"?this.getFillOpacity():this.getStrokeOpacity()}getBlur(t){let e=0;if(t){const i=t.getAttribute("filter");if(i){const s=wr(t.id+"_blur");if(s)e=s.firstChild.getAttribute("stdDeviation");else{const c=VA(i),f=ig(c);f!==null&&(e=f.getAttribute("stdDeviation"))}}}return e}setGoodImage(t){this.lastGoodImgUrl=t}getSvgString(){return this.saveOptions.apply=!1,this.svgCanvasToString()}randomizeIds(t){arguments.length>0&&t===!1?h1(!1,this.getCurrentDrawing()):h1(!0,this.getCurrentDrawing())}convertToPath(t,e){if(!t){this.selectedElements.forEach(c=>{c&&this.convertToPath(c)});return}if(e)return rg(t,this.addSVGElementsFromJson,this.pathActions);const i={fill:this.curShape.fill,"fill-opacity":this.curShape.fill_opacity,stroke:this.curShape.stroke,"stroke-width":this.curShape.stroke_width,"stroke-dasharray":this.curShape.stroke_dasharray,"stroke-linejoin":this.curShape.stroke_linejoin,"stroke-linecap":this.curShape.stroke_linecap,"stroke-opacity":this.curShape.stroke_opacity,opacity:this.curShape.opacity,visibility:"hidden"};return XS(t,i,this)}cutSelectedElements(){this.copySelectedElements(),this.deleteSelectedElements()}initializeSvgCanvasMethods(){this.getJsonFromSvgElements=m1,this.addSVGElementsFromJson=v1,this.clearSvgContentElement=rF,this.textActions=n5,this.getStrokedBBox=js,this.getVisibleElements=th,this.stringToHTML=Vv,this.insertChildAtIndex=qS,this.getClosest=Yc,this.getParents=Jc,this.isLayer=vs.isLayer,this.matrixMultiply=Fi,this.hasMatrixTransform=Qo,this.transformListToTransform=yr,this.convertToNum=za,this.findDefs=ms,this.getUrlFromAttr=tg,this.getHref=$a,this.setHref=ga,this.getBBox=hi,this.getRotationAngle=Ji,this.getElement=wr,this.getRefElem=VA,this.assignAttributes=br,this.cleanupElement=wu,this.remapElement=Tu,this.recalculateDimensions=Is,this.sanitizeSvg=bg,this.pasteElements=Ix,this.identifyLayers=lh,this.createLayer=vx,this.cloneLayer=yx,this.deleteCurrentLayer=wx,this.setCurrentLayer=bx,this.renameCurrentLayer=Cx,this.setCurrentLayerPosition=Bx,this.indexCurrentLayer=mx,this.setLayerVisibility=Sx,this.moveSelectedToLayer=xx,this.mergeLayer=_x,this.mergeAllLayers=Ex,this.leaveContext=jA,this.setContext=u1,this.changeSelectedAttributeNoUndo=g1,this.changeSelectedAttribute=jx,this.setBlurNoUndo=S_,this.setBlurOffsets=x_,this.setBlur=__,this.smoothControlPoints=s1,this.getTypeMap=Xd,this.history=No,this.NS=_e,this.$id=jv,this.$qq=Kv,this.$qa=Wv,this.$click=bu,this.encode64=Ov,this.decode64=Qv,this.mergeDeep=$c}}Ii.$id=jv,Ii.$qq=Kv,Ii.$qa=Wv,Ii.$click=bu,Ii.encode64=Ov,Ii.decode64=Qv,Ii.mergeDeep=$c,Ii.getClosest=Yc,Ii.getParents=Jc,Ii.blankPageObjectURL=jS,Ii.Paint=_v,Ii.getTypeMap=Xd,Ii.convertToNum=za,Ii.isValidUnit=QS,Ii.convertUnit=zd;var Hy={exports:{}};/*! @license DOMPurify 2.4.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.7/LICENSE */(function(r,t){(function(e,i){r.exports=i()})(YA,function(){function e(Rt){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(zt){return typeof zt}:function(zt){return zt&&typeof Symbol=="function"&&zt.constructor===Symbol&&zt!==Symbol.prototype?"symbol":typeof zt},e(Rt)}function i(Rt,zt){return i=Object.setPrototypeOf||function(ae,te){return ae.__proto__=te,ae},i(Rt,zt)}function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function c(Rt,zt,Xt){return s()?c=Reflect.construct:c=function(te,Ne,Be){var Ar=[null];Ar.push.apply(Ar,Ne);var Ke=Function.bind.apply(te,Ar),qe=new Ke;return Be&&i(qe,Be.prototype),qe},c.apply(null,arguments)}function f(Rt){return a(Rt)||n(Rt)||l(Rt)||o()}function a(Rt){if(Array.isArray(Rt))return h(Rt)}function n(Rt){if(typeof Symbol<"u"&&Rt[Symbol.iterator]!=null||Rt["@@iterator"]!=null)return Array.from(Rt)}function l(Rt,zt){if(Rt){if(typeof Rt=="string")return h(Rt,zt);var Xt=Object.prototype.toString.call(Rt).slice(8,-1);if(Xt==="Object"&&Rt.constructor&&(Xt=Rt.constructor.name),Xt==="Map"||Xt==="Set")return Array.from(Rt);if(Xt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Xt))return h(Rt,zt)}}function h(Rt,zt){(zt==null||zt>Rt.length)&&(zt=Rt.length);for(var Xt=0,ae=new Array(zt);Xt<zt;Xt++)ae[Xt]=Rt[Xt];return ae}function o(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=Object.hasOwnProperty,A=Object.setPrototypeOf,g=Object.isFrozen,p=Object.getPrototypeOf,d=Object.getOwnPropertyDescriptor,m=Object.freeze,v=Object.seal,C=Object.create,x=typeof Reflect<"u"&&Reflect,E=x.apply,L=x.construct;E||(E=function(zt,Xt,ae){return zt.apply(Xt,ae)}),m||(m=function(zt){return zt}),v||(v=function(zt){return zt}),L||(L=function(zt,Xt){return c(zt,f(Xt))});var U=ft(Array.prototype.forEach),O=ft(Array.prototype.pop),X=ft(Array.prototype.push),rt=ft(String.prototype.toLowerCase),M=ft(String.prototype.toString),H=ft(String.prototype.match),J=ft(String.prototype.replace),$=ft(String.prototype.indexOf),ht=ft(String.prototype.trim),ut=ft(RegExp.prototype.test),pt=R(TypeError);function ft(Rt){return function(zt){for(var Xt=arguments.length,ae=new Array(Xt>1?Xt-1:0),te=1;te<Xt;te++)ae[te-1]=arguments[te];return E(Rt,zt,ae)}}function R(Rt){return function(){for(var zt=arguments.length,Xt=new Array(zt),ae=0;ae<zt;ae++)Xt[ae]=arguments[ae];return L(Rt,Xt)}}function G(Rt,zt,Xt){var ae;Xt=(ae=Xt)!==null&&ae!==void 0?ae:rt,A&&A(Rt,null);for(var te=zt.length;te--;){var Ne=zt[te];if(typeof Ne=="string"){var Be=Xt(Ne);Be!==Ne&&(g(zt)||(zt[te]=Be),Ne=Be)}Rt[Ne]=!0}return Rt}function it(Rt){var zt=C(null),Xt;for(Xt in Rt)E(u,Rt,[Xt])===!0&&(zt[Xt]=Rt[Xt]);return zt}function P(Rt,zt){for(;Rt!==null;){var Xt=d(Rt,zt);if(Xt){if(Xt.get)return ft(Xt.get);if(typeof Xt.value=="function")return ft(Xt.value)}Rt=p(Rt)}function ae(te){return console.warn("fallback value for",te),null}return ae}var V=m(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),k=m(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N=m(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Z=m(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),st=m(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ct=m(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ot=m(["#text"]),wt=m(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),_t=m(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Nt=m(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),vt=m(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mt=v(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gt=v(/<%[\w\W]*|[\w\W]*%>/gm),tt=v(/\${[\w\W]*}/gm),It=v(/^data-[\-\w.\u00B7-\uFFFF]/),Pt=v(/^aria-[\-\w]+$/),Ut=v(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Gt=v(/^(?:\w+script|data):/i),Dt=v(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),bt=v(/^html$/i),Kt=function(){return typeof window>"u"?null:window},Zt=function(zt,Xt){if(e(zt)!=="object"||typeof zt.createPolicy!="function")return null;var ae=null,te="data-tt-policy-suffix";Xt.currentScript&&Xt.currentScript.hasAttribute(te)&&(ae=Xt.currentScript.getAttribute(te));var Ne="dompurify"+(ae?"#"+ae:"");try{return zt.createPolicy(Ne,{createHTML:function(Ar){return Ar},createScriptURL:function(Ar){return Ar}})}catch{return console.warn("TrustedTypes policy "+Ne+" could not be created."),null}};function le(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Kt(),zt=function(Ft){return le(Ft)};if(zt.version="2.4.7",zt.removed=[],!Rt||!Rt.document||Rt.document.nodeType!==9)return zt.isSupported=!1,zt;var Xt=Rt.document,ae=Rt.document,te=Rt.DocumentFragment,Ne=Rt.HTMLTemplateElement,Be=Rt.Node,Ar=Rt.Element,Ke=Rt.NodeFilter,qe=Rt.NamedNodeMap,nn=qe===void 0?Rt.NamedNodeMap||Rt.MozNamedAttrMap:qe,Xe=Rt.HTMLFormElement,_n=Rt.DOMParser,sr=Rt.trustedTypes,ei=Ar.prototype,_r=P(ei,"cloneNode"),Mr=P(ei,"nextSibling"),ke=P(ei,"childNodes"),Ze=P(ei,"parentNode");if(typeof Ne=="function"){var On=ae.createElement("template");On.content&&On.content.ownerDocument&&(ae=On.content.ownerDocument)}var or=Zt(sr,Xt),ji=or?or.createHTML(""):"",Ki=ae,Le=Ki.implementation,Qn=Ki.createNodeIterator,Zn=Ki.createDocumentFragment,Wi=Ki.getElementsByTagName,Te=Xt.importNode,kr={};try{kr=it(ae).documentMode?ae.documentMode:{}}catch{}var Dr={};zt.isSupported=typeof Ze=="function"&&Le&&Le.createHTMLDocument!==void 0&&kr!==9;var Qi=mt,hn=gt,sn=tt,En=It,Nn=Pt,Mn=Gt,un=Dt,Fn=Ut,Er=null,Os=G({},[].concat(f(V),f(k),f(N),f(st),f(ot))),Kr=null,ta=G({},[].concat(f(wt),f(_t),f(Nt),f(vt))),Fr=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Qs=null,lA=null,oo=!0,Tn=!0,Fa=!1,ea=!0,kn=!1,fn=!1,Ta=!1,cA=!1,an=!1,ts=!1,Rr=!1,hA=!0,uA=!1,ra="user-content-",es=!0,Dn=!1,Ni={},Hr=null,Xi=G({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),La=null,fA=G({},["audio","video","img","source","image","track"]),dA=null,gA=G({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ia="http://www.w3.org/1998/Math/MathML",ia="http://www.w3.org/2000/svg",Rn="http://www.w3.org/1999/xhtml",dn=Rn,pA=!1,Pa=null,hl=G({},[Ia,ia,Rn],M),zi,na=["application/xhtml+xml","text/html"],Ns="text/html",Cr,ri=null,ul=ae.createElement("form"),mA=function(Ft){return Ft instanceof RegExp||Ft instanceof Function},Ue=function(Ft){ri&&ri===Ft||((!Ft||e(Ft)!=="object")&&(Ft={}),Ft=it(Ft),zi=na.indexOf(Ft.PARSER_MEDIA_TYPE)===-1?zi=Ns:zi=Ft.PARSER_MEDIA_TYPE,Cr=zi==="application/xhtml+xml"?M:rt,Er="ALLOWED_TAGS"in Ft?G({},Ft.ALLOWED_TAGS,Cr):Os,Kr="ALLOWED_ATTR"in Ft?G({},Ft.ALLOWED_ATTR,Cr):ta,Pa="ALLOWED_NAMESPACES"in Ft?G({},Ft.ALLOWED_NAMESPACES,M):hl,dA="ADD_URI_SAFE_ATTR"in Ft?G(it(gA),Ft.ADD_URI_SAFE_ATTR,Cr):gA,La="ADD_DATA_URI_TAGS"in Ft?G(it(fA),Ft.ADD_DATA_URI_TAGS,Cr):fA,Hr="FORBID_CONTENTS"in Ft?G({},Ft.FORBID_CONTENTS,Cr):Xi,Qs="FORBID_TAGS"in Ft?G({},Ft.FORBID_TAGS,Cr):{},lA="FORBID_ATTR"in Ft?G({},Ft.FORBID_ATTR,Cr):{},Ni="USE_PROFILES"in Ft?Ft.USE_PROFILES:!1,oo=Ft.ALLOW_ARIA_ATTR!==!1,Tn=Ft.ALLOW_DATA_ATTR!==!1,Fa=Ft.ALLOW_UNKNOWN_PROTOCOLS||!1,ea=Ft.ALLOW_SELF_CLOSE_IN_ATTR!==!1,kn=Ft.SAFE_FOR_TEMPLATES||!1,fn=Ft.WHOLE_DOCUMENT||!1,an=Ft.RETURN_DOM||!1,ts=Ft.RETURN_DOM_FRAGMENT||!1,Rr=Ft.RETURN_TRUSTED_TYPE||!1,cA=Ft.FORCE_BODY||!1,hA=Ft.SANITIZE_DOM!==!1,uA=Ft.SANITIZE_NAMED_PROPS||!1,es=Ft.KEEP_CONTENT!==!1,Dn=Ft.IN_PLACE||!1,Fn=Ft.ALLOWED_URI_REGEXP||Fn,dn=Ft.NAMESPACE||Rn,Fr=Ft.CUSTOM_ELEMENT_HANDLING||{},Ft.CUSTOM_ELEMENT_HANDLING&&mA(Ft.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Fr.tagNameCheck=Ft.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ft.CUSTOM_ELEMENT_HANDLING&&mA(Ft.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Fr.attributeNameCheck=Ft.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ft.CUSTOM_ELEMENT_HANDLING&&typeof Ft.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Fr.allowCustomizedBuiltInElements=Ft.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),kn&&(Tn=!1),ts&&(an=!0),Ni&&(Er=G({},f(ot)),Kr=[],Ni.html===!0&&(G(Er,V),G(Kr,wt)),Ni.svg===!0&&(G(Er,k),G(Kr,_t),G(Kr,vt)),Ni.svgFilters===!0&&(G(Er,N),G(Kr,_t),G(Kr,vt)),Ni.mathMl===!0&&(G(Er,st),G(Kr,Nt),G(Kr,vt))),Ft.ADD_TAGS&&(Er===Os&&(Er=it(Er)),G(Er,Ft.ADD_TAGS,Cr)),Ft.ADD_ATTR&&(Kr===ta&&(Kr=it(Kr)),G(Kr,Ft.ADD_ATTR,Cr)),Ft.ADD_URI_SAFE_ATTR&&G(dA,Ft.ADD_URI_SAFE_ATTR,Cr),Ft.FORBID_CONTENTS&&(Hr===Xi&&(Hr=it(Hr)),G(Hr,Ft.FORBID_CONTENTS,Cr)),es&&(Er["#text"]=!0),fn&&G(Er,["html","head","body"]),Er.table&&(G(Er,["tbody"]),delete Qs.tbody),m&&m(Ft),ri=Ft)},lo=G({},["mi","mo","mn","ms","mtext"]),co=G({},["foreignobject","desc","title","annotation-xml"]),rs=G({},["title","style","font","a","script"]),sa=G({},k);G(sa,N),G(sa,Z);var Ua=G({},st);G(Ua,ct);var Oa=function(Ft){var re=Ze(Ft);(!re||!re.tagName)&&(re={namespaceURI:dn,tagName:"template"});var he=rt(Ft.tagName),Ye=rt(re.tagName);return Pa[Ft.namespaceURI]?Ft.namespaceURI===ia?re.namespaceURI===Rn?he==="svg":re.namespaceURI===Ia?he==="svg"&&(Ye==="annotation-xml"||lo[Ye]):!!sa[he]:Ft.namespaceURI===Ia?re.namespaceURI===Rn?he==="math":re.namespaceURI===ia?he==="math"&&co[Ye]:!!Ua[he]:Ft.namespaceURI===Rn?re.namespaceURI===ia&&!co[Ye]||re.namespaceURI===Ia&&!lo[Ye]?!1:!Ua[he]&&(rs[he]||!sa[he]):!!(zi==="application/xhtml+xml"&&Pa[Ft.namespaceURI]):!1},qr=function(Ft){X(zt.removed,{element:Ft});try{Ft.parentNode.removeChild(Ft)}catch{try{Ft.outerHTML=ji}catch{Ft.remove()}}},Qa=function(Ft,re){try{X(zt.removed,{attribute:re.getAttributeNode(Ft),from:re})}catch{X(zt.removed,{attribute:null,from:re})}if(re.removeAttribute(Ft),Ft==="is"&&!Kr[Ft])if(an||ts)try{qr(re)}catch{}else try{re.setAttribute(Ft,"")}catch{}},vA=function(Ft){var re,he;if(cA)Ft="<remove></remove>"+Ft;else{var Ye=H(Ft,/^[\r\n\t ]+/);he=Ye&&Ye[0]}zi==="application/xhtml+xml"&&dn===Rn&&(Ft='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ft+"</body></html>");var ki=or?or.createHTML(Ft):Ft;if(dn===Rn)try{re=new _n().parseFromString(ki,zi)}catch{}if(!re||!re.documentElement){re=Le.createDocument(dn,"template",null);try{re.documentElement.innerHTML=pA?ji:ki}catch{}}var Wr=re.body||re.documentElement;return Ft&&he&&Wr.insertBefore(ae.createTextNode(he),Wr.childNodes[0]||null),dn===Rn?Wi.call(re,fn?"html":"body")[0]:fn?re.documentElement:Wr},yA=function(Ft){return Qn.call(Ft.ownerDocument||Ft,Ft,Ke.SHOW_ELEMENT|Ke.SHOW_COMMENT|Ke.SHOW_TEXT,null,!1)},wA=function(Ft){return Ft instanceof Xe&&(typeof Ft.nodeName!="string"||typeof Ft.textContent!="string"||typeof Ft.removeChild!="function"||!(Ft.attributes instanceof nn)||typeof Ft.removeAttribute!="function"||typeof Ft.setAttribute!="function"||typeof Ft.namespaceURI!="string"||typeof Ft.insertBefore!="function"||typeof Ft.hasChildNodes!="function")},Hn=function(Ft){return e(Be)==="object"?Ft instanceof Be:Ft&&e(Ft)==="object"&&typeof Ft.nodeType=="number"&&typeof Ft.nodeName=="string"},Mi=function(Ft,re,he){Dr[Ft]&&U(Dr[Ft],function(Ye){Ye.call(zt,re,he,ri)})},bA=function(Ft){var re;if(Mi("beforeSanitizeElements",Ft,null),wA(Ft)||ut(/[\u0080-\uFFFF]/,Ft.nodeName))return qr(Ft),!0;var he=Cr(Ft.nodeName);if(Mi("uponSanitizeElement",Ft,{tagName:he,allowedTags:Er}),Ft.hasChildNodes()&&!Hn(Ft.firstElementChild)&&(!Hn(Ft.content)||!Hn(Ft.content.firstElementChild))&&ut(/<[/\w]/g,Ft.innerHTML)&&ut(/<[/\w]/g,Ft.textContent)||he==="select"&&ut(/<template/i,Ft.innerHTML))return qr(Ft),!0;if(!Er[he]||Qs[he]){if(!Qs[he]&&aa(he)&&(Fr.tagNameCheck instanceof RegExp&&ut(Fr.tagNameCheck,he)||Fr.tagNameCheck instanceof Function&&Fr.tagNameCheck(he)))return!1;if(es&&!Hr[he]){var Ye=Ze(Ft)||Ft.parentNode,ki=ke(Ft)||Ft.childNodes;if(ki&&Ye)for(var Wr=ki.length,lr=Wr-1;lr>=0;--lr)Ye.insertBefore(_r(ki[lr],!0),Mr(Ft))}return qr(Ft),!0}return Ft instanceof Ar&&!Oa(Ft)||(he==="noscript"||he==="noembed"||he==="noframes")&&ut(/<\/no(script|embed|frames)/i,Ft.innerHTML)?(qr(Ft),!0):(kn&&Ft.nodeType===3&&(re=Ft.textContent,re=J(re,Qi," "),re=J(re,hn," "),re=J(re,sn," "),Ft.textContent!==re&&(X(zt.removed,{element:Ft.cloneNode()}),Ft.textContent=re)),Mi("afterSanitizeElements",Ft,null),!1)},ws=function(Ft,re,he){if(hA&&(re==="id"||re==="name")&&(he in ae||he in ul))return!1;if(!(Tn&&!lA[re]&&ut(En,re))){if(!(oo&&ut(Nn,re))){if(!Kr[re]||lA[re]){if(!(aa(Ft)&&(Fr.tagNameCheck instanceof RegExp&&ut(Fr.tagNameCheck,Ft)||Fr.tagNameCheck instanceof Function&&Fr.tagNameCheck(Ft))&&(Fr.attributeNameCheck instanceof RegExp&&ut(Fr.attributeNameCheck,re)||Fr.attributeNameCheck instanceof Function&&Fr.attributeNameCheck(re))||re==="is"&&Fr.allowCustomizedBuiltInElements&&(Fr.tagNameCheck instanceof RegExp&&ut(Fr.tagNameCheck,he)||Fr.tagNameCheck instanceof Function&&Fr.tagNameCheck(he))))return!1}else if(!dA[re]){if(!ut(Fn,J(he,un,""))){if(!((re==="src"||re==="xlink:href"||re==="href")&&Ft!=="script"&&$(he,"data:")===0&&La[Ft])){if(!(Fa&&!ut(Mn,J(he,un,"")))){if(he)return!1}}}}}}return!0},aa=function(Ft){return Ft.indexOf("-")>0},Aa=function(Ft){var re,he,Ye,ki;Mi("beforeSanitizeAttributes",Ft,null);var Wr=Ft.attributes;if(Wr){var lr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Kr};for(ki=Wr.length;ki--;){re=Wr[ki];var Gn=re,Lr=Gn.name,CA=Gn.namespaceURI;if(he=Lr==="value"?re.value:ht(re.value),Ye=Cr(Lr),lr.attrName=Ye,lr.attrValue=he,lr.keepAttr=!0,lr.forceKeepAttr=void 0,Mi("uponSanitizeAttribute",Ft,lr),he=lr.attrValue,!lr.forceKeepAttr&&(Qa(Lr,Ft),!!lr.keepAttr)){if(!ea&&ut(/\/>/i,he)){Qa(Lr,Ft);continue}kn&&(he=J(he,Qi," "),he=J(he,hn," "),he=J(he,sn," "));var An=Cr(Ft.nodeName);if(ws(An,Ye,he)){if(uA&&(Ye==="id"||Ye==="name")&&(Qa(Lr,Ft),he=ra+he),or&&e(sr)==="object"&&typeof sr.getAttributeType=="function"&&!CA)switch(sr.getAttributeType(An,Ye)){case"TrustedHTML":{he=or.createHTML(he);break}case"TrustedScriptURL":{he=or.createScriptURL(he);break}}try{CA?Ft.setAttributeNS(CA,Lr,he):Ft.setAttribute(Lr,he),O(zt.removed)}catch{}}}}Mi("afterSanitizeAttributes",Ft,null)}},ho=function de(Ft){var re,he=yA(Ft);for(Mi("beforeSanitizeShadowDOM",Ft,null);re=he.nextNode();)Mi("uponSanitizeShadowNode",re,null),!bA(re)&&(re.content instanceof te&&de(re.content),Aa(re));Mi("afterSanitizeShadowDOM",Ft,null)};return zt.sanitize=function(de){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re,he,Ye,ki,Wr;if(pA=!de,pA&&(de="<!-->"),typeof de!="string"&&!Hn(de))if(typeof de.toString=="function"){if(de=de.toString(),typeof de!="string")throw pt("dirty is not a string, aborting")}else throw pt("toString is not a function");if(!zt.isSupported){if(e(Rt.toStaticHTML)==="object"||typeof Rt.toStaticHTML=="function"){if(typeof de=="string")return Rt.toStaticHTML(de);if(Hn(de))return Rt.toStaticHTML(de.outerHTML)}return de}if(Ta||Ue(Ft),zt.removed=[],typeof de=="string"&&(Dn=!1),Dn){if(de.nodeName){var lr=Cr(de.nodeName);if(!Er[lr]||Qs[lr])throw pt("root node is forbidden and cannot be sanitized in-place")}}else if(de instanceof Be)re=vA("<!---->"),he=re.ownerDocument.importNode(de,!0),he.nodeType===1&&he.nodeName==="BODY"||he.nodeName==="HTML"?re=he:re.appendChild(he);else{if(!an&&!kn&&!fn&&de.indexOf("<")===-1)return or&&Rr?or.createHTML(de):de;if(re=vA(de),!re)return an?null:Rr?ji:""}re&&cA&&qr(re.firstChild);for(var Gn=yA(Dn?de:re);Ye=Gn.nextNode();)Ye.nodeType===3&&Ye===ki||bA(Ye)||(Ye.content instanceof te&&ho(Ye.content),Aa(Ye),ki=Ye);if(ki=null,Dn)return de;if(an){if(ts)for(Wr=Zn.call(re.ownerDocument);re.firstChild;)Wr.appendChild(re.firstChild);else Wr=re;return(Kr.shadowroot||Kr.shadowrootmod)&&(Wr=Te.call(Xt,Wr,!0)),Wr}var Lr=fn?re.outerHTML:re.innerHTML;return fn&&Er["!doctype"]&&re.ownerDocument&&re.ownerDocument.doctype&&re.ownerDocument.doctype.name&&ut(bt,re.ownerDocument.doctype.name)&&(Lr="<!DOCTYPE "+re.ownerDocument.doctype.name+`>
`+Lr),kn&&(Lr=J(Lr,Qi," "),Lr=J(Lr,hn," "),Lr=J(Lr,sn," ")),or&&Rr?or.createHTML(Lr):Lr},zt.setConfig=function(de){Ue(de),Ta=!0},zt.clearConfig=function(){ri=null,Ta=!1},zt.isValidAttribute=function(de,Ft,re){ri||Ue({});var he=Cr(de),Ye=Cr(Ft);return ws(he,Ye,re)},zt.addHook=function(de,Ft){typeof Ft=="function"&&(Dr[de]=Dr[de]||[],X(Dr[de],Ft))},zt.removeHook=function(de){if(Dr[de])return O(Dr[de])},zt.removeHooks=function(de){Dr[de]&&(Dr[de]=[])},zt.removeAllHooks=function(){Dr={}},zt}var pe=le();return pe})})(Hy);var Gy=Hy.exports,AF=qo(Gy),oF=xv({__proto__:null,default:AF},[Gy]),_h=function(r){return r&&r.Math===Math&&r},Pi=_h(typeof globalThis=="object"&&globalThis)||_h(typeof window=="object"&&window)||_h(typeof self=="object"&&self)||_h(typeof YA=="object"&&YA)||_h(typeof YA=="object"&&YA)||function(){return this}()||Function("return this")(),ec={},Ci=function(r){try{return!!r()}catch{return!0}},lF=Ci,Ba=!lF(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),cF=Ci,Zu=!cF(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")}),hF=Zu,tf=Function.prototype.call,cn=hF?tf.bind(tf):function(){return tf.apply(tf,arguments)},Vy={},jy={}.propertyIsEnumerable,Ky=Object.getOwnPropertyDescriptor,uF=Ky&&!jy.call({1:2},1);Vy.f=uF?function(t){var e=Ky(this,t);return!!e&&e.enumerable}:jy;var ef=function(r,t){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:t}},Wy=Zu,Xy=Function.prototype,lp=Xy.call,fF=Wy&&Xy.bind.bind(lp,lp),Bi=Wy?fF:function(r){return function(){return lp.apply(r,arguments)}},zy=Bi,dF=zy({}.toString),gF=zy("".slice),Yo=function(r){return gF(dF(r),8,-1)},pF=Bi,mF=Ci,vF=Yo,cp=Object,yF=pF("".split),qy=mF(function(){return!cp("z").propertyIsEnumerable(0)})?function(r){return vF(r)==="String"?yF(r,""):cp(r)}:cp,Jo=function(r){return r==null},wF=Jo,bF=TypeError,Sa=function(r){if(wF(r))throw new bF("Can't call method on "+r);return r},CF=qy,BF=Sa,Eh=function(r){return CF(BF(r))},hp=typeof document=="object"&&document.all,SF=typeof hp>"u"&&hp!==void 0,$y={all:hp,IS_HTMLDDA:SF},Yy=$y,xF=Yy.all,fi=Yy.IS_HTMLDDA?function(r){return typeof r=="function"||r===xF}:function(r){return typeof r=="function"},Jy=fi,Zy=$y,_F=Zy.all,rA=Zy.IS_HTMLDDA?function(r){return typeof r=="object"?r!==null:Jy(r)||r===_F}:function(r){return typeof r=="object"?r!==null:Jy(r)},up=Pi,EF=fi,FF=function(r){return EF(r)?r:void 0},Zo=function(r,t){return arguments.length<2?FF(up[r]):up[r]&&up[r][t]},TF=Bi,rf=TF({}.isPrototypeOf),nf=typeof navigator<"u"&&String(navigator.userAgent)||"",tw=Pi,fp=nf,ew=tw.process,rw=tw.Deno,iw=ew&&ew.versions||rw&&rw.version,nw=iw&&iw.v8,$s,sf;nw&&($s=nw.split("."),sf=$s[0]>0&&$s[0]<4?1:+($s[0]+$s[1])),!sf&&fp&&($s=fp.match(/Edge\/(\d+)/),(!$s||$s[1]>=74)&&($s=fp.match(/Chrome\/(\d+)/),$s&&(sf=+$s[1])));var dp=sf,sw=dp,LF=Ci,IF=Pi,PF=IF.String,aw=!!Object.getOwnPropertySymbols&&!LF(function(){var r=Symbol("symbol detection");return!PF(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&sw&&sw<41}),UF=aw,Aw=UF&&!Symbol.sham&&typeof Symbol.iterator=="symbol",OF=Zo,QF=fi,NF=rf,MF=Aw,kF=Object,ow=MF?function(r){return typeof r=="symbol"}:function(r){var t=OF("Symbol");return QF(t)&&NF(t.prototype,kF(r))},DF=String,af=function(r){try{return DF(r)}catch{return"Object"}},RF=fi,HF=af,GF=TypeError,iA=function(r){if(RF(r))return r;throw new GF(HF(r)+" is not a function")},VF=iA,jF=Jo,rc=function(r,t){var e=r[t];return jF(e)?void 0:VF(e)},gp=cn,pp=fi,mp=rA,KF=TypeError,WF=function(r,t){var e,i;if(t==="string"&&pp(e=r.toString)&&!mp(i=gp(e,r))||pp(e=r.valueOf)&&!mp(i=gp(e,r))||t!=="string"&&pp(e=r.toString)&&!mp(i=gp(e,r)))return i;throw new KF("Can't convert object to primitive value")},lw={exports:{}},cw=Pi,XF=Object.defineProperty,vp=function(r,t){try{XF(cw,r,{value:t,configurable:!0,writable:!0})}catch{cw[r]=t}return t},zF=Pi,qF=vp,hw="__core-js_shared__",$F=zF[hw]||qF(hw,{}),yp=$F,uw=yp;(lw.exports=function(r,t){return uw[r]||(uw[r]=t!==void 0?t:{})})("versions",[]).push({version:"3.34.0",mode:"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.34.0/LICENSE",source:"https://github.com/zloirock/core-js"});var wp=lw.exports,YF=Sa,JF=Object,Af=function(r){return JF(YF(r))},ZF=Bi,t3=Af,e3=ZF({}.hasOwnProperty),Ys=Object.hasOwn||function(t,e){return e3(t3(t),e)},r3=Bi,i3=0,n3=Math.random(),s3=r3(1 .toString),fw=function(r){return"Symbol("+(r===void 0?"":r)+")_"+s3(++i3+n3,36)},a3=Pi,A3=wp,dw=Ys,o3=fw,l3=aw,c3=Aw,ic=a3.Symbol,bp=A3("wks"),h3=c3?ic.for||ic:ic&&ic.withoutSetter||o3,rn=function(r){return dw(bp,r)||(bp[r]=l3&&dw(ic,r)?ic[r]:h3("Symbol."+r)),bp[r]},u3=cn,gw=rA,pw=ow,f3=rc,d3=WF,g3=rn,p3=TypeError,m3=g3("toPrimitive"),v3=function(r,t){if(!gw(r)||pw(r))return r;var e=f3(r,m3),i;if(e){if(t===void 0&&(t="default"),i=u3(e,r,t),!gw(i)||pw(i))return i;throw new p3("Can't convert object to primitive value")}return t===void 0&&(t="number"),d3(r,t)},y3=v3,w3=ow,Cp=function(r){var t=y3(r,"string");return w3(t)?t:t+""},b3=Pi,mw=rA,Bp=b3.document,C3=mw(Bp)&&mw(Bp.createElement),of=function(r){return C3?Bp.createElement(r):{}},B3=Ba,S3=Ci,x3=of,vw=!B3&&!S3(function(){return Object.defineProperty(x3("div"),"a",{get:function(){return 7}}).a!==7}),_3=Ba,E3=cn,F3=Vy,T3=ef,L3=Eh,I3=Cp,P3=Ys,U3=vw,yw=Object.getOwnPropertyDescriptor;ec.f=_3?yw:function(t,e){if(t=L3(t),e=I3(e),U3)try{return yw(t,e)}catch{}if(P3(t,e))return T3(!E3(F3.f,t,e),t[e])};var xa={},O3=Ba,Q3=Ci,ww=O3&&Q3(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),N3=rA,M3=String,k3=TypeError,Sn=function(r){if(N3(r))return r;throw new k3(M3(r)+" is not an object")},D3=Ba,R3=vw,H3=ww,lf=Sn,bw=Cp,G3=TypeError,Sp=Object.defineProperty,V3=Object.getOwnPropertyDescriptor,xp="enumerable",_p="configurable",Ep="writable";xa.f=D3?H3?function(t,e,i){if(lf(t),e=bw(e),lf(i),typeof t=="function"&&e==="prototype"&&"value"in i&&Ep in i&&!i[Ep]){var s=V3(t,e);s&&s[Ep]&&(t[e]=i.value,i={configurable:_p in i?i[_p]:s[_p],enumerable:xp in i?i[xp]:s[xp],writable:!1})}return Sp(t,e,i)}:Sp:function(t,e,i){if(lf(t),e=bw(e),lf(i),R3)try{return Sp(t,e,i)}catch{}if("get"in i||"set"in i)throw new G3("Accessors not supported");return"value"in i&&(t[e]=i.value),t};var j3=Ba,K3=xa,W3=ef,Fh=j3?function(r,t,e){return K3.f(r,t,W3(1,e))}:function(r,t,e){return r[t]=e,r},Cw={exports:{}},Fp=Ba,X3=Ys,Bw=Function.prototype,z3=Fp&&Object.getOwnPropertyDescriptor,Tp=X3(Bw,"name"),q3=Tp&&(function(){}).name==="something",$3=Tp&&(!Fp||Fp&&z3(Bw,"name").configurable),cf={EXISTS:Tp,PROPER:q3,CONFIGURABLE:$3},Y3=Bi,J3=fi,Lp=yp,Z3=Y3(Function.toString);J3(Lp.inspectSource)||(Lp.inspectSource=function(r){return Z3(r)});var Ip=Lp.inspectSource,tT=Pi,eT=fi,Sw=tT.WeakMap,rT=eT(Sw)&&/native code/.test(String(Sw)),iT=wp,nT=fw,xw=iT("keys"),Pp=function(r){return xw[r]||(xw[r]=nT(r))},Up={},sT=rT,_w=Pi,aT=rA,AT=Fh,Op=Ys,Qp=yp,oT=Pp,lT=Up,Ew="Object already initialized",Np=_w.TypeError,cT=_w.WeakMap,hf,Th,uf,hT=function(r){return uf(r)?Th(r):hf(r,{})},uT=function(r){return function(t){var e;if(!aT(t)||(e=Th(t)).type!==r)throw new Np("Incompatible receiver, "+r+" required");return e}};if(sT||Qp.state){var _a=Qp.state||(Qp.state=new cT);_a.get=_a.get,_a.has=_a.has,_a.set=_a.set,hf=function(r,t){if(_a.has(r))throw new Np(Ew);return t.facade=r,_a.set(r,t),t},Th=function(r){return _a.get(r)||{}},uf=function(r){return _a.has(r)}}else{var nc=oT("state");lT[nc]=!0,hf=function(r,t){if(Op(r,nc))throw new Np(Ew);return t.facade=r,AT(r,nc,t),t},Th=function(r){return Op(r,nc)?r[nc]:{}},uf=function(r){return Op(r,nc)}}var ff={set:hf,get:Th,has:uf,enforce:hT,getterFor:uT},Mp=Bi,fT=Ci,dT=fi,df=Ys,kp=Ba,gT=cf.CONFIGURABLE,pT=Ip,Fw=ff,mT=Fw.enforce,vT=Fw.get,Tw=String,gf=Object.defineProperty,yT=Mp("".slice),wT=Mp("".replace),bT=Mp([].join),CT=kp&&!fT(function(){return gf(function(){},"length",{value:8}).length!==8}),BT=String(String).split("String"),ST=Cw.exports=function(r,t,e){yT(Tw(t),0,7)==="Symbol("&&(t="["+wT(Tw(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),e&&e.getter&&(t="get "+t),e&&e.setter&&(t="set "+t),(!df(r,"name")||gT&&r.name!==t)&&(kp?gf(r,"name",{value:t,configurable:!0}):r.name=t),CT&&e&&df(e,"arity")&&r.length!==e.arity&&gf(r,"length",{value:e.arity});try{e&&df(e,"constructor")&&e.constructor?kp&&gf(r,"prototype",{writable:!1}):r.prototype&&(r.prototype=void 0)}catch{}var i=mT(r);return df(i,"source")||(i.source=bT(BT,typeof t=="string"?t:"")),r};Function.prototype.toString=ST(function(){return dT(this)&&vT(this).source||pT(this)},"toString");var Lw=Cw.exports,xT=fi,_T=xa,ET=Lw,FT=vp,tl=function(r,t,e,i){i||(i={});var s=i.enumerable,c=i.name!==void 0?i.name:t;if(xT(e)&&ET(e,c,i),i.global)s?r[t]=e:FT(t,e);else{try{i.unsafe?r[t]&&(s=!0):delete r[t]}catch{}s?r[t]=e:_T.f(r,t,{value:e,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return r},Iw={},TT=Math.ceil,LT=Math.floor,IT=Math.trunc||function(t){var e=+t;return(e>0?LT:TT)(e)},PT=IT,pf=function(r){var t=+r;return t!==t||t===0?0:PT(t)},UT=pf,OT=Math.max,QT=Math.min,Pw=function(r,t){var e=UT(r);return e<0?OT(e+t,0):QT(e,t)},NT=pf,MT=Math.min,sc=function(r){return r>0?MT(NT(r),9007199254740991):0},kT=sc,mf=function(r){return kT(r.length)},DT=Eh,RT=Pw,HT=mf,Uw=function(r){return function(t,e,i){var s=DT(t),c=HT(s),f=RT(i,c),a;if(r&&e!==e){for(;c>f;)if(a=s[f++],a!==a)return!0}else for(;c>f;f++)if((r||f in s)&&s[f]===e)return r||f||0;return!r&&-1}},Ow={includes:Uw(!0),indexOf:Uw(!1)},GT=Bi,Dp=Ys,VT=Eh,jT=Ow.indexOf,KT=Up,Qw=GT([].push),Nw=function(r,t){var e=VT(r),i=0,s=[],c;for(c in e)!Dp(KT,c)&&Dp(e,c)&&Qw(s,c);for(;t.length>i;)Dp(e,c=t[i++])&&(~jT(s,c)||Qw(s,c));return s},Rp=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],WT=Nw,XT=Rp,zT=XT.concat("length","prototype");Iw.f=Object.getOwnPropertyNames||function(t){return WT(t,zT)};var Mw={};Mw.f=Object.getOwnPropertySymbols;var qT=Zo,$T=Bi,YT=Iw,JT=Mw,ZT=Sn,tL=$T([].concat),eL=qT("Reflect","ownKeys")||function(t){var e=YT.f(ZT(t)),i=JT.f;return i?tL(e,i(t)):e},kw=Ys,rL=eL,iL=ec,nL=xa,sL=function(r,t,e){for(var i=rL(t),s=nL.f,c=iL.f,f=0;f<i.length;f++){var a=i[f];!kw(r,a)&&!(e&&kw(e,a))&&s(r,a,c(t,a))}},aL=Ci,AL=fi,oL=/#|\.prototype\./,Lh=function(r,t){var e=cL[lL(r)];return e===uL?!0:e===hL?!1:AL(t)?aL(t):!!t},lL=Lh.normalize=function(r){return String(r).replace(oL,".").toLowerCase()},cL=Lh.data={},hL=Lh.NATIVE="N",uL=Lh.POLYFILL="P",Dw=Lh,Hp=Pi,fL=ec.f,dL=Fh,gL=tl,pL=vp,mL=sL,vL=Dw,Un=function(r,t){var e=r.target,i=r.global,s=r.stat,c,f,a,n,l,h;if(i?f=Hp:s?f=Hp[e]||pL(e,{}):f=(Hp[e]||{}).prototype,f)for(a in t){if(l=t[a],r.dontCallGetSet?(h=fL(f,a),n=h&&h.value):n=f[a],c=vL(i?a:e+(s?".":"#")+a,r.forced),!c&&n!==void 0){if(typeof l==typeof n)continue;mL(l,n)}(r.sham||n&&n.sham)&&dL(l,"sham",!0),gL(f,a,l,r)}},yL=Pi,wL=Yo,Ih=wL(yL.process)==="process",bL=Bi,CL=iA,BL=function(r,t,e){try{return bL(CL(Object.getOwnPropertyDescriptor(r,t)[e]))}catch{}},SL=fi,xL=String,_L=TypeError,EL=function(r){if(typeof r=="object"||SL(r))return r;throw new _L("Can't set "+xL(r)+" as a prototype")},FL=BL,TL=Sn,LL=EL,Rw=Object.setPrototypeOf||("__proto__"in{}?function(){var r=!1,t={},e;try{e=FL(Object.prototype,"__proto__","set"),e(t,[]),r=t instanceof Array}catch{}return function(s,c){return TL(s),LL(c),r?e(s,c):s.__proto__=c,s}}():void 0),IL=xa.f,PL=Ys,UL=rn,Hw=UL("toStringTag"),vf=function(r,t,e){r&&!e&&(r=r.prototype),r&&!PL(r,Hw)&&IL(r,Hw,{configurable:!0,value:t})},Gw=Lw,OL=xa,QL=function(r,t,e){return e.get&&Gw(e.get,t,{getter:!0}),e.set&&Gw(e.set,t,{setter:!0}),OL.f(r,t,e)},NL=Zo,ML=QL,kL=rn,DL=Ba,Vw=kL("species"),RL=function(r){var t=NL(r);DL&&t&&!t[Vw]&&ML(t,Vw,{configurable:!0,get:function(){return this}})},HL=rf,GL=TypeError,VL=function(r,t){if(HL(t,r))return r;throw new GL("Incorrect invocation")},jL=rn,KL=jL("toStringTag"),jw={};jw[KL]="z";var WL=String(jw)==="[object z]",XL=WL,zL=fi,yf=Yo,qL=rn,$L=qL("toStringTag"),YL=Object,JL=yf(function(){return arguments}())==="Arguments",ZL=function(r,t){try{return r[t]}catch{}},Gp=XL?yf:function(r){var t,e,i;return r===void 0?"Undefined":r===null?"Null":typeof(e=ZL(t=YL(r),$L))=="string"?e:JL?yf(t):(i=yf(t))==="Object"&&zL(t.callee)?"Arguments":i},tI=Bi,eI=Ci,Kw=fi,rI=Gp,iI=Zo,nI=Ip,Ww=function(){},sI=[],Xw=iI("Reflect","construct"),Vp=/^\s*(?:class|function)\b/,aI=tI(Vp.exec),AI=!Vp.test(Ww),Ph=function(t){if(!Kw(t))return!1;try{return Xw(Ww,sI,t),!0}catch{return!1}},zw=function(t){if(!Kw(t))return!1;switch(rI(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return AI||!!aI(Vp,nI(t))}catch{return!0}};zw.sham=!0;var oI=!Xw||eI(function(){var r;return Ph(Ph.call)||!Ph(Object)||!Ph(function(){r=!0})||r})?zw:Ph,lI=oI,cI=af,hI=TypeError,uI=function(r){if(lI(r))return r;throw new hI(cI(r)+" is not a constructor")},qw=Sn,fI=uI,dI=Jo,gI=rn,pI=gI("species"),$w=function(r,t){var e=qw(r).constructor,i;return e===void 0||dI(i=qw(e)[pI])?t:fI(i)},mI=Zu,Yw=Function.prototype,Jw=Yw.apply,Zw=Yw.call,jp=typeof Reflect=="object"&&Reflect.apply||(mI?Zw.bind(Jw):function(){return Zw.apply(Jw,arguments)}),vI=Yo,yI=Bi,Uh=function(r){if(vI(r)==="Function")return yI(r)},t2=Uh,wI=iA,bI=Zu,CI=t2(t2.bind),Kp=function(r,t){return wI(r),t===void 0?r:bI?CI(r,t):function(){return r.apply(t,arguments)}},BI=Zo,e2=BI("document","documentElement"),SI=Bi,xI=SI([].slice),_I=TypeError,EI=function(r,t){if(r<t)throw new _I("Not enough arguments");return r},FI=nf,r2=/(?:ipad|iphone|ipod).*applewebkit/i.test(FI),ys=Pi,TI=jp,LI=Kp,i2=fi,II=Ys,n2=Ci,s2=e2,PI=xI,a2=of,UI=EI,OI=r2,QI=Ih,Wp=ys.setImmediate,Xp=ys.clearImmediate,NI=ys.process,zp=ys.Dispatch,MI=ys.Function,A2=ys.MessageChannel,kI=ys.String,qp=0,Oh={},o2="onreadystatechange",Qh,el,$p,Yp;n2(function(){Qh=ys.location});var Jp=function(r){if(II(Oh,r)){var t=Oh[r];delete Oh[r],t()}},Zp=function(r){return function(){Jp(r)}},l2=function(r){Jp(r.data)},c2=function(r){ys.postMessage(kI(r),Qh.protocol+"//"+Qh.host)};(!Wp||!Xp)&&(Wp=function(t){UI(arguments.length,1);var e=i2(t)?t:MI(t),i=PI(arguments,1);return Oh[++qp]=function(){TI(e,void 0,i)},el(qp),qp},Xp=function(t){delete Oh[t]},QI?el=function(r){NI.nextTick(Zp(r))}:zp&&zp.now?el=function(r){zp.now(Zp(r))}:A2&&!OI?($p=new A2,Yp=$p.port2,$p.port1.onmessage=l2,el=LI(Yp.postMessage,Yp)):ys.addEventListener&&i2(ys.postMessage)&&!ys.importScripts&&Qh&&Qh.protocol!=="file:"&&!n2(c2)?(el=c2,ys.addEventListener("message",l2,!1)):o2 in a2("script")?el=function(r){s2.appendChild(a2("script"))[o2]=function(){s2.removeChild(this),Jp(r)}}:el=function(r){setTimeout(Zp(r),0)});var h2={set:Wp,clear:Xp},u2=function(){this.head=null,this.tail=null};u2.prototype={add:function(r){var t={item:r,next:null},e=this.tail;e?e.next=t:this.head=t,this.tail=t},get:function(){var r=this.head;if(r){var t=this.head=r.next;return t===null&&(this.tail=null),r.item}}};var f2=u2,DI=nf,RI=/ipad|iphone|ipod/i.test(DI)&&typeof Pebble<"u",HI=nf,GI=/web0s(?!.*chrome)/i.test(HI),rl=Pi,d2=Kp,VI=ec.f,t0=h2.set,jI=f2,KI=r2,WI=RI,XI=GI,e0=Ih,g2=rl.MutationObserver||rl.WebKitMutationObserver,p2=rl.document,m2=rl.process,wf=rl.Promise,v2=VI(rl,"queueMicrotask"),r0=v2&&v2.value,ac,i0,n0,bf,y2;if(!r0){var Cf=new jI,Bf=function(){var r,t;for(e0&&(r=m2.domain)&&r.exit();t=Cf.get();)try{t()}catch(e){throw Cf.head&&ac(),e}r&&r.enter()};!KI&&!e0&&!XI&&g2&&p2?(i0=!0,n0=p2.createTextNode(""),new g2(Bf).observe(n0,{characterData:!0}),ac=function(){n0.data=i0=!i0}):!WI&&wf&&wf.resolve?(bf=wf.resolve(void 0),bf.constructor=wf,y2=d2(bf.then,bf),ac=function(){y2(Bf)}):e0?ac=function(){m2.nextTick(Bf)}:(t0=d2(t0,rl),ac=function(){t0(Bf)}),r0=function(r){Cf.head||ac(),Cf.add(r)}}var zI=r0,qI=function(r,t){try{arguments.length===1?console.error(r):console.error(r,t)}catch{}},s0=function(r){try{return{error:!1,value:r()}}catch(t){return{error:!0,value:t}}},$I=Pi,Sf=$I.Promise,w2=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",YI=w2,JI=Ih,ZI=!YI&&!JI&&typeof window=="object"&&typeof document=="object",tP=Pi,Nh=Sf,eP=fi,rP=Dw,iP=Ip,nP=rn,sP=ZI,aP=w2,a0=dp;Nh&&Nh.prototype;var AP=nP("species"),A0=!1,b2=eP(tP.PromiseRejectionEvent),oP=rP("Promise",function(){var r=iP(Nh),t=r!==String(Nh);if(!t&&a0===66)return!0;if(!a0||a0<51||!/native code/.test(r)){var e=new Nh(function(c){c(1)}),i=function(c){c(function(){},function(){})},s=e.constructor={};if(s[AP]=i,A0=e.then(function(){})instanceof i,!A0)return!0}return!t&&(sP||aP)&&!b2}),Mh={CONSTRUCTOR:oP,REJECTION_EVENT:b2,SUBCLASSING:A0},Ac={},C2=iA,lP=TypeError,cP=function(r){var t,e;this.promise=new r(function(i,s){if(t!==void 0||e!==void 0)throw new lP("Bad Promise constructor");t=i,e=s}),this.resolve=C2(t),this.reject=C2(e)};Ac.f=function(r){return new cP(r)};var hP=Un,xf=Ih,no=Pi,oc=cn,B2=tl,S2=Rw,uP=vf,fP=RL,dP=iA,_f=fi,gP=rA,pP=VL,mP=$w,x2=h2.set,o0=zI,vP=qI,yP=s0,wP=f2,_2=ff,Ef=Sf,l0=Mh,E2=Ac,Ff="Promise",F2=l0.CONSTRUCTOR,bP=l0.REJECTION_EVENT,CP=l0.SUBCLASSING,c0=_2.getterFor(Ff),BP=_2.set,lc=Ef&&Ef.prototype,il=Ef,Tf=lc,T2=no.TypeError,h0=no.document,u0=no.process,f0=E2.f,SP=f0,xP=!!(h0&&h0.createEvent&&no.dispatchEvent),L2="unhandledrejection",_P="rejectionhandled",I2=0,P2=1,EP=2,d0=1,U2=2,Lf,O2,FP,Q2,N2=function(r){var t;return gP(r)&&_f(t=r.then)?t:!1},M2=function(r,t){var e=t.value,i=t.state===P2,s=i?r.ok:r.fail,c=r.resolve,f=r.reject,a=r.domain,n,l,h;try{s?(i||(t.rejection===U2&&LP(t),t.rejection=d0),s===!0?n=e:(a&&a.enter(),n=s(e),a&&(a.exit(),h=!0)),n===r.promise?f(new T2("Promise-chain cycle")):(l=N2(n))?oc(l,n,c,f):c(n)):f(e)}catch(o){a&&!h&&a.exit(),f(o)}},k2=function(r,t){r.notified||(r.notified=!0,o0(function(){for(var e=r.reactions,i;i=e.get();)M2(i,r);r.notified=!1,t&&!r.rejection&&TP(r)}))},D2=function(r,t,e){var i,s;xP?(i=h0.createEvent("Event"),i.promise=t,i.reason=e,i.initEvent(r,!1,!0),no.dispatchEvent(i)):i={promise:t,reason:e},!bP&&(s=no["on"+r])?s(i):r===L2&&vP("Unhandled promise rejection",e)},TP=function(r){oc(x2,no,function(){var t=r.facade,e=r.value,i=R2(r),s;if(i&&(s=yP(function(){xf?u0.emit("unhandledRejection",e,t):D2(L2,t,e)}),r.rejection=xf||R2(r)?U2:d0,s.error))throw s.value})},R2=function(r){return r.rejection!==d0&&!r.parent},LP=function(r){oc(x2,no,function(){var t=r.facade;xf?u0.emit("rejectionHandled",t):D2(_P,t,r.value)})},cc=function(r,t,e){return function(i){r(t,i,e)}},hc=function(r,t,e){r.done||(r.done=!0,e&&(r=e),r.value=t,r.state=EP,k2(r,!0))},g0=function(r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(r.facade===t)throw new T2("Promise can't be resolved itself");var i=N2(t);i?o0(function(){var s={done:!1};try{oc(i,t,cc(g0,s,r),cc(hc,s,r))}catch(c){hc(s,c,r)}}):(r.value=t,r.state=P2,k2(r,!1))}catch(s){hc({done:!1},s,r)}}};if(F2&&(il=function(t){pP(this,Tf),dP(t),oc(Lf,this);var e=c0(this);try{t(cc(g0,e),cc(hc,e))}catch(i){hc(e,i)}},Tf=il.prototype,Lf=function(t){BP(this,{type:Ff,done:!1,notified:!1,parent:!1,reactions:new wP,rejection:!1,state:I2,value:void 0})},Lf.prototype=B2(Tf,"then",function(t,e){var i=c0(this),s=f0(mP(this,il));return i.parent=!0,s.ok=_f(t)?t:!0,s.fail=_f(e)&&e,s.domain=xf?u0.domain:void 0,i.state===I2?i.reactions.add(s):o0(function(){M2(s,i)}),s.promise}),O2=function(){var r=new Lf,t=c0(r);this.promise=r,this.resolve=cc(g0,t),this.reject=cc(hc,t)},E2.f=f0=function(r){return r===il||r===FP?new O2(r):SP(r)},_f(Ef)&&lc!==Object.prototype)){Q2=lc.then,CP||B2(lc,"then",function(t,e){var i=this;return new il(function(s,c){oc(Q2,i,s,c)}).then(t,e)},{unsafe:!0});try{delete lc.constructor}catch{}S2&&S2(lc,Tf)}hP({global:!0,constructor:!0,wrap:!0,forced:F2},{Promise:il}),uP(il,Ff,!1),fP(Ff);var kh={},IP=rn,PP=kh,UP=IP("iterator"),OP=Array.prototype,QP=function(r){return r!==void 0&&(PP.Array===r||OP[UP]===r)},NP=Gp,H2=rc,MP=Jo,kP=kh,DP=rn,RP=DP("iterator"),G2=function(r){if(!MP(r))return H2(r,RP)||H2(r,"@@iterator")||kP[NP(r)]},HP=cn,GP=iA,VP=Sn,jP=af,KP=G2,WP=TypeError,XP=function(r,t){var e=arguments.length<2?KP(r):t;if(GP(e))return VP(HP(e,r));throw new WP(jP(r)+" is not iterable")},zP=cn,V2=Sn,qP=rc,$P=function(r,t,e){var i,s;V2(r);try{if(i=qP(r,"return"),!i){if(t==="throw")throw e;return e}i=zP(i,r)}catch(c){s=!0,i=c}if(t==="throw")throw e;if(s)throw i;return V2(i),e},YP=Kp,JP=cn,ZP=Sn,tU=af,eU=QP,rU=mf,j2=rf,iU=XP,nU=G2,K2=$P,sU=TypeError,If=function(r,t){this.stopped=r,this.result=t},W2=If.prototype,X2=function(r,t,e){var i=e&&e.that,s=!!(e&&e.AS_ENTRIES),c=!!(e&&e.IS_RECORD),f=!!(e&&e.IS_ITERATOR),a=!!(e&&e.INTERRUPTED),n=YP(t,i),l,h,o,u,A,g,p,d=function(v){return l&&K2(l,"normal",v),new If(!0,v)},m=function(v){return s?(ZP(v),a?n(v[0],v[1],d):n(v[0],v[1])):a?n(v,d):n(v)};if(c)l=r.iterator;else if(f)l=r;else{if(h=nU(r),!h)throw new sU(tU(r)+" is not iterable");if(eU(h)){for(o=0,u=rU(r);u>o;o++)if(A=m(r[o]),A&&j2(W2,A))return A;return new If(!1)}l=iU(r,h)}for(g=c?r.next:l.next;!(p=JP(g,l)).done;){try{A=m(p.value)}catch(v){K2(l,"throw",v)}if(typeof A=="object"&&A&&j2(W2,A))return A}return new If(!1)},aU=rn,z2=aU("iterator"),q2=!1;try{var AU=0,$2={next:function(){return{done:!!AU++}},return:function(){q2=!0}};$2[z2]=function(){return this},Array.from($2,function(){throw 2})}catch{}var oU=function(r,t){try{if(!t&&!q2)return!1}catch{return!1}var e=!1;try{var i={};i[z2]=function(){return{next:function(){return{done:e=!0}}}},r(i)}catch{}return e},lU=Sf,cU=oU,hU=Mh.CONSTRUCTOR,Y2=hU||!cU(function(r){lU.all(r).then(void 0,function(){})}),uU=Un,fU=cn,dU=iA,gU=Ac,pU=s0,mU=X2,vU=Y2;uU({target:"Promise",stat:!0,forced:vU},{all:function(t){var e=this,i=gU.f(e),s=i.resolve,c=i.reject,f=pU(function(){var a=dU(e.resolve),n=[],l=0,h=1;mU(t,function(o){var u=l++,A=!1;h++,fU(a,e,o).then(function(g){A||(A=!0,n[u]=g,--h||s(n))},c)}),--h||s(n)});return f.error&&c(f.value),i.promise}});var yU=Un,wU=Mh.CONSTRUCTOR,p0=Sf,bU=Zo,CU=fi,BU=tl,J2=p0&&p0.prototype;if(yU({target:"Promise",proto:!0,forced:wU,real:!0},{catch:function(r){return this.then(void 0,r)}}),CU(p0)){var Z2=bU("Promise").prototype.catch;J2.catch!==Z2&&BU(J2,"catch",Z2,{unsafe:!0})}var SU=Un,xU=cn,_U=iA,EU=Ac,FU=s0,TU=X2,LU=Y2;SU({target:"Promise",stat:!0,forced:LU},{race:function(t){var e=this,i=EU.f(e),s=i.reject,c=FU(function(){var f=_U(e.resolve);TU(t,function(a){xU(f,e,a).then(i.resolve,s)})});return c.error&&s(c.value),i.promise}});var IU=Un,PU=cn,UU=Ac,OU=Mh.CONSTRUCTOR;IU({target:"Promise",stat:!0,forced:OU},{reject:function(t){var e=UU.f(this);return PU(e.reject,void 0,t),e.promise}});var QU=Sn,NU=rA,MU=Ac,kU=function(r,t){if(QU(r),NU(t)&&t.constructor===r)return t;var e=MU.f(r),i=e.resolve;return i(t),e.promise},DU=Un,RU=Zo,HU=Mh.CONSTRUCTOR,GU=kU;RU("Promise"),DU({target:"Promise",stat:!0,forced:HU},{resolve:function(t){return GU(this,t)}});function tb(r,t,e,i,s,c,f){try{var a=r[c](f),n=a.value}catch(l){e(l);return}a.done?t(n):Promise.resolve(n).then(i,s)}function nA(r){return function(){var t=this,e=arguments;return new Promise(function(i,s){var c=r.apply(t,e);function f(n){tb(c,i,s,f,a,"next",n)}function a(n){tb(c,i,s,f,a,"throw",n)}f(void 0)})}}var VU=Gp,jU=String,Ea=function(r){if(VU(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return jU(r)},KU=Sn,eb=function(){var r=KU(this),t="";return r.hasIndices&&(t+="d"),r.global&&(t+="g"),r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.dotAll&&(t+="s"),r.unicode&&(t+="u"),r.unicodeSets&&(t+="v"),r.sticky&&(t+="y"),t},m0=Ci,WU=Pi,v0=WU.RegExp,y0=m0(function(){var r=v0("a","y");return r.lastIndex=2,r.exec("abcd")!==null}),XU=y0||m0(function(){return!v0("a","y").sticky}),zU=y0||m0(function(){var r=v0("^r","gy");return r.lastIndex=2,r.exec("str")!==null}),rb={BROKEN_CARET:zU,MISSED_STICKY:XU,UNSUPPORTED_Y:y0},ib={},qU=Nw,$U=Rp,YU=Object.keys||function(t){return qU(t,$U)},JU=Ba,ZU=ww,tO=xa,eO=Sn,rO=Eh,iO=YU;ib.f=JU&&!ZU?Object.defineProperties:function(t,e){eO(t);for(var i=rO(e),s=iO(e),c=s.length,f=0,a;c>f;)tO.f(t,a=s[f++],i[a]);return t};var nO=Sn,sO=ib,nb=Rp,aO=Up,AO=e2,oO=of,lO=Pp,sb=">",ab="<",w0="prototype",b0="script",Ab=lO("IE_PROTO"),C0=function(){},ob=function(r){return ab+b0+sb+r+ab+"/"+b0+sb},lb=function(r){r.write(ob("")),r.close();var t=r.parentWindow.Object;return r=null,t},cO=function(){var r=oO("iframe"),t="java"+b0+":",e;return r.style.display="none",AO.appendChild(r),r.src=String(t),e=r.contentWindow.document,e.open(),e.write(ob("document.F=Object")),e.close(),e.F},Pf,Uf=function(){try{Pf=new ActiveXObject("htmlfile")}catch{}Uf=typeof document<"u"?document.domain&&Pf?lb(Pf):cO():lb(Pf);for(var r=nb.length;r--;)delete Uf[w0][nb[r]];return Uf()};aO[Ab]=!0;var B0=Object.create||function(t,e){var i;return t!==null?(C0[w0]=nO(t),i=new C0,C0[w0]=null,i[Ab]=t):i=Uf(),e===void 0?i:sO.f(i,e)},hO=Ci,uO=Pi,fO=uO.RegExp,dO=hO(function(){var r=fO(".","s");return!(r.dotAll&&r.test(`
`)&&r.flags==="s")}),gO=Ci,pO=Pi,mO=pO.RegExp,vO=gO(function(){var r=mO("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"}),uc=cn,Of=Bi,yO=Ea,wO=eb,bO=rb,CO=wp,BO=B0,SO=ff.get,xO=dO,_O=vO,EO=CO("native-string-replace",String.prototype.replace),Qf=RegExp.prototype.exec,S0=Qf,FO=Of("".charAt),TO=Of("".indexOf),LO=Of("".replace),x0=Of("".slice),_0=function(){var r=/a/,t=/b*/g;return uc(Qf,r,"a"),uc(Qf,t,"a"),r.lastIndex!==0||t.lastIndex!==0}(),cb=bO.BROKEN_CARET,E0=/()??/.exec("")[1]!==void 0,IO=_0||E0||cb||xO||_O;IO&&(S0=function(t){var e=this,i=SO(e),s=yO(t),c=i.raw,f,a,n,l,h,o,u;if(c)return c.lastIndex=e.lastIndex,f=uc(S0,c,s),e.lastIndex=c.lastIndex,f;var A=i.groups,g=cb&&e.sticky,p=uc(wO,e),d=e.source,m=0,v=s;if(g&&(p=LO(p,"y",""),TO(p,"g")===-1&&(p+="g"),v=x0(s,e.lastIndex),e.lastIndex>0&&(!e.multiline||e.multiline&&FO(s,e.lastIndex-1)!==`
`)&&(d="(?: "+d+")",v=" "+v,m++),a=new RegExp("^(?:"+d+")",p)),E0&&(a=new RegExp("^"+d+"$(?!\\s)",p)),_0&&(n=e.lastIndex),l=uc(Qf,g?a:e,v),g?l?(l.input=x0(l.input,m),l[0]=x0(l[0],m),l.index=e.lastIndex,e.lastIndex+=l[0].length):e.lastIndex=0:_0&&l&&(e.lastIndex=e.global?l.index+l[0].length:n),E0&&l&&l.length>1&&uc(EO,l[0],a,function(){for(h=1;h<arguments.length-2;h++)arguments[h]===void 0&&(l[h]=void 0)}),l&&A)for(l.groups=o=BO(null),h=0;h<A.length;h++)u=A[h],o[u[0]]=l[u[1]];return l});var Nf=S0,PO=Un,hb=Nf;PO({target:"RegExp",proto:!0,forced:/./.exec!==hb},{exec:hb});var ub=Uh,fb=tl,UO=Nf,db=Ci,gb=rn,OO=Fh,QO=gb("species"),F0=RegExp.prototype,T0=function(r,t,e,i){var s=gb(r),c=!db(function(){var l={};return l[s]=function(){return 7},""[r](l)!==7}),f=c&&!db(function(){var l=!1,h=/a/;return r==="split"&&(h={},h.constructor={},h.constructor[QO]=function(){return h},h.flags="",h[s]=/./[s]),h.exec=function(){return l=!0,null},h[s](""),!l});if(!c||!f||e){var a=ub(/./[s]),n=t(s,""[r],function(l,h,o,u,A){var g=ub(l),p=h.exec;return p===UO||p===F0.exec?c&&!A?{done:!0,value:a(h,o,u)}:{done:!0,value:g(o,h,u)}:{done:!1}});fb(String.prototype,r,n[0]),fb(F0,s,n[1])}i&&OO(F0[s],"sham",!0)},L0=Bi,NO=pf,MO=Ea,kO=Sa,DO=L0("".charAt),pb=L0("".charCodeAt),RO=L0("".slice),mb=function(r){return function(t,e){var i=MO(kO(t)),s=NO(e),c=i.length,f,a;return s<0||s>=c?r?"":void 0:(f=pb(i,s),f<55296||f>56319||s+1===c||(a=pb(i,s+1))<56320||a>57343?r?DO(i,s):f:r?RO(i,s,s+2):(f-55296<<10)+(a-56320)+65536)}},HO={codeAt:mb(!1),charAt:mb(!0)},GO=HO.charAt,I0=function(r,t,e){return t+(e?GO(r,t).length:1)},vb=cn,VO=Sn,jO=fi,KO=Yo,WO=Nf,XO=TypeError,P0=function(r,t){var e=r.exec;if(jO(e)){var i=vb(e,r,t);return i!==null&&VO(i),i}if(KO(r)==="RegExp")return vb(WO,r,t);throw new XO("RegExp#exec called on incompatible receiver")},zO=cn,qO=T0,$O=Sn,YO=Jo,JO=sc,U0=Ea,ZO=Sa,tQ=rc,eQ=I0,yb=P0;qO("match",function(r,t,e){return[function(s){var c=ZO(this),f=YO(s)?void 0:tQ(s,r);return f?zO(f,s,c):new RegExp(s)[r](U0(c))},function(i){var s=$O(this),c=U0(i),f=e(t,s,c);if(f.done)return f.value;if(!s.global)return yb(s,c);var a=s.unicode;s.lastIndex=0;for(var n=[],l=0,h;(h=yb(s,c))!==null;){var o=U0(h[0]);n[l]=o,o===""&&(s.lastIndex=eQ(c,JO(s.lastIndex),a)),l++}return l===0?null:n}]});var O0=Bi,rQ=Af,iQ=Math.floor,Q0=O0("".charAt),nQ=O0("".replace),N0=O0("".slice),sQ=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,aQ=/\$([$&'`]|\d{1,2})/g,AQ=function(r,t,e,i,s,c){var f=e+r.length,a=i.length,n=aQ;return s!==void 0&&(s=rQ(s),n=sQ),nQ(c,n,function(l,h){var o;switch(Q0(h,0)){case"$":return"$";case"&":return r;case"`":return N0(t,0,e);case"'":return N0(t,f);case"<":o=s[N0(h,1,-1)];break;default:var u=+h;if(u===0)return l;if(u>a){var A=iQ(u/10);return A===0?l:A<=a?i[A-1]===void 0?Q0(h,1):i[A-1]+Q0(h,1):l}o=i[u-1]}return o===void 0?"":o})},oQ=jp,wb=cn,Mf=Bi,lQ=T0,cQ=Ci,hQ=Sn,uQ=fi,fQ=Jo,dQ=pf,gQ=sc,fc=Ea,pQ=Sa,mQ=I0,vQ=rc,yQ=AQ,wQ=P0,bQ=rn,M0=bQ("replace"),CQ=Math.max,BQ=Math.min,SQ=Mf([].concat),k0=Mf([].push),bb=Mf("".indexOf),Cb=Mf("".slice),xQ=function(r){return r===void 0?r:String(r)},_Q=function(){return"a".replace(/./,"$0")==="$0"}(),Bb=function(){return/./[M0]?/./[M0]("a","$0")==="":!1}(),EQ=!cQ(function(){var r=/./;return r.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(r,"$<a>")!=="7"});lQ("replace",function(r,t,e){var i=Bb?"$":"$0";return[function(c,f){var a=pQ(this),n=fQ(c)?void 0:vQ(c,M0);return n?wb(n,c,a,f):wb(t,fc(a),c,f)},function(s,c){var f=hQ(this),a=fc(s);if(typeof c=="string"&&bb(c,i)===-1&&bb(c,"$<")===-1){var n=e(t,f,a,c);if(n.done)return n.value}var l=uQ(c);l||(c=fc(c));var h=f.global,o;h&&(o=f.unicode,f.lastIndex=0);for(var u=[],A;A=wQ(f,a),!(A===null||(k0(u,A),!h));){var g=fc(A[0]);g===""&&(f.lastIndex=mQ(a,gQ(f.lastIndex),o))}for(var p="",d=0,m=0;m<u.length;m++){A=u[m];for(var v=fc(A[0]),C=CQ(BQ(dQ(A.index),a.length),0),x=[],E,L=1;L<A.length;L++)k0(x,xQ(A[L]));var U=A.groups;if(l){var O=SQ([v],x,C,a);U!==void 0&&k0(O,U),E=fc(oQ(c,void 0,O))}else E=yQ(v,a,C,x,U,c);C>=d&&(p+=Cb(a,d,C)+E,d=C+v.length)}return p+Cb(a,d)}]},!EQ||!_Q||Bb);var FQ=rA,TQ=Yo,LQ=rn,IQ=LQ("match"),Sb=function(r){var t;return FQ(r)&&((t=r[IQ])!==void 0?!!t:TQ(r)==="RegExp")},PQ=Sb,UQ=TypeError,D0=function(r){if(PQ(r))throw new UQ("The method doesn't accept regular expressions");return r},OQ=rn,QQ=OQ("match"),R0=function(r){var t=/./;try{"/./"[r](t)}catch{try{return t[QQ]=!1,"/./"[r](t)}catch{}}return!1},NQ=Un,xb=Uh,MQ=ec.f,kQ=sc,_b=Ea,DQ=D0,RQ=Sa,HQ=R0,Eb=xb("".startsWith),GQ=xb("".slice),VQ=Math.min,Fb=HQ("startsWith"),jQ=!Fb&&!!function(){var r=MQ(String.prototype,"startsWith");return r&&!r.writable}();NQ({target:"String",proto:!0,forced:!jQ&&!Fb},{startsWith:function(t){var e=_b(RQ(this));DQ(t);var i=kQ(VQ(arguments.length>1?arguments[1]:void 0,e.length)),s=_b(t);return Eb?Eb(e,s,i):GQ(e,i,i+s.length)===s}});var KQ=rn,WQ=B0,XQ=xa.f,H0=KQ("unscopables"),G0=Array.prototype;G0[H0]===void 0&&XQ(G0,H0,{configurable:!0,value:WQ(null)});var zQ=function(r){G0[H0][r]=!0},qQ=Ci,$Q=!qQ(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype}),YQ=Ys,JQ=fi,ZQ=Af,tN=Pp,eN=$Q,Tb=tN("IE_PROTO"),V0=Object,rN=V0.prototype,Lb=eN?V0.getPrototypeOf:function(r){var t=ZQ(r);if(YQ(t,Tb))return t[Tb];var e=t.constructor;return JQ(e)&&t instanceof e?e.prototype:t instanceof V0?rN:null},iN=Ci,nN=fi,sN=rA,Ib=Lb,aN=tl,AN=rn,j0=AN("iterator"),Pb=!1,nl,K0,W0;[].keys&&(W0=[].keys(),"next"in W0?(K0=Ib(Ib(W0)),K0!==Object.prototype&&(nl=K0)):Pb=!0);var oN=!sN(nl)||iN(function(){var r={};return nl[j0].call(r)!==r});oN&&(nl={}),nN(nl[j0])||aN(nl,j0,function(){return this});var Ub={IteratorPrototype:nl,BUGGY_SAFARI_ITERATORS:Pb},lN=Ub.IteratorPrototype,cN=B0,hN=ef,uN=vf,fN=kh,dN=function(){return this},gN=function(r,t,e,i){var s=t+" Iterator";return r.prototype=cN(lN,{next:hN(+!i,e)}),uN(r,s,!1),fN[s]=dN,r},pN=Un,mN=cn,Ob=cf,vN=fi,yN=gN,Qb=Lb,Nb=Rw,wN=vf,bN=Fh,X0=tl,CN=rn,BN=kh,Mb=Ub,SN=Ob.PROPER,xN=Ob.CONFIGURABLE,kb=Mb.IteratorPrototype,kf=Mb.BUGGY_SAFARI_ITERATORS,Dh=CN("iterator"),Db="keys",Rh="values",Rb="entries",_N=function(){return this},EN=function(r,t,e,i,s,c,f){yN(e,t,i);var a=function(m){if(m===s&&u)return u;if(!kf&&m&&m in h)return h[m];switch(m){case Db:return function(){return new e(this,m)};case Rh:return function(){return new e(this,m)};case Rb:return function(){return new e(this,m)}}return function(){return new e(this)}},n=t+" Iterator",l=!1,h=r.prototype,o=h[Dh]||h["@@iterator"]||s&&h[s],u=!kf&&o||a(s),A=t==="Array"&&h.entries||o,g,p,d;if(A&&(g=Qb(A.call(new r)),g!==Object.prototype&&g.next&&(Qb(g)!==kb&&(Nb?Nb(g,kb):vN(g[Dh])||X0(g,Dh,_N)),wN(g,n,!0))),SN&&s===Rh&&o&&o.name!==Rh&&(xN?bN(h,"name",Rh):(l=!0,u=function(){return mN(o,this)})),s)if(p={values:a(Rh),keys:c?u:a(Db),entries:a(Rb)},f)for(d in p)(kf||l||!(d in h))&&X0(h,d,p[d]);else pN({target:t,proto:!0,forced:kf||l},p);return h[Dh]!==u&&X0(h,Dh,u,{name:s}),BN[t]=u,p},FN=function(r,t){return{value:r,done:t}},TN=Eh,z0=zQ,Hb=kh,Gb=ff,LN=xa.f,IN=EN,Df=FN,PN=Ba,Vb="Array Iterator",UN=Gb.set,ON=Gb.getterFor(Vb),QN=IN(Array,"Array",function(r,t){UN(this,{type:Vb,target:TN(r),index:0,kind:t})},function(){var r=ON(this),t=r.target,e=r.index++;if(!t||e>=t.length)return r.target=void 0,Df(void 0,!0);switch(r.kind){case"keys":return Df(e,!1);case"values":return Df(t[e],!1)}return Df([e,t[e]],!1)},"values"),jb=Hb.Arguments=Hb.Array;if(z0("keys"),z0("values"),z0("entries"),PN&&jb.name!=="values")try{LN(jb,"name",{value:"values"})}catch{}var NN={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},MN=of,q0=MN("span").classList,Kb=q0&&q0.constructor&&q0.constructor.prototype,kN=Kb===Object.prototype?void 0:Kb,Wb=Pi,Xb=NN,DN=kN,Hh=QN,zb=Fh,RN=vf,HN=rn,$0=HN("iterator"),Y0=Hh.values,qb=function(r,t){if(r){if(r[$0]!==Y0)try{zb(r,$0,Y0)}catch{r[$0]=Y0}if(RN(r,t,!0),Xb[t]){for(var e in Hh)if(r[e]!==Hh[e])try{zb(r,e,Hh[e])}catch{r[e]=Hh[e]}}}};for(var J0 in Xb)qb(Wb[J0]&&Wb[J0].prototype,J0);qb(DN,"DOMTokenList");function GN(r,t){if(dr(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var i=e.call(r,t||"default");if(dr(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function VN(r){var t=GN(r,"string");return dr(t)==="symbol"?t:String(t)}function Z0(r,t,e){return t=VN(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var jN=iA,KN=Af,WN=qy,XN=mf,zN=TypeError,$b=function(r){return function(t,e,i,s){var c=KN(t),f=WN(c),a=XN(c);jN(e);var n=r?a-1:0,l=r?-1:1;if(i<2)for(;;){if(n in f){s=f[n],n+=l;break}if(n+=l,r?n<0:a<=n)throw new zN("Reduce of empty array with no initial value")}for(;r?n>=0:a>n;n+=l)n in f&&(s=e(s,f[n],n,c));return s}},qN={left:$b(!1),right:$b(!0)},$N=Ci,Yb=function(r,t){var e=[][r];return!!e&&$N(function(){e.call(null,t||function(){return 1},1)})},YN=Un,JN=qN.left,ZN=Yb,Jb=dp,tM=Ih,eM=!tM&&Jb>79&&Jb<83,rM=eM||!ZN("reduce");YN({target:"Array",proto:!0,forced:rM},{reduce:function(t){var e=arguments.length;return JN(this,t,e,e>1?arguments[1]:void 0)}});var iM=Un,Zb=Uh,nM=ec.f,sM=sc,tC=Ea,aM=D0,AM=Sa,oM=R0,eC=Zb("".endsWith),lM=Zb("".slice),cM=Math.min,rC=oM("endsWith"),hM=!rC&&!!function(){var r=nM(String.prototype,"endsWith");return r&&!r.writable}();iM({target:"String",proto:!0,forced:!hM&&!rC},{endsWith:function(t){var e=tC(AM(this));aM(t);var i=arguments.length>1?arguments[1]:void 0,s=e.length,c=i===void 0?s:cM(sM(i),s),f=tC(t);return eC?eC(e,f,c):lM(e,c-f.length,c)===f}});var uM=Cp,fM=xa,dM=ef,gM=function(r,t,e){var i=uM(t);i in r?fM.f(r,i,dM(0,e)):r[i]=e},iC=Pw,pM=mf,mM=gM,vM=Array,yM=Math.max,wM=function(r,t,e){for(var i=pM(r),s=iC(t,i),c=iC(e===void 0?i:e,i),f=vM(yM(c-s,0)),a=0;s<c;s++,a++)mM(f,a,r[s]);return f.length=a,f},bM=jp,Gh=cn,tm=Bi,CM=T0,BM=Sn,SM=Jo,xM=Sb,nC=Sa,_M=$w,EM=I0,FM=sc,em=Ea,TM=rc,sC=wM,aC=P0,LM=Nf,IM=rb,PM=Ci,dc=IM.UNSUPPORTED_Y,AC=4294967295,UM=Math.min,oC=[].push,OM=tm(/./.exec),gc=tm(oC),Vh=tm("".slice),QM=!PM(function(){var r=/(?:)/,t=r.exec;r.exec=function(){return t.apply(this,arguments)};var e="ab".split(r);return e.length!==2||e[0]!=="a"||e[1]!=="b"});CM("split",function(r,t,e){var i;return"abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length?i=function(s,c){var f=em(nC(this)),a=c===void 0?AC:c>>>0;if(a===0)return[];if(s===void 0)return[f];if(!xM(s))return Gh(t,f,s,a);for(var n=[],l=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(s.sticky?"y":""),h=0,o=new RegExp(s.source,l+"g"),u,A,g;(u=Gh(LM,o,f))&&(A=o.lastIndex,!(A>h&&(gc(n,Vh(f,h,u.index)),u.length>1&&u.index<f.length&&bM(oC,n,sC(u,1)),g=u[0].length,h=A,n.length>=a)));)o.lastIndex===u.index&&o.lastIndex++;return h===f.length?(g||!OM(o,""))&&gc(n,""):gc(n,Vh(f,h)),n.length>a?sC(n,0,a):n}:"0".split(void 0,0).length?i=function(s,c){return s===void 0&&c===0?[]:Gh(t,this,s,c)}:i=t,[function(c,f){var a=nC(this),n=SM(c)?void 0:TM(c,r);return n?Gh(n,c,a,f):Gh(i,em(a),c,f)},function(s,c){var f=BM(this),a=em(s),n=e(i,f,a,c,i!==t);if(n.done)return n.value;var l=_M(f,RegExp),h=f.unicode,o=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(dc?"g":"y"),u=new l(dc?"^(?:"+f.source+")":f,o),A=c===void 0?AC:c>>>0;if(A===0)return[];if(a.length===0)return aC(u,a)===null?[a]:[];for(var g=0,p=0,d=[];p<a.length;){u.lastIndex=dc?0:p;var m=aC(u,dc?Vh(a,p):a),v;if(m===null||(v=UM(FM(u.lastIndex+(dc?p:0)),a.length))===g)p=EM(a,p,h);else{if(gc(d,Vh(a,g,p)),d.length===A)return d;for(var C=1;C<=m.length-1;C++)if(gc(d,m[C]),d.length===A)return d;p=g=v}}return gc(d,Vh(a,g)),d}]},!QM,dc);var Rf={exports:{}},jh={exports:{}};(function(){var r,t,e,i,s,c;typeof performance<"u"&&performance!==null&&performance.now?jh.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(jh.exports=function(){return(r()-s)/1e6},t=process.hrtime,r=function(){var f;return f=t(),f[0]*1e9+f[1]},i=r(),c=process.uptime()*1e9,s=i-c):Date.now?(jh.exports=function(){return Date.now()-e},e=Date.now()):(jh.exports=function(){return new Date().getTime()-e},e=new Date().getTime())}).call(YA);for(var NM=jh.exports,MM=NM,sA=typeof window>"u"?YA:window,Hf=["moz","webkit"],pc="AnimationFrame",mc=sA["request"+pc],Kh=sA["cancel"+pc]||sA["cancelRequest"+pc],Wh=0;!mc&&Wh<Hf.length;Wh++)mc=sA[Hf[Wh]+"Request"+pc],Kh=sA[Hf[Wh]+"Cancel"+pc]||sA[Hf[Wh]+"CancelRequest"+pc];if(!mc||!Kh){var rm=0,lC=0,sl=[],kM=1e3/60;mc=function(r){if(sl.length===0){var t=MM(),e=Math.max(0,kM-(t-rm));rm=e+t,setTimeout(function(){var i=sl.slice(0);sl.length=0;for(var s=0;s<i.length;s++)if(!i[s].cancelled)try{i[s].callback(rm)}catch(c){setTimeout(function(){throw c},0)}},Math.round(e))}return sl.push({handle:++lC,callback:r,cancelled:!1}),lC},Kh=function(r){for(var t=0;t<sl.length;t++)sl[t].handle===r&&(sl[t].cancelled=!0)}}Rf.exports=function(r){return mc.call(sA,r)},Rf.exports.cancel=function(){Kh.apply(sA,arguments)},Rf.exports.polyfill=function(r){r||(r=sA),r.requestAnimationFrame=mc,r.cancelAnimationFrame=Kh};var DM=Rf.exports,im=qo(DM),cC=`	
\v\f\r                　\u2028\u2029\uFEFF`,RM=Bi,HM=Sa,GM=Ea,nm=cC,hC=RM("".replace),VM=RegExp("^["+nm+"]+"),jM=RegExp("(^|[^"+nm+"])["+nm+"]+$"),sm=function(r){return function(t){var e=GM(HM(t));return r&1&&(e=hC(e,VM,"")),r&2&&(e=hC(e,jM,"$1")),e}},KM={start:sm(1),end:sm(2),trim:sm(3)},WM=cf.PROPER,XM=Ci,uC=cC,fC="​᠎",zM=function(r){return XM(function(){return!!uC[r]()||fC[r]()!==fC||WM&&uC[r].name!==r})},qM=Un,$M=KM.trim,YM=zM;qM({target:"String",proto:!0,forced:YM("trim")},{trim:function(){return $M(this)}});var JM=function(r){this.ok=!1,this.alpha=1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r=r.replace(/ /g,""),r=r.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};r=t[r]||r;for(var e=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(n){return[parseInt(n[1]),parseInt(n[2]),parseInt(n[3]),parseFloat(n[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(n){return[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}}],i=0;i<e.length;i++){var s=e[i].re,c=e[i].process,f=s.exec(r);if(f){var a=c(f);this.r=a[0],this.g=a[1],this.b=a[2],a.length>3&&(this.alpha=a[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var n=this.r.toString(16),l=this.g.toString(16),h=this.b.toString(16);return n.length==1&&(n="0"+n),l.length==1&&(l="0"+l),h.length==1&&(h="0"+h),"#"+n+l+h},this.getHelpXML=function(){for(var n=new Array,l=0;l<e.length;l++)for(var h=e[l].example,o=0;o<h.length;o++)n[n.length]=h[o];for(var u in t)n[n.length]=u;var A=document.createElement("ul");A.setAttribute("id","rgbcolor-examples");for(var l=0;l<n.length;l++)try{var g=document.createElement("li"),p=new RGBColor(n[l]),d=document.createElement("div");d.style.cssText="margin: 3px; border: 1px solid black; background:"+p.toHex()+"; color:"+p.toHex(),d.appendChild(document.createTextNode("test"));var m=document.createTextNode(" "+n[l]+" -> "+p.toRGB()+" -> "+p.toHex());g.appendChild(d),g.appendChild(m),A.appendChild(g)}catch{}return A}},am=qo(JM),ZM=Un,tk=Uh,ek=Ow.indexOf,rk=Yb,Am=tk([].indexOf),dC=!!Am&&1/Am([1],1,-0)<0,ik=dC||!rk("indexOf");ZM({target:"Array",proto:!0,forced:ik},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return dC?Am(this,t,e)||0:ek(this,t,e)}});var nk=Un,sk=Bi,ak=D0,Ak=Sa,gC=Ea,ok=R0,lk=sk("".indexOf);nk({target:"String",proto:!0,forced:!ok("includes")},{includes:function(t){return!!~lk(gC(Ak(this)),gC(ak(t)),arguments.length>1?arguments[1]:void 0)}});var ck=Yo,hk=Array.isArray||function(t){return ck(t)==="Array"},uk=Un,fk=Bi,dk=hk,gk=fk([].reverse),pC=[1,2];uk({target:"Array",proto:!0,forced:String(pC)===String(pC.reverse())},{reverse:function(){return dk(this)&&(this.length=this.length),gk(this)}});/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var mC=function(r,t){return(mC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])})(r,t)};function vC(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}mC(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function pk(r){var t="";Array.isArray(r)||(r=[r]);for(var e=0;e<r.length;e++){var i=r[e];if(i.type===ne.CLOSE_PATH)t+="z";else if(i.type===ne.HORIZ_LINE_TO)t+=(i.relative?"h":"H")+i.x;else if(i.type===ne.VERT_LINE_TO)t+=(i.relative?"v":"V")+i.y;else if(i.type===ne.MOVE_TO)t+=(i.relative?"m":"M")+i.x+" "+i.y;else if(i.type===ne.LINE_TO)t+=(i.relative?"l":"L")+i.x+" "+i.y;else if(i.type===ne.CURVE_TO)t+=(i.relative?"c":"C")+i.x1+" "+i.y1+" "+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===ne.SMOOTH_CURVE_TO)t+=(i.relative?"s":"S")+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===ne.QUAD_TO)t+=(i.relative?"q":"Q")+i.x1+" "+i.y1+" "+i.x+" "+i.y;else if(i.type===ne.SMOOTH_QUAD_TO)t+=(i.relative?"t":"T")+i.x+" "+i.y;else{if(i.type!==ne.ARC)throw new Error('Unexpected command type "'+i.type+'" at index '+e+".");t+=(i.relative?"a":"A")+i.rX+" "+i.rY+" "+i.xRot+" "+ +i.lArcFlag+" "+ +i.sweepFlag+" "+i.x+" "+i.y}}return t}function om(r,t){var e=r[0],i=r[1];return[e*Math.cos(t)-i*Math.sin(t),e*Math.sin(t)+i*Math.cos(t)]}function Js(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=0;e<r.length;e++)if(typeof r[e]!="number")throw new Error("assertNumbers arguments["+e+"] is not a number. "+typeof r[e]+" == typeof "+r[e]);return!0}var so=Math.PI;function lm(r,t,e){r.lArcFlag=r.lArcFlag===0?0:1,r.sweepFlag=r.sweepFlag===0?0:1;var i=r.rX,s=r.rY,c=r.x,f=r.y;i=Math.abs(r.rX),s=Math.abs(r.rY);var a=om([(t-c)/2,(e-f)/2],-r.xRot/180*so),n=a[0],l=a[1],h=Math.pow(n,2)/Math.pow(i,2)+Math.pow(l,2)/Math.pow(s,2);1<h&&(i*=Math.sqrt(h),s*=Math.sqrt(h)),r.rX=i,r.rY=s;var o=Math.pow(i,2)*Math.pow(l,2)+Math.pow(s,2)*Math.pow(n,2),u=(r.lArcFlag!==r.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(s,2)-o)/o)),A=i*l/s*u,g=-s*n/i*u,p=om([A,g],r.xRot/180*so);r.cX=p[0]+(t+c)/2,r.cY=p[1]+(e+f)/2,r.phi1=Math.atan2((l-g)/s,(n-A)/i),r.phi2=Math.atan2((-l-g)/s,(-n-A)/i),r.sweepFlag===0&&r.phi2>r.phi1&&(r.phi2-=2*so),r.sweepFlag===1&&r.phi2<r.phi1&&(r.phi2+=2*so),r.phi1*=180/so,r.phi2*=180/so}function yC(r,t,e){Js(r,t,e);var i=r*r+t*t-e*e;if(0>i)return[];if(i===0)return[[r*e/(r*r+t*t),t*e/(r*r+t*t)]];var s=Math.sqrt(i);return[[(r*e+t*s)/(r*r+t*t),(t*e-r*s)/(r*r+t*t)],[(r*e-t*s)/(r*r+t*t),(t*e+r*s)/(r*r+t*t)]]}var Ui,aA=Math.PI/180;function wC(r,t,e){return(1-e)*r+e*t}function bC(r,t,e,i){return r+Math.cos(i/180*so)*t+Math.sin(i/180*so)*e}function CC(r,t,e,i){var s=1e-6,c=t-r,f=e-t,a=3*c+3*(i-e)-6*f,n=6*(f-c),l=3*c;return Math.abs(a)<s?[-l/n]:function(h,o,u){var A=h*h/4-o;if(A<-u)return[];if(A<=u)return[-h/2];var g=Math.sqrt(A);return[-h/2-g,-h/2+g]}(n/a,l/a,s)}function BC(r,t,e,i,s){var c=1-s;return r*(c*c*c)+t*(3*c*c*s)+e*(3*c*s*s)+i*(s*s*s)}(function(r){function t(){return s(function(a,n,l){return a.relative&&(a.x1!==void 0&&(a.x1+=n),a.y1!==void 0&&(a.y1+=l),a.x2!==void 0&&(a.x2+=n),a.y2!==void 0&&(a.y2+=l),a.x!==void 0&&(a.x+=n),a.y!==void 0&&(a.y+=l),a.relative=!1),a})}function e(){var a=NaN,n=NaN,l=NaN,h=NaN;return s(function(o,u,A){return o.type&ne.SMOOTH_CURVE_TO&&(o.type=ne.CURVE_TO,a=isNaN(a)?u:a,n=isNaN(n)?A:n,o.x1=o.relative?u-a:2*u-a,o.y1=o.relative?A-n:2*A-n),o.type&ne.CURVE_TO?(a=o.relative?u+o.x2:o.x2,n=o.relative?A+o.y2:o.y2):(a=NaN,n=NaN),o.type&ne.SMOOTH_QUAD_TO&&(o.type=ne.QUAD_TO,l=isNaN(l)?u:l,h=isNaN(h)?A:h,o.x1=o.relative?u-l:2*u-l,o.y1=o.relative?A-h:2*A-h),o.type&ne.QUAD_TO?(l=o.relative?u+o.x1:o.x1,h=o.relative?A+o.y1:o.y1):(l=NaN,h=NaN),o})}function i(){var a=NaN,n=NaN;return s(function(l,h,o){if(l.type&ne.SMOOTH_QUAD_TO&&(l.type=ne.QUAD_TO,a=isNaN(a)?h:a,n=isNaN(n)?o:n,l.x1=l.relative?h-a:2*h-a,l.y1=l.relative?o-n:2*o-n),l.type&ne.QUAD_TO){a=l.relative?h+l.x1:l.x1,n=l.relative?o+l.y1:l.y1;var u=l.x1,A=l.y1;l.type=ne.CURVE_TO,l.x1=((l.relative?0:h)+2*u)/3,l.y1=((l.relative?0:o)+2*A)/3,l.x2=(l.x+2*u)/3,l.y2=(l.y+2*A)/3}else a=NaN,n=NaN;return l})}function s(a){var n=0,l=0,h=NaN,o=NaN;return function(u){if(isNaN(h)&&!(u.type&ne.MOVE_TO))throw new Error("path must start with moveto");var A=a(u,n,l,h,o);return u.type&ne.CLOSE_PATH&&(n=h,l=o),u.x!==void 0&&(n=u.relative?n+u.x:u.x),u.y!==void 0&&(l=u.relative?l+u.y:u.y),u.type&ne.MOVE_TO&&(h=n,o=l),A}}function c(a,n,l,h,o,u){return Js(a,n,l,h,o,u),s(function(A,g,p,d){var m=A.x1,v=A.x2,C=A.relative&&!isNaN(d),x=A.x!==void 0?A.x:C?0:g,E=A.y!==void 0?A.y:C?0:p;function L(P){return P*P}A.type&ne.HORIZ_LINE_TO&&n!==0&&(A.type=ne.LINE_TO,A.y=A.relative?0:p),A.type&ne.VERT_LINE_TO&&l!==0&&(A.type=ne.LINE_TO,A.x=A.relative?0:g),A.x!==void 0&&(A.x=A.x*a+E*l+(C?0:o)),A.y!==void 0&&(A.y=x*n+A.y*h+(C?0:u)),A.x1!==void 0&&(A.x1=A.x1*a+A.y1*l+(C?0:o)),A.y1!==void 0&&(A.y1=m*n+A.y1*h+(C?0:u)),A.x2!==void 0&&(A.x2=A.x2*a+A.y2*l+(C?0:o)),A.y2!==void 0&&(A.y2=v*n+A.y2*h+(C?0:u));var U=a*h-n*l;if(A.xRot!==void 0&&(a!==1||n!==0||l!==0||h!==1))if(U===0)delete A.rX,delete A.rY,delete A.xRot,delete A.lArcFlag,delete A.sweepFlag,A.type=ne.LINE_TO;else{var O=A.xRot*Math.PI/180,X=Math.sin(O),rt=Math.cos(O),M=1/L(A.rX),H=1/L(A.rY),J=L(rt)*M+L(X)*H,$=2*X*rt*(M-H),ht=L(X)*M+L(rt)*H,ut=J*h*h-$*n*h+ht*n*n,pt=$*(a*h+n*l)-2*(J*l*h+ht*a*n),ft=J*l*l-$*a*l+ht*a*a,R=(Math.atan2(pt,ut-ft)+Math.PI)%Math.PI/2,G=Math.sin(R),it=Math.cos(R);A.rX=Math.abs(U)/Math.sqrt(ut*L(it)+pt*G*it+ft*L(G)),A.rY=Math.abs(U)/Math.sqrt(ut*L(G)-pt*G*it+ft*L(it)),A.xRot=180*R/Math.PI}return A.sweepFlag!==void 0&&0>U&&(A.sweepFlag=+!A.sweepFlag),A})}function f(){return function(a){var n={};for(var l in a)n[l]=a[l];return n}}r.ROUND=function(a){function n(l){return Math.round(l*a)/a}return a===void 0&&(a=1e13),Js(a),function(l){return l.x1!==void 0&&(l.x1=n(l.x1)),l.y1!==void 0&&(l.y1=n(l.y1)),l.x2!==void 0&&(l.x2=n(l.x2)),l.y2!==void 0&&(l.y2=n(l.y2)),l.x!==void 0&&(l.x=n(l.x)),l.y!==void 0&&(l.y=n(l.y)),l.rX!==void 0&&(l.rX=n(l.rX)),l.rY!==void 0&&(l.rY=n(l.rY)),l}},r.TO_ABS=t,r.TO_REL=function(){return s(function(a,n,l){return a.relative||(a.x1!==void 0&&(a.x1-=n),a.y1!==void 0&&(a.y1-=l),a.x2!==void 0&&(a.x2-=n),a.y2!==void 0&&(a.y2-=l),a.x!==void 0&&(a.x-=n),a.y!==void 0&&(a.y-=l),a.relative=!0),a})},r.NORMALIZE_HVZ=function(a,n,l){return a===void 0&&(a=!0),n===void 0&&(n=!0),l===void 0&&(l=!0),s(function(h,o,u,A,g){if(isNaN(A)&&!(h.type&ne.MOVE_TO))throw new Error("path must start with moveto");return n&&h.type&ne.HORIZ_LINE_TO&&(h.type=ne.LINE_TO,h.y=h.relative?0:u),l&&h.type&ne.VERT_LINE_TO&&(h.type=ne.LINE_TO,h.x=h.relative?0:o),a&&h.type&ne.CLOSE_PATH&&(h.type=ne.LINE_TO,h.x=h.relative?A-o:A,h.y=h.relative?g-u:g),h.type&ne.ARC&&(h.rX===0||h.rY===0)&&(h.type=ne.LINE_TO,delete h.rX,delete h.rY,delete h.xRot,delete h.lArcFlag,delete h.sweepFlag),h})},r.NORMALIZE_ST=e,r.QT_TO_C=i,r.INFO=s,r.SANITIZE=function(a){a===void 0&&(a=0),Js(a);var n=NaN,l=NaN,h=NaN,o=NaN;return s(function(u,A,g,p,d){var m=Math.abs,v=!1,C=0,x=0;if(u.type&ne.SMOOTH_CURVE_TO&&(C=isNaN(n)?0:A-n,x=isNaN(l)?0:g-l),u.type&(ne.CURVE_TO|ne.SMOOTH_CURVE_TO)?(n=u.relative?A+u.x2:u.x2,l=u.relative?g+u.y2:u.y2):(n=NaN,l=NaN),u.type&ne.SMOOTH_QUAD_TO?(h=isNaN(h)?A:2*A-h,o=isNaN(o)?g:2*g-o):u.type&ne.QUAD_TO?(h=u.relative?A+u.x1:u.x1,o=u.relative?g+u.y1:u.y2):(h=NaN,o=NaN),u.type&ne.LINE_COMMANDS||u.type&ne.ARC&&(u.rX===0||u.rY===0||!u.lArcFlag)||u.type&ne.CURVE_TO||u.type&ne.SMOOTH_CURVE_TO||u.type&ne.QUAD_TO||u.type&ne.SMOOTH_QUAD_TO){var E=u.x===void 0?0:u.relative?u.x:u.x-A,L=u.y===void 0?0:u.relative?u.y:u.y-g;C=isNaN(h)?u.x1===void 0?C:u.relative?u.x:u.x1-A:h-A,x=isNaN(o)?u.y1===void 0?x:u.relative?u.y:u.y1-g:o-g;var U=u.x2===void 0?0:u.relative?u.x:u.x2-A,O=u.y2===void 0?0:u.relative?u.y:u.y2-g;m(E)<=a&&m(L)<=a&&m(C)<=a&&m(x)<=a&&m(U)<=a&&m(O)<=a&&(v=!0)}return u.type&ne.CLOSE_PATH&&m(A-p)<=a&&m(g-d)<=a&&(v=!0),v?[]:u})},r.MATRIX=c,r.ROTATE=function(a,n,l){n===void 0&&(n=0),l===void 0&&(l=0),Js(a,n,l);var h=Math.sin(a),o=Math.cos(a);return c(o,h,-h,o,n-n*o+l*h,l-n*h-l*o)},r.TRANSLATE=function(a,n){return n===void 0&&(n=0),Js(a,n),c(1,0,0,1,a,n)},r.SCALE=function(a,n){return n===void 0&&(n=a),Js(a,n),c(a,0,0,n,0,0)},r.SKEW_X=function(a){return Js(a),c(1,0,Math.atan(a),1,0,0)},r.SKEW_Y=function(a){return Js(a),c(1,Math.atan(a),0,1,0,0)},r.X_AXIS_SYMMETRY=function(a){return a===void 0&&(a=0),Js(a),c(-1,0,0,1,a,0)},r.Y_AXIS_SYMMETRY=function(a){return a===void 0&&(a=0),Js(a),c(1,0,0,-1,0,a)},r.A_TO_C=function(){return s(function(a,n,l){return ne.ARC===a.type?function(h,o,u){var A,g,p,d;h.cX||lm(h,o,u);for(var m=Math.min(h.phi1,h.phi2),v=Math.max(h.phi1,h.phi2)-m,C=Math.ceil(v/90),x=new Array(C),E=o,L=u,U=0;U<C;U++){var O=wC(h.phi1,h.phi2,U/C),X=wC(h.phi1,h.phi2,(U+1)/C),rt=X-O,M=4/3*Math.tan(rt*aA/4),H=[Math.cos(O*aA)-M*Math.sin(O*aA),Math.sin(O*aA)+M*Math.cos(O*aA)],J=H[0],$=H[1],ht=[Math.cos(X*aA),Math.sin(X*aA)],ut=ht[0],pt=ht[1],ft=[ut+M*Math.sin(X*aA),pt-M*Math.cos(X*aA)],R=ft[0],G=ft[1];x[U]={relative:h.relative,type:ne.CURVE_TO};var it=function(P,V){var k=om([P*h.rX,V*h.rY],h.xRot),N=k[0],Z=k[1];return[h.cX+N,h.cY+Z]};A=it(J,$),x[U].x1=A[0],x[U].y1=A[1],g=it(R,G),x[U].x2=g[0],x[U].y2=g[1],p=it(ut,pt),x[U].x=p[0],x[U].y=p[1],h.relative&&(x[U].x1-=E,x[U].y1-=L,x[U].x2-=E,x[U].y2-=L,x[U].x-=E,x[U].y-=L),E=(d=[x[U].x,x[U].y])[0],L=d[1]}return x}(a,a.relative?0:n,a.relative?0:l):a})},r.ANNOTATE_ARCS=function(){return s(function(a,n,l){return a.relative&&(n=0,l=0),ne.ARC===a.type&&lm(a,n,l),a})},r.CLONE=f,r.CALCULATE_BOUNDS=function(){var a=function(u){var A={};for(var g in u)A[g]=u[g];return A},n=t(),l=i(),h=e(),o=s(function(u,A,g){var p=h(l(n(a(u))));function d(G){G>o.maxX&&(o.maxX=G),G<o.minX&&(o.minX=G)}function m(G){G>o.maxY&&(o.maxY=G),G<o.minY&&(o.minY=G)}if(p.type&ne.DRAWING_COMMANDS&&(d(A),m(g)),p.type&ne.HORIZ_LINE_TO&&d(p.x),p.type&ne.VERT_LINE_TO&&m(p.y),p.type&ne.LINE_TO&&(d(p.x),m(p.y)),p.type&ne.CURVE_TO){d(p.x),m(p.y);for(var v=0,C=CC(A,p.x1,p.x2,p.x);v<C.length;v++)0<(R=C[v])&&1>R&&d(BC(A,p.x1,p.x2,p.x,R));for(var x=0,E=CC(g,p.y1,p.y2,p.y);x<E.length;x++)0<(R=E[x])&&1>R&&m(BC(g,p.y1,p.y2,p.y,R))}if(p.type&ne.ARC){d(p.x),m(p.y),lm(p,A,g);for(var L=p.xRot/180*Math.PI,U=Math.cos(L)*p.rX,O=Math.sin(L)*p.rX,X=-Math.sin(L)*p.rY,rt=Math.cos(L)*p.rY,M=p.phi1<p.phi2?[p.phi1,p.phi2]:-180>p.phi2?[p.phi2+360,p.phi1+360]:[p.phi2,p.phi1],H=M[0],J=M[1],$=function(G){var it=G[0],P=G[1],V=180*Math.atan2(P,it)/Math.PI;return V<H?V+360:V},ht=0,ut=yC(X,-U,0).map($);ht<ut.length;ht++)(R=ut[ht])>H&&R<J&&d(bC(p.cX,U,X,R));for(var pt=0,ft=yC(rt,-O,0).map($);pt<ft.length;pt++){var R;(R=ft[pt])>H&&R<J&&m(bC(p.cY,O,rt,R))}}return u});return o.minX=1/0,o.maxX=-1/0,o.minY=1/0,o.maxY=-1/0,o}})(Ui||(Ui={}));var Zs,SC=function(){function r(){}return r.prototype.round=function(t){return this.transform(Ui.ROUND(t))},r.prototype.toAbs=function(){return this.transform(Ui.TO_ABS())},r.prototype.toRel=function(){return this.transform(Ui.TO_REL())},r.prototype.normalizeHVZ=function(t,e,i){return this.transform(Ui.NORMALIZE_HVZ(t,e,i))},r.prototype.normalizeST=function(){return this.transform(Ui.NORMALIZE_ST())},r.prototype.qtToC=function(){return this.transform(Ui.QT_TO_C())},r.prototype.aToC=function(){return this.transform(Ui.A_TO_C())},r.prototype.sanitize=function(t){return this.transform(Ui.SANITIZE(t))},r.prototype.translate=function(t,e){return this.transform(Ui.TRANSLATE(t,e))},r.prototype.scale=function(t,e){return this.transform(Ui.SCALE(t,e))},r.prototype.rotate=function(t,e,i){return this.transform(Ui.ROTATE(t,e,i))},r.prototype.matrix=function(t,e,i,s,c,f){return this.transform(Ui.MATRIX(t,e,i,s,c,f))},r.prototype.skewX=function(t){return this.transform(Ui.SKEW_X(t))},r.prototype.skewY=function(t){return this.transform(Ui.SKEW_Y(t))},r.prototype.xSymmetry=function(t){return this.transform(Ui.X_AXIS_SYMMETRY(t))},r.prototype.ySymmetry=function(t){return this.transform(Ui.Y_AXIS_SYMMETRY(t))},r.prototype.annotateArcs=function(){return this.transform(Ui.ANNOTATE_ARCS())},r}(),mk=function(r){return r===" "||r==="	"||r==="\r"||r===`
`},xC=function(r){return 48<=r.charCodeAt(0)&&r.charCodeAt(0)<=57},vk=function(r){function t(){var e=r.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return vC(t,r),t.prototype.finish=function(e){if(e===void 0&&(e=[]),this.parse(" ",e),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,i){var s=this;i===void 0&&(i=[]);for(var c=function(o){i.push(o),s.curArgs.length=0,s.canParseCommandOrComma=!0},f=0;f<e.length;f++){var a=e[f],n=!(this.curCommandType!==ne.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),l=xC(a)&&(this.curNumber==="0"&&a==="0"||n);if(!xC(a)||l)if(a!=="e"&&a!=="E")if(a!=="-"&&a!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(a!=="."||this.curNumberHasExp||this.curNumberHasDecimal||n){if(this.curNumber&&this.curCommandType!==-1){var h=Number(this.curNumber);if(isNaN(h))throw new SyntaxError("Invalid number ending at "+f);if(this.curCommandType===ne.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>h)throw new SyntaxError('Expected positive number, got "'+h+'" at index "'+f+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+f+'"')}this.curArgs.push(h),this.curArgs.length===yk[this.curCommandType]&&(ne.HORIZ_LINE_TO===this.curCommandType?c({type:ne.HORIZ_LINE_TO,relative:this.curCommandRelative,x:h}):ne.VERT_LINE_TO===this.curCommandType?c({type:ne.VERT_LINE_TO,relative:this.curCommandRelative,y:h}):this.curCommandType===ne.MOVE_TO||this.curCommandType===ne.LINE_TO||this.curCommandType===ne.SMOOTH_QUAD_TO?(c({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),ne.MOVE_TO===this.curCommandType&&(this.curCommandType=ne.LINE_TO)):this.curCommandType===ne.CURVE_TO?c({type:ne.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===ne.SMOOTH_CURVE_TO?c({type:ne.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===ne.QUAD_TO?c({type:ne.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===ne.ARC&&c({type:ne.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!mk(a))if(a===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(a!=="+"&&a!=="-"&&a!==".")if(l)this.curNumber=a,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+f+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+a+'" at index '+f+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,a!=="z"&&a!=="Z")if(a==="h"||a==="H")this.curCommandType=ne.HORIZ_LINE_TO,this.curCommandRelative=a==="h";else if(a==="v"||a==="V")this.curCommandType=ne.VERT_LINE_TO,this.curCommandRelative=a==="v";else if(a==="m"||a==="M")this.curCommandType=ne.MOVE_TO,this.curCommandRelative=a==="m";else if(a==="l"||a==="L")this.curCommandType=ne.LINE_TO,this.curCommandRelative=a==="l";else if(a==="c"||a==="C")this.curCommandType=ne.CURVE_TO,this.curCommandRelative=a==="c";else if(a==="s"||a==="S")this.curCommandType=ne.SMOOTH_CURVE_TO,this.curCommandRelative=a==="s";else if(a==="q"||a==="Q")this.curCommandType=ne.QUAD_TO,this.curCommandRelative=a==="q";else if(a==="t"||a==="T")this.curCommandType=ne.SMOOTH_QUAD_TO,this.curCommandRelative=a==="t";else{if(a!=="a"&&a!=="A")throw new SyntaxError('Unexpected character "'+a+'" at index '+f+".");this.curCommandType=ne.ARC,this.curCommandRelative=a==="a"}else i.push({type:ne.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=a,this.curNumberHasDecimal=a==="."}else this.curNumber+=a,this.curNumberHasDecimal=!0;else this.curNumber+=a;else this.curNumber+=a,this.curNumberHasExp=!0;else this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp}return i},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(i,s){s===void 0&&(s=[]);for(var c=0,f=Object.getPrototypeOf(this).parse.call(this,i);c<f.length;c++){var a=f[c],n=e(a);Array.isArray(n)?s.push.apply(s,n):s.push(n)}return s}}})},t}(SC),ne=function(r){function t(e){var i=r.call(this)||this;return i.commands=typeof e=="string"?t.parse(e):e,i}return vC(t,r),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=Ui.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var i=[],s=0,c=this.commands;s<c.length;s++){var f=e(c[s]);Array.isArray(f)?i.push.apply(i,f):i.push(f)}return this.commands=i,this},t.encode=function(e){return pk(e)},t.parse=function(e){var i=new vk,s=[];return i.parse(e,s),i.finish(s),s},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(SC),yk=((Zs={})[ne.MOVE_TO]=2,Zs[ne.LINE_TO]=2,Zs[ne.HORIZ_LINE_TO]=1,Zs[ne.VERT_LINE_TO]=1,Zs[ne.CLOSE_PATH]=0,Zs[ne.QUAD_TO]=4,Zs[ne.SMOOTH_QUAD_TO]=2,Zs[ne.CURVE_TO]=6,Zs[ne.SMOOTH_CURVE_TO]=4,Zs[ne.ARC]=7,Zs),wk=cn,bk=Ys,Ck=rf,Bk=eb,_C=RegExp.prototype,Sk=function(r){var t=r.flags;return t===void 0&&!("flags"in _C)&&!bk(r,"flags")&&Ck(_C,r)?wk(Bk,r):t},xk=cf.PROPER,_k=tl,Ek=Sn,EC=Ea,Fk=Ci,Tk=Sk,cm="toString",Lk=RegExp.prototype,FC=Lk[cm],Ik=Fk(function(){return FC.call({source:"a",flags:"b"})!=="/a/b"}),Pk=xk&&FC.name!==cm;(Ik||Pk)&&_k(RegExp.prototype,cm,function(){var t=Ek(this),e=EC(t.source),i=EC(Tk(t));return"/"+e+"/"+i},{unsafe:!0});function Gf(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gf=function(t){return typeof t}:Gf=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(r)}function Uk(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var Ok=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Qk=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Nk(r,t,e,i,s){if(typeof r=="string"&&(r=document.getElementById(r)),!r||Gf(r)!=="object"||!("getContext"in r))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var c=r.getContext("2d");try{return c.getImageData(t,e,i,s)}catch(f){throw new Error("unable to access image data: "+f)}}function Mk(r,t,e,i,s,c){if(!(isNaN(c)||c<1)){c|=0;var f=Nk(r,t,e,i,s);f=kk(f,t,e,i,s,c),r.getContext("2d").putImageData(f,t,e)}}function kk(r,t,e,i,s,c){for(var f=r.data,a=2*c+1,n=i-1,l=s-1,h=c+1,o=h*(h+1)/2,u=new TC,A=u,g,p=1;p<a;p++)A=A.next=new TC,p===h&&(g=A);A.next=u;for(var d=null,m=null,v=0,C=0,x=Ok[c],E=Qk[c],L=0;L<s;L++){A=u;for(var U=f[C],O=f[C+1],X=f[C+2],rt=f[C+3],M=0;M<h;M++)A.r=U,A.g=O,A.b=X,A.a=rt,A=A.next;for(var H=0,J=0,$=0,ht=0,ut=h*U,pt=h*O,ft=h*X,R=h*rt,G=o*U,it=o*O,P=o*X,V=o*rt,k=1;k<h;k++){var N=C+((n<k?n:k)<<2),Z=f[N],st=f[N+1],ct=f[N+2],ot=f[N+3],wt=h-k;G+=(A.r=Z)*wt,it+=(A.g=st)*wt,P+=(A.b=ct)*wt,V+=(A.a=ot)*wt,H+=Z,J+=st,$+=ct,ht+=ot,A=A.next}d=u,m=g;for(var _t=0;_t<i;_t++){var Nt=V*x>>E;if(f[C+3]=Nt,Nt!==0){var vt=255/Nt;f[C]=(G*x>>E)*vt,f[C+1]=(it*x>>E)*vt,f[C+2]=(P*x>>E)*vt}else f[C]=f[C+1]=f[C+2]=0;G-=ut,it-=pt,P-=ft,V-=R,ut-=d.r,pt-=d.g,ft-=d.b,R-=d.a;var mt=_t+c+1;mt=v+(mt<n?mt:n)<<2,H+=d.r=f[mt],J+=d.g=f[mt+1],$+=d.b=f[mt+2],ht+=d.a=f[mt+3],G+=H,it+=J,P+=$,V+=ht,d=d.next;var gt=m,tt=gt.r,It=gt.g,Pt=gt.b,Ut=gt.a;ut+=tt,pt+=It,ft+=Pt,R+=Ut,H-=tt,J-=It,$-=Pt,ht-=Ut,m=m.next,C+=4}v+=i}for(var Gt=0;Gt<i;Gt++){C=Gt<<2;var Dt=f[C],bt=f[C+1],Kt=f[C+2],Zt=f[C+3],le=h*Dt,pe=h*bt,Rt=h*Kt,zt=h*Zt,Xt=o*Dt,ae=o*bt,te=o*Kt,Ne=o*Zt;A=u;for(var Be=0;Be<h;Be++)A.r=Dt,A.g=bt,A.b=Kt,A.a=Zt,A=A.next;for(var Ar=i,Ke=0,qe=0,nn=0,Xe=0,_n=1;_n<=c;_n++){C=Ar+Gt<<2;var sr=h-_n;Xt+=(A.r=Dt=f[C])*sr,ae+=(A.g=bt=f[C+1])*sr,te+=(A.b=Kt=f[C+2])*sr,Ne+=(A.a=Zt=f[C+3])*sr,Xe+=Dt,Ke+=bt,qe+=Kt,nn+=Zt,A=A.next,_n<l&&(Ar+=i)}C=Gt,d=u,m=g;for(var ei=0;ei<s;ei++){var _r=C<<2;f[_r+3]=Zt=Ne*x>>E,Zt>0?(Zt=255/Zt,f[_r]=(Xt*x>>E)*Zt,f[_r+1]=(ae*x>>E)*Zt,f[_r+2]=(te*x>>E)*Zt):f[_r]=f[_r+1]=f[_r+2]=0,Xt-=le,ae-=pe,te-=Rt,Ne-=zt,le-=d.r,pe-=d.g,Rt-=d.b,zt-=d.a,_r=Gt+((_r=ei+h)<l?_r:l)*i<<2,Xt+=Xe+=d.r=f[_r],ae+=Ke+=d.g=f[_r+1],te+=qe+=d.b=f[_r+2],Ne+=nn+=d.a=f[_r+3],d=d.next,le+=Dt=m.r,pe+=bt=m.g,Rt+=Kt=m.b,zt+=Zt=m.a,Xe-=Dt,Ke-=bt,qe-=Kt,nn-=Zt,m=m.next,C+=i}}return r}var TC=function r(){Uk(this,r),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function Dk(){var{DOMParser:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:r,createCanvas(e,i){return new OffscreenCanvas(e,i)},createImage(e){return nA(function*(){var i=yield fetch(e),s=yield i.blob(),c=yield createImageBitmap(s);return c})()}};return(typeof DOMParser<"u"||typeof r>"u")&&Reflect.deleteProperty(t,"DOMParser"),t}function Rk(r){var{DOMParser:t,canvas:e,fetch:i}=r;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,fetch:i,createCanvas:e.createCanvas,createImage:e.loadImage}}var Hk=Object.freeze({__proto__:null,offscreen:Dk,node:Rk});function al(r){return r.replace(/(?!\u3000)\s+/gm," ")}function LC(r){return r.replace(/^[\n \t]+/,"")}function IC(r){return r.replace(/[\n \t]+$/,"")}function Jn(r){var t=(r||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return t.map(parseFloat)}var Gk=/^[A-Z-]+$/;function PC(r){return Gk.test(r)?r.toLowerCase():r}function hm(r){var t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(r)||[];return t[2]||t[3]||t[4]}function UC(r){if(!r.startsWith("rgb"))return r;var t=3,e=r.replace(/\d+(\.\d+)?/g,(i,s)=>t--&&s?String(Math.round(parseFloat(i))):i);return e}var Vk=/(\[[^\]]+\])/g,jk=/(#[^\s+>~.[:]+)/g,Kk=/(\.[^\s+>~.[:]+)/g,Wk=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,Xk=/(:[\w-]+\([^)]*\))/gi,zk=/(:[^\s+>~.[:]+)/g,qk=/([^\s+>~.[:]+)/g;function Al(r,t){var e=t.exec(r);return e?[r.replace(t," "),e.length]:[r,0]}function OC(r){var t=[0,0,0],e=r.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),i=0;return[e,i]=Al(e,Vk),t[1]+=i,[e,i]=Al(e,jk),t[0]+=i,[e,i]=Al(e,Kk),t[1]+=i,[e,i]=Al(e,Wk),t[2]+=i,[e,i]=Al(e,Xk),t[1]+=i,[e,i]=Al(e,zk),t[1]+=i,e=e.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[e,i]=Al(e,qk),t[2]+=i,t.join("")}var ol=1e-8;function um(r){return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2))}function Vf(r,t){return(r[0]*t[0]+r[1]*t[1])/(um(r)*um(t))}function fm(r,t){return(r[0]*t[1]<r[1]*t[0]?-1:1)*Math.acos(Vf(r,t))}function dm(r){return r*r*r}function gm(r){return 3*r*r*(1-r)}function pm(r){return 3*r*(1-r)*(1-r)}function mm(r){return(1-r)*(1-r)*(1-r)}function vm(r){return r*r}function ym(r){return 2*r*(1-r)}function wm(r){return(1-r)*(1-r)}class Ie{constructor(t,e,i){this.document=t,this.name=e,this.value=i,this.isNormalizedColor=!1}static empty(t){return new Ie(t,"EMPTY","")}split(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:e,name:i}=this;return al(this.getString()).trim().split(t).map(s=>new Ie(e,i,s))}hasValue(t){var{value:e}=this;return e!==null&&e!==""&&(t||e!==0)&&typeof e<"u"}isString(t){var{value:e}=this,i=typeof e=="string";return!i||!t?i:t.test(e)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t>"u"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t>"u"?0:parseFloat(t);var{value:e}=this,i=parseFloat(e);return this.isString(/%$/)&&(i/=100),i}getString(t){return typeof t>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(t)}getColor(t){var e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=UC(e),this.value=e),e}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;var[i,s]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:c}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(c.computeSize("x"),c.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(c.computeSize("x"),c.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*c.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*c.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&s):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*c.computeSize(i);default:{var f=this.getNumber();return e&&f<1?f*c.computeSize(i):f}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var t=this.getString(),e=/#([^)'"]+)/.exec(t);return e&&(e=e[1]),e||(e=t),this.document.definitions[e]}getFillStyleDefinition(t,e){var i=this.getDefinition();if(!i)return null;if(typeof i.createGradient=="function")return i.createGradient(this.document.ctx,t,e);if(typeof i.createPattern=="function"){if(i.getHrefAttribute().hasValue()){var s=i.getAttribute("patternTransform");i=i.getHrefAttribute().getDefinition(),s.hasValue()&&i.getAttribute("patternTransform",!0).setValue(s.value)}return i.createPattern(this.document.ctx,t,e)}return null}getTextBaseline(){return this.hasValue()?Ie.textBaselineMapping[this.getString()]:null}addOpacity(t){for(var e=this.getColor(),i=e.length,s=0,c=0;c<i&&(e[c]===","&&s++,s!==3);c++);if(t.hasValue()&&this.isString()&&s!==3){var f=new am(e);f.ok&&(f.alpha=t.getNumber(),e=f.toRGBA())}return new Ie(this.document,this.name,e)}}Ie.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class QC{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(t,e){this.viewPorts.push({width:t,height:e})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:t}=this;return t[t.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class di{constructor(t,e){this.x=t,this.y=e}static parse(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[i=e,s=e]=Jn(t);return new di(i,s)}static parseScale(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[i=e,s=i]=Jn(t);return new di(i,s)}static parsePath(t){for(var e=Jn(t),i=e.length,s=[],c=0;c<i;c+=2)s.push(new di(e[c],e[c+1]));return s}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){var{x:e,y:i}=this,s=e*t[0]+i*t[2]+t[4],c=e*t[1]+i*t[3]+t[5];this.x=s,this.y=c}}class NC{constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:t,onClick:e,onMouseMove:i}=this,s=t.ctx.canvas;s.onclick=e,s.onmousemove=i,this.working=!0}}stop(){if(this.working){var t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:t,events:e,eventElements:i}=this,{style:s}=t.ctx.canvas;s&&(s.cursor=""),e.forEach((c,f)=>{for(var{run:a}=c,n=i[f];n;)a(n),n=n.parent}),this.events=[],this.eventElements=[]}}checkPath(t,e){if(!(!this.working||!e)){var{events:i,eventElements:s}=this;i.forEach((c,f)=>{var{x:a,y:n}=c;!s[f]&&e.isPointInPath&&e.isPointInPath(a,n)&&(s[f]=t)})}}checkBoundingBox(t,e){if(!(!this.working||!e)){var{events:i,eventElements:s}=this;i.forEach((c,f)=>{var{x:a,y:n}=c;!s[f]&&e.isPointInBox(a,n)&&(s[f]=t)})}}mapXY(t,e){for(var{window:i,ctx:s}=this.screen,c=new di(t,e),f=s.canvas;f;)c.x-=f.offsetLeft,c.y-=f.offsetTop,f=f.offsetParent;return i.scrollX&&(c.x+=i.scrollX),i.scrollY&&(c.y+=i.scrollY),c}onClick(t){var{x:e,y:i}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:e,y:i,run(s){s.onClick&&s.onClick()}})}onMouseMove(t){var{x:e,y:i}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:e,y:i,run(s){s.onMouseMove&&s.onMouseMove()}})}}var MC=typeof window<"u"?window:null,kC=typeof fetch<"u"?fetch.bind(void 0):null;class Xh{constructor(t){var{fetch:e=kC,window:i=MC}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ctx=t,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new QC,this.mouse=new NC(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=i,this.fetch=e}wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var t=this.waits.every(e=>e());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){var{document:e,ctx:i,aspectRatio:s,width:c,desiredWidth:f,height:a,desiredHeight:n,minX:l=0,minY:h=0,refX:o,refY:u,clip:A=!1,clipX:g=0,clipY:p=0}=t,d=al(s).replace(/^defer\s/,""),[m,v]=d.split(" "),C=m||"xMidYMid",x=v||"meet",E=c/f,L=a/n,U=Math.min(E,L),O=Math.max(E,L),X=f,rt=n;x==="meet"&&(X*=U,rt*=U),x==="slice"&&(X*=O,rt*=O);var M=new Ie(e,"refX",o),H=new Ie(e,"refY",u),J=M.hasValue()&&H.hasValue();if(J&&i.translate(-U*M.getPixels("x"),-U*H.getPixels("y")),A){var $=U*g,ht=U*p;i.beginPath(),i.moveTo($,ht),i.lineTo(c,ht),i.lineTo(c,a),i.lineTo($,a),i.closePath(),i.clip()}if(!J){var ut=x==="meet"&&U===L,pt=x==="slice"&&O===L,ft=x==="meet"&&U===E,R=x==="slice"&&O===E;C.startsWith("xMid")&&(ut||pt)&&i.translate(c/2-X/2,0),C.endsWith("YMid")&&(ft||R)&&i.translate(0,a/2-rt/2),C.startsWith("xMax")&&(ut||pt)&&i.translate(c-X,0),C.endsWith("YMax")&&(ft||R)&&i.translate(0,a-rt)}switch(!0){case C==="none":i.scale(E,L);break;case x==="meet":i.scale(U,U);break;case x==="slice":i.scale(O,O);break}i.translate(-l,-h)}start(t){var{enableRedraw:e=!1,ignoreMouse:i=!1,ignoreAnimation:s=!1,ignoreDimensions:c=!1,ignoreClear:f=!1,forceRedraw:a,scaleWidth:n,scaleHeight:l,offsetX:h,offsetY:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{FRAMERATE:u,mouse:A}=this,g=1e3/u;if(this.frameDuration=g,this.readyPromise=new Promise(C=>{this.resolveReady=C}),this.isReady()&&this.render(t,c,f,n,l,h,o),!!e){var p=Date.now(),d=p,m=0,v=()=>{p=Date.now(),m=p-d,m>=g&&(d=p-m%g,this.shouldUpdate(s,a)&&(this.render(t,c,f,n,l,h,o),A.runEvents())),this.intervalId=im(v)};i||A.start(),this.intervalId=im(v)}}stop(){this.intervalId&&(im.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,e){if(!t){var{frameDuration:i}=this,s=this.animations.reduce((c,f)=>f.update(i)||c,!1);if(s)return!0}return!!(typeof e=="function"&&e()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,e,i,s,c,f,a){var{CLIENT_WIDTH:n,CLIENT_HEIGHT:l,viewPort:h,ctx:o,isFirstRender:u}=this,A=o.canvas;h.clear(),A.width&&A.height?h.setCurrent(A.width,A.height):h.setCurrent(n,l);var g=t.getStyle("width"),p=t.getStyle("height");!e&&(u||typeof s!="number"&&typeof c!="number")&&(g.hasValue()&&(A.width=g.getPixels("x"),A.style&&(A.style.width="".concat(A.width,"px"))),p.hasValue()&&(A.height=p.getPixels("y"),A.style&&(A.style.height="".concat(A.height,"px"))));var d=A.clientWidth||A.width,m=A.clientHeight||A.height;if(e&&g.hasValue()&&p.hasValue()&&(d=g.getPixels("x"),m=p.getPixels("y")),h.setCurrent(d,m),typeof f=="number"&&t.getAttribute("x",!0).setValue(f),typeof a=="number"&&t.getAttribute("y",!0).setValue(a),typeof s=="number"||typeof c=="number"){var v=Jn(t.getAttribute("viewBox").getString()),C=0,x=0;if(typeof s=="number"){var E=t.getStyle("width");E.hasValue()?C=E.getPixels("x")/s:isNaN(v[2])||(C=v[2]/s)}if(typeof c=="number"){var L=t.getStyle("height");L.hasValue()?x=L.getPixels("y")/c:isNaN(v[3])||(x=v[3]/c)}C||(C=x),x||(x=C),t.getAttribute("width",!0).setValue(s),t.getAttribute("height",!0).setValue(c);var U=t.getStyle("transform",!0,!0);U.setValue("".concat(U.getString()," scale(").concat(1/C,", ").concat(1/x,")"))}i||o.clearRect(0,0,d,m),t.render(o),u&&(this.isFirstRender=!1)}}Xh.defaultWindow=MC,Xh.defaultFetch=kC;var{defaultFetch:$k}=Xh,Yk=typeof DOMParser<"u"?DOMParser:null;class jf{constructor(){var{fetch:t=$k,DOMParser:e=Yk}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fetch=t,this.DOMParser=e}parse(t){var e=this;return nA(function*(){return t.startsWith("<")?e.parseFromString(t):e.load(t)})()}parseFromString(t){var e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(e.parseFromString(t,"text/xml"))}}checkDocument(t){var e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent);return t}load(t){var e=this;return nA(function*(){var i=yield e.fetch(t),s=yield i.text();return e.parseFromString(s)})()}}class DC{constructor(t,e){this.type="translate",this.point=null,this.point=di.parse(e)}apply(t){var{x:e,y:i}=this.point;t.translate(e||0,i||0)}unapply(t){var{x:e,y:i}=this.point;t.translate(-1*e||0,-1*i||0)}applyToPoint(t){var{x:e,y:i}=this.point;t.applyTransform([1,0,0,1,e||0,i||0])}}class RC{constructor(t,e,i){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var s=Jn(e);this.angle=new Ie(t,"angle",s[0]),this.originX=i[0],this.originY=i[1],this.cx=s[1]||0,this.cy=s[2]||0}apply(t){var{cx:e,cy:i,originX:s,originY:c,angle:f}=this,a=e+s.getPixels("x"),n=i+c.getPixels("y");t.translate(a,n),t.rotate(f.getRadians()),t.translate(-a,-n)}unapply(t){var{cx:e,cy:i,originX:s,originY:c,angle:f}=this,a=e+s.getPixels("x"),n=i+c.getPixels("y");t.translate(a,n),t.rotate(-1*f.getRadians()),t.translate(-a,-n)}applyToPoint(t){var{cx:e,cy:i,angle:s}=this,c=s.getRadians();t.applyTransform([1,0,0,1,e||0,i||0]),t.applyTransform([Math.cos(c),Math.sin(c),-Math.sin(c),Math.cos(c),0,0]),t.applyTransform([1,0,0,1,-e||0,-i||0])}}class HC{constructor(t,e,i){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var s=di.parseScale(e);(s.x===0||s.y===0)&&(s.x=ol,s.y=ol),this.scale=s,this.originX=i[0],this.originY=i[1]}apply(t){var{scale:{x:e,y:i},originX:s,originY:c}=this,f=s.getPixels("x"),a=c.getPixels("y");t.translate(f,a),t.scale(e,i||e),t.translate(-f,-a)}unapply(t){var{scale:{x:e,y:i},originX:s,originY:c}=this,f=s.getPixels("x"),a=c.getPixels("y");t.translate(f,a),t.scale(1/e,1/i||e),t.translate(-f,-a)}applyToPoint(t){var{x:e,y:i}=this.scale;t.applyTransform([e||0,0,0,i||0,0,0])}}class bm{constructor(t,e,i){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=Jn(e),this.originX=i[0],this.originY=i[1]}apply(t){var{originX:e,originY:i,matrix:s}=this,c=e.getPixels("x"),f=i.getPixels("y");t.translate(c,f),t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t.translate(-c,-f)}unapply(t){var{originX:e,originY:i,matrix:s}=this,c=s[0],f=s[2],a=s[4],n=s[1],l=s[3],h=s[5],o=0,u=0,A=1,g=1/(c*(l*A-h*u)-f*(n*A-h*o)+a*(n*u-l*o)),p=e.getPixels("x"),d=i.getPixels("y");t.translate(p,d),t.transform(g*(l*A-h*u),g*(h*o-n*A),g*(a*u-f*A),g*(c*A-a*o),g*(f*h-a*l),g*(a*n-c*h)),t.translate(-p,-d)}applyToPoint(t){t.applyTransform(this.matrix)}}class Cm extends bm{constructor(t,e,i){super(t,e,i),this.type="skew",this.angle=null,this.angle=new Ie(t,"angle",e)}}class GC extends Cm{constructor(t,e,i){super(t,e,i),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class VC extends Cm{constructor(t,e,i){super(t,e,i),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function Jk(r){return al(r).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function Zk(r){var[t,e]=r.split("(");return[t.trim(),e.trim().replace(")","")]}class ao{constructor(t,e,i){this.document=t,this.transforms=[];var s=Jk(e);s.forEach(c=>{if(c!=="none"){var[f,a]=Zk(c),n=ao.transformTypes[f];typeof n<"u"&&this.transforms.push(new n(this.document,a,i))}})}static fromElement(t,e){var i=e.getStyle("transform",!1,!0),[s,c=s]=e.getStyle("transform-origin",!1,!0).split(),f=[s,c];return i.hasValue()?new ao(t,i.getString(),f):null}apply(t){for(var{transforms:e}=this,i=e.length,s=0;s<i;s++)e[s].apply(t)}unapply(t){for(var{transforms:e}=this,i=e.length,s=i-1;s>=0;s--)e[s].unapply(t)}applyToPoint(t){for(var{transforms:e}=this,i=e.length,s=0;s<i;s++)e[s].applyToPoint(t)}}ao.transformTypes={translate:DC,rotate:RC,scale:HC,matrix:bm,skewX:GC,skewY:VC};let li=class mv{constructor(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.document=t,this.node=e,this.captureTextNodes=i,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!(!e||e.nodeType!==1)){if(Array.from(e.attributes).forEach(a=>{var n=PC(a.nodeName);this.attributes[n]=new Ie(t,n,a.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var s=this.getAttribute("style").getString().split(";").map(a=>a.trim());s.forEach(a=>{if(a){var[n,l]=a.split(":").map(h=>h.trim());this.styles[n]=new Ie(t,n,l)}})}var{definitions:c}=t,f=this.getAttribute("id");f.hasValue()&&(c[f.getString()]||(c[f.getString()]=this)),Array.from(e.childNodes).forEach(a=>{if(a.nodeType===1)this.addChild(a);else if(i&&(a.nodeType===3||a.nodeType===4)){var n=t.createTextNode(a);n.getText().length>0&&this.addChild(n)}})}}getAttribute(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.attributes[t];if(!i&&e){var s=new Ie(this.document,t,"");return this.attributes[t]=s,s}return i||Ie.empty(this.document)}getHrefAttribute(){for(var t in this.attributes)if(t==="href"||t.endsWith(":href"))return this.attributes[t];return Ie.empty(this.document)}getStyle(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.styles[t];if(s)return s;var c=this.getAttribute(t);if(c!=null&&c.hasValue())return this.styles[t]=c,c;if(!i){var{parent:f}=this;if(f){var a=f.getStyle(t);if(a!=null&&a.hasValue())return a}}if(e){var n=new Ie(this.document,t,"");return this.styles[t]=n,n}return s||Ie.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){var e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){var i=this.getStyle("filter").getDefinition();i&&(this.applyEffects(t),i.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){var e=ao.fromElement(this.document,this);e&&e.apply(t);var i=this.getStyle("clip-path",!1,!0);if(i.hasValue()){var s=i.getDefinition();s&&s.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(e=>{e.render(t)})}addChild(t){var e=t instanceof mv?t:this.document.createElement(t);e.parent=this,mv.ignoreChildTypes.includes(e.type)||this.children.push(e)}matchesSelector(t){var e,{node:i}=this;if(typeof i.matches=="function")return i.matches(t);var s=(e=i.getAttribute)===null||e===void 0?void 0:e.call(i,"class");return!s||s===""?!1:s.split(" ").some(c=>".".concat(c)===t)}addStylesFromStyleDefinition(){var{styles:t,stylesSpecificity:e}=this.document;for(var i in t)if(!i.startsWith("@")&&this.matchesSelector(i)){var s=t[i],c=e[i];if(s)for(var f in s){var a=this.stylesSpecificity[f];typeof a>"u"&&(a="000"),c>=a&&(this.styles[f]=s[f],this.stylesSpecificity[f]=c)}}}removeStyles(t,e){var i=e.reduce((s,c)=>{var f=t.getStyle(c);if(!f.hasValue())return s;var a=f.getString();return f.setValue(""),[...s,[c,a]]},[]);return i}restoreStyles(t,e){e.forEach(i=>{var[s,c]=i;t.getStyle(s,!0).setValue(c)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}};li.ignoreChildTypes=["title"];class jC extends li{constructor(t,e,i){super(t,e,i)}}function t6(r){var t=r.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function e6(r){return typeof process>"u"?r:r.trim().split(",").map(t6).join(",")}function r6(r){if(!r)return"";var t=r.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function i6(r){if(!r)return"";var t=r.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}class xn{constructor(t,e,i,s,c,f){var a=f?typeof f=="string"?xn.parse(f):f:{};this.fontFamily=c||a.fontFamily,this.fontSize=s||a.fontSize,this.fontStyle=t||a.fontStyle,this.fontWeight=i||a.fontWeight,this.fontVariant=e||a.fontVariant}static parse(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i="",s="",c="",f="",a="",n=al(t).trim().split(" "),l={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return n.forEach(h=>{switch(!0){case(!l.fontStyle&&xn.styles.includes(h)):h!=="inherit"&&(i=h),l.fontStyle=!0;break;case(!l.fontVariant&&xn.variants.includes(h)):h!=="inherit"&&(s=h),l.fontStyle=!0,l.fontVariant=!0;break;case(!l.fontWeight&&xn.weights.includes(h)):h!=="inherit"&&(c=h),l.fontStyle=!0,l.fontVariant=!0,l.fontWeight=!0;break;case!l.fontSize:h!=="inherit"&&([f]=h.split("/")),l.fontStyle=!0,l.fontVariant=!0,l.fontWeight=!0,l.fontSize=!0;break;default:h!=="inherit"&&(a+=h)}}),new xn(i,s,c,f,a,e)}toString(){return[r6(this.fontStyle),this.fontVariant,i6(this.fontWeight),this.fontSize,e6(this.fontFamily)].join(" ").trim()}}xn.styles="normal|italic|oblique|inherit",xn.variants="normal|small-caps|inherit",xn.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class Us{constructor(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.NaN,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.NaN,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.NaN,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Number.NaN;this.x1=t,this.y1=e,this.x2=i,this.y2=s,this.addPoint(t,e),this.addPoint(i,s)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,e){typeof t<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof e<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}addX(t){this.addPoint(t,null)}addY(t){this.addPoint(null,t)}addBoundingBox(t){if(t){var{x1:e,y1:i,x2:s,y2:c}=t;this.addPoint(e,i),this.addPoint(s,c)}}sumCubic(t,e,i,s,c){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*i+3*(1-t)*Math.pow(t,2)*s+Math.pow(t,3)*c}bezierCurveAdd(t,e,i,s,c){var f=6*e-12*i+6*s,a=-3*e+9*i-9*s+3*c,n=3*i-3*e;if(a===0){if(f===0)return;var l=-n/f;0<l&&l<1&&(t?this.addX(this.sumCubic(l,e,i,s,c)):this.addY(this.sumCubic(l,e,i,s,c)));return}var h=Math.pow(f,2)-4*n*a;if(!(h<0)){var o=(-f+Math.sqrt(h))/(2*a);0<o&&o<1&&(t?this.addX(this.sumCubic(o,e,i,s,c)):this.addY(this.sumCubic(o,e,i,s,c)));var u=(-f-Math.sqrt(h))/(2*a);0<u&&u<1&&(t?this.addX(this.sumCubic(u,e,i,s,c)):this.addY(this.sumCubic(u,e,i,s,c)))}}addBezierCurve(t,e,i,s,c,f,a,n){this.addPoint(t,e),this.addPoint(a,n),this.bezierCurveAdd(!0,t,i,c,a),this.bezierCurveAdd(!1,e,s,f,n)}addQuadraticCurve(t,e,i,s,c,f){var a=t+.6666666666666666*(i-t),n=e+2/3*(s-e),l=a+1/3*(c-t),h=n+1/3*(f-e);this.addBezierCurve(t,e,a,l,n,h,c,f)}isPointInBox(t,e){var{x1:i,y1:s,x2:c,y2:f}=this;return i<=t&&t<=c&&s<=e&&e<=f}}class ze extends ne{constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new di(0,0),this.control=new di(0,0),this.current=new di(0,0),this.points=[],this.angles=[]}isEnd(){var{i:t,commands:e}=this;return t>=e.length-1}next(){var t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",i=new di(this.command[t],this.command[e]);return this.makeAbsolute(i)}getAsControlPoint(t,e){var i=this.getPoint(t,e);return this.control=i,i}getAsCurrentPoint(t,e){var i=this.getPoint(t,e);return this.current=i,i}getReflectedControlPoint(){var t=this.previousCommand.type;if(t!==ne.CURVE_TO&&t!==ne.SMOOTH_CURVE_TO&&t!==ne.QUAD_TO&&t!==ne.SMOOTH_QUAD_TO)return this.current;var{current:{x:e,y:i},control:{x:s,y:c}}=this,f=new di(2*e-s,2*i-c);return f}makeAbsolute(t){if(this.command.relative){var{x:e,y:i}=this.current;t.x+=e,t.y+=i}return t}addMarker(t,e,i){var{points:s,angles:c}=this;i&&c.length>0&&!c[c.length-1]&&(c[c.length-1]=s[s.length-1].angleTo(i)),this.addMarkerAngle(t,e?e.angleTo(t):null)}addMarkerAngle(t,e){this.points.push(t),this.angles.push(e)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:t}=this,e=t.length,i=0;i<e;i++)if(!t[i]){for(var s=i+1;s<e;s++)if(t[s]){t[i]=t[s];break}}return t}}class Ao extends li{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var t=1,e=this;e;){var i=e.getStyle("opacity",!1,!0);i.hasValue(!0)&&(t*=i.getNumber()),e=e.parent}return t}setContext(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e){var i=this.getStyle("fill"),s=this.getStyle("fill-opacity"),c=this.getStyle("stroke"),f=this.getStyle("stroke-opacity");if(i.isUrlDefinition()){var a=i.getFillStyleDefinition(this,s);a&&(t.fillStyle=a)}else if(i.hasValue()){i.getString()==="currentColor"&&i.setValue(this.getStyle("color").getColor());var n=i.getColor();n!=="inherit"&&(t.fillStyle=n==="none"?"rgba(0,0,0,0)":n)}if(s.hasValue()){var l=new Ie(this.document,"fill",t.fillStyle).addOpacity(s).getColor();t.fillStyle=l}if(c.isUrlDefinition()){var h=c.getFillStyleDefinition(this,f);h&&(t.strokeStyle=h)}else if(c.hasValue()){c.getString()==="currentColor"&&c.setValue(this.getStyle("color").getColor());var o=c.getString();o!=="inherit"&&(t.strokeStyle=o==="none"?"rgba(0,0,0,0)":o)}if(f.hasValue()){var u=new Ie(this.document,"stroke",t.strokeStyle).addOpacity(f).getString();t.strokeStyle=u}var A=this.getStyle("stroke-width");if(A.hasValue()){var g=A.getPixels();t.lineWidth=g||ol}var p=this.getStyle("stroke-linecap"),d=this.getStyle("stroke-linejoin"),m=this.getStyle("stroke-miterlimit"),v=this.getStyle("stroke-dasharray"),C=this.getStyle("stroke-dashoffset");if(p.hasValue()&&(t.lineCap=p.getString()),d.hasValue()&&(t.lineJoin=d.getString()),m.hasValue()&&(t.miterLimit=m.getNumber()),v.hasValue()&&v.getString()!=="none"){var x=Jn(v.getString());typeof t.setLineDash<"u"?t.setLineDash(x):typeof t.webkitLineDash<"u"?t.webkitLineDash=x:typeof t.mozDash<"u"&&!(x.length===1&&x[0]===0)&&(t.mozDash=x);var E=C.getPixels();typeof t.lineDashOffset<"u"?t.lineDashOffset=E:typeof t.webkitLineDashOffset<"u"?t.webkitLineDashOffset=E:typeof t.mozDashOffset<"u"&&(t.mozDashOffset=E)}}if(this.modifiedEmSizeStack=!1,typeof t.font<"u"){var L=this.getStyle("font"),U=this.getStyle("font-style"),O=this.getStyle("font-variant"),X=this.getStyle("font-weight"),rt=this.getStyle("font-size"),M=this.getStyle("font-family"),H=new xn(U.getString(),O.getString(),X.getString(),rt.hasValue()?"".concat(rt.getPixels(!0),"px"):"",M.getString(),xn.parse(L.getString(),t.font));U.setValue(H.fontStyle),O.setValue(H.fontVariant),X.setValue(H.fontWeight),rt.setValue(H.fontSize),M.setValue(H.fontFamily),t.font=H.toString(),rt.isPixels()&&(this.document.emSize=rt.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}}class xr extends Ao{constructor(t,e,i){super(t,e,i),this.type="path",this.pathParser=null,this.pathParser=new ze(this.getAttribute("d").getString())}path(t){var{pathParser:e}=this,i=new Us;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case ze.MOVE_TO:this.pathM(t,i);break;case ze.LINE_TO:this.pathL(t,i);break;case ze.HORIZ_LINE_TO:this.pathH(t,i);break;case ze.VERT_LINE_TO:this.pathV(t,i);break;case ze.CURVE_TO:this.pathC(t,i);break;case ze.SMOOTH_CURVE_TO:this.pathS(t,i);break;case ze.QUAD_TO:this.pathQ(t,i);break;case ze.SMOOTH_QUAD_TO:this.pathT(t,i);break;case ze.ARC:this.pathA(t,i);break;case ze.CLOSE_PATH:this.pathZ(t,i);break}return i}getBoundingBox(t){return this.path()}getMarkers(){var{pathParser:t}=this,e=t.getMarkerPoints(),i=t.getMarkerAngles(),s=e.map((c,f)=>[c,i[f]]);return s}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var e=this.getStyle("fill-rule");t.fillStyle!==""&&(e.getString("inherit")!=="inherit"?t.fill(e.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());var i=this.getMarkers();if(i){var s=i.length-1,c=this.getStyle("marker-start"),f=this.getStyle("marker-mid"),a=this.getStyle("marker-end");if(c.isUrlDefinition()){var n=c.getDefinition(),[l,h]=i[0];n.render(t,l,h)}if(f.isUrlDefinition())for(var o=f.getDefinition(),u=1;u<s;u++){var[A,g]=i[u];o.render(t,A,g)}if(a.isUrlDefinition()){var p=a.getDefinition(),[d,m]=i[s];p.render(t,d,m)}}}static pathM(t){var e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}pathM(t,e){var{pathParser:i}=this,{point:s}=xr.pathM(i),{x:c,y:f}=s;i.addMarker(s),e.addPoint(c,f),t&&t.moveTo(c,f)}static pathL(t){var{current:e}=t,i=t.getAsCurrentPoint();return{current:e,point:i}}pathL(t,e){var{pathParser:i}=this,{current:s,point:c}=xr.pathL(i),{x:f,y:a}=c;i.addMarker(c,s),e.addPoint(f,a),t&&t.lineTo(f,a)}static pathH(t){var{current:e,command:i}=t,s=new di((i.relative?e.x:0)+i.x,e.y);return t.current=s,{current:e,point:s}}pathH(t,e){var{pathParser:i}=this,{current:s,point:c}=xr.pathH(i),{x:f,y:a}=c;i.addMarker(c,s),e.addPoint(f,a),t&&t.lineTo(f,a)}static pathV(t){var{current:e,command:i}=t,s=new di(e.x,(i.relative?e.y:0)+i.y);return t.current=s,{current:e,point:s}}pathV(t,e){var{pathParser:i}=this,{current:s,point:c}=xr.pathV(i),{x:f,y:a}=c;i.addMarker(c,s),e.addPoint(f,a),t&&t.lineTo(f,a)}static pathC(t){var{current:e}=t,i=t.getPoint("x1","y1"),s=t.getAsControlPoint("x2","y2"),c=t.getAsCurrentPoint();return{current:e,point:i,controlPoint:s,currentPoint:c}}pathC(t,e){var{pathParser:i}=this,{current:s,point:c,controlPoint:f,currentPoint:a}=xr.pathC(i);i.addMarker(a,f,c),e.addBezierCurve(s.x,s.y,c.x,c.y,f.x,f.y,a.x,a.y),t&&t.bezierCurveTo(c.x,c.y,f.x,f.y,a.x,a.y)}static pathS(t){var{current:e}=t,i=t.getReflectedControlPoint(),s=t.getAsControlPoint("x2","y2"),c=t.getAsCurrentPoint();return{current:e,point:i,controlPoint:s,currentPoint:c}}pathS(t,e){var{pathParser:i}=this,{current:s,point:c,controlPoint:f,currentPoint:a}=xr.pathS(i);i.addMarker(a,f,c),e.addBezierCurve(s.x,s.y,c.x,c.y,f.x,f.y,a.x,a.y),t&&t.bezierCurveTo(c.x,c.y,f.x,f.y,a.x,a.y)}static pathQ(t){var{current:e}=t,i=t.getAsControlPoint("x1","y1"),s=t.getAsCurrentPoint();return{current:e,controlPoint:i,currentPoint:s}}pathQ(t,e){var{pathParser:i}=this,{current:s,controlPoint:c,currentPoint:f}=xr.pathQ(i);i.addMarker(f,c,c),e.addQuadraticCurve(s.x,s.y,c.x,c.y,f.x,f.y),t&&t.quadraticCurveTo(c.x,c.y,f.x,f.y)}static pathT(t){var{current:e}=t,i=t.getReflectedControlPoint();t.control=i;var s=t.getAsCurrentPoint();return{current:e,controlPoint:i,currentPoint:s}}pathT(t,e){var{pathParser:i}=this,{current:s,controlPoint:c,currentPoint:f}=xr.pathT(i);i.addMarker(f,c,c),e.addQuadraticCurve(s.x,s.y,c.x,c.y,f.x,f.y),t&&t.quadraticCurveTo(c.x,c.y,f.x,f.y)}static pathA(t){var{current:e,command:i}=t,{rX:s,rY:c,xRot:f,lArcFlag:a,sweepFlag:n}=i,l=f*(Math.PI/180),h=t.getAsCurrentPoint(),o=new di(Math.cos(l)*(e.x-h.x)/2+Math.sin(l)*(e.y-h.y)/2,-Math.sin(l)*(e.x-h.x)/2+Math.cos(l)*(e.y-h.y)/2),u=Math.pow(o.x,2)/Math.pow(s,2)+Math.pow(o.y,2)/Math.pow(c,2);u>1&&(s*=Math.sqrt(u),c*=Math.sqrt(u));var A=(a===n?-1:1)*Math.sqrt((Math.pow(s,2)*Math.pow(c,2)-Math.pow(s,2)*Math.pow(o.y,2)-Math.pow(c,2)*Math.pow(o.x,2))/(Math.pow(s,2)*Math.pow(o.y,2)+Math.pow(c,2)*Math.pow(o.x,2)));isNaN(A)&&(A=0);var g=new di(A*s*o.y/c,A*-c*o.x/s),p=new di((e.x+h.x)/2+Math.cos(l)*g.x-Math.sin(l)*g.y,(e.y+h.y)/2+Math.sin(l)*g.x+Math.cos(l)*g.y),d=fm([1,0],[(o.x-g.x)/s,(o.y-g.y)/c]),m=[(o.x-g.x)/s,(o.y-g.y)/c],v=[(-o.x-g.x)/s,(-o.y-g.y)/c],C=fm(m,v);return Vf(m,v)<=-1&&(C=Math.PI),Vf(m,v)>=1&&(C=0),{currentPoint:h,rX:s,rY:c,sweepFlag:n,xAxisRotation:l,centp:p,a1:d,ad:C}}pathA(t,e){var{pathParser:i}=this,{currentPoint:s,rX:c,rY:f,sweepFlag:a,xAxisRotation:n,centp:l,a1:h,ad:o}=xr.pathA(i),u=1-a?1:-1,A=h+u*(o/2),g=new di(l.x+c*Math.cos(A),l.y+f*Math.sin(A));if(i.addMarkerAngle(g,A-u*Math.PI/2),i.addMarkerAngle(s,A-u*Math.PI),e.addPoint(s.x,s.y),t&&!isNaN(h)&&!isNaN(o)){var p=c>f?c:f,d=c>f?1:c/f,m=c>f?f/c:1;t.translate(l.x,l.y),t.rotate(n),t.scale(d,m),t.arc(0,0,p,h,h+o,!!(1-a)),t.scale(1/d,1/m),t.rotate(-n),t.translate(-l.x,-l.y)}}static pathZ(t){t.current=t.start}pathZ(t,e){xr.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}}class Bm extends xr{constructor(t,e,i){super(t,e,i),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class AA extends Ao{constructor(t,e,i){super(t,e,new.target===AA?!0:i),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,e);var i=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();i&&(t.textBaseline=i)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);var e=null;return this.children.forEach((i,s)=>{var c=this.getChildBoundingBox(t,this,this,s);e?e.addBoundingBox(c):e=c}),e}getFontSize(){var{document:t,parent:e}=this,i=xn.parse(t.ctx.font).fontSize,s=e.getStyle("font-size").getNumber(i);return s}getTElementBoundingBox(t){var e=this.getFontSize();return new Us(this.x,this.y-e,this.x+this.measureText(t),this.y)}getGlyph(t,e,i){var s=e[i],c=null;if(t.isArabic){var f=e.length,a=e[i-1],n=e[i+1],l="isolated";if((i===0||a===" ")&&i<f-1&&n!==" "&&(l="terminal"),i>0&&a!==" "&&i<f-1&&n!==" "&&(l="medial"),i>0&&a!==" "&&(i===f-1||n===" ")&&(l="initial"),typeof t.glyphs[s]<"u"){var h=t.glyphs[s];c=h instanceof Bm?h:h[l]}}else c=t.glyphs[s];return c||(c=t.missingGlyph),c}getText(){return""}getTextFromNode(t){var e=t||this.node,i=Array.from(e.parentNode.childNodes),s=i.indexOf(e),c=i.length-1,f=al(e.textContent||"");return s===0&&(f=LC(f)),s===c&&(f=IC(f)),f}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((i,s)=>{this.renderChild(t,this,this,s)});var{mouse:e}=this.document.screen;e.isWorking()&&e.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){var{document:e,parent:i}=this,s=this.getText(),c=i.getStyle("font-family").getDefinition();if(c){for(var{unitsPerEm:f}=c.fontFace,a=xn.parse(e.ctx.font),n=i.getStyle("font-size").getNumber(a.fontSize),l=i.getStyle("font-style").getString(a.fontStyle),h=n/f,o=c.isRTL?s.split("").reverse().join(""):s,u=Jn(i.getAttribute("dx").getString()),A=o.length,g=0;g<A;g++){var p=this.getGlyph(c,o,g);t.translate(this.x,this.y),t.scale(h,-h);var d=t.lineWidth;t.lineWidth=t.lineWidth*f/n,l==="italic"&&t.transform(1,0,.4,1,0,0),p.render(t),l==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=d,t.scale(1/h,-1/h),t.translate(-this.x,-this.y),this.x+=n*(p.horizAdvX||c.horizAdvX)/f,typeof u[g]<"u"&&!isNaN(u[g])&&(this.x+=u[g])}return}var{x:m,y:v}=this;t.fillStyle&&t.fillText(s,m,v),t.strokeStyle&&t.strokeText(s,m,v)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),i=!1,s=0;e==="start"&&!i||e==="end"&&i?s=t.x-this.minX:e==="end"&&!i||e==="start"&&i?s=t.x-this.maxX:s=t.x-(this.minX+this.maxX)/2;for(var c=this.textChunkStart;c<this.leafTexts.length;c++)this.leafTexts[c].x+=s;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(t){this.children.forEach((e,i)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,i)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,e,i,s){var c=i.children[s];c.children.length>0?c.children.forEach((f,a)=>{e.adjustChildCoordinatesRecursiveCore(t,e,c,a)}):this.adjustChildCoordinates(t,e,i,s)}adjustChildCoordinates(t,e,i,s){var c=i.children[s];if(typeof c.measureText!="function")return c;t.save(),c.setContext(t,!0);var f=c.getAttribute("x"),a=c.getAttribute("y"),n=c.getAttribute("dx"),l=c.getAttribute("dy"),h=c.getStyle("font-family").getDefinition(),o=!!h&&h.isRTL;s===0&&(f.hasValue()||f.setValue(c.getInheritedAttribute("x")),a.hasValue()||a.setValue(c.getInheritedAttribute("y")),n.hasValue()||n.setValue(c.getInheritedAttribute("dx")),l.hasValue()||l.setValue(c.getInheritedAttribute("dy")));var u=c.measureText(t);return o&&(e.x-=u),f.hasValue()?(e.applyAnchoring(),c.x=f.getPixels("x"),n.hasValue()&&(c.x+=n.getPixels("x"))):(n.hasValue()&&(e.x+=n.getPixels("x")),c.x=e.x),e.x=c.x,o||(e.x+=u),a.hasValue()?(c.y=a.getPixels("y"),l.hasValue()&&(c.y+=l.getPixels("y"))):(l.hasValue()&&(e.y+=l.getPixels("y")),c.y=e.y),e.y=c.y,e.leafTexts.push(c),e.minX=Math.min(e.minX,c.x,c.x+u),e.maxX=Math.max(e.maxX,c.x,c.x+u),c.clearContext(t),t.restore(),c}getChildBoundingBox(t,e,i,s){var c=i.children[s];if(typeof c.getBoundingBox!="function")return null;var f=c.getBoundingBox(t);return f?(c.children.forEach((a,n)=>{var l=e.getChildBoundingBox(t,e,c,n);f.addBoundingBox(l)}),f):null}renderChild(t,e,i,s){var c=i.children[s];c.render(t),c.children.forEach((f,a)=>{e.renderChild(t,e,c,a)})}measureText(t){var{measureCache:e}=this;if(~e)return e;var i=this.getText(),s=this.measureTargetText(t,i);return this.measureCache=s,s}measureTargetText(t,e){if(!e.length)return 0;var{parent:i}=this,s=i.getStyle("font-family").getDefinition();if(s){for(var c=this.getFontSize(),f=s.isRTL?e.split("").reverse().join(""):e,a=Jn(i.getAttribute("dx").getString()),n=f.length,l=0,h=0;h<n;h++){var o=this.getGlyph(s,f,h);l+=(o.horizAdvX||s.horizAdvX)*c/s.fontFace.unitsPerEm,typeof a[h]<"u"&&!isNaN(a[h])&&(l+=a[h])}return l}if(!t.measureText)return e.length*10;t.save(),this.setContext(t,!0);var{width:u}=t.measureText(e);return this.clearContext(t),t.restore(),u}getInheritedAttribute(t){for(var e=this;e instanceof AA&&e.isFirstChild();){var i=e.parent.getAttribute(t);if(i.hasValue(!0))return i.getValue("0");e=e.parent}return null}}class zh extends AA{constructor(t,e,i){super(t,e,new.target===zh?!0:i),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class n6 extends zh{constructor(){super(...arguments),this.type="textNode"}}class vc extends Ao{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(t){var e,{document:i}=this,{screen:s,window:c}=i,f=t.canvas;if(s.setDefaults(t),f.style&&typeof t.font<"u"&&c&&typeof c.getComputedStyle<"u"){t.font=c.getComputedStyle(f).getPropertyValue("font");var a=new Ie(i,"fontSize",xn.parse(t.font).fontSize);a.hasValue()&&(i.rootEmSize=a.getPixels("y"),i.emSize=i.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:n,height:l}=s.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var h=this.getAttribute("refX"),o=this.getAttribute("refY"),u=this.getAttribute("viewBox"),A=u.hasValue()?Jn(u.getString()):null,g=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",p=0,d=0,m=0,v=0;A&&(p=A[0],d=A[1]),this.root||(n=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),this.type==="marker"&&(m=p,v=d,p=0,d=0)),s.viewPort.setCurrent(n,l),this.node&&(!this.parent||((e=this.node.parentNode)===null||e===void 0?void 0:e.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),A&&(n=A[2],l=A[3]),i.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:s.viewPort.width,desiredWidth:n,height:s.viewPort.height,desiredHeight:l,minX:p,minY:d,refX:h.getValue(),refY:o.getValue(),clip:g,clipX:m,clipY:v}),A&&(s.viewPort.removeCurrent(),s.viewPort.setCurrent(n,l))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.getAttribute("width",!0),c=this.getAttribute("height",!0),f=this.getAttribute("viewBox"),a=this.getAttribute("style"),n=s.getNumber(0),l=c.getNumber(0);if(i)if(typeof i=="string")this.getAttribute("preserveAspectRatio",!0).setValue(i);else{var h=this.getAttribute("preserveAspectRatio");h.hasValue()&&h.setValue(h.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(s.setValue(t),c.setValue(e),f.hasValue()||f.setValue("0 0 ".concat(n||t," ").concat(l||e)),a.hasValue()){var o=this.getStyle("width"),u=this.getStyle("height");o.hasValue()&&o.setValue("".concat(t,"px")),u.hasValue()&&u.setValue("".concat(e,"px"))}}}class Sm extends xr{constructor(){super(...arguments),this.type="rect"}path(t){var e=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),s=this.getStyle("width",!1,!0).getPixels("x"),c=this.getStyle("height",!1,!0).getPixels("y"),f=this.getAttribute("rx"),a=this.getAttribute("ry"),n=f.getPixels("x"),l=a.getPixels("y");if(f.hasValue()&&!a.hasValue()&&(l=n),a.hasValue()&&!f.hasValue()&&(n=l),n=Math.min(n,s/2),l=Math.min(l,c/2),t){var h=4*((Math.sqrt(2)-1)/3);t.beginPath(),c>0&&s>0&&(t.moveTo(e+n,i),t.lineTo(e+s-n,i),t.bezierCurveTo(e+s-n+h*n,i,e+s,i+l-h*l,e+s,i+l),t.lineTo(e+s,i+c-l),t.bezierCurveTo(e+s,i+c-l+h*l,e+s-n+h*n,i+c,e+s-n,i+c),t.lineTo(e+n,i+c),t.bezierCurveTo(e+n-h*n,i+c,e,i+c-l+h*l,e,i+c-l),t.lineTo(e,i+l),t.bezierCurveTo(e,i+l-h*l,e+n-h*n,i,e+n,i),t.closePath())}return new Us(e,i,e+s,i+c)}getMarkers(){return null}}class KC extends xr{constructor(){super(...arguments),this.type="circle"}path(t){var e=this.getAttribute("cx").getPixels("x"),i=this.getAttribute("cy").getPixels("y"),s=this.getAttribute("r").getPixels();return t&&s>0&&(t.beginPath(),t.arc(e,i,s,0,Math.PI*2,!1),t.closePath()),new Us(e-s,i-s,e+s,i+s)}getMarkers(){return null}}class WC extends xr{constructor(){super(...arguments),this.type="ellipse"}path(t){var e=4*((Math.sqrt(2)-1)/3),i=this.getAttribute("rx").getPixels("x"),s=this.getAttribute("ry").getPixels("y"),c=this.getAttribute("cx").getPixels("x"),f=this.getAttribute("cy").getPixels("y");return t&&i>0&&s>0&&(t.beginPath(),t.moveTo(c+i,f),t.bezierCurveTo(c+i,f+e*s,c+e*i,f+s,c,f+s),t.bezierCurveTo(c-e*i,f+s,c-i,f+e*s,c-i,f),t.bezierCurveTo(c-i,f-e*s,c-e*i,f-s,c,f-s),t.bezierCurveTo(c+e*i,f-s,c+i,f-e*s,c+i,f),t.closePath()),new Us(c-i,f-s,c+i,f+s)}getMarkers(){return null}}class XC extends xr{constructor(){super(...arguments),this.type="line"}getPoints(){return[new di(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new di(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){var[{x:e,y:i},{x:s,y:c}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(e,i),t.lineTo(s,c)),new Us(e,i,s,c)}getMarkers(){var[t,e]=this.getPoints(),i=t.angleTo(e);return[[t,i],[e,i]]}}class xm extends xr{constructor(t,e,i){super(t,e,i),this.type="polyline",this.points=[],this.points=di.parsePath(this.getAttribute("points").getString())}path(t){var{points:e}=this,[{x:i,y:s}]=e,c=new Us(i,s);return t&&(t.beginPath(),t.moveTo(i,s)),e.forEach(f=>{var{x:a,y:n}=f;c.addPoint(a,n),t&&t.lineTo(a,n)}),c}getMarkers(){var{points:t}=this,e=t.length-1,i=[];return t.forEach((s,c)=>{c!==e&&i.push([s,s.angleTo(t[c+1])])}),i.length>0&&i.push([t[t.length-1],i[i.length-1][1]]),i}}class zC extends xm{constructor(){super(...arguments),this.type="polygon"}path(t){var e=super.path(t),[{x:i,y:s}]=this.points;return t&&(t.lineTo(i,s),t.closePath()),e}}class qC extends li{constructor(){super(...arguments),this.type="pattern"}createPattern(t,e,i){var s=this.getStyle("width").getPixels("x",!0),c=this.getStyle("height").getPixels("y",!0),f=new vc(this.document,null);f.attributes.viewBox=new Ie(this.document,"viewBox",this.getAttribute("viewBox").getValue()),f.attributes.width=new Ie(this.document,"width","".concat(s,"px")),f.attributes.height=new Ie(this.document,"height","".concat(c,"px")),f.attributes.transform=new Ie(this.document,"transform",this.getAttribute("patternTransform").getValue()),f.children=this.children;var a=this.document.createCanvas(s,c),n=a.getContext("2d"),l=this.getAttribute("x"),h=this.getAttribute("y");l.hasValue()&&h.hasValue()&&n.translate(l.getPixels("x",!0),h.getPixels("y",!0)),i.hasValue()?this.styles["fill-opacity"]=i:Reflect.deleteProperty(this.styles,"fill-opacity");for(var o=-1;o<=1;o++)for(var u=-1;u<=1;u++)n.save(),f.attributes.x=new Ie(this.document,"x",o*a.width),f.attributes.y=new Ie(this.document,"y",u*a.height),f.render(n),n.restore();var A=t.createPattern(a,"repeat");return A}}class $C extends li{constructor(){super(...arguments),this.type="marker"}render(t,e,i){if(e){var{x:s,y:c}=e,f=this.getAttribute("orient").getString("auto"),a=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(s,c),f==="auto"&&t.rotate(i),a==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();var n=new vc(this.document,null);n.type=this.type,n.attributes.viewBox=new Ie(this.document,"viewBox",this.getAttribute("viewBox").getValue()),n.attributes.refX=new Ie(this.document,"refX",this.getAttribute("refX").getValue()),n.attributes.refY=new Ie(this.document,"refY",this.getAttribute("refY").getValue()),n.attributes.width=new Ie(this.document,"width",this.getAttribute("markerWidth").getValue()),n.attributes.height=new Ie(this.document,"height",this.getAttribute("markerHeight").getValue()),n.attributes.overflow=new Ie(this.document,"overflow",this.getAttribute("overflow").getValue()),n.attributes.fill=new Ie(this.document,"fill",this.getAttribute("fill").getColor("black")),n.attributes.stroke=new Ie(this.document,"stroke",this.getAttribute("stroke").getValue("none")),n.children=this.children,n.render(t),t.restore(),a==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),f==="auto"&&t.rotate(-i),t.translate(-s,-c)}}}class YC extends li{constructor(){super(...arguments),this.type="defs"}render(){}}class Kf extends Ao{constructor(){super(...arguments),this.type="g"}getBoundingBox(t){var e=new Us;return this.children.forEach(i=>{e.addBoundingBox(i.getBoundingBox(t))}),e}}class _m extends li{constructor(t,e,i){super(t,e,i),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:s,children:c}=this;c.forEach(f=>{f.type==="stop"&&s.push(f)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,e,i){var s=this;this.getHrefAttribute().hasValue()&&(s=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(s));var{stops:c}=s,f=this.getGradient(t,e);if(!f)return this.addParentOpacity(i,c[c.length-1].color);if(c.forEach(d=>{f.addColorStop(d.offset,this.addParentOpacity(i,d.color))}),this.getAttribute("gradientTransform").hasValue()){var{document:a}=this,{MAX_VIRTUAL_PIXELS:n,viewPort:l}=a.screen,[h]=l.viewPorts,o=new Sm(a,null);o.attributes.x=new Ie(a,"x",-n/3),o.attributes.y=new Ie(a,"y",-n/3),o.attributes.width=new Ie(a,"width",n),o.attributes.height=new Ie(a,"height",n);var u=new Kf(a,null);u.attributes.transform=new Ie(a,"transform",this.getAttribute("gradientTransform").getValue()),u.children=[o];var A=new vc(a,null);A.attributes.x=new Ie(a,"x",0),A.attributes.y=new Ie(a,"y",0),A.attributes.width=new Ie(a,"width",h.width),A.attributes.height=new Ie(a,"height",h.height),A.children=[u];var g=a.createCanvas(h.width,h.height),p=g.getContext("2d");return p.fillStyle=f,A.render(p),p.createPattern(g,"no-repeat")}return f}inheritStopContainer(t){this.attributesToInherit.forEach(e=>{!this.getAttribute(e).hasValue()&&t.getAttribute(e).hasValue()&&this.getAttribute(e,!0).setValue(t.getAttribute(e).getValue())})}addParentOpacity(t,e){if(t.hasValue()){var i=new Ie(this.document,"color",e);return i.addOpacity(t).getColor()}return e}}class JC extends _m{constructor(t,e,i){super(t,e,i),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(t,e){var i=this.getGradientUnits()==="objectBoundingBox",s=i?e.getBoundingBox(t):null;if(i&&!s)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var c=i?s.x+s.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),f=i?s.y+s.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),a=i?s.x+s.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),n=i?s.y+s.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return c===a&&f===n?null:t.createLinearGradient(c,f,a,n)}}class ZC extends _m{constructor(t,e,i){super(t,e,i),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(t,e){var i=this.getGradientUnits()==="objectBoundingBox",s=e.getBoundingBox(t);if(i&&!s)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var c=i?s.x+s.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),f=i?s.y+s.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),a=c,n=f;this.getAttribute("fx").hasValue()&&(a=i?s.x+s.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(n=i?s.y+s.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var l=i?(s.width+s.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),h=this.getAttribute("fr").getPixels();return t.createRadialGradient(a,n,h,c,f,l)}}class tB extends li{constructor(t,e,i){super(t,e,i),this.type="stop";var s=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),c=this.getStyle("stop-opacity"),f=this.getStyle("stop-color",!0);f.getString()===""&&f.setValue("#000"),c.hasValue()&&(f=f.addOpacity(c)),this.offset=s,this.color=f.getColor()}}class Wf extends li{constructor(t,e,i){super(t,e,i),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new Ie(t,"values",null);var s=this.getAttribute("values");s.hasValue()&&this.values.setValue(s.getString().split(";"))}getProperty(){var t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}calcValue(){var{initialUnits:t}=this,{progress:e,from:i,to:s}=this.getProgress(),c=i.getNumber()+(s.getNumber()-i.getNumber())*e;return t==="%"&&(c*=100),"".concat(c).concat(t)}update(t){var{parent:e}=this,i=this.getProperty();if(this.initialValue||(this.initialValue=i.getString(),this.initialUnits=i.getUnits()),this.duration>this.maxDuration){var s=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(s==="freeze"&&!this.frozen)this.frozen=!0,e.animationFrozen=!0,e.animationFrozenValue=i.getString();else if(s==="remove"&&!this.removed)return this.removed=!0,i.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;var c=!1;if(this.begin<this.duration){var f=this.calcValue(),a=this.getAttribute("type");if(a.hasValue()){var n=a.getString();f="".concat(n,"(").concat(f,")")}i.setValue(f),c=!0}return c}getProgress(){var{document:t,values:e}=this,i={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(e.hasValue()){var s=i.progress*(e.getValue().length-1),c=Math.floor(s),f=Math.ceil(s);i.from=new Ie(t,"from",parseFloat(e.getValue()[c])),i.to=new Ie(t,"to",parseFloat(e.getValue()[f])),i.progress=(s-c)/(f-c)}else i.from=this.from,i.to=this.to;return i}}class eB extends Wf{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:t,from:e,to:i}=this.getProgress(),s=new am(e.getColor()),c=new am(i.getColor());if(s.ok&&c.ok){var f=s.r+(c.r-s.r)*t,a=s.g+(c.g-s.g)*t,n=s.b+(c.b-s.b)*t;return"rgb(".concat(Math.floor(f),", ").concat(Math.floor(a),", ").concat(Math.floor(n),")")}return this.getAttribute("from").getColor()}}class rB extends Wf{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:t,from:e,to:i}=this.getProgress(),s=Jn(e.getString()),c=Jn(i.getString()),f=s.map((a,n)=>{var l=c[n];return a+(l-a)*t}).join(" ");return f}}class iB extends li{constructor(t,e,i){super(t,e,i),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:s}=t,{children:c}=this;for(var f of c)switch(f.type){case"font-face":{this.fontFace=f;var a=f.getStyle("font-family");a.hasValue()&&(s[a.getString()]=this);break}case"missing-glyph":this.missingGlyph=f;break;case"glyph":{var n=f;n.arabicForm?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[n.unicode]>"u"&&(this.glyphs[n.unicode]={}),this.glyphs[n.unicode][n.arabicForm]=n):this.glyphs[n.unicode]=n;break}}}render(){}}class nB extends li{constructor(t,e,i){super(t,e,i),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class sB extends xr{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class aB extends AA{constructor(){super(...arguments),this.type="tref"}getText(){var t=this.getHrefAttribute().getDefinition();if(t){var e=t.children[0];if(e)return e.getText()}return""}}class AB extends AA{constructor(t,e,i){super(t,e,i),this.type="a";var{childNodes:s}=e,c=s[0],f=s.length>0&&Array.from(s).every(a=>a.nodeType===3);this.hasText=f,this.text=f?this.getTextFromNode(c):""}getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);var{document:e,x:i,y:s}=this,{mouse:c}=e.screen,f=new Ie(e,"fontSize",xn.parse(e.ctx.font).fontSize);c.isWorking()&&c.checkBoundingBox(this,new Us(i,s-f.getPixels("y"),i+this.measureText(t),s))}else if(this.children.length>0){var a=new Kf(this.document,null);a.children=this.children,a.parent=this,a.render(t)}}onClick(){var{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){var t=this.document.ctx;t.canvas.style.cursor="pointer"}}function oB(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function Xf(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?oB(Object(e),!0).forEach(function(i){Z0(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):oB(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}class lB extends AA{constructor(t,e,i){super(t,e,i),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var s=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(s)}getText(){return this.text}path(t){var{dataArray:e}=this;t&&t.beginPath(),e.forEach(i=>{var{type:s,points:c}=i;switch(s){case ze.LINE_TO:t&&t.lineTo(c[0],c[1]);break;case ze.MOVE_TO:t&&t.moveTo(c[0],c[1]);break;case ze.CURVE_TO:t&&t.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case ze.QUAD_TO:t&&t.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case ze.ARC:{var[f,a,n,l,h,o,u,A]=c,g=n>l?n:l,p=n>l?1:n/l,d=n>l?l/n:1;t&&(t.translate(f,a),t.rotate(u),t.scale(p,d),t.arc(0,0,g,h,h+o,!!(1-A)),t.scale(1/p,1/d),t.rotate(-u),t.translate(-f,-a));break}case ze.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();var e=this.parent.getStyle("text-decoration").getString(),i=this.getFontSize(),{glyphInfo:s}=this,c=t.fillStyle;e==="underline"&&t.beginPath(),s.forEach((f,a)=>{var{p0:n,p1:l,rotation:h,text:o}=f;t.save(),t.translate(n.x,n.y),t.rotate(h),t.fillStyle&&t.fillText(o,0,0),t.strokeStyle&&t.strokeText(o,0,0),t.restore(),e==="underline"&&(a===0&&t.moveTo(n.x,n.y+i/8),t.lineTo(l.x,l.y+i/5))}),e==="underline"&&(t.lineWidth=i/20,t.strokeStyle=c,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,e,i,s,c,f,a,n,l){var h=f,o=this.measureText(t,n);n===" "&&e==="justify"&&i<s&&(o+=(s-i)/c),l>-1&&(h+=this.getLetterSpacingAt(l));var u=this.textHeight/20,A=this.getEquidistantPointOnPath(h,u,0),g=this.getEquidistantPointOnPath(h+o,u,0),p={p0:A,p1:g},d=A&&g?Math.atan2(g.y-A.y,g.x-A.x):0;if(a){var m=Math.cos(Math.PI/2+d)*a,v=Math.cos(-d)*a;p.p0=Xf(Xf({},A),{},{x:A.x+m,y:A.y+v}),p.p1=Xf(Xf({},g),{},{x:g.x+m,y:g.y+v})}return h+=o,{offset:h,segment:p,rotation:d}}measureText(t,e){var{measuresCache:i}=this,s=e||this.getText();if(i.has(s))return i.get(s);var c=this.measureTargetText(t,s);return i.set(s,c),c}setTextData(t){if(!this.glyphInfo){var e=this.getText(),i=e.split(""),s=e.split(" ").length-1,c=this.parent.getAttribute("dx").split().map(x=>x.getPixels("x")),f=this.parent.getAttribute("dy").getPixels("y"),a=this.parent.getStyle("text-anchor").getString("start"),n=this.getStyle("letter-spacing"),l=this.parent.getStyle("letter-spacing"),h=0;!n.hasValue()||n.getValue()==="inherit"?h=l.getPixels():n.hasValue()&&n.getValue()!=="initial"&&n.getValue()!=="unset"&&(h=n.getPixels());var o=[],u=e.length;this.letterSpacingCache=o;for(var A=0;A<u;A++)o.push(typeof c[A]<"u"?c[A]:h);var g=o.reduce((x,E,L)=>L===0?0:x+E||0,0),p=this.measureText(t),d=Math.max(p+g,0);this.textWidth=p,this.textHeight=this.getFontSize(),this.glyphInfo=[];var m=this.getPathLength(),v=this.getStyle("startOffset").getNumber(0)*m,C=0;(a==="middle"||a==="center")&&(C=-d/2),(a==="end"||a==="right")&&(C=-d),C+=v,i.forEach((x,E)=>{var{offset:L,segment:U,rotation:O}=this.findSegmentToFitChar(t,a,d,m,s,C,f,x,E);C=L,!(!U.p0||!U.p1)&&this.glyphInfo.push({text:i[E],p0:U.p0,p1:U.p1,rotation:O})})}}parsePathData(t){if(this.pathLength=-1,!t)return[];var e=[],{pathParser:i}=t;for(i.reset();!i.isEnd();){var{current:s}=i,c=s?s.x:0,f=s?s.y:0,a=i.next(),n=a.type,l=[];switch(a.type){case ze.MOVE_TO:this.pathM(i,l);break;case ze.LINE_TO:n=this.pathL(i,l);break;case ze.HORIZ_LINE_TO:n=this.pathH(i,l);break;case ze.VERT_LINE_TO:n=this.pathV(i,l);break;case ze.CURVE_TO:this.pathC(i,l);break;case ze.SMOOTH_CURVE_TO:n=this.pathS(i,l);break;case ze.QUAD_TO:this.pathQ(i,l);break;case ze.SMOOTH_QUAD_TO:n=this.pathT(i,l);break;case ze.ARC:l=this.pathA(i);break;case ze.CLOSE_PATH:xr.pathZ(i);break}a.type!==ze.CLOSE_PATH?e.push({type:n,points:l,start:{x:c,y:f},pathLength:this.calcLength(c,f,n,l)}):e.push({type:ze.CLOSE_PATH,points:[],pathLength:0})}return e}pathM(t,e){var{x:i,y:s}=xr.pathM(t).point;e.push(i,s)}pathL(t,e){var{x:i,y:s}=xr.pathL(t).point;return e.push(i,s),ze.LINE_TO}pathH(t,e){var{x:i,y:s}=xr.pathH(t).point;return e.push(i,s),ze.LINE_TO}pathV(t,e){var{x:i,y:s}=xr.pathV(t).point;return e.push(i,s),ze.LINE_TO}pathC(t,e){var{point:i,controlPoint:s,currentPoint:c}=xr.pathC(t);e.push(i.x,i.y,s.x,s.y,c.x,c.y)}pathS(t,e){var{point:i,controlPoint:s,currentPoint:c}=xr.pathS(t);return e.push(i.x,i.y,s.x,s.y,c.x,c.y),ze.CURVE_TO}pathQ(t,e){var{controlPoint:i,currentPoint:s}=xr.pathQ(t);e.push(i.x,i.y,s.x,s.y)}pathT(t,e){var{controlPoint:i,currentPoint:s}=xr.pathT(t);return e.push(i.x,i.y,s.x,s.y),ze.QUAD_TO}pathA(t){var{rX:e,rY:i,sweepFlag:s,xAxisRotation:c,centp:f,a1:a,ad:n}=xr.pathA(t);return s===0&&n>0&&(n-=2*Math.PI),s===1&&n<0&&(n+=2*Math.PI),[f.x,f.y,e,i,a,n,c,s]}calcLength(t,e,i,s){var c=0,f=null,a=null,n=0;switch(i){case ze.LINE_TO:return this.getLineLength(t,e,s[0],s[1]);case ze.CURVE_TO:for(c=0,f=this.getPointOnCubicBezier(0,t,e,s[0],s[1],s[2],s[3],s[4],s[5]),n=.01;n<=1;n+=.01)a=this.getPointOnCubicBezier(n,t,e,s[0],s[1],s[2],s[3],s[4],s[5]),c+=this.getLineLength(f.x,f.y,a.x,a.y),f=a;return c;case ze.QUAD_TO:for(c=0,f=this.getPointOnQuadraticBezier(0,t,e,s[0],s[1],s[2],s[3]),n=.01;n<=1;n+=.01)a=this.getPointOnQuadraticBezier(n,t,e,s[0],s[1],s[2],s[3]),c+=this.getLineLength(f.x,f.y,a.x,a.y),f=a;return c;case ze.ARC:{c=0;var l=s[4],h=s[5],o=s[4]+h,u=Math.PI/180;if(Math.abs(l-o)<u&&(u=Math.abs(l-o)),f=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),h<0)for(n=l-u;n>o;n-=u)a=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],n,0),c+=this.getLineLength(f.x,f.y,a.x,a.y),f=a;else for(n=l+u;n<o;n+=u)a=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],n,0),c+=this.getLineLength(f.x,f.y,a.x,a.y),f=a;return a=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],o,0),c+=this.getLineLength(f.x,f.y,a.x,a.y),c}}return 0}getPointOnLine(t,e,i,s,c){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:e,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:i,n=(c-i)/(s-e+ol),l=Math.sqrt(t*t/(1+n*n));s<e&&(l*=-1);var h=n*l,o=null;if(s===e)o={x:f,y:a+h};else if((a-i)/(f-e+ol)===n)o={x:f+l,y:a+h};else{var u=0,A=0,g=this.getLineLength(e,i,s,c);if(g<ol)return null;var p=(f-e)*(s-e)+(a-i)*(c-i);p/=g*g,u=e+p*(s-e),A=i+p*(c-i);var d=this.getLineLength(f,a,u,A),m=Math.sqrt(t*t-d*d);l=Math.sqrt(m*m/(1+n*n)),s<e&&(l*=-1),h=n*l,o={x:u+l,y:A+h}}return o}getPointOnPath(t){var e=this.getPathLength(),i=0,s=null;if(t<-5e-5||t-5e-5>e)return null;var{dataArray:c}=this;for(var f of c){if(f&&(f.pathLength<5e-5||i+f.pathLength+5e-5<t)){i+=f.pathLength;continue}var a=t-i,n=0;switch(f.type){case ze.LINE_TO:s=this.getPointOnLine(a,f.start.x,f.start.y,f.points[0],f.points[1],f.start.x,f.start.y);break;case ze.ARC:{var l=f.points[4],h=f.points[5],o=f.points[4]+h;if(n=l+a/f.pathLength*h,h<0&&n<o||h>=0&&n>o)break;s=this.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],n,f.points[6]);break}case ze.CURVE_TO:n=a/f.pathLength,n>1&&(n=1),s=this.getPointOnCubicBezier(n,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);break;case ze.QUAD_TO:n=a/f.pathLength,n>1&&(n=1),s=this.getPointOnQuadraticBezier(n,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3]);break}if(s)return s;break}return null}getLineLength(t,e,i,s){return Math.sqrt((i-t)*(i-t)+(s-e)*(s-e))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,e)=>e.pathLength>0?t+e.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,e,i,s,c,f,a,n,l){var h=n*dm(t)+f*gm(t)+s*pm(t)+e*mm(t),o=l*dm(t)+a*gm(t)+c*pm(t)+i*mm(t);return{x:h,y:o}}getPointOnQuadraticBezier(t,e,i,s,c,f,a){var n=f*vm(t)+s*ym(t)+e*wm(t),l=a*vm(t)+c*ym(t)+i*wm(t);return{x:n,y:l}}getPointOnEllipticalArc(t,e,i,s,c,f){var a=Math.cos(f),n=Math.sin(f),l={x:i*Math.cos(c),y:s*Math.sin(c)};return{x:t+(l.x*a-l.y*n),y:e+(l.x*n+l.y*a)}}buildEquidistantCache(t,e){var i=this.getPathLength(),s=e||.25,c=t||i/100;if(!this.equidistantCache||this.equidistantCache.step!==c||this.equidistantCache.precision!==s){this.equidistantCache={step:c,precision:s,points:[]};for(var f=0,a=0;a<=i;a+=s){var n=this.getPointOnPath(a),l=this.getPointOnPath(a+s);!n||!l||(f+=this.getLineLength(n.x,n.y,l.x,l.y),f>=c&&(this.equidistantCache.points.push({x:n.x,y:n.y,distance:a}),f-=c))}}}getEquidistantPointOnPath(t,e,i){if(this.buildEquidistantCache(e,i),t<0||t-this.getPathLength()>5e-5)return null;var s=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[s]||null}}var s6=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class cB extends Ao{constructor(t,e,i){super(t,e,i),this.type="image",this.loaded=!1;var s=this.getHrefAttribute().getString();if(s){var c=s.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(s);t.images.push(this),c?this.loadSvg(s):this.loadImage(s),this.isSvg=c}}loadImage(t){var e=this;return nA(function*(){try{var i=yield e.document.createImage(t);e.image=i}catch(s){console.error('Error while loading image "'.concat(t,'":'),s)}e.loaded=!0})()}loadSvg(t){var e=this;return nA(function*(){var i=s6.exec(t);if(i){var s=i[5];i[4]==="base64"?e.image=atob(s):e.image=decodeURIComponent(s)}else try{var c=yield e.document.fetch(t),f=yield c.text();e.image=f}catch(a){console.error('Error while loading image "'.concat(t,'":'),a)}e.loaded=!0})()}renderChildren(t){var{document:e,image:i,loaded:s}=this,c=this.getAttribute("x").getPixels("x"),f=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");if(!(!s||!i||!a||!n)){if(t.save(),t.translate(c,f),this.isSvg){var l=e.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:a,scaleHeight:n});l.document.documentElement.parent=this,l.render()}else{var h=this.image;e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:a,desiredWidth:h.width,height:n,desiredHeight:h.height}),this.loaded&&(typeof h.complete>"u"||h.complete)&&t.drawImage(h,0,0)}t.restore()}}getBoundingBox(){var t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),i=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");return new Us(t,e,t+i,e+s)}}class hB extends Ao{constructor(){super(...arguments),this.type="symbol"}render(t){}}class uB{constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}load(t,e){var i=this;return nA(function*(){try{var{document:s}=i,c=yield s.canvg.parser.load(e),f=c.getElementsByTagName("font");Array.from(f).forEach(a=>{var n=s.createElement(a);s.definitions[t]=n})}catch(a){console.error('Error while loading font "'.concat(e,'":'),a)}i.loaded=!0})()}}class Em extends li{constructor(t,e,i){super(t,e,i),this.type="style";var s=al(Array.from(e.childNodes).map(f=>f.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),c=s.split("}");c.forEach(f=>{var a=f.trim();if(a){var n=a.split("{"),l=n[0].split(","),h=n[1].split(";");l.forEach(o=>{var u=o.trim();if(u){var A=t.styles[u]||{};if(h.forEach(d=>{var m=d.indexOf(":"),v=d.substr(0,m).trim(),C=d.substr(m+1,d.length-m).trim();v&&C&&(A[v]=new Ie(t,v,C))}),t.styles[u]=A,t.stylesSpecificity[u]=OC(u),u==="@font-face"){var g=A["font-family"].getString().replace(/"|'/g,""),p=A.src.getString().split(",");p.forEach(d=>{if(d.indexOf('format("svg")')>0){var m=hm(d);m&&new uB(t).load(g,m)}})}}})}})}}Em.parseExternalUrl=hm;class fB extends Ao{constructor(){super(...arguments),this.type="use"}setContext(t){super.setContext(t);var e=this.getAttribute("x"),i=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),i.hasValue()&&t.translate(0,i.getPixels("y"))}path(t){var{element:e}=this;e&&e.path(t)}renderChildren(t){var{document:e,element:i}=this;if(i){var s=i;if(i.type==="symbol"&&(s=new vc(e,null),s.attributes.viewBox=new Ie(e,"viewBox",i.getAttribute("viewBox").getString()),s.attributes.preserveAspectRatio=new Ie(e,"preserveAspectRatio",i.getAttribute("preserveAspectRatio").getString()),s.attributes.overflow=new Ie(e,"overflow",i.getAttribute("overflow").getString()),s.children=i.children,i.styles.opacity=new Ie(e,"opacity",this.calculateOpacity())),s.type==="svg"){var c=this.getStyle("width",!1,!0),f=this.getStyle("height",!1,!0);c.hasValue()&&(s.attributes.width=new Ie(e,"width",c.getString())),f.hasValue()&&(s.attributes.height=new Ie(e,"height",f.getString()))}var a=s.parent;s.parent=this,s.render(t),s.parent=a}}getBoundingBox(t){var{element:e}=this;return e?e.getBoundingBox(t):null}elementTransform(){var{document:t,element:e}=this;return ao.fromElement(t,e)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function zf(r,t,e,i,s,c){return r[e*i*4+t*4+c]}function qf(r,t,e,i,s,c,f){r[e*i*4+t*4+c]=f}function Oi(r,t,e){var i=r[t];return i*e}function oA(r,t,e,i){return t+Math.cos(r)*e+Math.sin(r)*i}class Fm extends li{constructor(t,e,i){super(t,e,i),this.type="feColorMatrix";var s=Jn(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{var c=s[0];s=[.213+.787*c,.715-.715*c,.072-.072*c,0,0,.213-.213*c,.715+.285*c,.072-.072*c,0,0,.213-.213*c,.715-.715*c,.072+.928*c,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{var f=s[0]*Math.PI/180;s=[oA(f,.213,.787,-.213),oA(f,.715,-.715,-.715),oA(f,.072,-.072,.928),0,0,oA(f,.213,-.213,.143),oA(f,.715,.285,.14),oA(f,.072,-.072,-.283),0,0,oA(f,.213,-.213,-.787),oA(f,.715,-.715,.715),oA(f,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=s,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(t,e,i,s,c){for(var{includeOpacity:f,matrix:a}=this,n=t.getImageData(0,0,s,c),l=0;l<c;l++)for(var h=0;h<s;h++){var o=zf(n.data,h,l,s,c,0),u=zf(n.data,h,l,s,c,1),A=zf(n.data,h,l,s,c,2),g=zf(n.data,h,l,s,c,3),p=Oi(a,0,o)+Oi(a,1,u)+Oi(a,2,A)+Oi(a,3,g)+Oi(a,4,1),d=Oi(a,5,o)+Oi(a,6,u)+Oi(a,7,A)+Oi(a,8,g)+Oi(a,9,1),m=Oi(a,10,o)+Oi(a,11,u)+Oi(a,12,A)+Oi(a,13,g)+Oi(a,14,1),v=Oi(a,15,o)+Oi(a,16,u)+Oi(a,17,A)+Oi(a,18,g)+Oi(a,19,1);f&&(p=0,d=0,m=0,v*=g/255),qf(n.data,h,l,s,c,0,p),qf(n.data,h,l,s,c,1,d),qf(n.data,h,l,s,c,2,m),qf(n.data,h,l,s,c,3,v)}t.clearRect(0,0,s,c),t.putImageData(n,0,0)}}class qh extends li{constructor(){super(...arguments),this.type="mask"}apply(t,e){var{document:i}=this,s=this.getAttribute("x").getPixels("x"),c=this.getAttribute("y").getPixels("y"),f=this.getStyle("width").getPixels("x"),a=this.getStyle("height").getPixels("y");if(!f&&!a){var n=new Us;this.children.forEach(g=>{n.addBoundingBox(g.getBoundingBox(t))}),s=Math.floor(n.x1),c=Math.floor(n.y1),f=Math.floor(n.width),a=Math.floor(n.height)}var l=this.removeStyles(e,qh.ignoreStyles),h=i.createCanvas(s+f,c+a),o=h.getContext("2d");i.screen.setDefaults(o),this.renderChildren(o),new Fm(i,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(o,0,0,s+f,c+a);var u=i.createCanvas(s+f,c+a),A=u.getContext("2d");i.screen.setDefaults(A),e.render(A),A.globalCompositeOperation="destination-in",A.fillStyle=o.createPattern(h,"no-repeat"),A.fillRect(0,0,s+f,c+a),t.fillStyle=A.createPattern(u,"no-repeat"),t.fillRect(0,0,s+f,c+a),this.restoreStyles(e,l)}render(t){}}qh.ignoreStyles=["mask","transform","clip-path"];var dB=()=>{};class gB extends li{constructor(){super(...arguments),this.type="clipPath"}apply(t){var{document:e}=this,i=Reflect.getPrototypeOf(t),{beginPath:s,closePath:c}=t;i&&(i.beginPath=dB,i.closePath=dB),Reflect.apply(s,t,[]),this.children.forEach(f=>{if(!(typeof f.path>"u")){var a=typeof f.elementTransform<"u"?f.elementTransform():null;a||(a=ao.fromElement(e,f)),a&&a.apply(t),f.path(t),i&&(i.closePath=c),a&&a.unapply(t)}}),Reflect.apply(c,t,[]),t.clip(),i&&(i.beginPath=s,i.closePath=c)}render(t){}}class $h extends li{constructor(){super(...arguments),this.type="filter"}apply(t,e){var{document:i,children:s}=this,c=e.getBoundingBox(t);if(c){var f=0,a=0;s.forEach(m=>{var v=m.extraFilterDistance||0;f=Math.max(f,v),a=Math.max(a,v)});var n=Math.floor(c.width),l=Math.floor(c.height),h=n+2*f,o=l+2*a;if(!(h<1||o<1)){var u=Math.floor(c.x),A=Math.floor(c.y),g=this.removeStyles(e,$h.ignoreStyles),p=i.createCanvas(h,o),d=p.getContext("2d");i.screen.setDefaults(d),d.translate(-u+f,-A+a),e.render(d),s.forEach(m=>{typeof m.apply=="function"&&m.apply(d,0,0,h,o)}),t.drawImage(p,0,0,h,o,u-f,A-a,h,o),this.restoreStyles(e,g)}}}render(t){}}$h.ignoreStyles=["filter","transform","clip-path"];class pB extends li{constructor(t,e,i){super(t,e,i),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(t,e,i,s,c){}}class mB extends li{constructor(){super(...arguments),this.type="feMorphology"}apply(t,e,i,s,c){}}class vB extends li{constructor(){super(...arguments),this.type="feComposite"}apply(t,e,i,s,c){}}class yB extends li{constructor(t,e,i){super(t,e,i),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(t,e,i,s,c){var{document:f,blurRadius:a}=this,n=f.window?f.window.document.body:null,l=t.canvas;l.id=f.getUniqueId(),n&&(l.style.display="none",n.appendChild(l)),Mk(l,e,i,s,c,a),n&&n.removeChild(l)}}class wB extends li{constructor(){super(...arguments),this.type="title"}}class bB extends li{constructor(){super(...arguments),this.type="desc"}}var a6={svg:vc,rect:Sm,circle:KC,ellipse:WC,line:XC,polyline:xm,polygon:zC,path:xr,pattern:qC,marker:$C,defs:YC,linearGradient:JC,radialGradient:ZC,stop:tB,animate:Wf,animateColor:eB,animateTransform:rB,font:iB,"font-face":nB,"missing-glyph":sB,glyph:Bm,text:AA,tspan:zh,tref:aB,a:AB,textPath:lB,image:cB,g:Kf,symbol:hB,style:Em,use:fB,mask:qh,clipPath:gB,filter:$h,feDropShadow:pB,feMorphology:mB,feComposite:vB,feColorMatrix:Fm,feGaussianBlur:yB,title:wB,desc:bB};function CB(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function A6(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?CB(Object(e),!0).forEach(function(i){Z0(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):CB(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}function o6(r,t){var e=document.createElement("canvas");return e.width=r,e.height=t,e}function l6(r){return Tm.apply(this,arguments)}function Tm(){return Tm=nA(function*(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=document.createElement("img");return t&&(e.crossOrigin="Anonymous"),new Promise((i,s)=>{e.onload=()=>{i(e)},e.onerror=(c,f,a,n,l)=>{s(l)},e.src=r})}),Tm.apply(this,arguments)}let Yh=class Rd{constructor(t){var{rootEmSize:e=12,emSize:i=12,createCanvas:s=Rd.createCanvas,createImage:c=Rd.createImage,anonymousCrossOrigin:f}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=e,this.emSize=i,this.createCanvas=s,this.createImage=this.bindCreateImage(c,f),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(t,e){return typeof e=="boolean"?(i,s)=>t(i,typeof s=="boolean"?s:e):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:t}=this;return t[t.length-1]}set emSize(t){var{emSizeStack:e}=this;e.push(t)}popEmSize(){var{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){var e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}createElement(t){var e=t.nodeName.replace(/^[^:]+:/,""),i=Rd.elementTypes[e];return typeof i<"u"?new i(this,t):new jC(this,t)}createTextNode(t){return new n6(this,t)}setViewBox(t){this.screen.setViewBox(A6({document:this},t))}};Yh.createCanvas=o6,Yh.createImage=l6,Yh.elementTypes=a6;function BB(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function ll(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?BB(Object(e),!0).forEach(function(i){Z0(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):BB(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}class cl{constructor(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.parser=new jf(i),this.screen=new Xh(t,i),this.options=i;var s=new Yh(this,i),c=s.createDocumentElement(e);this.document=s,this.documentElement=c}static from(t,e){var i=arguments;return nA(function*(){var s=i.length>2&&i[2]!==void 0?i[2]:{},c=new jf(s),f=yield c.parse(e);return new cl(t,f,s)})()}static fromString(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=new jf(i),c=s.parseFromString(e);return new cl(t,c,i)}fork(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return cl.from(t,e,ll(ll({},this.options),i))}forkString(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return cl.fromString(t,e,ll(ll({},this.options),i))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var t=arguments,e=this;return nA(function*(){var i=t.length>0&&t[0]!==void 0?t[0]:{};e.start(ll({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},i)),yield e.ready(),e.stop()})()}start(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:e,screen:i,options:s}=this;i.start(e,ll(ll({enableRedraw:!0},s),t))}stop(){this.screen.stop()}resize(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,e,i)}}var c6=Object.freeze({__proto__:null,AElement:AB,AnimateColorElement:eB,AnimateElement:Wf,AnimateTransformElement:rB,BoundingBox:Us,CB1:dm,CB2:gm,CB3:pm,CB4:mm,Canvg:cl,CircleElement:KC,ClipPathElement:gB,DefsElement:YC,DescElement:bB,Document:Yh,Element:li,EllipseElement:WC,FeColorMatrixElement:Fm,FeCompositeElement:vB,FeDropShadowElement:pB,FeGaussianBlurElement:yB,FeMorphologyElement:mB,FilterElement:$h,Font:xn,FontElement:iB,FontFaceElement:nB,GElement:Kf,GlyphElement:Bm,GradientElement:_m,ImageElement:cB,LineElement:XC,LinearGradientElement:JC,MarkerElement:$C,MaskElement:qh,Matrix:bm,MissingGlyphElement:sB,Mouse:NC,PSEUDO_ZERO:ol,Parser:jf,PathElement:xr,PathParser:ze,PatternElement:qC,Point:di,PolygonElement:zC,PolylineElement:xm,Property:Ie,QB1:vm,QB2:ym,QB3:wm,RadialGradientElement:ZC,RectElement:Sm,RenderedElement:Ao,Rotate:RC,SVGElement:vc,SVGFontLoader:uB,Scale:HC,Screen:Xh,Skew:Cm,SkewX:GC,SkewY:VC,StopElement:tB,StyleElement:Em,SymbolElement:hB,TRefElement:aB,TSpanElement:zh,TextElement:AA,TextPathElement:lB,TitleElement:wB,Transform:ao,Translate:DC,UnknownElement:jC,UseElement:fB,ViewPort:QC,compressSpaces:al,default:cl,getSelectorSpecificity:OC,normalizeAttributeName:PC,normalizeColor:UC,parseExternalUrl:hm,presets:Hk,toNumbers:Jn,trimLeft:LC,trimRight:IC,vectorMagnitude:um,vectorsAngle:fm,vectorsRatio:Vf});const h6=Object.freeze(Object.defineProperty({__proto__:null,default:Ii},Symbol.toStringTag,{value:"Module"}));zn.Editor=mS,zn.VectorEditor=bS,zn.VideoEditor=TS,Object.defineProperty(zn,Symbol.toStringTag,{value:"Module"})});
